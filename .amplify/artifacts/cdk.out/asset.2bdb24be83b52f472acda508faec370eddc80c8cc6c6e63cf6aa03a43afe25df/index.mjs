/** * Reads SSM environment context from a known Amplify environment variable, * fetches values from SSM and places those values in the corresponding environment variables */export const internalAmplifyFunctionResolveSsmParams = async (client) => {    const envPathObject = JSON.parse(process.env.AMPLIFY_SSM_ENV_CONFIG ?? '{}');    const paths = Object.values(envPathObject).map((paths) => paths.path);    if (paths.length === 0) {        return;    }    let actualSsmClient;    if (client) {        actualSsmClient = client;    }    else {        const ssmSdk = await import('@aws-sdk/client-ssm');        actualSsmClient = new ssmSdk.SSM();    }    const chunkArray = (array, chunkSize) => {        const chunks = [];        for (let i = 0; i < array.length; i += chunkSize) {            chunks.push(array.slice(i, i + chunkSize));        }        return chunks;    };    const resolveSecrets = async (paths) => {        const response = (await Promise.all(chunkArray(paths, 10).map(async (chunkedPaths) => await actualSsmClient.getParameters({            Names: chunkedPaths,            WithDecryption: true,        })))).reduce((accumulator, res) => {            accumulator.Parameters?.push(...(res.Parameters ?? []));            accumulator.InvalidParameters?.push(...(res.InvalidParameters ?? []));            return accumulator;        }, {            Parameters: [],            InvalidParameters: [],        });        if (response.Parameters && response.Parameters.length > 0) {            for (const parameter of response.Parameters) {                if (parameter.Name) {                    const envKey = Object.keys(envPathObject).find((key) => envPathObject[key].sharedPath === parameter.Name ||                        envPathObject[key].path === parameter.Name);                    if (envKey) {                        process.env[envKey] = parameter.Value;                    }                }            }        }        return response;    };    const response = await resolveSecrets(paths);    const sharedPaths = (response?.InvalidParameters || [])        .map((invalidParam) => Object.values(envPathObject).find((paths) => paths.path === invalidParam)?.sharedPath)        .filter((sharedParam) => !!sharedParam);     if (sharedPaths.length > 0) {        await resolveSecrets(sharedPaths);    }};await internalAmplifyFunctionResolveSsmParams();const SSM_PARAMETER_REFRESH_MS = 1000 * 60;setInterval(async () => {    try {        await internalAmplifyFunctionResolveSsmParams();    }    catch (error) {        try {                        console.debug(error);                    }        catch {                    }    }}, SSM_PARAMETER_REFRESH_MS);export {};
var _D=Object.create;var $i=Object.defineProperty;var bD=Object.getOwnPropertyDescriptor;var TD=Object.getOwnPropertyNames;var AD=Object.getPrototypeOf,RD=Object.prototype.hasOwnProperty;var Y=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var w=(e,t)=>()=>(e&&(t=e(e=0)),t);var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),lt=(e,t)=>{for(var r in t)$i(e,r,{get:t[r],enumerable:!0})},Bg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of TD(t))!RD.call(e,s)&&s!==r&&$i(e,s,{get:()=>t[s],enumerable:!(n=bD(t,s))||n.enumerable});return e};var T=(e,t,r)=>(r=e!=null?_D(AD(e)):{},Bg(t||!e||!e.__esModule?$i(r,"default",{value:e,enumerable:!0}):r,e)),re=e=>Bg($i({},"__esModule",{value:!0}),e);import{createRequire as vD}from"node:module";import CD from"node:path";import xD from"node:url";var c=w(()=>{global.require=vD(import.meta.url);global.__filename=xD.fileURLToPath(import.meta.url);global.__dirname=CD.dirname(__filename)});var Ir=O(Ee=>{"use strict";c();Ee.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(Ee.HttpAuthLocation||(Ee.HttpAuthLocation={}));Ee.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(Ee.HttpApiKeyAuthLocation||(Ee.HttpApiKeyAuthLocation={}));Ee.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(Ee.EndpointURLScheme||(Ee.EndpointURLScheme={}));Ee.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Ee.AlgorithmId||(Ee.AlgorithmId={}));var ID=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Ee.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Ee.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},PD=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},OD=e=>ID(e),ND=e=>PD(e);Ee.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Ee.FieldPosition||(Ee.FieldPosition={}));var DD="__smithy_context";Ee.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Ee.IniSectionType||(Ee.IniSectionType={}));Ee.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Ee.RequestHandlerProtocol||(Ee.RequestHandlerProtocol={}));Ee.SMITHY_CONTEXT_KEY=DD;Ee.getDefaultClientConfiguration=OD;Ee.resolveDefaultRuntimeConfig=ND});var me=O(Pr=>{"use strict";c();var MD=Ir(),kD=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),$D=e=>({httpHandler:e.httpHandler()}),_d=class{name;kind;values;constructor({name:t,kind:r=MD.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},bd=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},Td=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=LD(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function LD(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Ad=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function UD(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Pr.Field=_d;Pr.Fields=bd;Pr.HttpRequest=Td;Pr.HttpResponse=Ad;Pr.getHttpHandlerExtensionConfiguration=kD;Pr.isValidHostname=UD;Pr.resolveHttpHandlerRuntimeConfig=$D});var Zn=O(to=>{"use strict";c();var FD=me();function qD(e){return e}var jg=e=>t=>async r=>{if(!FD.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(r)},Hg={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},BD=e=>({applyToStack:t=>{t.add(jg(e),Hg)}});to.getHostHeaderPlugin=BD;to.hostHeaderMiddleware=jg;to.hostHeaderMiddlewareOptions=Hg;to.resolveHostHeaderConfig=qD});var es=O(Li=>{"use strict";c();var zg=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:l}=a,m=u??t.inputFilterSensitiveLog,p=l??t.outputFilterSensitiveLog,{$metadata:g,...h}=n.output;return i?.info?.({clientName:s,commandName:o,input:m(r.input),output:p(h),metadata:g}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:u}=a,l=u??t.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:l(r.input),error:n,metadata:n.$metadata}),n}},Vg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},jD=e=>({applyToStack:t=>{t.add(zg(),Vg)}});Li.getLoggerPlugin=jD;Li.loggerMiddleware=zg;Li.loggerMiddlewareOptions=Vg});var Qg={};lt(Qg,{InvokeStore:()=>xd,InvokeStoreBase:()=>no});var ro,Rd,no,vd,Cd,xd,Kg=w(()=>{c();ro={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},Rd=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");Rd||(globalThis.awslambda=globalThis.awslambda||{});no=class{static PROTECTED_KEYS=ro;isProtectedKey(t){return Object.values(ro).includes(t)}getRequestId(){return this.get(ro.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(ro.X_RAY_TRACE_ID)}getTenantId(){return this.get(ro.TENANT_ID)}},vd=class extends no{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(t){return this.currentContext?.[t]}set(t,r){if(this.isProtectedKey(t))throw new Error(`Cannot modify protected Lambda context field: ${String(t)}`);this.currentContext=this.currentContext||{},this.currentContext[t]=r}run(t,r){return this.currentContext=t,r()}},Cd=class e extends no{als;static async create(){let t=new e,r=await import("node:async_hooks");return t.als=new r.AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(t){return this.als.getStore()?.[t]}set(t,r){if(this.isProtectedKey(t))throw new Error(`Cannot modify protected Lambda context field: ${String(t)}`);let n=this.als.getStore();if(!n)throw new Error("No context available");n[t]=r}run(t,r){return this.als.run(t,r)}};(function(e){let t=null;async function r(){return t||(t=(async()=>{let s="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await Cd.create():new vd;return!Rd&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!Rd&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=s),s)})()),t}e.getInstanceAsync=r,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={InvokeStore:void 0}}}:void 0})(xd||(xd={}))});var Gg=O(Ui=>{"use strict";c();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.recursionDetectionMiddleware=void 0;var HD=(Kg(),re(Qg)),zD=me(),Id="X-Amzn-Trace-Id",VD="AWS_LAMBDA_FUNCTION_NAME",QD="_X_AMZN_TRACE_ID",KD=()=>e=>async t=>{let{request:r}=t;if(!zD.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(m=>m.toLowerCase()===Id.toLowerCase())??Id;if(r.headers.hasOwnProperty(n))return e(t);let s=process.env[VD],o=process.env[QD],u=(await HD.InvokeStore.getInstanceAsync())?.getXRayTraceId()??o,l=m=>typeof m=="string"&&m.length>0;return l(s)&&l(u)&&(r.headers[Id]=u),e({...t,request:r})};Ui.recursionDetectionMiddleware=KD});var ts=O(Fi=>{"use strict";c();var Pd=Gg(),GD={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},WD=e=>({applyToStack:t=>{t.add(Pd.recursionDetectionMiddleware(),GD)}});Fi.getRecursionDetectionPlugin=WD;Object.keys(Pd).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Fi,e)&&Object.defineProperty(Fi,e,{enumerable:!0,get:function(){return Pd[e]}})})});var Jg=O(Xg=>{"use strict";c();var wn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},Or=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Od=()=>{let e=[],t=[],r=!1,n=new Set,s=p=>p.sort((g,h)=>Wg[h.step]-Wg[g.step]||Yg[h.priority||"normal"]-Yg[g.priority||"normal"]),o=p=>{let g=!1,h=S=>{let R=wn(S.name,S.aliases);if(R.includes(p)){g=!0;for(let x of R)n.delete(x);return!1}return!0};return e=e.filter(h),t=t.filter(h),g},i=p=>{let g=!1,h=S=>{if(S.middleware===p){g=!0;for(let R of wn(S.name,S.aliases))n.delete(R);return!1}return!0};return e=e.filter(h),t=t.filter(h),g},a=p=>(e.forEach(g=>{p.add(g.middleware,{...g})}),t.forEach(g=>{p.addRelativeTo(g.middleware,{...g})}),p.identifyOnResolve?.(m.identifyOnResolve()),p),u=p=>{let g=[];return p.before.forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...u(h))}),g.push(p),p.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...u(h))}),g},l=(p=!1)=>{let g=[],h=[],S={};return e.forEach(x=>{let I={...x,before:[],after:[]};for(let D of wn(I.name,I.aliases))S[D]=I;g.push(I)}),t.forEach(x=>{let I={...x,before:[],after:[]};for(let D of wn(I.name,I.aliases))S[D]=I;h.push(I)}),h.forEach(x=>{if(x.toMiddleware){let I=S[x.toMiddleware];if(I===void 0){if(p)return;throw new Error(`${x.toMiddleware} is not found when adding ${Or(x.name,x.aliases)} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&I.after.push(x),x.relation==="before"&&I.before.push(x)}}),s(g).map(u).reduce((x,I)=>(x.push(...I),x),[])},m={add:(p,g={})=>{let{name:h,override:S,aliases:R}=g,x={step:"initialize",priority:"normal",middleware:p,...g},I=wn(h,R);if(I.length>0){if(I.some(D=>n.has(D))){if(!S)throw new Error(`Duplicate middleware name '${Or(h,R)}'`);for(let D of I){let k=e.findIndex(z=>z.name===D||z.aliases?.some(J=>J===D));if(k===-1)continue;let U=e[k];if(U.step!==x.step||x.priority!==U.priority)throw new Error(`"${Or(U.name,U.aliases)}" middleware with ${U.priority} priority in ${U.step} step cannot be overridden by "${Or(h,R)}" middleware with ${x.priority} priority in ${x.step} step.`);e.splice(k,1)}}for(let D of I)n.add(D)}e.push(x)},addRelativeTo:(p,g)=>{let{name:h,override:S,aliases:R}=g,x={middleware:p,...g},I=wn(h,R);if(I.length>0){if(I.some(D=>n.has(D))){if(!S)throw new Error(`Duplicate middleware name '${Or(h,R)}'`);for(let D of I){let k=t.findIndex(z=>z.name===D||z.aliases?.some(J=>J===D));if(k===-1)continue;let U=t[k];if(U.toMiddleware!==x.toMiddleware||U.relation!==x.relation)throw new Error(`"${Or(U.name,U.aliases)}" middleware ${U.relation} "${U.toMiddleware}" middleware cannot be overridden by "${Or(h,R)}" middleware ${x.relation} "${x.toMiddleware}" middleware.`);t.splice(k,1)}}for(let D of I)n.add(D)}t.push(x)},clone:()=>a(Od()),use:p=>{p.applyToStack(m)},remove:p=>typeof p=="string"?o(p):i(p),removeByTag:p=>{let g=!1,h=S=>{let{tags:R,name:x,aliases:I}=S;if(R&&R.includes(p)){let D=wn(x,I);for(let k of D)n.delete(k);return g=!0,!1}return!0};return e=e.filter(h),t=t.filter(h),g},concat:p=>{let g=a(Od());return g.use(p),g.identifyOnResolve(r||g.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),g},applyToStack:a,identify:()=>l(!0).map(p=>{let g=p.step??p.relation+" "+p.toMiddleware;return Or(p.name,p.aliases)+" - "+g}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,g)=>{for(let h of l().map(S=>S.middleware).reverse())p=h(p,g);return r&&console.log(m.identify()),p}};return m},Wg={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Yg={high:3,normal:2,low:1};Xg.constructStack=Od});var Nd=O(Zg=>{"use strict";c();var YD=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Zg.isArrayBuffer=YD});var wt=O(Md=>{"use strict";c();var XD=Nd(),Dd=Y("buffer"),JD=(e,t=0,r=e.byteLength-t)=>{if(!XD.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Dd.Buffer.from(e,t,r)},ZD=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Dd.Buffer.from(e,t):Dd.Buffer.from(e)};Md.fromArrayBuffer=JD;Md.fromString=ZD});var ey=O(qi=>{"use strict";c();Object.defineProperty(qi,"__esModule",{value:!0});qi.fromBase64=void 0;var eM=wt(),tM=/^[A-Za-z0-9+/]*={0,2}$/,rM=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!tM.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,eM.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};qi.fromBase64=rM});var Ie=O(Bi=>{"use strict";c();var ty=wt(),ry=e=>{let t=ty.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},nM=e=>typeof e=="string"?ry(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),sM=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return ty.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};Bi.fromUtf8=ry;Bi.toUint8Array=nM;Bi.toUtf8=sM});var ny=O(ji=>{"use strict";c();Object.defineProperty(ji,"__esModule",{value:!0});ji.toBase64=void 0;var oM=wt(),iM=Ie(),aM=e=>{let t;if(typeof e=="string"?t=(0,iM.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,oM.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};ji.toBase64=aM});var oo=O(so=>{"use strict";c();var sy=ey(),oy=ny();Object.keys(sy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(so,e)&&Object.defineProperty(so,e,{enumerable:!0,get:function(){return sy[e]}})});Object.keys(oy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(so,e)&&Object.defineProperty(so,e,{enumerable:!0,get:function(){return oy[e]}})})});var $d=O(Hi=>{"use strict";c();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.ChecksumStream=void 0;var cM=oo(),uM=Y("stream"),kd=class extends uM.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:o}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=o??cM.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(s){return n(s)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};Hi.ChecksumStream=kd});var ir=O(rs=>{"use strict";c();Object.defineProperty(rs,"__esModule",{value:!0});rs.isBlob=rs.isReadableStream=void 0;var lM=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);rs.isReadableStream=lM;var dM=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);rs.isBlob=dM});var iy=O(zi=>{"use strict";c();Object.defineProperty(zi,"__esModule",{value:!0});zi.ChecksumStream=void 0;var fM=typeof ReadableStream=="function"?ReadableStream:function(){},Ld=class extends fM{};zi.ChecksumStream=Ld});var ay=O(Vi=>{"use strict";c();Object.defineProperty(Vi,"__esModule",{value:!0});Vi.createChecksumStream=void 0;var pM=oo(),mM=ir(),hM=iy(),gM=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,mM.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=s??pM.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(u,l){t.update(u),l.enqueue(u)},async flush(u){let l=await t.digest(),m=o(l);if(e!==m){let p=new Error(`Checksum mismatch: expected "${e}" but received "${m}" in response header "${n}".`);u.error(p)}else u.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,hM.ChecksumStream.prototype),a};Vi.createChecksumStream=gM});var cy=O(Ud=>{"use strict";c();Object.defineProperty(Ud,"__esModule",{value:!0});Ud.createChecksumStream=wM;var yM=ir(),SM=$d(),EM=ay();function wM(e){return typeof ReadableStream=="function"&&(0,yM.isReadableStream)(e.source)?(0,EM.createChecksumStream)(e):new SM.ChecksumStream(e)}});var qd=O(Qi=>{"use strict";c();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.ByteArrayCollector=void 0;var Fd=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];t.set(s,r),r+=s.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Qi.ByteArrayCollector=Fd});var fy=O(ar=>{"use strict";c();Object.defineProperty(ar,"__esModule",{value:!0});ar.createBufferedReadable=void 0;ar.createBufferedReadableStream=uy;ar.merge=ly;ar.flush=Ki;ar.sizeOf=ns;ar.modeOf=dy;var _M=qd();function uy(e,t,r){let n=e.getReader(),s=!1,o=0,i=["",new _M.ByteArrayCollector(l=>new Uint8Array(l))],a=-1,u=async l=>{let{value:m,done:p}=await n.read(),g=m;if(p){if(a!==-1){let h=Ki(i,a);ns(h)>0&&l.enqueue(h)}l.close()}else{let h=dy(g,!1);if(a!==h&&(a>=0&&l.enqueue(Ki(i,a)),a=h),a===-1){l.enqueue(g);return}let S=ns(g);o+=S;let R=ns(i[a]);if(S>=t&&R===0)l.enqueue(g);else{let x=ly(i,a,g);!s&&o>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${S} is below threshold of ${t}, automatically buffering.`)),x>=t?l.enqueue(Ki(i,a)):await u(l)}}};return new ReadableStream({pull:u})}ar.createBufferedReadable=uy;function ly(e,t,r){switch(t){case 0:return e[0]+=r,ns(e[0]);case 1:case 2:return e[t].push(r),ns(e[t])}}function Ki(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function ns(e){return e?.byteLength??e?.length??0}function dy(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var my=O(Bd=>{"use strict";c();Object.defineProperty(Bd,"__esModule",{value:!0});Bd.createBufferedReadable=AM;var bM=Y("node:stream"),py=qd(),cr=fy(),TM=ir();function AM(e,t,r){if((0,TM.isReadableStream)(e))return(0,cr.createBufferedReadableStream)(e,t,r);let n=new bM.Readable({read(){}}),s=!1,o=0,i=["",new py.ByteArrayCollector(u=>new Uint8Array(u)),new py.ByteArrayCollector(u=>Buffer.from(new Uint8Array(u)))],a=-1;return e.on("data",u=>{let l=(0,cr.modeOf)(u,!0);if(a!==l&&(a>=0&&n.push((0,cr.flush)(i,a)),a=l),a===-1){n.push(u);return}let m=(0,cr.sizeOf)(u);o+=m;let p=(0,cr.sizeOf)(i[a]);if(m>=t&&p===0)n.push(u);else{let g=(0,cr.merge)(i,a,u);!s&&o>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${t}, automatically buffering.`)),g>=t&&n.push((0,cr.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let u=(0,cr.flush)(i,a);(0,cr.sizeOf)(u)>0&&n.push(u)}n.push(null)}),n}});var hy=O(Gi=>{"use strict";c();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.getAwsChunkedEncodingStream=void 0;var RM=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=t,a=r!==void 0&&n!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,u=a?i(s,e):void 0,l=e.getReader();return new ReadableStream({async pull(m){let{value:p,done:g}=await l.read();if(g){if(m.enqueue(`0\r
`),a){let h=r(await u);m.enqueue(`${o}:${h}\r
`),m.enqueue(`\r
`)}m.close()}else m.enqueue(`${(n(p)||0).toString(16)}\r
${p}\r
`)}})};Gi.getAwsChunkedEncodingStream=RM});var gy=O(jd=>{"use strict";c();Object.defineProperty(jd,"__esModule",{value:!0});jd.getAwsChunkedEncodingStream=IM;var vM=Y("node:stream"),CM=hy(),xM=ir();function IM(e,t){let r=e,n=e;if((0,xM.isReadableStream)(n))return(0,CM.getAwsChunkedEncodingStream)(n,t);let{base64Encoder:s,bodyLengthChecker:o,checksumAlgorithmFn:i,checksumLocationName:a,streamHasher:u}=t,l=s!==void 0&&i!==void 0&&a!==void 0&&u!==void 0,m=l?u(i,r):void 0,p=new vM.Readable({read:()=>{}});return r.on("data",g=>{let h=o(g)||0;h!==0&&(p.push(`${h.toString(16)}\r
`),p.push(g),p.push(`\r
`))}),r.on("end",async()=>{if(p.push(`0\r
`),l){let g=s(await m);p.push(`${a}:${g}\r
`),p.push(`\r
`)}p.push(null)}),p}});var yy=O(Hd=>{"use strict";c();Object.defineProperty(Hd,"__esModule",{value:!0});Hd.headStream=PM;async function PM(e,t){let r=0,n=[],s=e.getReader(),o=!1;for(;!o;){let{done:u,value:l}=await s.read();if(l&&(n.push(l),r+=l?.byteLength??0),r>=t)break;o=u}s.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let u of n){if(u.byteLength>i.byteLength-a){i.set(u.subarray(0,i.byteLength-a),a);break}else i.set(u,a);a+=u.length}return i}});var Sy=O(Wi=>{"use strict";c();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.headStream=void 0;var OM=Y("stream"),NM=yy(),DM=ir(),MM=(e,t)=>(0,DM.isReadableStream)(e)?(0,NM.headStream)(e,t):new Promise((r,n)=>{let s=new zd;s.limit=t,e.pipe(s),e.on("error",o=>{s.end(),n(o)}),s.on("error",n),s.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});Wi.headStream=MM;var zd=class extends OM.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}n()}}});var wy=O(Vd=>{"use strict";c();var Ey=e=>encodeURIComponent(e).replace(/[!'()*]/g,kM),kM=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,$M=e=>e.split("/").map(Ey).join("/");Vd.escapeUri=Ey;Vd.escapeUriPath=$M});var by=O(_y=>{"use strict";c();var Qd=wy();function LM(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Qd.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)t.push(`${r}=${Qd.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Qd.escapeUri(n)}`),t.push(s)}}return t.join("&")}_y.buildQueryString=LM});var Nr=O(io=>{"use strict";c();var vy=me(),Cy=by(),Yi=Y("http"),Xi=Y("https"),xy=Y("stream"),Kd=Y("http2"),UM=["ECONNRESET","EPIPE","ETIMEDOUT"],Iy=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},et={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},Ty=1e3,FM=(e,t,r=0)=>{if(!r)return-1;let n=s=>{let o=et.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),i=a=>{a?.connecting?a.on("connect",()=>{et.clearTimeout(o)}):et.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):et.setTimeout(n.bind(null,Ty),Ty)},qM=(e,t,r=0,n,s)=>r?et.setTimeout(()=>{let o=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(o)},r):-1,BM=3e3,jM=(e,{keepAlive:t,keepAliveMsecs:r},n=BM)=>{if(t!==!0)return-1;let s=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",o=>{o.setKeepAlive(t,r||0)})};return n===0?(s(),0):et.setTimeout(s,n)},Ay=3e3,HM=(e,t,r=0)=>{let n=s=>{let o=r-s,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<r&&r<6e3?(n(0),0):et.setTimeout(n.bind(null,r===0?0:Ay),Ay)},Ry=6e3;async function Py(e,t,r=Ry,n=!1){let s=t.headers??{},o=s.Expect||s.expect,i=-1,a=!0;!n&&o==="100-continue"&&(a=await Promise.race([new Promise(u=>{i=Number(et.setTimeout(()=>u(!0),Math.max(Ry,r)))}),new Promise(u=>{e.on("continue",()=>{et.clearTimeout(i),u(!0)}),e.on("response",()=>{et.clearTimeout(i),u(!1)}),e.on("error",()=>{et.clearTimeout(i),u(!1)})})])),a&&zM(e,t.body)}function zM(e,t){if(t instanceof xy.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var VM=0,Gd=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:s,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(s&&o)for(let u in s){let l=s[u]?.length??0,m=o[u]?.length??0;if(l>=i&&m>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${m} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:u}=t||{},l=!0,m=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:u,httpAgent:i instanceof Yi.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new Yi.Agent({keepAlive:l,maxSockets:m,...i}),httpsAgent:a instanceof Xi.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Xi.Agent({keepAlive:l,maxSockets:m,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,o)=>{let i=this.config,a,u=[],l=async G=>{await a,u.forEach(et.clearTimeout),s(G)},m=async G=>{await a,u.forEach(et.clearTimeout),o(G)};if(r?.aborted){let G=new Error("Request aborted");G.name="AbortError",m(G);return}let p=t.protocol==="https:",g=t.headers??{},h=(g.Expect??g.expect)==="100-continue",S=p?i.httpsAgent:i.httpAgent;h&&!this.externalAgent&&(S=new(p?Xi.Agent:Yi.Agent)({keepAlive:!1,maxSockets:1/0})),u.push(et.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(S,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let R=Cy.buildQueryString(t.query||{}),x;if(t.username!=null||t.password!=null){let G=t.username??"",ee=t.password??"";x=`${G}:${ee}`}let I=t.path;R&&(I+=`?${R}`),t.fragment&&(I+=`#${t.fragment}`);let D=t.hostname??"";D[0]==="["&&D.endsWith("]")?D=t.hostname.slice(1,-1):D=t.hostname;let k={headers:t.headers,host:D,method:t.method,path:I,port:t.port,agent:S,auth:x},z=(p?Xi.request:Yi.request)(k,G=>{let ee=new vy.HttpResponse({statusCode:G.statusCode||-1,reason:G.statusMessage,headers:Iy(G.headers),body:G});l({response:ee})});if(z.on("error",G=>{UM.includes(G.code)?m(Object.assign(G,{name:"TimeoutError"})):m(G)}),r){let G=()=>{z.destroy();let ee=new Error("Request aborted");ee.name="AbortError",m(ee)};if(typeof r.addEventListener=="function"){let ee=r;ee.addEventListener("abort",G,{once:!0}),z.once("close",()=>ee.removeEventListener("abort",G))}else r.onabort=G}let J=n??i.requestTimeout;u.push(FM(z,m,i.connectionTimeout)),u.push(qM(z,m,J,i.throwOnRequestTimeout,i.logger??console)),u.push(HM(z,m,i.socketTimeout));let Ne=k.agent;typeof Ne=="object"&&"keepAlive"in Ne&&u.push(jM(z,{keepAlive:Ne.keepAlive,keepAliveMsecs:Ne.keepAliveMsecs})),a=Py(z,t,J,this.externalAgent).catch(G=>(u.forEach(et.clearTimeout),o(G)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},Wd=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},Yd=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let n=this.getUrlString(t),s=this.sessionCache.get(n);if(s){let u=s.poll();if(u&&!this.config.disableConcurrency)return u}let o=Kd.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},u=>{if(u)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new Wd;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},Xd=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new Yd({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(s||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:o}=this.config,i=n??s;return new Promise((a,u)=>{let l=!1,m,p=async Se=>{await m,a(Se)},g=async Se=>{await m,u(Se)};if(r?.aborted){l=!0;let Se=new Error("Request aborted");Se.name="AbortError",g(Se);return}let{hostname:h,method:S,port:R,protocol:x,query:I}=t,D="";if(t.username!=null||t.password!=null){let Se=t.username??"",Fe=t.password??"";D=`${Se}:${Fe}@`}let k=`${x}//${D}${h}${R?`:${R}`:""}`,U={destination:new URL(k)},z=this.connectionManager.lease(U,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),J=Se=>{o&&this.destroySession(z),l=!0,g(Se)},Ne=Cy.buildQueryString(I||{}),G=t.path;Ne&&(G+=`?${Ne}`),t.fragment&&(G+=`#${t.fragment}`);let ee=z.request({...t.headers,[Kd.constants.HTTP2_HEADER_PATH]:G,[Kd.constants.HTTP2_HEADER_METHOD]:S});if(z.ref(),ee.on("response",Se=>{let Fe=new vy.HttpResponse({statusCode:Se[":status"]||-1,headers:Iy(Se),body:ee});l=!0,p({response:Fe}),o&&(z.close(),this.connectionManager.deleteSession(k,z))}),i&&ee.setTimeout(i,()=>{ee.close();let Se=new Error(`Stream timed out because of no activity for ${i} ms`);Se.name="TimeoutError",J(Se)}),r){let Se=()=>{ee.close();let Fe=new Error("Request aborted");Fe.name="AbortError",J(Fe)};if(typeof r.addEventListener=="function"){let Fe=r;Fe.addEventListener("abort",Se,{once:!0}),ee.once("close",()=>Fe.removeEventListener("abort",Se))}else r.onabort=Se}ee.on("frameError",(Se,Fe,ut)=>{J(new Error(`Frame type id ${Se} in stream id ${ut} has failed with code ${Fe}.`))}),ee.on("error",J),ee.on("aborted",()=>{J(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ee.rstCode}.`))}),ee.on("close",()=>{z.unref(),o&&z.destroy(),l||J(new Error("Unexpected error: http2 request did not get a response"))}),m=Py(ee,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},Jd=class extends xy.Writable{bufferedBytes=[];_write(t,r,n){this.bufferedBytes.push(t),n()}},QM=e=>KM(e)?GM(e):new Promise((t,r)=>{let n=new Jd;e.pipe(n),e.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),KM=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function GM(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:u}=await r.read();u&&(t.push(u),s+=u.length),n=a}let o=new Uint8Array(s),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}io.DEFAULT_REQUEST_TIMEOUT=VM;io.NodeHttp2Handler=Xd;io.NodeHttpHandler=Gd;io.streamCollector=QM});var Ny=O(Zd=>{"use strict";c();var Oy=e=>encodeURIComponent(e).replace(/[!'()*]/g,WM),WM=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,YM=e=>e.split("/").map(Oy).join("/");Zd.escapeUri=Oy;Zd.escapeUriPath=YM});var My=O(Dy=>{"use strict";c();var ef=Ny();function XM(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=ef.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)t.push(`${r}=${ef.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${ef.escapeUri(n)}`),t.push(s)}}return t.join("&")}Dy.buildQueryString=XM});var ky=O(Ji=>{"use strict";c();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.fromBase64=void 0;var JM=wt(),ZM=/^[A-Za-z0-9+/]*={0,2}$/,ek=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!ZM.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,JM.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Ji.fromBase64=ek});var $y=O(Zi=>{"use strict";c();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.toBase64=void 0;var tk=wt(),rk=Ie(),nk=e=>{let t;if(typeof e=="string"?t=(0,rk.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,tk.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Zi.toBase64=nk});var Fy=O(ao=>{"use strict";c();var Ly=ky(),Uy=$y();Object.keys(Ly).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ao,e)&&Object.defineProperty(ao,e,{enumerable:!0,get:function(){return Ly[e]}})});Object.keys(Uy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ao,e)&&Object.defineProperty(ao,e,{enumerable:!0,get:function(){return Uy[e]}})})});var jy=O(ta=>{"use strict";c();var qy=me(),sk=My(),ok=Fy();function By(e,t){return new Request(e,t)}function ik(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var ea={supported:void 0},tf=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),ea.supported===void 0&&(ea.supported=typeof Request<"u"&&"keepalive"in By("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let D=new Error("Request aborted");return D.name="AbortError",Promise.reject(D)}let a=t.path,u=sk.buildQueryString(t.query||{});u&&(a+=`?${u}`),t.fragment&&(a+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){let D=t.username??"",k=t.password??"";l=`${D}:${k}@`}let{port:m,method:p}=t,g=`${t.protocol}//${l}${t.hostname}${m?`:${m}`:""}${a}`,h=p==="GET"||p==="HEAD"?void 0:t.body,S={body:h,headers:new Headers(t.headers),method:p,credentials:i};this.config?.cache&&(S.cache=this.config.cache),h&&(S.duplex="half"),typeof AbortController<"u"&&(S.signal=r),ea.supported&&(S.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(S,this.config.requestInit(t));let R=()=>{},x=By(g,S),I=[fetch(x).then(D=>{let k=D.headers,U={};for(let J of k.entries())U[J[0]]=J[1];return D.body!=null?{response:new qy.HttpResponse({headers:U,reason:D.statusText,statusCode:D.status,body:D.body})}:D.blob().then(J=>({response:new qy.HttpResponse({headers:U,reason:D.statusText,statusCode:D.status,body:J})}))}),ik(s)];return r&&I.push(new Promise((D,k)=>{let U=()=>{let z=new Error("Request aborted");z.name="AbortError",k(z)};if(typeof r.addEventListener=="function"){let z=r;z.addEventListener("abort",U,{once:!0}),R=()=>z.removeEventListener("abort",U)}else r.onabort=U})),Promise.race(I).finally(R)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},ak=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):ck(e):uk(e);async function ck(e){let t=await lk(e),r=ok.fromBase64(t);return new Uint8Array(r)}async function uk(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:u}=await r.read();u&&(t.push(u),s+=u.length),n=a}let o=new Uint8Array(s),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}function lk(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;t(s.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}ta.FetchHttpHandler=tf;ta.keepAliveSupport=ea;ta.streamCollector=ak});var ra=O(nf=>{"use strict";c();var Hy={},rf={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Hy[e]=t,rf[t]=e}function dk(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in rf)t[r/2]=rf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function fk(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Hy[e[r]];return t}nf.fromHex=dk;nf.toHex=fk});var Ky=O(na=>{"use strict";c();Object.defineProperty(na,"__esModule",{value:!0});na.sdkStreamMixin=void 0;var pk=jy(),mk=oo(),hk=ra(),gk=Ie(),zy=ir(),Vy="The stream has already been transformed.",yk=e=>{if(!Qy(e)&&!(0,zy.isReadableStream)(e)){let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(Vy);return t=!0,await(0,pk.streamCollector)(e)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let o=await r();if(s==="base64")return(0,mk.toBase64)(o);if(s==="hex")return(0,hk.toHex)(o);if(s===void 0||s==="utf8"||s==="utf-8")return(0,gk.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Vy);if(t=!0,Qy(e))return n(e);if((0,zy.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};na.sdkStreamMixin=yk;var Qy=e=>typeof Blob=="function"&&e instanceof Blob});var Wy=O(sa=>{"use strict";c();Object.defineProperty(sa,"__esModule",{value:!0});sa.sdkStreamMixin=void 0;var Sk=Nr(),Ek=wt(),sf=Y("stream"),wk=Ky(),Gy="The stream has already been transformed.",_k=e=>{if(!(e instanceof sf.Readable))try{return(0,wk.sdkStreamMixin)(e)}catch{let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(Gy);return t=!0,await(0,Sk.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,Ek.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(t)throw new Error(Gy);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof sf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,sf.Readable.toWeb(e)}})};sa.sdkStreamMixin=_k});var Yy=O(of=>{"use strict";c();Object.defineProperty(of,"__esModule",{value:!0});of.splitStream=bk;async function bk(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var Zy=O(af=>{"use strict";c();Object.defineProperty(af,"__esModule",{value:!0});af.splitStream=Ak;var Xy=Y("stream"),Tk=Yy(),Jy=ir();async function Ak(e){if((0,Jy.isReadableStream)(e)||(0,Jy.isBlob)(e))return(0,Tk.splitStream)(e);let t=new Xy.PassThrough,r=new Xy.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var oa=O(Le=>{"use strict";c();var eS=oo(),tS=Ie(),rS=$d(),nS=cy(),sS=my(),oS=gy(),iS=Sy(),aS=Wy(),cS=Zy(),uS=ir(),cf=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(eS.fromBase64(t)):e.mutate(tS.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?eS.toBase64(this):tS.toUtf8(this)}};Object.defineProperty(Le,"isBlob",{enumerable:!0,get:function(){return uS.isBlob}});Object.defineProperty(Le,"isReadableStream",{enumerable:!0,get:function(){return uS.isReadableStream}});Le.Uint8ArrayBlobAdapter=cf;Object.keys(rS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return rS[e]}})});Object.keys(nS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return nS[e]}})});Object.keys(sS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return sS[e]}})});Object.keys(oS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return oS[e]}})});Object.keys(iS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return iS[e]}})});Object.keys(aS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return aS[e]}})});Object.keys(cS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Le,e)&&Object.defineProperty(Le,e,{enumerable:!0,get:function(){return cS[e]}})})});var ia,_t,aa=w(()=>{c();ia=T(oa()),_t=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ia.Uint8ArrayBlobAdapter.mutate(e);if(!e)return ia.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return ia.Uint8ArrayBlobAdapter.mutate(await r)}});function Vt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var ca=w(()=>{c()});var Mt,uf=w(()=>{c();Mt=e=>typeof e=="function"?e():e});var tt=O(lf=>{"use strict";c();var lS=Ir(),Rk=e=>e[lS.SMITHY_CONTEXT_KEY]||(e[lS.SMITHY_CONTEXT_KEY]={}),vk=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};lf.getSmithyContext=Rk;lf.normalizeProvider=vk});var co,ua=w(()=>{c();co=(e,t,r,n,s)=>({name:t,namespace:e,traits:r,input:n,output:s})});var dS,fS,pS,df,mS=w(()=>{c();dS=T(me()),fS=T(tt());ua();pS=e=>(t,r)=>async n=>{let{response:s}=await t(n),{operationSchema:o}=(0,fS.getSmithyContext)(r),[,i,a,u,l,m]=o??[];try{let p=await e.protocol.deserializeResponse(co(i,a,u,l,m),{...e,...r},s);return{response:s,output:p}}catch(p){if(Object.defineProperty(p,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in p)){let g="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{p.message+=`
  `+g}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(g):r.logger?.warn?.(g)}typeof p.$responseBodyText<"u"&&p.$response&&(p.$response.body=p.$responseBodyText);try{if(dS.HttpResponse.isInstance(s)){let{headers:h={}}=s,S=Object.entries(h);p.$metadata={httpStatusCode:s.statusCode,requestId:df(/^x-[\w-]+-request-?id$/,S),extendedRequestId:df(/^x-[\w-]+-id-2$/,S),cfId:df(/^x-[\w-]+-cf-id$/,S)}}}catch{}}throw p}},df=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var hS,gS,yS=w(()=>{c();hS=T(tt());ua();gS=e=>(t,r)=>async n=>{let{operationSchema:s}=(0,hS.getSmithyContext)(r),[,o,i,a,u,l]=s??[],m=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,p=await e.protocol.serializeRequest(co(o,i,a,u,l),n.input,{...e,...r,endpoint:m});return t({...n,request:p})}});function _n(e){return{applyToStack:t=>{t.add(gS(e),ES),t.add(pS(e),SS),e.protocol.setSerdeContext(e)}}}var SS,ES,wS=w(()=>{c();mS();yS();SS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ES={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var De,Dr=w(()=>{c();De=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var la,Ck,_S=w(()=>{c();Dr();la=class e extends De{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},Ck=(e,t,r,n)=>De.assign(new la,{name:t,namespace:e,traits:r,valueSchema:n})});var da,xk,bS=w(()=>{c();Dr();da=class e extends De{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},xk=(e,t,r,n,s)=>De.assign(new da,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:s})});var fa,Ik,TS=w(()=>{c();Dr();fa=class e extends De{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},Ik=(e,t,r,n,s)=>De.assign(new fa,{name:t,namespace:e,traits:r,input:n,output:s})});var ss,Pk,ff=w(()=>{c();Dr();ss=class e extends De{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},Pk=(e,t,r,n,s)=>De.assign(new ss,{name:t,namespace:e,traits:r,memberNames:n,memberList:s})});var pa,Ok,AS=w(()=>{c();Dr();ff();pa=class e extends ss{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},Ok=(e,t,r,n,s,o)=>De.assign(new pa,{name:t,namespace:e,traits:r,memberNames:n,memberList:s,ctor:null})});function Qt(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var pf=w(()=>{c()});function uo(e,t){if(e instanceof $)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=$;return new r(e,t)}var RS,$,mf,vS,CS=w(()=>{c();uf();pf();RS={it:Symbol.for("@smithy/nor-struct-it")},$=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let n=[],s=t,o=t;for(this._isMemberSchema=!1;mf(s);)n.push(s[1]),s=s[0],o=Mt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Qt(a))}}else this.memberTraits=0;if(o instanceof e){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Mt(o),vS(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=Mt(t);if(r instanceof e)return r;if(mf(r)){let[n,s]=r;if(n instanceof e)return Object.assign(n.getMergedTraits(),Qt(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Qt(this.memberTraits)}getOwnTraits(){return Qt(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=t?15:n[4]??0;return uo([s,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||s)?t[3+t[0]]:r?15:void 0;if(o!=null)return uo([o,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let n=r[4].indexOf(t),s=r[5][n];return uo(mf(s)?s:[s,0],t)}if(this.isDocumentSchema())return uo([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema(),r=t[4].length,n=t[RS.it];if(n&&r===n.length){yield*n;return}n=Array(r);for(let s=0;s<r;++s){let o=t[4][s],i=uo([t[5][s],0],o);yield n[s]=[o,i]}t[RS.it]=n}};mf=e=>Array.isArray(e)&&e.length===2,vS=e=>Array.isArray(e)&&e.length>=5});var lo,Nk,Dk,xS=w(()=>{c();Dr();lo=class e extends De{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},Nk=(e,t,r,n)=>De.assign(new lo,{name:t,namespace:e,traits:n,schemaRef:r}),Dk=(e,t,r,n)=>De.assign(new lo,{name:t,namespace:e,traits:r,schemaRef:n})});var Mk,IS=w(()=>{c();Mk={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var B,PS=w(()=>{c();B=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,n=new Map){this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let n=t,s=e.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,n]=t,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var ma={};lt(ma,{ErrorSchema:()=>pa,ListSchema:()=>la,MapSchema:()=>da,NormalizedSchema:()=>$,OperationSchema:()=>fa,SCHEMA:()=>Mk,Schema:()=>De,SimpleSchema:()=>lo,StructureSchema:()=>ss,TypeRegistry:()=>B,deref:()=>Mt,deserializerMiddlewareOption:()=>SS,error:()=>Ok,getSchemaSerdePlugin:()=>_n,isStaticSchema:()=>vS,list:()=>Ck,map:()=>xk,op:()=>Ik,operation:()=>co,serializerMiddlewareOption:()=>ES,sim:()=>Nk,simAdapter:()=>Dk,struct:()=>Pk,translateTraits:()=>Qt});var ae=w(()=>{c();uf();wS();_S();bS();TS();ua();AS();CS();Dr();xS();ff();IS();pf();PS()});var kk,OS=w(()=>{c();kk=(e,t,r=n=>n)=>e});var $k,Lk,fo,Uk,ha,po,Fk,hf,gf,yf,Sf,qk,Bk,NS,jk,Hk,ya,zk,Ef,Vk,os,wf,Qk,Kk,Gk,DS,MS,Wk,Yk,bn,_f,ga,mo,bf=w(()=>{c();$k=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Lk=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&mo.warn(ga(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&mo.warn(ga(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},fo=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&mo.warn(ga(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Uk=Math.ceil(34028234663852886e22),ha=e=>{let t=fo(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Uk)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},po=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Fk=po,hf=e=>Sf(e,32),gf=e=>Sf(e,16),yf=e=>Sf(e,8),Sf=(e,t)=>{let r=po(e);if(r!==void 0&&qk(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},qk=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Bk=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},NS=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},jk=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return mo.warn(ga(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Hk=e=>{if(e==null)return;let t=NS(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},ya=e=>fo(typeof e=="string"?os(e):e),zk=ya,Ef=e=>ha(typeof e=="string"?os(e):e),Vk=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,os=e=>{let t=e.match(Vk);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},wf=e=>typeof e=="string"?DS(e):fo(e),Qk=wf,Kk=wf,Gk=e=>typeof e=="string"?DS(e):ha(e),DS=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},MS=e=>po(typeof e=="string"?os(e):e),Wk=MS,Yk=e=>hf(typeof e=="string"?os(e):e),bn=e=>gf(typeof e=="string"?os(e):e),_f=e=>yf(typeof e=="string"?os(e):e),ga=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),mo={warn:console.warn}});function go(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),u=s<10?`0${s}`:`${s}`,l=o<10?`0${o}`:`${o}`,m=i<10?`0${i}`:`${i}`,p=a<10?`0${a}`:`${a}`;return`${Xk[n]}, ${u} ${Af[r]} ${t} ${l}:${m}:${p} GMT`}var Xk,Af,Jk,Zk,e1,Rf,t1,r1,n1,vf,Cf,ho,s1,o1,i1,Tf,a1,c1,u1,Kt,l1,d1,is,kS=w(()=>{c();bf();Xk=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Af=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Jk=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Zk=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Jk.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,u,l]=t,m=bn(is(n)),p=Kt(s,"month",1,12),g=Kt(o,"day",1,31);return ho(m,p,g,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l})},e1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Rf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=e1.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,u,l,m]=t,p=bn(is(n)),g=Kt(s,"month",1,12),h=Kt(o,"day",1,31),S=ho(p,g,h,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l});return m.toUpperCase()!="Z"&&S.setTime(S.getTime()-d1(m)),S},t1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),r1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),n1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),vf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=t1.exec(e);if(t){let[r,n,s,o,i,a,u,l]=t;return ho(bn(is(o)),Tf(s),Kt(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l})}if(t=r1.exec(e),t){let[r,n,s,o,i,a,u,l]=t;return i1(ho(s1(o),Tf(s),Kt(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:l}))}if(t=n1.exec(e),t){let[r,n,s,o,i,a,u,l]=t;return ho(bn(is(l)),Tf(n),Kt(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")},Cf=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=ya(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},ho=(e,t,r,n)=>{let s=t-1;return c1(e,s,r),new Date(Date.UTC(e,s,r,Kt(n.hours,"hour",0,23),Kt(n.minutes,"minute",0,59),Kt(n.seconds,"seconds",0,60),l1(n.fractionalMilliseconds)))},s1=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+bn(is(e));return r<t?r+100:r},o1=50*365*24*60*60*1e3,i1=e=>e.getTime()-new Date().getTime()>o1?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Tf=e=>{let t=Af.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},a1=[31,28,31,30,31,30,31,31,30,31,30,31],c1=(e,t,r)=>{let n=a1[t];if(t===1&&u1(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Af[t]} in ${e}: ${r}`)},u1=e=>e%4===0&&(e%100!==0||e%400===0),Kt=(e,t,r,n)=>{let s=_f(is(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},l1=e=>e==null?0:Ef("0."+e)*1e3,d1=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},is=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var yo={};lt(yo,{__addDisposableResource:()=>iE,__assign:()=>Sa,__asyncDelegator:()=>JS,__asyncGenerator:()=>XS,__asyncValues:()=>ZS,__await:()=>as,__awaiter:()=>VS,__classPrivateFieldGet:()=>nE,__classPrivateFieldIn:()=>oE,__classPrivateFieldSet:()=>sE,__createBinding:()=>wa,__decorate:()=>US,__disposeResources:()=>aE,__esDecorate:()=>qS,__exportStar:()=>KS,__extends:()=>$S,__generator:()=>QS,__importDefault:()=>rE,__importStar:()=>tE,__makeTemplateObject:()=>eE,__metadata:()=>zS,__param:()=>FS,__propKey:()=>jS,__read:()=>Pf,__rest:()=>LS,__rewriteRelativeImportExtension:()=>cE,__runInitializers:()=>BS,__setFunctionName:()=>HS,__spread:()=>GS,__spreadArray:()=>YS,__spreadArrays:()=>WS,__values:()=>Ea,default:()=>m1});function $S(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");xf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function LS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function US(e,t,r,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function FS(e,t){return function(r,n){t(r,n,e)}}function qS(e,t,r,n,s,o){function i(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,m=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p,g=!1,h=r.length-1;h>=0;h--){var S={};for(var R in n)S[R]=R==="access"?{}:n[R];for(var R in n.access)S.access[R]=n.access[R];S.addInitializer=function(I){if(g)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(I||null))};var x=(0,r[h])(a==="accessor"?{get:m.get,set:m.set}:m[u],S);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(p=i(x.get))&&(m.get=p),(p=i(x.set))&&(m.set=p),(p=i(x.init))&&s.unshift(p)}else(p=i(x))&&(a==="field"?s.unshift(p):m[u]=p)}l&&Object.defineProperty(l,n.name,m),g=!0}function BS(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function jS(e){return typeof e=="symbol"?e:"".concat(e)}function HS(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function zS(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function VS(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(m){try{l(n.next(m))}catch(p){i(p)}}function u(m){try{l(n.throw(m))}catch(p){i(p)}}function l(m){m.done?o(m.value):s(m.value).then(a,u)}l((n=n.apply(e,t||[])).next())})}function QS(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(m){return u([l,m])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(r=0)),r;)try{if(n=1,s&&(o=l[0]&2?s.return:l[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,l[1])).done)return o;switch(s=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(m){l=[6,m],s=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function KS(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wa(t,e,r)}function Ea(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function GS(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pf(arguments[t]));return e}function WS(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function YS(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function as(e){return this instanceof as?(this.v=e,this):new as(e)}function XS(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(h){return function(S){return Promise.resolve(S).then(h,p)}}function a(h,S){n[h]&&(s[h]=function(R){return new Promise(function(x,I){o.push([h,R,x,I])>1||u(h,R)})},S&&(s[h]=S(s[h])))}function u(h,S){try{l(n[h](S))}catch(R){g(o[0][3],R)}}function l(h){h.value instanceof as?Promise.resolve(h.value.v).then(m,p):g(o[0][2],h)}function m(h){u("next",h)}function p(h){u("throw",h)}function g(h,S){h(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function JS(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,o){t[s]=e[s]?function(i){return(r=!r)?{value:as(e[s](i)),done:!1}:o?o(i):i}:o}}function ZS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ea=="function"?Ea(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(i){return new Promise(function(a,u){i=e[o](i),s(a,u,i.done,i.value)})}}function s(o,i,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},i)}}function eE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function tE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=If(e),n=0;n<r.length;n++)r[n]!=="default"&&wa(t,e,r[n]);return f1(t,e),t}function rE(e){return e&&e.__esModule?e:{default:e}}function nE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function sE(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function oE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function iE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function aE(e){function t(o){e.error=e.hasError?new p1(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return t(i),s()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function cE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?t?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):e}var xf,Sa,wa,f1,If,p1,m1,So=w(()=>{c();xf=function(e,t){return xf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},xf(e,t)};Sa=function(){return Sa=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Sa.apply(this,arguments)};wa=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};f1=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},If=function(e){return If=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},If(e)};p1=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};m1={__extends:$S,__assign:Sa,__rest:LS,__decorate:US,__param:FS,__esDecorate:qS,__runInitializers:BS,__propKey:jS,__setFunctionName:HS,__metadata:zS,__awaiter:VS,__generator:QS,__createBinding:wa,__exportStar:KS,__values:Ea,__read:Pf,__spread:GS,__spreadArrays:WS,__spreadArray:YS,__await:as,__asyncGenerator:XS,__asyncDelegator:JS,__asyncValues:ZS,__makeTemplateObject:eE,__importStar:tE,__importDefault:rE,__classPrivateFieldGet:nE,__classPrivateFieldSet:sE,__classPrivateFieldIn:oE,__addDisposableResource:iE,__disposeResources:aE,__rewriteRelativeImportExtension:cE}});var lE=O(_a=>{"use strict";c();Object.defineProperty(_a,"__esModule",{value:!0});_a.randomUUID=void 0;var h1=(So(),re(yo)),uE=h1.__importDefault(Y("crypto"));_a.randomUUID=uE.default.randomUUID.bind(uE.default)});var Of=O(fE=>{"use strict";c();var dE=lE(),ze=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),g1=()=>{if(dE.randomUUID)return dE.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,ze[e[0]]+ze[e[1]]+ze[e[2]]+ze[e[3]]+"-"+ze[e[4]]+ze[e[5]]+"-"+ze[e[6]]+ze[e[7]]+"-"+ze[e[8]]+ze[e[9]]+"-"+ze[e[10]]+ze[e[11]]+ze[e[12]]+ze[e[13]]+ze[e[14]]+ze[e[15]]};fE.v4=g1});var bt,pE=w(()=>{c();bt=T(Of())});var rt,mE=w(()=>{c();rt=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};rt.from=e=>e&&typeof e=="object"&&(e instanceof rt||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?rt(String(e)):rt(JSON.stringify(e));rt.fromObject=rt.from});function Nf(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var hE=w(()=>{c()});function ur(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var Df,Mf,kf,gE,yE,y1,S1,E1,w1,_1,cs,$f,Lf,SE=w(()=>{c();Df="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Mf="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",kf="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",gE="(\\d?\\d)",yE="(\\d{4})",y1=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),S1=new RegExp(`^${Df}, ${gE} ${Mf} ${yE} ${kf} GMT$`),E1=new RegExp(`^${Df}, ${gE}-${Mf}-(\\d\\d) ${kf} GMT$`),w1=new RegExp(`^${Df} ${Mf} ( [1-9]|\\d\\d) ${kf} ${yE}$`),_1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cs=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},$f=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=y1.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,s,o,i,a,,u,l]=t;ur(n,1,12),ur(s,1,31),ur(o,0,23),ur(i,0,59),ur(a,0,60);let m=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(u)?Math.round(parseFloat(`0.${u}`)*1e3):0));if(m.setUTCFullYear(Number(r)),l.toUpperCase()!="Z"){let[,p,g,h]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],S=p==="-"?1:-1;m.setTime(m.getTime()+S*(Number(g)*60*60*1e3+Number(h)*60*1e3))}return m},Lf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,s,o,i,a,u;if((u=S1.exec(e))?[,t,r,n,s,o,i,a]=u:(u=E1.exec(e))?([,t,r,n,s,o,i,a]=u,n=(Number(n)+1900).toString()):(u=w1.exec(e))&&([,r,t,s,o,i,a,n]=u),n&&i){let l=Date.UTC(Number(n),_1.indexOf(r),Number(t),Number(s),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);ur(t,1,31),ur(s,0,23),ur(o,0,59),ur(i,0,60);let m=new Date(l);return m.setUTCFullYear(Number(n)),m}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function Uf(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let s=[],o="";for(let i=0;i<n.length;i++)o===""?o=n[i]:o+=t+n[i],(i+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}var EE=w(()=>{c()});var Eo,wE=w(()=>{c();Eo=e=>{let t=e.length,r=[],n=!1,s,o=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(o,i)),o=i+1);break;default:}s=a}return r.push(e.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function Ff(e){return new _e(String(e),"bigDecimal")}var _E,_e,bE=w(()=>{c();_E=/^-?\d*(\.\d+)?$/,_e=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!_E.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&_E.test(r.string)}}});var TE={};lt(TE,{LazyJsonString:()=>rt,NumericValue:()=>_e,_parseEpochTimestamp:()=>cs,_parseRfc3339DateTimeWithOffset:()=>$f,_parseRfc7231DateTime:()=>Lf,copyDocumentWithTransform:()=>kk,dateToUtcString:()=>go,expectBoolean:()=>Lk,expectByte:()=>yf,expectFloat32:()=>ha,expectInt:()=>Fk,expectInt32:()=>hf,expectLong:()=>po,expectNonNull:()=>Bk,expectNumber:()=>fo,expectObject:()=>NS,expectShort:()=>gf,expectString:()=>jk,expectUnion:()=>Hk,generateIdempotencyToken:()=>bt.v4,handleFloat:()=>Qk,limitedParseDouble:()=>wf,limitedParseFloat:()=>Kk,limitedParseFloat32:()=>Gk,logger:()=>mo,nv:()=>Ff,parseBoolean:()=>$k,parseEpochTimestamp:()=>Cf,parseRfc3339DateTime:()=>Zk,parseRfc3339DateTimeWithOffset:()=>Rf,parseRfc7231DateTime:()=>vf,quoteHeader:()=>Nf,splitEvery:()=>Uf,splitHeader:()=>Eo,strictParseByte:()=>_f,strictParseDouble:()=>ya,strictParseFloat:()=>zk,strictParseFloat32:()=>Ef,strictParseInt:()=>Wk,strictParseInt32:()=>Yk,strictParseLong:()=>MS,strictParseShort:()=>bn});var nt=w(()=>{c();OS();kS();pE();mE();bf();hE();SE();EE();wE();bE()});var st,us=w(()=>{c();st=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var ba,qf,AE=w(()=>{c();ba=T(Ie()),qf=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:s,defaultContentType:o}){this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=o}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let s=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,u=this.defaultContentType,l=Symbol("initialRequestMarker"),m={async*[Symbol.asyncIterator](){if(n){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:u}};a.write(r,n);let g=a.flush();yield{[l]:!0,headers:p,body:g}}for await(let p of t)yield p}};return s.serialize(m,p=>{if(p[l])return{headers:p.headers,body:p.body};let g=Object.keys(p).find(D=>D!=="__type")??"",{additionalHeaders:h,body:S,eventType:R,explicitPayloadContentType:x}=this.writeEventBody(g,i,p);return{headers:{":event-type":{type:"string",value:R},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:x??u},...h},body:S}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),u=Symbol("initialResponseMarker"),l=s.deserialize(t.body,async g=>{let h=Object.keys(g).find(R=>R!=="__type")??"",S=g[h].body;if(h==="initial-response"){let R=await this.deserializer.read(r,S);return delete R[o],{[u]:!0,...R}}else if(h in a){let R=a[h];if(R.isStructSchema()){let x={},I=!1;for(let[D,k]of R.structIterator()){let{eventHeader:U,eventPayload:z}=k.getMergedTraits();if(I=I||!!(U||z),z)k.isBlobSchema()?x[D]=S:k.isStringSchema()?x[D]=(this.serdeContext?.utf8Encoder??ba.toUtf8)(S):k.isStructSchema()&&(x[D]=await this.deserializer.read(k,S));else if(U){let J=g[h].headers[D]?.value;J!=null&&(k.isNumericSchema()?J&&typeof J=="object"&&"bytes"in J?x[D]=BigInt(J.toString()):x[D]=Number(J):x[D]=J)}}if(I)return{[h]:x}}return{[h]:await this.deserializer.read(R,S)}}else return{$unknown:g}}),m=l[Symbol.asyncIterator](),p=await m.next();if(p.done)return l;if(p.value?.[u]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[g,h]of Object.entries(p.value))n[g]=h}return{async*[Symbol.asyncIterator](){for(p?.value?.[u]||(yield p.value);;){let{done:g,value:h}=await m.next();if(g)break;yield h}}}}writeEventBody(t,r,n){let s=this.serializer,o=t,i=null,a,u=r.getSchema()[4].includes(t),l={};if(u){let g=r.getMemberSchema(t);if(g.isStructSchema()){for(let[h,S]of g.structIterator()){let{eventHeader:R,eventPayload:x}=S.getMergedTraits();if(x)i=h;else if(R){let I=n[t][h],D="binary";S.isNumericSchema()?(-2)**31<=I&&I<=2**31-1?D="integer":D="long":S.isTimestampSchema()?D="timestamp":S.isStringSchema()?D="string":S.isBooleanSchema()&&(D="boolean"),I!=null&&(l[h]={type:D,value:I},delete n[t][h])}}if(i!==null){let h=g.getMemberSchema(i);h.isBlobSchema()?a="application/octet-stream":h.isStringSchema()&&(a="text/plain"),s.write(h,n[t][i])}else s.write(g,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[g,h]=n[t];o=g,s.write(15,h)}let m=s.flush();return{body:typeof m=="string"?(this.serdeContext?.utf8Decoder??ba.fromUtf8)(m):m,eventType:o,explicitPayloadContentType:a,additionalHeaders:l}}}});var RE={};lt(RE,{EventStreamSerde:()=>qf});var vE=w(()=>{c();AE()});var Ta,Tn,Aa=w(()=>{c();ae();Ta=T(me());us();Tn=class extends st{options;constructor(t){super(),this.options=t}getRequestType(){return Ta.HttpRequest}getResponseType(){return Ta.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[n,s]of r.url.searchParams.entries())t.query[n]=s;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){if(this.serdeContext?.disableHostPrefix)return;let s=$.of(r.input),o=Qt(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of a){let l=n[u];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);i=i.replace(`{${u}}`,l)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(vE(),RE));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,n,s,o){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var CE,xE,An,IE=w(()=>{c();ae();nt();CE=T(me()),xE=T(oa());aa();ca();Aa();An=class extends Tn{async serializeRequest(t,r,n){let s={...r??{}},o=this.serializer,i={},a={},u=await n.endpoint(),l=$.of(t?.input),m=l.getSchema(),p=!1,g,h=new CE.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(u){this.updateServiceEndpoint(h,u),this.setHostPrefix(h,t,s);let S=Qt(t.traits);if(S.http){h.method=S.http[0];let[R,x]=S.http[1].split("?");h.path=="/"?h.path=R:h.path+=R;let I=new URLSearchParams(x??"");Object.assign(i,Object.fromEntries(I))}}for(let[S,R]of l.structIterator()){let x=R.getMergedTraits()??{},I=s[S];if(I==null&&!R.isIdempotencyToken()){if(x.httpLabel&&(h.path.includes(`{${S}+}`)||h.path.includes(`{${S}}`)))throw new Error(`No value provided for input HTTP label: ${S}.`);continue}if(x.httpPayload)R.isStreaming()?R.isStructSchema()?s[S]&&(g=await this.serializeEventStream({eventStream:s[S],requestSchema:l})):g=I:(o.write(R,I),g=o.flush()),delete s[S];else if(x.httpLabel){o.write(R,I);let D=o.flush();h.path.includes(`{${S}+}`)?h.path=h.path.replace(`{${S}+}`,D.split("/").map(Vt).join("/")):h.path.includes(`{${S}}`)&&(h.path=h.path.replace(`{${S}}`,Vt(D))),delete s[S]}else if(x.httpHeader)o.write(R,I),a[x.httpHeader.toLowerCase()]=String(o.flush()),delete s[S];else if(typeof x.httpPrefixHeaders=="string"){for(let[D,k]of Object.entries(I)){let U=x.httpPrefixHeaders+D;o.write([R.getValueSchema(),{httpHeader:U}],k),a[U.toLowerCase()]=o.flush()}delete s[S]}else x.httpQuery||x.httpQueryParams?(this.serializeQuery(R,I,i),delete s[S]):p=!0}return p&&s&&(o.write(m,s),g=o.flush()),h.headers=a,h.query=i,h.body=g,h}serializeQuery(t,r,n){let s=this.serializer,o=t.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let u=t.getValueSchema();Object.assign(u.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(u,a,n)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let u of r){s.write([t.getValueSchema(),o],u);let l=s.flush();(i||l!==void 0)&&a.push(l)}n[o.httpQuery]=a}else s.write([t,o],r),n[o.httpQuery]=s.flush()}async deserializeResponse(t,r,n){let s=this.deserializer,o=$.of(t.output),i={};if(n.statusCode>=300){let u=await _t(n.body,r);throw u.byteLength>0&&Object.assign(i,await s.read(15,u)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let u in n.headers){let l=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=l}let a=await this.deserializeHttpMessage(o,r,n,i);if(a.length){let u=await _t(n.body,r);if(u.byteLength>0){let l=await s.read(o,u);for(let m of a)i[m]=l[m]}}else a.discardResponseBody&&await _t(n.body,r);return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(t,r,n,s,o){let i;s instanceof Set?i=o:i=s;let a=!0,u=this.deserializer,l=$.of(t),m=[];for(let[p,g]of l.structIterator()){let h=g.getMemberTraits();if(h.httpPayload){if(a=!1,g.isStreaming())g.isStructSchema()?i[p]=await this.deserializeEventStream({response:n,responseSchema:l}):i[p]=(0,xE.sdkStreamMixin)(n.body);else if(n.body){let R=await _t(n.body,r);R.byteLength>0&&(i[p]=await u.read(g,R))}}else if(h.httpHeader){let S=String(h.httpHeader).toLowerCase(),R=n.headers[S];if(R!=null)if(g.isListSchema()){let x=g.getValueSchema();x.getMergedTraits().httpHeader=S;let I;x.isTimestampSchema()&&x.getSchema()===4?I=Uf(R,",",2):I=Eo(R);let D=[];for(let k of I)D.push(await u.read(x,k.trim()));i[p]=D}else i[p]=await u.read(g,R)}else if(h.httpPrefixHeaders!==void 0){i[p]={};for(let[S,R]of Object.entries(n.headers))if(S.startsWith(h.httpPrefixHeaders)){let x=g.getValueSchema();x.getMergedTraits().httpHeader=S,i[p][S.slice(h.httpPrefixHeaders.length)]=await u.read(x,R)}}else h.httpResponseCode?i[p]=n.statusCode:m.push(p)}return m.discardResponseBody=a,m}}});var PE,lr,OE=w(()=>{c();ae();PE=T(me());aa();Aa();lr=class extends Tn{async serializeRequest(t,r,n){let s=this.serializer,o={},i={},a=await n.endpoint(),u=$.of(t?.input),l=u.getSchema(),m,p=new PE.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(p,a),this.setHostPrefix(p,t,r));let g={...r};if(r){let h=u.getEventStreamMember();if(h){if(g[h]){let S={};for(let[R,x]of u.structIterator())R!==h&&g[R]&&(s.write(x,g[R]),S[R]=s.flush());m=await this.serializeEventStream({eventStream:g[h],requestSchema:u,initialRequest:S})}}else s.write(l,g),m=s.flush()}return p.headers=i,p.query=o,p.body=m,p.method="POST",p}async deserializeResponse(t,r,n){let s=this.deserializer,o=$.of(t.output),i={};if(n.statusCode>=300){let u=await _t(n.body,r);throw u.byteLength>0&&Object.assign(i,await s.read(15,u)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let u in n.headers){let l=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=l}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:o,initialResponseContainer:i});else{let u=await _t(n.body,r);u.byteLength>0&&Object.assign(i,await s.read(o,u))}return i.$metadata=this.deserializeMetadata(n),i}}});var Bf,jf=w(()=>{c();ca();Bf=(e,t,r,n,s,o)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,o?i.split("/").map(a=>Vt(a)).join("/"):Vt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function Hf(e,t){return new Ra(e,t)}var NE,Ra,DE=w(()=>{c();NE=T(me());jf();Ra=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let o of this.resolvePathStack)o(this.path);return new NE.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,s){return this.resolvePathStack.push(o=>{this.path=Bf(o,this.input,t,r,n,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});var ME=O(va=>{"use strict";c();Object.defineProperty(va,"__esModule",{value:!0});va.fromBase64=void 0;var b1=wt(),T1=/^[A-Za-z0-9+/]*={0,2}$/,A1=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!T1.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,b1.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};va.fromBase64=A1});var kE=O(Ca=>{"use strict";c();Object.defineProperty(Ca,"__esModule",{value:!0});Ca.toBase64=void 0;var R1=wt(),v1=Ie(),C1=e=>{let t;if(typeof e=="string"?t=(0,v1.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,R1.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Ca.toBase64=C1});var xa=O(wo=>{"use strict";c();var $E=ME(),LE=kE();Object.keys($E).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(wo,e)&&Object.defineProperty(wo,e,{enumerable:!0,get:function(){return $E[e]}})});Object.keys(LE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(wo,e)&&Object.defineProperty(wo,e,{enumerable:!0,get:function(){return LE[e]}})})});function ht(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:o}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||s?6:o||r?5:void 0:void 0)??t.timestampFormat.default}var Ia=w(()=>{c()});var zf,UE,Rn,Vf=w(()=>{c();ae();nt();zf=T(xa()),UE=T(Ie());us();Ia();Rn=class extends st{settings;constructor(t){super(),this.settings=t}read(t,r){let n=$.of(t);if(n.isListSchema())return Eo(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??zf.fromBase64)(r);if(n.isTimestampSchema())switch(ht(n,this.settings)){case 5:return $f(r);case 6:return Lf(r);case 7:return cs(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,o=r;if(s)return n.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(s==="application/json"||s.endsWith("+json"))&&(o=rt.from(o)),o}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new _e(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??UE.toUtf8)((this.serdeContext?.base64Decoder??zf.fromBase64)(t))}}});var Pa,vn,FE=w(()=>{c();ae();Pa=T(Ie());us();Vf();vn=class extends st{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new Rn(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=$.of(t),s=n.getMergedTraits(),o=this.serdeContext?.utf8Encoder??Pa.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(s.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??Pa.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}});var Qf,_o,Kf=w(()=>{c();ae();nt();Qf=T(xa());us();Ia();_o=class extends st{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let n=$.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(ht(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=go(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Qf.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let u=this.flush(),l=n.getValueSchema().isTimestampSchema()?u:Nf(u);i!==""&&(i+=", "),i+=l}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,o=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(o=rt.from(o)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Qf.toBase64)(o.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,bt.v4)():this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Cn,qE=w(()=>{c();ae();Kf();Cn=class{codecSerializer;stringSerializer;buffer;constructor(t,r,n=new _o(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=$.of(t),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var BE={};lt(BE,{FromStringShapeDeserializer:()=>Rn,HttpBindingProtocol:()=>An,HttpInterceptingShapeDeserializer:()=>vn,HttpInterceptingShapeSerializer:()=>Cn,HttpProtocol:()=>Tn,RequestBuilder:()=>Ra,RpcProtocol:()=>lr,SerdeContext:()=>st,ToStringShapeSerializer:()=>_o,collectBody:()=>_t,determineTimestampFormat:()=>ht,extendedEncodeURIComponent:()=>Vt,requestBuilder:()=>Hf,resolvedPath:()=>Bf});var dt=w(()=>{c();aa();ca();IE();Aa();OE();DE();jf();Vf();FE();qE();Kf();Ia();us()});var K=O(pe=>{"use strict";c();var zE=Jg(),rp=(dt(),re(BE)),Wf=Ir(),x1=(ae(),re(ma)),jE=(nt(),re(TE)),Yf=class{config;middlewareStack=zE.constructStack();initConfig;handlers;constructor(t){this.config=t;let{protocol:r,protocolSettings:n}=t;n&&typeof r=="function"&&(t.protocol=new r(n))}send(t,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=s===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let u=this.handlers;u.has(t.constructor)?a=u.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),u.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(t).then(u=>o(null,u.output),u=>o(u)).catch(()=>{});else return a(t).then(u=>u.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Gf="***SensitiveInformation***";function Xf(e,t){if(t==null)return t;let r=x1.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return Gf;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Gf}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Gf}else if(r.isStructSchema()&&typeof t=="object"){let n=t,s={};for(let[o,i]of r.structIterator())n[o]!=null&&(s[o]=Xf(i,n[o]));return s}return t}var Oa=class{middlewareStack=zE.constructStack();schema;static classBuilder(){return new Jf}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:l,additionalContext:m,CommandCtor:p}){for(let x of s.bind(this)(p,t,r,n))this.middlewareStack.use(x);let g=t.concat(this.middlewareStack),{logger:h}=r,S={logger:h,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[Wf.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...m},{requestHandler:R}=r;return g.resolve(x=>R.handle(x.request,n||{}),S)}},Jf=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends Oa{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,s,o){let i=t._operationSchema,a=i?.[4]??i?.input,u=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,s,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?Xf.bind(null,a):l=>l),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?Xf.bind(null,u):l=>l),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},I1="***SensitiveInformation***",P1=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],s=async function(i,a,u){let l=new n(i);if(typeof a=="function")this.send(l,a);else if(typeof u=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},u)}else return this.send(l,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=s}},Zf=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},VE=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},QE=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let s=N1(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||o||"UnknownError",$fault:"client",$metadata:s});throw VE(i,t)},O1=e=>({output:t,parsedBody:r,errorCode:n})=>{QE({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},N1=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),D1=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},HE=!1,M1=e=>{e&&!HE&&parseInt(e.substring(1,e.indexOf(".")))<16&&(HE=!0)},k1=e=>{let t=[];for(let r in Wf.AlgorithmId){let n=Wf.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},$1=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},L1=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),U1=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},KE=e=>Object.assign(k1(e),L1(e)),F1=KE,q1=e=>Object.assign($1(e),U1(e)),B1=e=>Array.isArray(e)?e:[e],GE=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=GE(e[r]));return e},j1=e=>e!=null,ep=class{trace(){}debug(){}info(){}warn(){}error(){}};function WE(e,t,r){let n,s,o;if(typeof t>"u"&&typeof r>"u")n={},o=e;else{if(n=e,typeof t=="function")return s=t,o=r,V1(n,s,o);o=t}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}YE(n,null,o,i)}return n}var H1=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},z1=(e,t)=>{let r={};for(let n in t)YE(r,e,t,n);return r},V1=(e,t,r)=>WE(e,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[t,o()]:n[s]=[t,o],n),{})),YE=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=Q1,u=K1,l=n]=i;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=u(t[l]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,u=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=i:u&&(e[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(e[n]=o)}},Q1=e=>e!=null,K1=e=>e,G1=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},W1=e=>e.toISOString().replace(".000Z","Z"),tp=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(tp);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=tp(e[r]));return t}return e};Object.defineProperty(pe,"collectBody",{enumerable:!0,get:function(){return rp.collectBody}});Object.defineProperty(pe,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return rp.extendedEncodeURIComponent}});Object.defineProperty(pe,"resolvedPath",{enumerable:!0,get:function(){return rp.resolvedPath}});pe.Client=Yf;pe.Command=Oa;pe.NoOpLogger=ep;pe.SENSITIVE_STRING=I1;pe.ServiceException=Zf;pe._json=tp;pe.convertMap=H1;pe.createAggregatedClient=P1;pe.decorateServiceException=VE;pe.emitWarningIfUnsupportedVersion=M1;pe.getArrayIfSingleItem=B1;pe.getDefaultClientConfiguration=F1;pe.getDefaultExtensionConfiguration=KE;pe.getValueFromTextNode=GE;pe.isSerializableHeaderValue=j1;pe.loadConfigsForDefaultMode=D1;pe.map=WE;pe.resolveDefaultRuntimeConfig=q1;pe.serializeDateTime=W1;pe.serializeFloat=G1;pe.take=z1;pe.throwDefaultError=QE;pe.withBaseException=O1;Object.keys(jE).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(pe,e)&&Object.defineProperty(pe,e,{enumerable:!0,get:function(){return jE[e]}})})});var ow=O(ft=>{"use strict";c();var Y1=K(),np=ra(),sp=Ie(),X1=e=>Object.assign(e,{useQueueUrlAsEndpoint:e.useQueueUrlAsEndpoint??!0});function XE({useQueueUrlAsEndpoint:e,endpoint:t}){return(r,n)=>async s=>{let{input:o}=s,i=n.endpointV2;if(!t&&o.QueueUrl&&i&&e){let a=n.logger instanceof Y1.NoOpLogger||!n.logger?.warn?console:n.logger;try{let u=new URL(o.QueueUrl),l=new URL(u.origin);i.url.origin!==l.origin&&(a.warn(`QueueUrl=${o.QueueUrl} differs from SQSClient resolved endpoint=${i.url.toString()}, using QueueUrl host as endpoint.
Set [endpoint=string] or [useQueueUrlAsEndpoint=false] on the SQSClient.`),n.endpointV2={...i,url:l})}catch(u){a.warn(u)}}return r(s)}}var JE={name:"queueUrlMiddleware",relation:"after",toMiddleware:"endpointV2Middleware",override:!0},J1=e=>({applyToStack:t=>{t.addRelativeTo(XE(e),JE)}});function ZE(e){return t=>async r=>{let n=await t({...r});if(e.md5===!1)return n;let s=n.output,o=[];if(s.Messages!==void 0)for(let i of s.Messages){let a=i.MD5OfBody,u=new e.md5;u.update(sp.toUint8Array(i.Body||"")),a!==np.toHex(await u.digest())&&o.push(i.MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return n}}var ew={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"receiveMessageMiddleware",override:!0},Z1=e=>({applyToStack:t=>{t.add(ZE(e),ew)}}),tw=e=>t=>async r=>{let n=await t({...r});if(e.md5===!1)return n;let s=n.output,o=new e.md5;if(o.update(sp.toUint8Array(r.input.MessageBody||"")),s.MD5OfMessageBody!==np.toHex(await o.digest()))throw new Error("InvalidChecksumError");return n},rw={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageMiddleware",override:!0},e$=e=>({applyToStack:t=>{t.add(tw(e),rw)}}),nw=e=>t=>async r=>{let n=await t({...r});if(e.md5===!1)return n;let s=n.output,o=[],i={};if(s.Successful!==void 0)for(let a of s.Successful)a.Id!==void 0&&(i[a.Id]=a);for(let a of r.input.Entries)if(i[a.Id]){let u=i[a.Id].MD5OfMessageBody,l=new e.md5;l.update(sp.toUint8Array(a.MessageBody||"")),u!==np.toHex(await l.digest())&&o.push(i[a.Id].MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return n},sw={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageBatchMiddleware",override:!0},t$=e=>({applyToStack:t=>{t.add(nw(e),sw)}});ft.getQueueUrlPlugin=J1;ft.getReceiveMessagePlugin=Z1;ft.getSendMessageBatchPlugin=t$;ft.getSendMessagePlugin=e$;ft.queueUrlMiddleware=XE;ft.queueUrlMiddlewareOptions=JE;ft.receiveMessageMiddleware=ZE;ft.receiveMessageMiddlewareOptions=ew;ft.resolveQueueUrlConfig=X1;ft.sendMessageBatchMiddleware=nw;ft.sendMessageBatchMiddlewareOptions=sw;ft.sendMessageMiddleware=tw;ft.sendMessageMiddlewareOptions=rw});var op,r$,iw=w(()=>{c();op=T(Ir()),r$=e=>e[op.SMITHY_CONTEXT_KEY]||(e[op.SMITHY_CONTEXT_KEY]={})});var aw,cw=w(()=>{c();aw=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let s of e)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of e)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function n$(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var uw,bo,Na=w(()=>{c();uw=T(tt());cw();bo=(e,t)=>(r,n)=>async s=>{let o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,s.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=aw(o,i),u=n$(e.httpAuthSchemes),l=(0,uw.getSmithyContext)(n),m=[];for(let p of a){let g=u.get(p.schemeId);if(!g){m.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}let h=g.identityProvider(await t.identityProviderConfigProvider(e));if(!h){m.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:S={},signingProperties:R={}}=p.propertiesExtractor?.(e,n)||{};p.identityProperties=Object.assign(p.identityProperties||{},S),p.signingProperties=Object.assign(p.signingProperties||{},R),l.selectedHttpAuthScheme={httpAuthOption:p,identity:await h(p.identityProperties),signer:g.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(m.join(`
`));return r(s)}});var lw,xn,dw=w(()=>{c();Na();lw={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},xn=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(bo(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),lw)}})});var ap=O(ls=>{"use strict";c();var s$=me(),fw=(e,t)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(s$.HttpResponse.isInstance(o)){let{headers:u={}}=o,l=Object.entries(u);i.$metadata={httpStatusCode:o.statusCode,requestId:ip(/^x-[\w-]+-request-?id$/,l),extendedRequestId:ip(/^x-[\w-]+-id-2$/,l),cfId:ip(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},ip=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],pw=(e,t)=>(r,n)=>async s=>{let o=e,i=n.endpointV2?.url&&o.urlParser?async()=>o.urlParser(n.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(s.input,{...e,endpoint:i});return r({...s,request:a})},mw={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},hw={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function o$(e,t,r){return{applyToStack:n=>{n.add(fw(e,r),mw),n.add(pw(e,t),hw)}}}ls.deserializerMiddleware=fw;ls.deserializerMiddlewareOption=mw;ls.getSerdePlugin=o$;ls.serializerMiddleware=pw;ls.serializerMiddlewareOption=hw});var gw,yw,i$,Sw=w(()=>{c();gw=T(ap());Na();yw={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:gw.serializerMiddlewareOption.name},i$=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(bo(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),yw)}})});var Ew=w(()=>{c();Na();dw();Sw()});var ww,_w,a$,c$,cp,up=w(()=>{c();ww=T(me()),_w=T(tt()),a$=e=>t=>{throw t},c$=(e,t)=>{},cp=e=>(t,r)=>async n=>{if(!ww.HttpRequest.isInstance(n.request))return t(n);let o=(0,_w.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:u}=o,l=await t({...n,request:await u.sign(n.request,a,i)}).catch((u.errorHandler||a$)(i));return(u.successHandler||c$)(l.response,i),l}});var bw,In,Tw=w(()=>{c();up();bw={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},In=e=>({applyToStack:t=>{t.addRelativeTo(cp(e),bw)}})});var Aw=w(()=>{c();up();Tw()});var Mr,Rw=w(()=>{c();Mr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function vw(e,t,r,n,s){return async function*(i,a,...u){let l=a,m=i.startingToken??l[r],p=!0,g;for(;p;){if(l[r]=m,s&&(l[s]=l[s]??i.pageSize),i.client instanceof e)g=await u$(t,i.client,a,i.withCommand,...u);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield g;let h=m;m=l$(g,n),p=!!(m&&(!i.stopOnSameToken||m!==h))}return void 0}}var u$,l$,Cw=w(()=>{c();u$=async(e,t,r,n=o=>o,...s)=>{let o=new e(r);return o=n(o)??o,await t.send(o,...s)};l$=(e,t)=>{let r=e,n=t.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var xw=w(()=>{c();dt()});function d$(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var Iw=w(()=>{c()});var dr,Pw=w(()=>{c();dr=class{authSchemes=new Map;constructor(t){for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var Ow,lp,dp,Nw=w(()=>{c();Ow=T(me()),lp=T(Ir()),dp=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=Ow.HttpRequest.clone(t);if(n.in===lp.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===lp.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var Dw,fp,Mw=w(()=>{c();Dw=T(me()),fp=class{async sign(t,r,n){let s=Dw.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var kt,kw=w(()=>{c();kt=class{async sign(t,r,n){return t}}});var $w=w(()=>{c();Nw();Mw();kw()});var Lw,f$,pp,Da,mp,Uw=w(()=>{c();Lw=e=>function(r){return Da(r)&&r.expiration.getTime()-Date.now()<e},f$=3e5,pp=Lw(3e5),Da=e=>e.expiration!==void 0,mp=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,s,o,i,a=!1,u=async l=>{o||(o=n(l));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return t===void 0?async l=>((!i||l?.forceRefresh)&&(s=await u(l)),s):async l=>((!i||l?.forceRefresh)&&(s=await u(l)),a?s:r(s)?(t(s)&&await u(l),s):(a=!0,s))}});var Fw=w(()=>{c();Pw();$w();Uw()});var ds={};lt(ds,{DefaultIdentityProviderConfig:()=>dr,EXPIRATION_MS:()=>f$,HttpApiKeyAuthSigner:()=>dp,HttpBearerAuthSigner:()=>fp,NoAuthSigner:()=>kt,createIsIdentityExpiredFunction:()=>Lw,createPaginator:()=>vw,doesIdentityRequireRefresh:()=>Da,getHttpAuthSchemeEndpointRuleSetPlugin:()=>xn,getHttpAuthSchemePlugin:()=>i$,getHttpSigningPlugin:()=>In,getSmithyContext:()=>r$,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>lw,httpAuthSchemeMiddleware:()=>bo,httpAuthSchemeMiddlewareOptions:()=>yw,httpSigningMiddleware:()=>cp,httpSigningMiddlewareOptions:()=>bw,isIdentityExpired:()=>pp,memoizeIdentityProvider:()=>mp,normalizeProvider:()=>Mr,requestBuilder:()=>Hf,setFeature:()=>d$});var ot=w(()=>{c();iw();Ew();Aw();Rw();Cw();xw();Iw();Fw()});var $r=O(Pn=>{"use strict";c();var gp=Ir(),yp=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),o=0;for(;;){let{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let o=String(t[s]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},p$=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),qw=e=>p$.test(e)||e.startsWith("[")&&e.endsWith("]"),m$=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ep=(e,t=!1)=>{if(!t)return m$.test(e);let r=e.split(".");for(let n of r)if(!Ep(n))return!1;return!0},Sp={},To="endpoints";function kr(e){return typeof e!="object"||e==null?e:"ref"in e?`$${kr(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(kr).join(", ")})`:JSON.stringify(e,null,2)}var Ve=class extends Error{constructor(t){super(t),this.name="EndpointError"}},h$=(e,t)=>e===t,g$=e=>{let t=e.split("."),r=[];for(let n of t){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Ve(`Path: '${e}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new Ve(`Invalid array index: '${o}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r},Bw=(e,t)=>g$(t).reduce((r,n)=>{if(typeof r!="object")throw new Ve(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),y$=e=>e!=null,S$=e=>!e,hp={[gp.EndpointURLScheme.HTTP]:80,[gp.EndpointURLScheme.HTTPS]:443},E$=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:g,port:h,protocol:S="",path:R="",query:x={}}=e,I=new URL(`${S}//${g}${h?`:${h}`:""}${R}`);return I.search=Object.entries(x).map(([D,k])=>`${D}=${k}`).join("&"),I}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=t;if(a)return null;let u=i.slice(0,-1);if(!Object.values(gp.EndpointURLScheme).includes(u))return null;let l=qw(s),m=r.includes(`${n}:${hp[u]}`)||typeof e=="string"&&e.includes(`${n}:${hp[u]}`),p=`${n}${m?`:${hp[u]}`:""}`;return{scheme:u,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},w$=(e,t)=>e===t,_$=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),b$=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),T$={booleanEquals:h$,getAttr:Bw,isSet:y$,isValidHostLabel:Ep,not:S$,parseURL:E$,stringEquals:w$,substring:_$,uriEncode:b$},jw=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},s=0;for(;s<e.length;){let o=e.indexOf("{",s);if(o===-1){r.push(e.slice(s));break}r.push(e.slice(s,o));let i=e.indexOf("}",o);if(i===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(o+1,i)),s=i+2);let a=e.substring(o+1,i);if(a.includes("#")){let[u,l]=a.split("#");r.push(Bw(n[u],l))}else r.push(n[a]);s=i+1}return r.join("")},A$=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Ma=(e,t,r)=>{if(typeof e=="string")return jw(e,r);if(e.fn)return zw.callFunction(e,r);if(e.ref)return A$(e,r);throw new Ve(`'${t}': ${String(e)} is not a string, function or reference.`)},Hw=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:zw.evaluateExpression(o,"arg",r)),s=e.split(".");return s[0]in Sp&&s[1]!=null?Sp[s[0]][s[1]](...n):T$[e](...n)},zw={evaluateExpression:Ma,callFunction:Hw},R$=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ve(`'${e}' is already defined in Reference Record.`);let n=Hw(t,r);return r.logger?.debug?.(`${To} evaluateCondition: ${kr(t)} = ${kr(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},wp=(e=[],t)=>{let r={};for(let n of e){let{result:s,toAssign:o}=R$(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!s)return{result:s};o&&(r[o.name]=o.value,t.logger?.debug?.(`${To} assign: ${o.name} := ${kr(o.value)}`))}return{result:!0,referenceRecord:r}},v$=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=Ma(o,"Header value entry",t);if(typeof i!="string")throw new Ve(`Header '${n}' value '${i}' is not a string`);return i})}),{}),Vw=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:Kw.getEndpointProperty(s,t)}),{}),Qw=(e,t)=>{if(Array.isArray(e))return e.map(r=>Qw(r,t));switch(typeof e){case"string":return jw(e,t);case"object":if(e===null)throw new Ve(`Unexpected endpoint property: ${e}`);return Kw.getEndpointProperties(e,t);case"boolean":return e;default:throw new Ve(`Unexpected endpoint property type: ${typeof e}`)}},Kw={getEndpointProperty:Qw,getEndpointProperties:Vw},C$=(e,t)=>{let r=Ma(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Ve(`Endpoint URL must be a string, got ${typeof r}`)},x$=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:s,referenceRecord:o}=wp(r,t);if(!s)return;let i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:u,headers:l}=n;return t.logger?.debug?.(`${To} Resolving endpoint from template: ${kr(n)}`),{...l!=null&&{headers:v$(l,i)},...u!=null&&{properties:Vw(u,i)},url:C$(a,i)}},I$=(e,t)=>{let{conditions:r,error:n}=e,{result:s,referenceRecord:o}=wp(r,t);if(s)throw new Ve(Ma(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},Gw=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=x$(r,t);if(n)return n}else if(r.type==="error")I$(r,t);else if(r.type==="tree"){let n=Ww.evaluateTreeRule(r,t);if(n)return n}else throw new Ve(`Unknown endpoint rule: ${r}`);throw new Ve("Rules evaluation failed")},P$=(e,t)=>{let{conditions:r,rules:n}=e,{result:s,referenceRecord:o}=wp(r,t);if(s)return Ww.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...o}})},Ww={evaluateRules:Gw,evaluateTreeRule:P$},O$=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:s,rules:o}=e;t.logger?.debug?.(`${To} Initial EndpointParams: ${kr(r)}`);let i=Object.entries(s).filter(([,l])=>l.default!=null).map(([l,m])=>[l,m.default]);if(i.length>0)for(let[l,m]of i)r[l]=r[l]??m;let a=Object.entries(s).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new Ve(`Missing required parameter: '${l}'`);let u=Gw(o,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${To} Resolved endpoint: ${kr(u)}`),u};Pn.EndpointCache=yp;Pn.EndpointError=Ve;Pn.customEndpointFunctions=Sp;Pn.isIpAddress=qw;Pn.isValidHostLabel=Ep;Pn.resolveEndpoint=O$});var Xw=O(Yw=>{"use strict";c();function N$(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}Yw.parseQueryString=N$});var fr=O(Zw=>{"use strict";c();var D$=Xw(),Jw=e=>{if(typeof e=="string")return Jw(new URL(e));let{hostname:t,pathname:r,port:n,protocol:s,search:o}=e,i;return o&&(i=D$.parseQueryString(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};Zw.parseUrl=Jw});var On=O($t=>{"use strict";c();var fs=$r(),M$=fr(),t_=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!t_(r))return!1;return!0}return!(!fs.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||fs.isIpAddress(e))},e_=":",k$="/",$$=e=>{let t=e.split(e_);if(t.length<6)return null;let[r,n,s,o,i,...a]=t;if(r!=="arn"||n===""||s===""||a.join(e_)==="")return null;let u=a.map(l=>l.split(k$)).flat();return{partition:n,service:s,region:o,accountId:i,resourceId:u}},L$=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],U$="1.1",r_={partitions:L$,version:U$},n_=r_,s_="",o_=e=>{let{partitions:t}=n_;for(let n of t){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===e)return{...o,...a}}for(let n of t){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(e))return{...o}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},i_=(e,t="")=>{n_=e,s_=t},F$=()=>{i_(r_,"")},q$=()=>s_,a_={isVirtualHostableS3Bucket:t_,parseArn:$$,partition:o_};fs.customEndpointFunctions.aws=a_;var B$=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>c_(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},c_=e=>M$.parseUrl(e.url);Object.defineProperty($t,"EndpointError",{enumerable:!0,get:function(){return fs.EndpointError}});Object.defineProperty($t,"isIpAddress",{enumerable:!0,get:function(){return fs.isIpAddress}});Object.defineProperty($t,"resolveEndpoint",{enumerable:!0,get:function(){return fs.resolveEndpoint}});$t.awsEndpointFunctions=a_;$t.getUserAgentPrefix=q$;$t.partition=o_;$t.resolveDefaultAwsRegionalEndpointsConfig=B$;$t.setPartitionInfo=i_;$t.toEndpointV1=c_;$t.useDefaultPartitionInfo=F$});var ka,Lr,u_=w(()=>{c();ka={warningEmitted:!1},Lr=e=>{e&&!ka.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<20&&(ka.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${e} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function Ur(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var l_=w(()=>{c()});function d_(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var f_=w(()=>{c()});function p_(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var m_=w(()=>{c()});var pr={};lt(pr,{emitWarningIfUnsupportedVersion:()=>Lr,setCredentialFeature:()=>Ur,setFeature:()=>d_,setTokenFeature:()=>p_,state:()=>ka});var Tt=w(()=>{c();u_();l_();f_();m_()});var h_,_p,g_=w(()=>{c();h_=T(me()),_p=e=>h_.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var ps,bp=w(()=>{c();ps=e=>new Date(Date.now()+e)});var y_,S_=w(()=>{c();bp();y_=(e,t)=>Math.abs(ps(t).getTime()-e)>=3e5});var Tp,E_=w(()=>{c();S_();Tp=(e,t)=>{let r=Date.parse(e);return y_(r,t)?r-Date.now():t}});var Ap=w(()=>{c();g_();bp();E_()});var w_,Ao,ms,Qe,Rp,vp=w(()=>{c();w_=T(me());Ap();Ao=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},ms=async e=>{let t=Ao("context",e.context),r=Ao("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],o=await Ao("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,u=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:u}},Qe=class{async sign(t,r,n){if(!w_.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await ms(n),{config:o,signer:i}=s,{signingRegion:a,signingName:u}=s,l=n.context;if(l?.authSchemes?.length??!1){let[p,g]=l.authSchemes;p?.name==="sigv4a"&&g?.name==="sigv4"&&(a=g?.signingRegion??a,u=g?.signingName??u)}return await i.sign(t,{signingDate:ps(o.systemClockOffset),signingRegion:a,signingService:u})}errorHandler(t){return r=>{let n=r.ServerTime??_p(r.$response);if(n){let s=Ao("config",t.config),o=s.systemClockOffset;s.systemClockOffset=Tp(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=_p(t);if(n){let s=Ao("config",r.config);s.systemClockOffset=Tp(n,s.systemClockOffset)}}},Rp=Qe});var __,Ro,b_=w(()=>{c();__=T(me());Ap();vp();Ro=class extends Qe{async sign(t,r,n){if(!__.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:u}=await ms(n),m=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:ps(s.systemClockOffset),signingRegion:m,signingService:u})}}});var Cp,T_=w(()=>{c();Cp=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var $a,xp=w(()=>{c();$a=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var A_,R_,Fr,v_=w(()=>{c();T_();xp();A_="AWS_AUTH_SCHEME_PREFERENCE",R_="auth_scheme_preference",Fr={environmentVariableSelector:(e,t)=>{if(t?.signingName&&$a(t.signingName)in e)return["httpBearerAuth"];if(A_ in e)return Cp(e[A_])},configFileSelector:e=>{if(R_ in e)return Cp(e[R_])},default:[]}});var Ke=O(Nn=>{"use strict";c();var hs=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(t),this.tryNextLink=s,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},Ip=class e extends hs{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},Pp=class e extends hs{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},j$=(...e)=>async()=>{if(e.length===0)throw new hs("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},H$=e=>()=>Promise.resolve(e),z$=(e,t,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=e());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return t===void 0?async u=>((!o||u?.forceRefresh)&&(n=await a()),n):async u=>((!o||u?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};Nn.CredentialsProviderError=Ip;Nn.ProviderError=hs;Nn.TokenProviderError=Pp;Nn.chain=j$;Nn.fromStatic=H$;Nn.memoize=z$});var Op,C_,x_,I_=w(()=>{c();ot();Op=T(Ke()),C_=e=>(e.sigv4aSigningRegionSet=Mr(e.sigv4aSigningRegionSet),e),x_={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Op.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Op.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var O_=O(Np=>{"use strict";c();var P_=e=>encodeURIComponent(e).replace(/[!'()*]/g,V$),V$=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,Q$=e=>e.split("/").map(P_).join("/");Np.escapeUri=P_;Np.escapeUriPath=Q$});var tb=O(Q=>{"use strict";c();var qr=ra(),Dn=Ie(),K$=Nd(),k_=me(),N_=tt(),La=O_(),$_="X-Amz-Algorithm",L_="X-Amz-Credential",Up="X-Amz-Date",U_="X-Amz-SignedHeaders",F_="X-Amz-Expires",Fp="X-Amz-Signature",qp="X-Amz-Security-Token",G$="X-Amz-Region-Set",Bp="authorization",jp=Up.toLowerCase(),q_="date",B_=[Bp,jp,q_],j_=Fp.toLowerCase(),ja="x-amz-content-sha256",H_=qp.toLowerCase(),W$="host",z_={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},V_=/^proxy-/,Q_=/^sec-/,Y$=[/^proxy-/i,/^sec-/i],Ua="AWS4-HMAC-SHA256",X$="AWS4-ECDSA-P256-SHA256",K_="AWS4-HMAC-SHA256-PAYLOAD",G_="UNSIGNED-PAYLOAD",W_=50,Hp="aws4_request",Y_=60*60*24*7,gs={},Fa=[],qa=(e,t,r)=>`${e}/${t}/${r}/${Hp}`,X_=async(e,t,r,n,s)=>{let o=await D_(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${s}:${qr.toHex(o)}:${t.sessionToken}`;if(i in gs)return gs[i];for(Fa.push(i);Fa.length>W_;)delete gs[Fa.shift()];let a=`AWS4${t.secretAccessKey}`;for(let u of[r,n,s,Hp])a=await D_(e,a,u);return gs[i]=a},J$=()=>{Fa.length=0,Object.keys(gs).forEach(e=>{delete gs[e]})},D_=(e,t,r)=>{let n=new e(t);return n.update(Dn.toUint8Array(r)),n.digest()},Dp=({headers:e},t,r)=>{let n={};for(let s of Object.keys(e).sort()){if(e[s]==null)continue;let o=s.toLowerCase();(o in z_||t?.has(o)||V_.test(o)||Q_.test(o))&&(!r||r&&!r.has(o))||(n[o]=e[s].trim().replace(/\s+/g," "))}return n},Ba=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===ja)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||K$.isArrayBuffer(t)){let n=new r;return n.update(Dn.toUint8Array(t)),qr.toHex(await n.digest())}return G_},Mp=class{format(t){let r=[];for(let o of Object.keys(t)){let i=Dn.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":let a=Dn.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);let l=new Uint8Array(u.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(kp.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!Z$.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(qr.fromHex(t.value.replace(/\-/g,"")),1),p}}},Z$=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,kp=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&M_(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&M_(t),parseInt(qr.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function M_(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var J_=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Z_=(e,t={})=>{let{headers:r,query:n={}}=k_.HttpRequest.clone(e);for(let s of Object.keys(r)){let o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}},$p=e=>{e=k_.HttpRequest.clone(e);for(let t of Object.keys(e.headers))B_.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},eb=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===j_)continue;let s=La.escapeUri(n);t.push(s);let o=e[n];typeof o=="string"?r[s]=`${s}=${La.escapeUri(o)}`:Array.isArray(o)&&(r[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${La.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},eL=e=>tL(e).toISOString().replace(/\.\d{3}Z$/,"Z"),tL=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,Ha=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=N_.normalizeProvider(n),this.credentialProvider=N_.normalizeProvider(r)}createCanonicalRequest(t,r,n){let s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${eb(t)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n,s){let o=new this.sha256;o.update(Dn.toUint8Array(n));let i=await o.digest();return`${s}
${t}
${r}
${qr.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return La.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=eL(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},Lp=class extends Ha{headerFormatter=new Mp;constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i})}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:u,signingRegion:l,signingService:m}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let g=l??await this.regionProvider(),{longDate:h,shortDate:S}=this.formatDate(n);if(s>Y_)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let R=qa(S,g,m??this.service),x=Z_($p(t),{unhoistableHeaders:i,hoistableHeaders:u});p.sessionToken&&(x.query[qp]=p.sessionToken),x.query[$_]=Ua,x.query[L_]=`${p.accessKeyId}/${R}`,x.query[Up]=h,x.query[F_]=s.toString(10);let I=Dp(x,o,a);return x.query[U_]=this.getCanonicalHeaderList(I),x.query[Fp]=await this.getSignature(h,R,this.getSigningKey(p,g,S,m),this.createCanonicalRequest(x,I,await Ba(t,this.sha256))),x}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:u,longDate:l}=this.formatDate(n),m=qa(u,a,i??this.service),p=await Ba({headers:{},body:r},this.sha256),g=new this.sha256;g.update(t);let h=qr.toHex(await g.digest()),S=[K_,l,m,s,h,p].join(`
`);return this.signString(S,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(o,i,a,s));return u.update(Dn.toUint8Array(t)),qr.toHex(await u.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let u=o??await this.regionProvider(),l=$p(t),{longDate:m,shortDate:p}=this.formatDate(r),g=qa(p,u,i??this.service);l.headers[jp]=m,a.sessionToken&&(l.headers[H_]=a.sessionToken);let h=await Ba(l,this.sha256);!J_(ja,l.headers)&&this.applyChecksum&&(l.headers[ja]=h);let S=Dp(l,s,n),R=await this.getSignature(m,g,this.getSigningKey(a,u,p,i),this.createCanonicalRequest(l,S,h));return l.headers[Bp]=`${Ua} Credential=${a.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(S)}, Signature=${R}`,l}async getSignature(t,r,n,s){let o=await this.createStringToSign(t,r,s,Ua),i=new this.sha256(await n);return i.update(Dn.toUint8Array(o)),qr.toHex(await i.digest())}getSigningKey(t,r,n,s){return X_(this.sha256,t,n,r,s||this.service)}},rL={SignatureV4a:null};Q.ALGORITHM_IDENTIFIER=Ua;Q.ALGORITHM_IDENTIFIER_V4A=X$;Q.ALGORITHM_QUERY_PARAM=$_;Q.ALWAYS_UNSIGNABLE_HEADERS=z_;Q.AMZ_DATE_HEADER=jp;Q.AMZ_DATE_QUERY_PARAM=Up;Q.AUTH_HEADER=Bp;Q.CREDENTIAL_QUERY_PARAM=L_;Q.DATE_HEADER=q_;Q.EVENT_ALGORITHM_IDENTIFIER=K_;Q.EXPIRES_QUERY_PARAM=F_;Q.GENERATED_HEADERS=B_;Q.HOST_HEADER=W$;Q.KEY_TYPE_IDENTIFIER=Hp;Q.MAX_CACHE_SIZE=W_;Q.MAX_PRESIGNED_TTL=Y_;Q.PROXY_HEADER_PATTERN=V_;Q.REGION_SET_PARAM=G$;Q.SEC_HEADER_PATTERN=Q_;Q.SHA256_HEADER=ja;Q.SIGNATURE_HEADER=j_;Q.SIGNATURE_QUERY_PARAM=Fp;Q.SIGNED_HEADERS_QUERY_PARAM=U_;Q.SignatureV4=Lp;Q.SignatureV4Base=Ha;Q.TOKEN_HEADER=H_;Q.TOKEN_QUERY_PARAM=qp;Q.UNSIGNABLE_PATTERNS=Y$;Q.UNSIGNED_PAYLOAD=G_;Q.clearCredentialCache=J$;Q.createScope=qa;Q.getCanonicalHeaders=Dp;Q.getCanonicalQuery=eb;Q.getPayloadHash=Ba;Q.getSigningKey=X_;Q.hasHeader=J_;Q.moveHeadersToQuery=Z_;Q.prepareRequest=$p;Q.signatureV4aContainer=rL});function nL(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=mp(t,pp,Da):r?n=Mr(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function sL(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var zp,mr,rb,nb=w(()=>{c();Tt();ot();zp=T(tb()),mr=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==n&&(r=!0),t=l;let m=nL(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),p=sL(e,m);if(r&&!p.attributed){let g=typeof t=="object"&&t!==null;n=async h=>{let R=await p(h);return g&&(!R.$source||Object.keys(R.$source).length===0)?Ur(R,"CREDENTIALS_CODE","e"):R},n.memoized=p.memoized,n.configBound=p.configBound,n.attributed=!0}else n=p},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:s=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Mr(e.signer):e.regionInfoProvider?a=()=>Mr(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,m])=>{let{signingRegion:p,signingService:g}=l;e.signingRegion=e.signingRegion||p||m,e.signingName=e.signingName||g||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},S=e.signerConstructor||zp.SignatureV4;return new S(h)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Mr(e.region)(),properties:{}},l);let m=l.signingRegion,p=l.signingName;e.signingRegion=e.signingRegion||m,e.signingName=e.signingName||p||e.serviceId;let g={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},h=e.signerConstructor||zp.SignatureV4;return new h(g)},Object.assign(e,{systemClockOffset:o,signingEscapePath:s,signer:a})},rb=mr});var sb=w(()=>{c();vp();b_();v_();I_();nb()});var ob={};lt(ob,{AWSSDKSigV4Signer:()=>Rp,AwsSdkSigV4ASigner:()=>Ro,AwsSdkSigV4Signer:()=>Qe,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Fr,NODE_SIGV4A_CONFIG_OPTIONS:()=>x_,getBearerTokenEnvKey:()=>$a,resolveAWSSDKSigV4Config:()=>rb,resolveAwsSdkSigV4AConfig:()=>C_,resolveAwsSdkSigV4Config:()=>mr,validateSigningProperties:()=>ms});var Vp=w(()=>{c();sb();xp()});function Br(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function za(e){return e[Qp]=!0,e}var Qp,Va=w(()=>{c();Qp=Symbol("@smithy/core/cbor::tagSymbol")});function cb(e){he=e,gr=new DataView(he.buffer,he.byteOffset,he.byteLength)}function Gt(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(he[e]&224)>>5,n=he[e]&31;switch(r){case 0:case 1:case 6:let s,o;if(n<24)s=n,o=1;else switch(n){case 24:case 25:case 26:case 27:let i=lb[n],a=i+1;if(o=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let u=e+1;i===1?s=he[u]:i===2?s=gr.getUint16(u):i===4?s=gr.getUint32(u):s=gr.getBigUint64(u);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return W=o,Kp(s);if(r===1){let i;return typeof s=="bigint"?i=BigInt(-1)-s:i=-1-s,W=o,Kp(i)}else if(n===2||n===3){let i=Io(e+o,t),a=BigInt(0),u=e+o+W;for(let l=u;l<u+i;++l)a=a<<BigInt(8)|BigInt(he[l]);return W=o+W+i,n===3?-a-BigInt(1):a}else if(n===4){let i=Gt(e+o,t),[a,u]=i,l=u<0?-1:1,m="0".repeat(Math.abs(a)+1)+String(BigInt(l)*BigInt(u)),p,g=u<0?"-":"";return p=a===0?m:m.slice(0,m.length+a)+"."+m.slice(a),p=p.replace(/^0+/g,""),p===""&&(p="0"),p[0]==="."&&(p="0"+p),p=g+p,W=o+W,Ff(p)}else{let i=Gt(e+o,t);return W=o+W,za({tag:Kp(s),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return dL(e,t);case 5:return gL(e,t);case 4:return mL(e,t);case 2:return fL(e,t)}else switch(r){case 3:return lL(e,t);case 5:return hL(e,t);case 4:return pL(e,t);case 2:return Zp(e,t)}default:return yL(e,t)}}function ub(e,t,r){return aL&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):ib?ib.decode(e.subarray(t,r)):(0,ab.toUtf8)(e.subarray(t,r))}function cL(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function uL(e,t){let r=e>>7,n=(e&124)>>2,s=(e&3)<<8|t,o=r===0?1:-1,i,a;if(n===0){if(s===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return s===0?o*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=s/1024,o*(i*a)}function Io(e,t){let r=he[e]&31;if(r<24)return W=1,r;if(r===24||r===25||r===26||r===27){let n=lb[r];if(W=n+1,t-e<W)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;return n===1?he[s]:n===2?gr.getUint16(s):n===4?gr.getUint32(s):cL(gr.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function lL(e,t){let r=Io(e,t),n=W;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=ub(he,e,e+r);return W=n+r,s}function dL(e,t){e+=1;let r=[];for(let n=e;e<t;){if(he[e]===255){let u=Br(r.length);return u.set(r,0),W=e-n+2,ub(u,0,u.length)}let s=(he[e]&224)>>5,o=he[e]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=Zp(e,t);e+=W;for(let u=0;u<i.length;++u)r.push(i[u])}throw new Error("expected break marker.")}function Zp(e,t){let r=Io(e,t),n=W;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=he.subarray(e,e+r);return W=n+r,s}function fL(e,t){e+=1;let r=[];for(let n=e;e<t;){if(he[e]===255){let u=Br(r.length);return u.set(r,0),W=e-n+2,u}let s=(he[e]&224)>>5,o=he[e]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=Zp(e,t);e+=W;for(let u=0;u<i.length;++u)r.push(i[u])}throw new Error("expected break marker.")}function pL(e,t){let r=Io(e,t),n=W;e+=n;let s=e,o=Array(r);for(let i=0;i<r;++i){let a=Gt(e,t),u=W;o[i]=a,e+=u}return W=n+(e-s),o}function mL(e,t){e+=1;let r=[];for(let n=e;e<t;){if(he[e]===255)return W=e-n+2,r;let s=Gt(e,t);e+=W,r.push(s)}throw new Error("expected break marker.")}function hL(e,t){let r=Io(e,t),n=W;e+=n;let s=e,o={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(he[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let u=Gt(e,t);e+=W;let l=Gt(e,t);e+=W,o[u]=l}return W=n+(e-s),o}function gL(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(he[e]===255)return W=e-r+2,n;let s=(he[e]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let o=Gt(e,t);e+=W;let i=Gt(e,t);e+=W,n[o]=i}throw new Error("expected break marker.")}function yL(e,t){let r=he[e]&31;switch(r){case 21:case 20:return W=1,r===21;case 22:return W=1,null;case 23:return W=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return W=3,uL(he[e+1],he[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return W=5,gr.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return W=9,gr.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Kp(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var ab,iL,aL,he,gr,ib,W,lb,db=w(()=>{c();nt();ab=T(Ie());Va();iL=typeof TextDecoder<"u",aL=typeof Buffer<"u",he=Br(0),gr=new DataView(he.buffer,he.byteOffset,he.byteLength),ib=iL?new TextDecoder:null,W=0;lb={[24]:1,[25]:2,[26]:4,[27]:8}});function tm(e){j.byteLength-L<e&&(L<16e6?Ka(Math.max(j.byteLength*4,j.byteLength+e)):Ka(j.byteLength+e+16e6))}function rm(){let e=Br(L);return e.set(j.subarray(0,L),0),L=0,e}function Ka(e){let t=j;j=Br(e),t&&(t.copy?t.copy(j,0,0,t.byteLength):j.set(t,0)),Er=new DataView(j.buffer,j.byteOffset,j.byteLength)}function Sr(e,t){t<24?j[L++]=e<<5|t:t<256?(j[L++]=e<<5|24,j[L++]=t):t<65536?(j[L++]=e<<5|25,Er.setUint16(L,t),L+=2):t<2**32?(j[L++]=e<<5|26,Er.setUint32(L,t),L+=4):(j[L++]=e<<5|27,Er.setBigUint64(L,typeof t=="bigint"?t:BigInt(t)),L+=8)}function mb(e){let t=[e];for(;t.length;){let r=t.pop();if(tm(typeof r=="string"?r.length*4:64),typeof r=="string"){if(fb)Sr(3,Buffer.byteLength(r)),L+=j.write(r,L);else{let n=(0,pb.fromUtf8)(r);Sr(3,n.byteLength),j.set(n,L),L+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,o=n?r:-r-1;o<24?j[L++]=s<<5|o:o<256?(j[L++]=s<<5|24,j[L++]=o):o<65536?(j[L++]=s<<5|25,j[L++]=o>>8,j[L++]=o):o<4294967296?(j[L++]=s<<5|26,Er.setUint32(L,o),L+=4):(j[L++]=s<<5|27,Er.setBigUint64(L,BigInt(o)),L+=8);continue}j[L++]=251,Er.setFloat64(L,r),L+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,o=n?r:-r-BigInt(1),i=Number(o);if(i<24)j[L++]=s<<5|i;else if(i<256)j[L++]=s<<5|24,j[L++]=i;else if(i<65536)j[L++]=s<<5|25,j[L++]=i>>8,j[L++]=i&255;else if(i<4294967296)j[L++]=s<<5|26,Er.setUint32(L,i),L+=4;else if(o<BigInt("18446744073709551616"))j[L++]=s<<5|27,Er.setBigUint64(L,o),L+=8;else{let a=o.toString(2),u=new Uint8Array(Math.ceil(a.length/8)),l=o,m=0;for(;u.byteLength-++m>=0;)u[u.byteLength-m]=Number(l&BigInt(255)),l>>=BigInt(8);tm(u.byteLength*2),j[L++]=n?194:195,fb?Sr(2,Buffer.byteLength(u)):Sr(2,u.byteLength),j.set(u,L),L+=u.byteLength}continue}else if(r===null){j[L++]=246;continue}else if(typeof r=="boolean"){j[L++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);Sr(4,r.length);continue}else if(typeof r.byteLength=="number"){tm(r.length*2),Sr(2,r.length),j.set(r,L),L+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof _e){let s=r.string.indexOf("."),o=s===-1?0:s-r.string.length+1,i=BigInt(r.string.replace(".",""));j[L++]=196,t.push(i),t.push(o),Sr(4,2);continue}if(r[Qp])if("tag"in r&&"value"in r){t.push(r.value),Sr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let o=n[s];t.push(r[o]),t.push(o)}Sr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var pb,fb,SL,j,Er,L,hb=w(()=>{c();nt();pb=T(Ie());Va();fb=typeof Buffer<"u",SL=2048,j=Br(SL),Er=new DataView(j.buffer,j.byteOffset,j.byteLength),L=0});var nm,gb=w(()=>{c();db();hb();nm={deserialize(e){return cb(e),Gt(0,e.length)},serialize(e){try{return mb(e),rm()}catch(t){throw rm(),t}},resizeEncodingBuffer(e){Ka(e)}}});var Ga,Wa,Ya=w(()=>{c();Va();Ga=e=>za({tag:1,value:e.getTime()/1e3}),Wa=(e,t)=>{let r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(s=>s.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var im,Xa,sm,om,am=w(()=>{c();dt();ae();nt();nt();im=T(xa());gb();Ya();Xa=class extends st{createSerializer(){let t=new sm;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new om;return t.setSerdeContext(this.serdeContext),t}},sm=class extends st{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let n=$.of(t);if(r==null)return n.isIdempotencyToken()?(0,bt.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??im.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?Ga(new Date(Number(r)/1e3|0)):Ga(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let i=!!n.getMergedTraits().sparse,a=[],u=0;for(let l of s){let m=this.serialize(n.getValueSchema(),l);(m!=null||i)&&(a[u++]=m)}return a}if(s instanceof Date)return Ga(s);let o={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let u=this.serialize(n.getValueSchema(),s[a]);(u!=null||i)&&(o[a]=u)}}else if(n.isStructSchema()){for(let[a,u]of n.structIterator()){let l=this.serialize(u,s[a]);l!=null&&(o[a]=l)}if(n.isUnionSchema()&&Array.isArray(s.$unknown)){let[a,u]=s.$unknown;o[a]=u}else if(typeof s.__type=="string")for(let[a,u]of Object.entries(s))a in o||(o[a]=this.serialize(15,u))}else if(n.isDocumentSchema())for(let i of Object.keys(s))o[i]=this.serialize(n.getValueSchema(),s[i]);else if(n.isBigDecimalSchema())return s;return o}return r}flush(){let t=nm.serialize(this.value);return this.value=void 0,t}},om=class extends st{read(t,r){let n=nm.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=$.of(t);if(n.isTimestampSchema()){if(typeof r=="number")return cs(r);if(typeof r=="object"&&r.tag===1&&"value"in r)return cs(r.value)}if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??im.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let o=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let u of r){let l=this.readValue(i,u);(l!=null||a)&&o.push(l)}return o}let s={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let u=this.readValue(i,r[a]);(u!=null||o)&&(s[a]=u)}}else if(n.isStructSchema()){let o=n.isUnionSchema(),i;o&&(i=new Set(Object.keys(r).filter(a=>a!=="__type")));for(let[a,u]of n.structIterator())o&&i.delete(a),r[a]!=null&&(s[a]=this.readValue(u,r[a]));if(o&&i?.size===1&&Object.keys(s).length===0){let a=i.values().next().value;s.$unknown=[a,r[a]]}else if(typeof r.__type=="string")for(let[a,u]of Object.entries(r))a in s||(s[a]=u)}else if(r instanceof _e)return r;return s}else return r}}});var yb,Ja,Sb=w(()=>{c();dt();ae();yb=T(tt());am();Ya();Ja=class extends lr{codec=new Xa;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Mt(t.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:o,operation:i}=(0,yb.getSmithyContext)(n),a=`/service/${o}/operation/${i}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,s,o){let i=Wa(n,s)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let u={$metadata:o,$fault:n.statusCode<=500?"client":"server"},l=B.for(a),m;try{m=l.getSchema(i)}catch{s.Message&&(s.message=s.Message);let I=B.for("smithy.ts.sdk.synthetic."+a),D=I.getBaseException();if(D){let k=I.getErrorCtor(D);throw Object.assign(new k({name:i}),u,s)}throw Object.assign(new Error(i),u,s)}let p=$.of(m),g=l.getErrorCtor(m),h=s.message??s.Message??"Unknown",S=new g(h),R={};for(let[x,I]of p.structIterator())R[x]=this.deserializer.readValue(I,s[x]);throw Object.assign(S,u,{$fault:p.getMergedTraits().error,message:h},R)}getDefaultContentType(){return"application/cbor"}}});var Eb=w(()=>{c();Ya();Sb();am()});var cm,At,Ss=w(()=>{c();ae();cm=T(K()),At=class{queryCompat;constructor(t=!1){this.queryCompat=t}resolveRestContentType(t,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:u,httpHeader:l,httpLabel:m,httpPrefixHeaders:p}=i.getMergedTraits();return!a&&!u&&!l&&!m&&p===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,s,o,i){let a=r,u=t;t.includes("#")&&([a,u]=t.split("#"));let l={$metadata:o,$fault:n.statusCode<500?"client":"server"},m=B.for(a);try{return{errorSchema:i?.(m,u)??m.getSchema(t),errorMetadata:l}}catch{s.message=s.message??s.Message??"UnknownError";let g=B.for("smithy.ts.sdk.synthetic."+a),h=g.getBaseException();if(h){let S=g.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new S({name:u}),l),s)}throw this.decorateServiceException(Object.assign(new Error(u),l),s)}}decorateServiceException(t,r={}){if(this.queryCompat){let n=t.Message??r.Message,s=(0,cm.decorateServiceException)(t,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};let o=s.$metadata.requestId;return o&&(s.RequestId=o),s}return(0,cm.decorateServiceException)(t,r)}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(t),a={Code:s,Type:o};Object.assign(t,a);for(let[u,l]of i)a[u==="message"?"Message":u]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}findQueryCompatibleError(t,r){try{return t.getSchema(r)}catch{return t.find(s=>$.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}});var Za,wb=w(()=>{c();Eb();ae();Ss();Za=class extends Ja{awsQueryCompatible;mixin;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r,this.mixin=new At(this.awsQueryCompatible)}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(t,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=(()=>{let S=n.headers["x-amzn-query-error"];return S&&this.awsQueryCompatible?S.split(";")[0]:Wa(n,s)??"Unknown"})(),{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),l=$.of(a),m=s.message??s.Message??"Unknown",p=B.for(a[1]).getErrorCtor(a)??Error,g=new p(m),h={};for(let[S,R]of l.structIterator())s[S]!=null&&(h[S]=this.deserializer.readValue(R,s[S]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),s)}}});var _b,bb,Tb,Ab=w(()=>{c();_b=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},bb=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},Tb=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var Ge,Vr=w(()=>{c();Ge=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var Rb=O(ec=>{"use strict";c();Object.defineProperty(ec,"__esModule",{value:!0});ec.fromBase64=void 0;var EL=wt(),wL=/^[A-Za-z0-9+/]*={0,2}$/,_L=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!wL.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,EL.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};ec.fromBase64=_L});var vb=O(tc=>{"use strict";c();Object.defineProperty(tc,"__esModule",{value:!0});tc.toBase64=void 0;var bL=wt(),TL=Ie(),AL=e=>{let t;if(typeof e=="string"?t=(0,TL.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,bL.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};tc.toBase64=AL});var Wt=O(Po=>{"use strict";c();var Cb=Rb(),xb=vb();Object.keys(Cb).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Po,e)&&Object.defineProperty(Po,e,{enumerable:!0,get:function(){return Cb[e]}})});Object.keys(xb).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Po,e)&&Object.defineProperty(Po,e,{enumerable:!0,get:function(){return xb[e]}})})});function*Es(e,t){if(e.isUnitSchema())return;let r=e.getSchema();for(let n=0;n<r[4].length;++n){let s=r[4][n],o=r[5][n],i=new $([o,0],s);!(s in t)&&!i.isIdempotencyToken()||(yield[s,i])}}function*Ib(e,t,r){if(e.isUnitSchema())return;let n=e.getSchema(),s=Object.keys(t).filter(o=>o!=="__type").length;for(let o=0;o<n[4].length&&s!==0;++o){let i=n[4][o],a=n[5][o],u=new $([a,0],i),l=i;r&&(l=u.getMergedTraits()[r]??i),l in t&&(yield[i,u],s-=1)}}var Oo=w(()=>{c();ae()});var ws,um=w(()=>{c();ws=class{from;to;keys;constructor(t,r){this.from=t,this.to=r,this.keys=new Set(Object.keys(this.from).filter(n=>n!=="__type"))}mark(t){this.keys.delete(t)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let t=this.keys.values().next().value,r=this.from[t];this.to.$unknown=[t,r]}}}});function Pb(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new _e(n,"bigDecimal"):BigInt(n)}return t}var Ob=w(()=>{c();nt()});var Nb,Db,rc,lm=w(()=>{c();Nb=T(K()),Db=T(Ie()),rc=(e,t)=>(0,Nb.collectBody)(e,t).then(r=>(t?.utf8Encoder??Db.toUtf8)(r))});var No,Mb,_s,Do=w(()=>{c();lm();No=(e,t)=>rc(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),Mb=async(e,t)=>{let r=await No(e,t);return r.message=r.message??r.Message,r},_s=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(e.headers,"x-amzn-errortype");if(s!==void 0)return n(e.headers[s]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return n(t[o]);if(t.__type!==void 0)return n(t.__type)}}});var kb,bs,dm=w(()=>{c();dt();ae();nt();kb=T(Wt());Vr();Oo();um();Ob();Do();bs=class extends Ge{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,Pb):await No(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",s=$.of(t);if(n){if(s.isStructSchema()){let i=r,a=s.isUnionSchema(),u={},l,{jsonName:m}=this.settings;m&&(l={});let p;a&&(p=new ws(i,u));for(let[g,h]of Ib(s,i,m?"jsonName":!1)){let S=g;m&&(S=h.getMergedTraits().jsonName??S,l[S]=g),a&&p.mark(S),i[S]!=null&&(u[g]=this._read(h,i[S]))}if(a)p.writeUnknown();else if(typeof i.__type=="string")for(let[g,h]of Object.entries(i)){let S=m?l[g]??g:g;S in u||(u[S]=h)}return u}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],u=!!s.getMergedTraits().sparse;for(let l of r)(u||l!=null)&&a.push(this._read(i,l));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},u=!!s.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(u||m!=null)&&(a[l]=this._read(i,m));return a}}if(s.isBlobSchema()&&typeof r=="string")return(0,kb.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o)return o==="application/json"||o.endsWith("+json")?rt.from(r):r;if(s.isTimestampSchema()&&r!=null)switch(ht(s,this.settings)){case 5:return Rf(r);case 6:return vf(r);case 7:return Cf(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof _e)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new _e(i.string,i.type):new _e(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof _e?i[a]=u:i[a]=this._read(s,u);return i}else return structuredClone(r);return r}}});var $b,nc,Lb=w(()=>{c();nt();$b="\u039D",nc=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof _e){let n=`${$b+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${$b+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var fm,Ts,pm=w(()=>{c();dt();ae();nt();fm=T(Wt());Vr();Oo();Lb();Ts=class extends Ge{settings;buffer;useReplacer=!1;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=$.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=$.of(t).getName(!0))}flush(){let{rootSchema:t,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,t?.isStructSchema()||t?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let n=new nc;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(t,r,n){let s=r!==null&&typeof r=="object",o=$.of(t);if(s){if(o.isStructSchema()){let i=r,a={},{jsonName:u}=this.settings,l;u&&(l={});for(let[m,p]of Es(o,i)){let g=this._write(p,i[m],o);if(g!==void 0){let h=m;u&&(h=p.getMergedTraits().jsonName??m,l[m]=h),a[h]=g}}if(o.isUnionSchema()&&Object.keys(a).length===0){let{$unknown:m}=i;if(Array.isArray(m)){let[p,g]=m;a[p]=this._write(15,g)}}else if(typeof i.__type=="string")for(let[m,p]of Object.entries(i)){let g=u?l[m]??m:m;g in a||(a[g]=this._write(15,p))}return a}if(Array.isArray(r)&&o.isListSchema()){let i=o.getValueSchema(),a=[],u=!!o.getMergedTraits().sparse;for(let l of r)(u||l!=null)&&a.push(this._write(i,l));return a}if(o.isMapSchema()){let i=o.getValueSchema(),a={},u=!!o.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(u||m!=null)&&(a[l]=this._write(i,m));return a}if(r instanceof Uint8Array&&(o.isBlobSchema()||o.isDocumentSchema()))return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??fm.toBase64)(r);if(r instanceof Date&&(o.isTimestampSchema()||o.isDocumentSchema()))switch(ht(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return go(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof _e&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,bt.v4)();let i=o.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?rt.from(r):r}if(typeof r=="number"&&o.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&o.isBlobSchema())return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??fm.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof _e?(this.useReplacer=!0,i[a]=u):i[a]=this._write(o,u);return i}else return structuredClone(r);return r}}}});var Qr,sc=w(()=>{c();Vr();dm();pm();Qr=class extends Ge{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Ts(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new bs(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Kr,oc=w(()=>{c();dt();ae();Ss();sc();Do();Kr=class extends lr{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=s??new Qr({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new At(this.awsQueryCompatible)}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(Mt(t.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(t,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=_s(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),l=$.of(a),m=s.message??s.Message??"Unknown",p=B.for(a[1]).getErrorCtor(a)??Error,g=new p(m),h={};for(let[S,R]of l.structIterator())s[S]!=null&&(h[S]=this.codec.createDeserializer().readObject(R,s[S]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),s)}}});var ic,Ub=w(()=>{c();oc();ic=class extends Kr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var ac,Fb=w(()=>{c();oc();ac=class extends Kr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Gr,qb=w(()=>{c();dt();ae();Ss();sc();Do();Gr=class extends An{serializer;deserializer;codec;mixin=new At;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Qr(r),this.serializer=new Cn(this.codec.createSerializer(),r),this.deserializer=new vn(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n),o=$.of(t.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(t,r,n){let s=await super.deserializeResponse(t,r,n),o=$.of(t.output);for(let[i,a]of o.structIterator())a.getMemberTraits().httpPayload&&!(i in s)&&(s[i]=null);return s}async handleError(t,r,n,s,o){let i=_s(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),l=$.of(a),m=s.message??s.Message??"Unknown",p=B.for(a[1]).getErrorCtor(a)??Error,g=new p(m);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[S,R]of l.structIterator()){let x=R.getMergedTraits().jsonName??S;h[S]=this.codec.createDeserializer().readObject(R,s[x])}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),s)}getDefaultContentType(){return"application/json"}}});var Bb,jb,Hb=w(()=>{c();Bb=T(K()),jb=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,Bb.expectUnion)(e)}});var Vb=O((zX,zb)=>{c();(()=>{"use strict";var e={d:(d,f)=>{for(var y in f)e.o(f,y)&&!e.o(d,y)&&Object.defineProperty(d,y,{enumerable:!0,get:f[y]})},o:(d,f)=>Object.prototype.hasOwnProperty.call(d,f),r:d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>Cr,XMLParser:()=>fD,XMLValidator:()=>wD});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(d,f){let y=[],b=f.exec(d);for(;b;){let E=[];E.startIndex=f.lastIndex-b[0].length;let _=b.length;for(let P=0;P<_;P++)E.push(b[P]);y.push(E),b=f.exec(d)}return y}let o=function(d){return n.exec(d)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(d,f){f=Object.assign({},i,f);let y=[],b=!1,E=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let _=0;_<d.length;_++)if(d[_]==="<"&&d[_+1]==="?"){if(_+=2,_=l(d,_),_.err)return _}else{if(d[_]!=="<"){if(u(d[_]))continue;return I("InvalidChar","char '"+d[_]+"' is not expected.",k(d,_))}{let P=_;if(_++,d[_]==="!"){_=m(d,_);continue}{let C=!1;d[_]==="/"&&(C=!0,_++);let N="";for(;_<d.length&&d[_]!==">"&&d[_]!==" "&&d[_]!=="	"&&d[_]!==`
`&&d[_]!=="\r";_++)N+=d[_];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),_--),!o(N)){let F;return F=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",I("InvalidTag",F,k(d,_))}let M=h(d,_);if(M===!1)return I("InvalidAttr","Attributes for '"+N+"' have open quote.",k(d,_));let H=M.value;if(_=M.index,H[H.length-1]==="/"){let F=_-H.length;H=H.substring(0,H.length-1);let te=R(H,f);if(te!==!0)return I(te.err.code,te.err.msg,k(d,F+te.err.line));b=!0}else if(C){if(!M.tagClosed)return I("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",k(d,_));if(H.trim().length>0)return I("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",k(d,P));if(y.length===0)return I("InvalidTag","Closing tag '"+N+"' has not been opened.",k(d,P));{let F=y.pop();if(N!==F.tagName){let te=k(d,F.tagStartPos);return I("InvalidTag","Expected closing tag '"+F.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+N+"'.",k(d,P))}y.length==0&&(E=!0)}}else{let F=R(H,f);if(F!==!0)return I(F.err.code,F.err.msg,k(d,_-H.length+F.err.line));if(E===!0)return I("InvalidXml","Multiple possible root nodes found.",k(d,_));f.unpairedTags.indexOf(N)!==-1||y.push({tagName:N,tagStartPos:P}),b=!0}for(_++;_<d.length;_++)if(d[_]==="<"){if(d[_+1]==="!"){_++,_=m(d,_);continue}if(d[_+1]!=="?")break;if(_=l(d,++_),_.err)return _}else if(d[_]==="&"){let F=x(d,_);if(F==-1)return I("InvalidChar","char '&' is not expected.",k(d,_));_=F}else if(E===!0&&!u(d[_]))return I("InvalidXml","Extra text at the end",k(d,_));d[_]==="<"&&_--}}}return b?y.length==1?I("InvalidTag","Unclosed tag '"+y[0].tagName+"'.",k(d,y[0].tagStartPos)):!(y.length>0)||I("InvalidXml","Invalid '"+JSON.stringify(y.map(_=>_.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):I("InvalidXml","Start tag expected.",1)}function u(d){return d===" "||d==="	"||d===`
`||d==="\r"}function l(d,f){let y=f;for(;f<d.length;f++)if(!(d[f]!="?"&&d[f]!=" ")){let b=d.substr(y,f-y);if(f>5&&b==="xml")return I("InvalidXml","XML declaration allowed only at the start of the document.",k(d,f));if(d[f]=="?"&&d[f+1]==">"){f++;break}}return f}function m(d,f){if(d.length>f+5&&d[f+1]==="-"&&d[f+2]==="-"){for(f+=3;f<d.length;f++)if(d[f]==="-"&&d[f+1]==="-"&&d[f+2]===">"){f+=2;break}}else if(d.length>f+8&&d[f+1]==="D"&&d[f+2]==="O"&&d[f+3]==="C"&&d[f+4]==="T"&&d[f+5]==="Y"&&d[f+6]==="P"&&d[f+7]==="E"){let y=1;for(f+=8;f<d.length;f++)if(d[f]==="<")y++;else if(d[f]===">"&&(y--,y===0))break}else if(d.length>f+9&&d[f+1]==="["&&d[f+2]==="C"&&d[f+3]==="D"&&d[f+4]==="A"&&d[f+5]==="T"&&d[f+6]==="A"&&d[f+7]==="["){for(f+=8;f<d.length;f++)if(d[f]==="]"&&d[f+1]==="]"&&d[f+2]===">"){f+=2;break}}return f}let p='"',g="'";function h(d,f){let y="",b="",E=!1;for(;f<d.length;f++){if(d[f]===p||d[f]===g)b===""?b=d[f]:b!==d[f]||(b="");else if(d[f]===">"&&b===""){E=!0;break}y+=d[f]}return b===""&&{value:y,index:f,tagClosed:E}}let S=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function R(d,f){let y=s(d,S),b={};for(let E=0;E<y.length;E++){if(y[E][1].length===0)return I("InvalidAttr","Attribute '"+y[E][2]+"' has no space in starting.",U(y[E]));if(y[E][3]!==void 0&&y[E][4]===void 0)return I("InvalidAttr","Attribute '"+y[E][2]+"' is without value.",U(y[E]));if(y[E][3]===void 0&&!f.allowBooleanAttributes)return I("InvalidAttr","boolean attribute '"+y[E][2]+"' is not allowed.",U(y[E]));let _=y[E][2];if(!D(_))return I("InvalidAttr","Attribute '"+_+"' is an invalid name.",U(y[E]));if(b.hasOwnProperty(_))return I("InvalidAttr","Attribute '"+_+"' is repeated.",U(y[E]));b[_]=1}return!0}function x(d,f){if(d[++f]===";")return-1;if(d[f]==="#")return function(b,E){let _=/\d/;for(b[E]==="x"&&(E++,_=/[\da-fA-F]/);E<b.length;E++){if(b[E]===";")return E;if(!b[E].match(_))break}return-1}(d,++f);let y=0;for(;f<d.length;f++,y++)if(!(d[f].match(/\w/)&&y<20)){if(d[f]===";")break;return-1}return f}function I(d,f,y){return{err:{code:d,msg:f,line:y.line||y,col:y.col}}}function D(d){return o(d)}function k(d,f){let y=d.substring(0,f).split(/\r?\n/);return{line:y.length,col:y[y.length-1].length+1}}function U(d){return d.startIndex+d[1].length}let z={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(d,f,y){return d},captureMetaData:!1},J;J=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Ne{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,y){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:y})}addChild(f,y){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),y!==void 0&&(this.child[this.child.length-1][J]={startIndex:y})}static getMetaDataSymbol(){return J}}function G(d,f){let y={};if(d[f+3]!=="O"||d[f+4]!=="C"||d[f+5]!=="T"||d[f+6]!=="Y"||d[f+7]!=="P"||d[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let b=1,E=!1,_=!1,P="";for(;f<d.length;f++)if(d[f]!=="<"||_)if(d[f]===">"){if(_?d[f-1]==="-"&&d[f-2]==="-"&&(_=!1,b--):b--,b===0)break}else d[f]==="["?E=!0:P+=d[f];else{if(E&&Sn(d,"!ENTITY",f)){let C,N;f+=7,[C,N,f]=Se(d,f+1),N.indexOf("&")===-1&&(y[C]={regx:RegExp(`&${C};`,"g"),val:N})}else if(E&&Sn(d,"!ELEMENT",f)){f+=8;let{index:C}=VN(d,f+1);f=C}else if(E&&Sn(d,"!ATTLIST",f))f+=8;else if(E&&Sn(d,"!NOTATION",f)){f+=9;let{index:C}=Fe(d,f+1);f=C}else{if(!Sn(d,"!--",f))throw new Error("Invalid DOCTYPE");_=!0}b++,P=""}if(b!==0)throw new Error("Unclosed DOCTYPE")}return{entities:y,i:f}}let ee=(d,f)=>{for(;f<d.length&&/\s/.test(d[f]);)f++;return f};function Se(d,f){f=ee(d,f);let y="";for(;f<d.length&&!/\s/.test(d[f])&&d[f]!=='"'&&d[f]!=="'";)y+=d[f],f++;if(Sd(y),f=ee(d,f),d.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(d[f]==="%")throw new Error("Parameter entities are not supported");let b="";return[f,b]=ut(d,f,"entity"),[y,b,--f]}function Fe(d,f){f=ee(d,f);let y="";for(;f<d.length&&!/\s/.test(d[f]);)y+=d[f],f++;Sd(y),f=ee(d,f);let b=d.substring(f,f+6).toUpperCase();if(b!=="SYSTEM"&&b!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${b}"`);f+=b.length,f=ee(d,f);let E=null,_=null;if(b==="PUBLIC")[f,E]=ut(d,f,"publicIdentifier"),d[f=ee(d,f)]!=='"'&&d[f]!=="'"||([f,_]=ut(d,f,"systemIdentifier"));else if(b==="SYSTEM"&&([f,_]=ut(d,f,"systemIdentifier"),!_))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:y,publicIdentifier:E,systemIdentifier:_,index:--f}}function ut(d,f,y){let b="",E=d[f];if(E!=='"'&&E!=="'")throw new Error(`Expected quoted string, found "${E}"`);for(f++;f<d.length&&d[f]!==E;)b+=d[f],f++;if(d[f]!==E)throw new Error(`Unterminated ${y} value`);return[++f,b]}function VN(d,f){f=ee(d,f);let y="";for(;f<d.length&&!/\s/.test(d[f]);)y+=d[f],f++;if(!Sd(y))throw new Error(`Invalid element name: "${y}"`);let b="";if(d[f=ee(d,f)]==="E"&&Sn(d,"MPTY",f))f+=4;else if(d[f]==="A"&&Sn(d,"NY",f))f+=2;else{if(d[f]!=="(")throw new Error(`Invalid Element Expression, found "${d[f]}"`);for(f++;f<d.length&&d[f]!==")";)b+=d[f],f++;if(d[f]!==")")throw new Error("Unterminated content model")}return{elementName:y,contentModel:b.trim(),index:f}}function Sn(d,f,y){for(let b=0;b<f.length;b++)if(f[b]!==d[y+b+1])return!1;return!0}function Sd(d){if(o(d))return d;throw new Error(`Invalid entity name ${d}`)}let QN=/^[-+]?0x[a-fA-F0-9]+$/,KN=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,GN={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},WN=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function kg(d){return typeof d=="function"?d:Array.isArray(d)?f=>{for(let y of d)if(typeof y=="string"&&f===y||y instanceof RegExp&&y.test(f))return!0}:()=>!1}class YN{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(y,b)=>String.fromCodePoint(Number.parseInt(b,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(y,b)=>String.fromCodePoint(Number.parseInt(b,16))}},this.addExternalEntities=XN,this.parseXml=rD,this.parseTextData=JN,this.resolveNameSpace=ZN,this.buildAttributesMap=tD,this.isItStopNode=iD,this.replaceEntitiesValue=sD,this.readStopNodeData=aD,this.saveTextToParentTag=oD,this.addChild=nD,this.ignoreAttributesFn=kg(this.options.ignoreAttributes)}}function XN(d){let f=Object.keys(d);for(let y=0;y<f.length;y++){let b=f[y];this.lastEntities[b]={regex:new RegExp("&"+b+";","g"),val:d[b]}}}function JN(d,f,y,b,E,_,P){if(d!==void 0&&(this.options.trimValues&&!b&&(d=d.trim()),d.length>0)){P||(d=this.replaceEntitiesValue(d));let C=this.options.tagValueProcessor(f,d,y,E,_);return C==null?d:typeof C!=typeof d||C!==d?C:this.options.trimValues||d.trim()===d?$g(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function ZN(d){if(this.options.removeNSPrefix){let f=d.split(":"),y=d.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(d=y+f[1])}return d}let eD=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function tD(d,f,y){if(this.options.ignoreAttributes!==!0&&typeof d=="string"){let b=s(d,eD),E=b.length,_={};for(let P=0;P<E;P++){let C=this.resolveNameSpace(b[P][1]);if(this.ignoreAttributesFn(C,f))continue;let N=b[P][4],M=this.options.attributeNamePrefix+C;if(C.length)if(this.options.transformAttributeName&&(M=this.options.transformAttributeName(M)),M==="__proto__"&&(M="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let H=this.options.attributeValueProcessor(C,N,f);_[M]=H==null?N:typeof H!=typeof N||H!==N?H:$g(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(_[M]=!0)}if(!Object.keys(_).length)return;if(this.options.attributesGroupName){let P={};return P[this.options.attributesGroupName]=_,P}return _}}let rD=function(d){d=d.replace(/\r\n?/g,`
`);let f=new Ne("!xml"),y=f,b="",E="";for(let _=0;_<d.length;_++)if(d[_]==="<")if(d[_+1]==="/"){let P=En(d,">",_,"Closing Tag is not closed."),C=d.substring(_+2,P).trim();if(this.options.removeNSPrefix){let H=C.indexOf(":");H!==-1&&(C=C.substr(H+1))}this.options.transformTagName&&(C=this.options.transformTagName(C)),y&&(b=this.saveTextToParentTag(b,y,E));let N=E.substring(E.lastIndexOf(".")+1);if(C&&this.options.unpairedTags.indexOf(C)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${C}>`);let M=0;N&&this.options.unpairedTags.indexOf(N)!==-1?(M=E.lastIndexOf(".",E.lastIndexOf(".")-1),this.tagsNodeStack.pop()):M=E.lastIndexOf("."),E=E.substring(0,M),y=this.tagsNodeStack.pop(),b="",_=P}else if(d[_+1]==="?"){let P=Ed(d,_,!1,"?>");if(!P)throw new Error("Pi Tag is not closed.");if(b=this.saveTextToParentTag(b,y,E),!(this.options.ignoreDeclaration&&P.tagName==="?xml"||this.options.ignorePiTags)){let C=new Ne(P.tagName);C.add(this.options.textNodeName,""),P.tagName!==P.tagExp&&P.attrExpPresent&&(C[":@"]=this.buildAttributesMap(P.tagExp,E,P.tagName)),this.addChild(y,C,E,_)}_=P.closeIndex+1}else if(d.substr(_+1,3)==="!--"){let P=En(d,"-->",_+4,"Comment is not closed.");if(this.options.commentPropName){let C=d.substring(_+4,P-2);b=this.saveTextToParentTag(b,y,E),y.add(this.options.commentPropName,[{[this.options.textNodeName]:C}])}_=P}else if(d.substr(_+1,2)==="!D"){let P=G(d,_);this.docTypeEntities=P.entities,_=P.i}else if(d.substr(_+1,2)==="!["){let P=En(d,"]]>",_,"CDATA is not closed.")-2,C=d.substring(_+9,P);b=this.saveTextToParentTag(b,y,E);let N=this.parseTextData(C,y.tagname,E,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?y.add(this.options.cdataPropName,[{[this.options.textNodeName]:C}]):y.add(this.options.textNodeName,N),_=P+2}else{let P=Ed(d,_,this.options.removeNSPrefix),C=P.tagName,N=P.rawTagName,M=P.tagExp,H=P.attrExpPresent,F=P.closeIndex;this.options.transformTagName&&(C=this.options.transformTagName(C)),y&&b&&y.tagname!=="!xml"&&(b=this.saveTextToParentTag(b,y,E,!1));let te=y;te&&this.options.unpairedTags.indexOf(te.tagname)!==-1&&(y=this.tagsNodeStack.pop(),E=E.substring(0,E.lastIndexOf("."))),C!==f.tagname&&(E+=E?"."+C:C);let fe=_;if(this.isItStopNode(this.options.stopNodes,E,C)){let ne="";if(M.length>0&&M.lastIndexOf("/")===M.length-1)C[C.length-1]==="/"?(C=C.substr(0,C.length-1),E=E.substr(0,E.length-1),M=C):M=M.substr(0,M.length-1),_=P.closeIndex;else if(this.options.unpairedTags.indexOf(C)!==-1)_=P.closeIndex;else{let zt=this.readStopNodeData(d,N,F+1);if(!zt)throw new Error(`Unexpected end of ${N}`);_=zt.i,ne=zt.tagContent}let ke=new Ne(C);C!==M&&H&&(ke[":@"]=this.buildAttributesMap(M,E,C)),ne&&(ne=this.parseTextData(ne,C,E,!0,H,!0,!0)),E=E.substr(0,E.lastIndexOf(".")),ke.add(this.options.textNodeName,ne),this.addChild(y,ke,E,fe)}else{if(M.length>0&&M.lastIndexOf("/")===M.length-1){C[C.length-1]==="/"?(C=C.substr(0,C.length-1),E=E.substr(0,E.length-1),M=C):M=M.substr(0,M.length-1),this.options.transformTagName&&(C=this.options.transformTagName(C));let ne=new Ne(C);C!==M&&H&&(ne[":@"]=this.buildAttributesMap(M,E,C)),this.addChild(y,ne,E,fe),E=E.substr(0,E.lastIndexOf("."))}else{let ne=new Ne(C);this.tagsNodeStack.push(y),C!==M&&H&&(ne[":@"]=this.buildAttributesMap(M,E,C)),this.addChild(y,ne,E,fe),y=ne}b="",_=F}}else b+=d[_];return f.child};function nD(d,f,y,b){this.options.captureMetaData||(b=void 0);let E=this.options.updateTag(f.tagname,y,f[":@"]);E===!1||(typeof E=="string"&&(f.tagname=E),d.addChild(f,b))}let sD=function(d){if(this.options.processEntities){for(let f in this.docTypeEntities){let y=this.docTypeEntities[f];d=d.replace(y.regx,y.val)}for(let f in this.lastEntities){let y=this.lastEntities[f];d=d.replace(y.regex,y.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let y=this.htmlEntities[f];d=d.replace(y.regex,y.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function oD(d,f,y,b){return d&&(b===void 0&&(b=f.child.length===0),(d=this.parseTextData(d,f.tagname,y,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,b))!==void 0&&d!==""&&f.add(this.options.textNodeName,d),d=""),d}function iD(d,f,y){let b="*."+y;for(let E in d){let _=d[E];if(b===_||f===_)return!0}return!1}function En(d,f,y,b){let E=d.indexOf(f,y);if(E===-1)throw new Error(b);return E+f.length-1}function Ed(d,f,y,b=">"){let E=function(F,te,fe=">"){let ne,ke="";for(let zt=te;zt<F.length;zt++){let xr=F[zt];if(ne)xr===ne&&(ne="");else if(xr==='"'||xr==="'")ne=xr;else if(xr===fe[0]){if(!fe[1])return{data:ke,index:zt};if(F[zt+1]===fe[1])return{data:ke,index:zt}}else xr==="	"&&(xr=" ");ke+=xr}}(d,f+1,b);if(!E)return;let _=E.data,P=E.index,C=_.search(/\s/),N=_,M=!0;C!==-1&&(N=_.substring(0,C),_=_.substring(C+1).trimStart());let H=N;if(y){let F=N.indexOf(":");F!==-1&&(N=N.substr(F+1),M=N!==E.data.substr(F+1))}return{tagName:N,tagExp:_,closeIndex:P,attrExpPresent:M,rawTagName:H}}function aD(d,f,y){let b=y,E=1;for(;y<d.length;y++)if(d[y]==="<")if(d[y+1]==="/"){let _=En(d,">",y,`${f} is not closed`);if(d.substring(y+2,_).trim()===f&&(E--,E===0))return{tagContent:d.substring(b,y),i:_};y=_}else if(d[y+1]==="?")y=En(d,"?>",y+1,"StopNode is not closed.");else if(d.substr(y+1,3)==="!--")y=En(d,"-->",y+3,"StopNode is not closed.");else if(d.substr(y+1,2)==="![")y=En(d,"]]>",y,"StopNode is not closed.")-2;else{let _=Ed(d,y,">");_&&((_&&_.tagName)===f&&_.tagExp[_.tagExp.length-1]!=="/"&&E++,y=_.closeIndex)}}function $g(d,f,y){if(f&&typeof d=="string"){let b=d.trim();return b==="true"||b!=="false"&&function(E,_={}){if(_=Object.assign({},GN,_),!E||typeof E!="string")return E;let P=E.trim();if(_.skipLike!==void 0&&_.skipLike.test(P))return E;if(E==="0")return 0;if(_.hex&&QN.test(P))return function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(P);if(P.search(/.+[eE].+/)!==-1)return function(N,M,H){if(!H.eNotation)return N;let F=M.match(WN);if(F){let te=F[1]||"",fe=F[3].indexOf("e")===-1?"E":"e",ne=F[2],ke=te?N[ne.length+1]===fe:N[ne.length]===fe;return ne.length>1&&ke?N:ne.length!==1||!F[3].startsWith(`.${fe}`)&&F[3][0]!==fe?H.leadingZeros&&!ke?(M=(F[1]||"")+F[3],Number(M)):N:Number(M)}return N}(E,P,_);{let N=KN.exec(P);if(N){let M=N[1]||"",H=N[2],F=((C=N[3])&&C.indexOf(".")!==-1&&((C=C.replace(/0+$/,""))==="."?C="0":C[0]==="."?C="0"+C:C[C.length-1]==="."&&(C=C.substring(0,C.length-1))),C),te=M?E[H.length+1]===".":E[H.length]===".";if(!_.leadingZeros&&(H.length>1||H.length===1&&!te))return E;{let fe=Number(P),ne=String(fe);if(fe===0||fe===-0)return fe;if(ne.search(/[eE]/)!==-1)return _.eNotation?fe:E;if(P.indexOf(".")!==-1)return ne==="0"||ne===F||ne===`${M}${F}`?fe:E;let ke=H?F:P;return H?ke===ne||M+ke===ne?fe:E:ke===ne||ke===M+ne?fe:E}}return E}var C}(d,y)}return d!==void 0?d:""}let wd=Ne.getMetaDataSymbol();function cD(d,f){return Lg(d,f)}function Lg(d,f,y){let b,E={};for(let _=0;_<d.length;_++){let P=d[_],C=uD(P),N="";if(N=y===void 0?C:y+"."+C,C===f.textNodeName)b===void 0?b=P[C]:b+=""+P[C];else{if(C===void 0)continue;if(P[C]){let M=Lg(P[C],f,N),H=dD(M,f);P[wd]!==void 0&&(M[wd]=P[wd]),P[":@"]?lD(M,P[":@"],N,f):Object.keys(M).length!==1||M[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(M).length===0&&(f.alwaysCreateTextNode?M[f.textNodeName]="":M=""):M=M[f.textNodeName],E[C]!==void 0&&E.hasOwnProperty(C)?(Array.isArray(E[C])||(E[C]=[E[C]]),E[C].push(M)):f.isArray(C,N,H)?E[C]=[M]:E[C]=M}}}return typeof b=="string"?b.length>0&&(E[f.textNodeName]=b):b!==void 0&&(E[f.textNodeName]=b),E}function uD(d){let f=Object.keys(d);for(let y=0;y<f.length;y++){let b=f[y];if(b!==":@")return b}}function lD(d,f,y,b){if(f){let E=Object.keys(f),_=E.length;for(let P=0;P<_;P++){let C=E[P];b.isArray(C,y+"."+C,!0,!0)?d[C]=[f[C]]:d[C]=f[C]}}}function dD(d,f){let{textNodeName:y}=f,b=Object.keys(d).length;return b===0||!(b!==1||!d[y]&&typeof d[y]!="boolean"&&d[y]!==0)}class fD{constructor(f){this.externalEntities={},this.options=function(y){return Object.assign({},z,y)}(f)}parse(f,y){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(y){y===!0&&(y={});let _=a(f,y);if(_!==!0)throw Error(`${_.err.msg}:${_.err.line}:${_.err.col}`)}let b=new YN(this.options);b.addExternalEntities(this.externalEntities);let E=b.parseXml(f);return this.options.preserveOrder||E===void 0?E:cD(E,this.options)}addEntity(f,y){if(y.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(y==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=y}static getMetaDataSymbol(){return Ne.getMetaDataSymbol()}}function pD(d,f){let y="";return f.format&&f.indentBy.length>0&&(y=`
`),Ug(d,f,"",y)}function Ug(d,f,y,b){let E="",_=!1;for(let P=0;P<d.length;P++){let C=d[P],N=mD(C);if(N===void 0)continue;let M="";if(M=y.length===0?N:`${y}.${N}`,N===f.textNodeName){let fe=C[N];hD(M,f)||(fe=f.tagValueProcessor(N,fe),fe=qg(fe,f)),_&&(E+=b),E+=fe,_=!1;continue}if(N===f.cdataPropName){_&&(E+=b),E+=`<![CDATA[${C[N][0][f.textNodeName]}]]>`,_=!1;continue}if(N===f.commentPropName){E+=b+`<!--${C[N][0][f.textNodeName]}-->`,_=!0;continue}if(N[0]==="?"){let fe=Fg(C[":@"],f),ne=N==="?xml"?"":b,ke=C[N][0][f.textNodeName];ke=ke.length!==0?" "+ke:"",E+=ne+`<${N}${ke}${fe}?>`,_=!0;continue}let H=b;H!==""&&(H+=f.indentBy);let F=b+`<${N}${Fg(C[":@"],f)}`,te=Ug(C[N],f,M,H);f.unpairedTags.indexOf(N)!==-1?f.suppressUnpairedNode?E+=F+">":E+=F+"/>":te&&te.length!==0||!f.suppressEmptyNode?te&&te.endsWith(">")?E+=F+`>${te}${b}</${N}>`:(E+=F+">",te&&b!==""&&(te.includes("/>")||te.includes("</"))?E+=b+f.indentBy+te+b:E+=te,E+=`</${N}>`):E+=F+"/>",_=!0}return E}function mD(d){let f=Object.keys(d);for(let y=0;y<f.length;y++){let b=f[y];if(d.hasOwnProperty(b)&&b!==":@")return b}}function Fg(d,f){let y="";if(d&&!f.ignoreAttributes)for(let b in d){if(!d.hasOwnProperty(b))continue;let E=f.attributeValueProcessor(b,d[b]);E=qg(E,f),E===!0&&f.suppressBooleanAttributes?y+=` ${b.substr(f.attributeNamePrefix.length)}`:y+=` ${b.substr(f.attributeNamePrefix.length)}="${E}"`}return y}function hD(d,f){let y=(d=d.substr(0,d.length-f.textNodeName.length-1)).substr(d.lastIndexOf(".")+1);for(let b in f.stopNodes)if(f.stopNodes[b]===d||f.stopNodes[b]==="*."+y)return!0;return!1}function qg(d,f){if(d&&d.length>0&&f.processEntities)for(let y=0;y<f.entities.length;y++){let b=f.entities[y];d=d.replace(b.regex,b.val)}return d}let gD={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Cr(d){this.options=Object.assign({},gD,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=kg(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=ED),this.processTextOrObjNode=yD,this.options.format?(this.indentate=SD,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function yD(d,f,y,b){let E=this.j2x(d,y+1,b.concat(f));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],f,E.attrStr,y):this.buildObjectNode(E.val,f,E.attrStr,y)}function SD(d){return this.options.indentBy.repeat(d)}function ED(d){return!(!d.startsWith(this.options.attributeNamePrefix)||d===this.options.textNodeName)&&d.substr(this.attrPrefixLen)}Cr.prototype.build=function(d){return this.options.preserveOrder?pD(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},Cr.prototype.j2x=function(d,f,y){let b="",E="",_=y.join(".");for(let P in d)if(Object.prototype.hasOwnProperty.call(d,P))if(d[P]===void 0)this.isAttribute(P)&&(E+="");else if(d[P]===null)this.isAttribute(P)||P===this.options.cdataPropName?E+="":P[0]==="?"?E+=this.indentate(f)+"<"+P+"?"+this.tagEndChar:E+=this.indentate(f)+"<"+P+"/"+this.tagEndChar;else if(d[P]instanceof Date)E+=this.buildTextValNode(d[P],P,"",f);else if(typeof d[P]!="object"){let C=this.isAttribute(P);if(C&&!this.ignoreAttributesFn(C,_))b+=this.buildAttrPairStr(C,""+d[P]);else if(!C)if(P===this.options.textNodeName){let N=this.options.tagValueProcessor(P,""+d[P]);E+=this.replaceEntitiesValue(N)}else E+=this.buildTextValNode(d[P],P,"",f)}else if(Array.isArray(d[P])){let C=d[P].length,N="",M="";for(let H=0;H<C;H++){let F=d[P][H];if(F!==void 0)if(F===null)P[0]==="?"?E+=this.indentate(f)+"<"+P+"?"+this.tagEndChar:E+=this.indentate(f)+"<"+P+"/"+this.tagEndChar;else if(typeof F=="object")if(this.options.oneListGroup){let te=this.j2x(F,f+1,y.concat(P));N+=te.val,this.options.attributesGroupName&&F.hasOwnProperty(this.options.attributesGroupName)&&(M+=te.attrStr)}else N+=this.processTextOrObjNode(F,P,f,y);else if(this.options.oneListGroup){let te=this.options.tagValueProcessor(P,F);te=this.replaceEntitiesValue(te),N+=te}else N+=this.buildTextValNode(F,P,"",f)}this.options.oneListGroup&&(N=this.buildObjectNode(N,P,M,f)),E+=N}else if(this.options.attributesGroupName&&P===this.options.attributesGroupName){let C=Object.keys(d[P]),N=C.length;for(let M=0;M<N;M++)b+=this.buildAttrPairStr(C[M],""+d[P][C[M]])}else E+=this.processTextOrObjNode(d[P],P,f,y);return{attrStr:b,val:E}},Cr.prototype.buildAttrPairStr=function(d,f){return f=this.options.attributeValueProcessor(d,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+d:" "+d+'="'+f+'"'},Cr.prototype.buildObjectNode=function(d,f,y,b){if(d==="")return f[0]==="?"?this.indentate(b)+"<"+f+y+"?"+this.tagEndChar:this.indentate(b)+"<"+f+y+this.closeTag(f)+this.tagEndChar;{let E="</"+f+this.tagEndChar,_="";return f[0]==="?"&&(_="?",E=""),!y&&y!==""||d.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&_.length===0?this.indentate(b)+`<!--${d}-->`+this.newLine:this.indentate(b)+"<"+f+y+_+this.tagEndChar+d+this.indentate(b)+E:this.indentate(b)+"<"+f+y+_+">"+d+E}},Cr.prototype.closeTag=function(d){let f="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${d}`,f},Cr.prototype.buildTextValNode=function(d,f,y,b){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(b)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(b)+`<!--${d}-->`+this.newLine;if(f[0]==="?")return this.indentate(b)+"<"+f+y+"?"+this.tagEndChar;{let E=this.options.tagValueProcessor(f,d);return E=this.replaceEntitiesValue(E),E===""?this.indentate(b)+"<"+f+y+this.closeTag(f)+this.tagEndChar:this.indentate(b)+"<"+f+y+">"+E+"</"+f+this.tagEndChar}},Cr.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let y=this.options.entities[f];d=d.replace(y.regex,y.val)}return d};let wD={validate:a};zb.exports=t})()});var Qb=O(hm=>{"use strict";c();Object.defineProperty(hm,"__esModule",{value:!0});hm.parseXML=vL;var RL=Vb(),mm=new RL.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});mm.addEntity("#xD","\r");mm.addEntity("#10",`
`);function vL(e){return mm.parse(e,!0)}});var lc=O(uc=>{"use strict";c();var CL=Qb();function xL(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function IL(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var cc=class{value;constructor(t){this.value=t}toString(){return IL(""+this.value)}},gm=class e{name;children;attributes={};static of(t,r,n){let s=new e(t);return r!==void 0&&s.addChildNode(new cc(r)),n!==void 0&&s.withName(n),s}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let s=e.of(r,t[r]).withName(n);this.c(s)}}l(t,r,n,s){t[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,s){if(t[r]!=null){let o=s(),i=new e(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${xL(""+o)}"`)}return r+=t?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(uc,"parseXML",{enumerable:!0,get:function(){return CL.parseXML}});uc.XmlNode=gm;uc.XmlText=cc});var Kb,Gb,Wb,Wr,dc=w(()=>{c();Kb=T(lc());dt();ae();Gb=T(K()),Wb=T(Ie());Vr();um();Wr=class extends Ge{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new Rn(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let s=$.of(t),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(l=>!!l.getMemberTraits().eventPayload)){let l={},m=Object.keys(o)[0];return o[m].isBlobSchema()?l[m]=r:l[m]=this.read(o[m],r),l}let a=(this.serdeContext?.utf8Encoder??Wb.toUtf8)(r),u=this.parseXml(a);return this.readSchema(t,n?u[n]:u)}readSchema(t,r){let n=$.of(t);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let u=n.getValueSchema(),l=[],m=u.getMergedTraits().xmlName??"member",p=i?r:(r[0]??r)[m],g=Array.isArray(p)?p:[p];for(let h of g)(h!=null||o)&&l.push(this.readSchema(u,h));return l}let a={};if(n.isMapSchema()){let u=n.getKeySchema(),l=n.getValueSchema(),m;i?m=Array.isArray(r)?r:[r]:m=Array.isArray(r.entry)?r.entry:[r.entry];let p=u.getMergedTraits().xmlName??"key",g=l.getMergedTraits().xmlName??"value";for(let h of m){let S=h[p],R=h[g];(R!=null||o)&&(a[S]=this.readSchema(l,R))}return a}if(n.isStructSchema()){let u=n.isUnionSchema(),l;u&&(l=new ws(r,a));for(let[m,p]of n.structIterator()){let g=p.getMergedTraits(),h=g.httpPayload?g.xmlName??p.getName():p.getMemberTraits().xmlName??m;u&&l.mark(h),r[h]!=null&&(a[m]=this.readSchema(p,r[h]))}return u&&l.writeUnknown(),a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r;try{r=(0,Kb.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,Gb.getValueFromTextNode)(o)}return{}}}});var Yb,Xb,fc,Jb=w(()=>{c();dt();ae();nt();Yb=T(K()),Xb=T(Wt());Vr();Oo();fc=class extends Ge{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let s=$.of(t);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??Xb.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,bt.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof _e?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),ht(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,Yb.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(s.isDocumentSchema())Array.isArray(r)?this.write(79,r,n):r instanceof Date?this.write(4,r,n):r instanceof Uint8Array?this.write(21,r,n):r&&typeof r=="object"?this.write(143,r,n):(this.writeKey(n),this.writeValue(String(r)));else if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let u of r){if(u==null)continue;let l=this.getKey("member",o.getMergedTraits().xmlName),m=i?`${n}${a}`:`${n}${l}.${a}`;this.write(o,u,m),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,u=1;for(let[l,m]of Object.entries(r)){if(m==null)continue;let p=this.getKey("key",o.getMergedTraits().xmlName),g=a?`${n}${u}.${p}`:`${n}entry.${u}.${p}`,h=this.getKey("value",i.getMergedTraits().xmlName),S=a?`${n}${u}.${h}`:`${n}entry.${u}.${h}`;this.write(o,l,g),this.write(i,m,S),++u}}}else if(s.isStructSchema()){if(r&&typeof r=="object"){let o=!1;for(let[i,a]of Es(s,r)){if(r[i]==null&&!a.isIdempotencyToken())continue;let u=this.getKey(i,a.getMergedTraits().xmlName),l=`${n}${u}`;this.write(a,r[i],l),o=!0}if(!o&&s.isUnionSchema()){let{$unknown:i}=r;if(Array.isArray(i)){let[a,u]=i,l=`${n}${a}`;this.write(15,u,l)}}}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Vt(t)}=`}writeValue(t){this.buffer+=Vt(t)}}});var Yr,ym=w(()=>{c();dt();ae();Ss();dc();Jb();Yr=class extends lr{options;serializer;deserializer;mixin=new At;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new fc(r),this.deserializer=new Wr(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(Mt(t.input)==="unit"||!s.body)&&(s.body="");let o=t.name.split("#")[1]??t.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(t,r,n){let s=this.deserializer,o=$.of(t.output),i={};if(n.statusCode>=300){let p=await _t(n.body,r);p.byteLength>0&&Object.assign(i,await s.read(15,p)),await this.handleError(t,r,n,i,this.deserializeMetadata(n))}for(let p in n.headers){let g=n.headers[p];delete n.headers[p],n.headers[p.toLowerCase()]=g}let a=t.name.split("#")[1]??t.name,u=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,l=await _t(n.body,r);return l.byteLength>0&&Object.assign(i,await s.read(o,l,u)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(t,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),u=this.loadQueryErrorMessage(s);a.message=u,a.Error={Type:a.Type,Code:a.Code,Message:u};let{errorSchema:l,errorMetadata:m}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,this.mixin.findQueryCompatibleError),p=$.of(l),g=B.for(l[1]).getErrorCtor(l)??Error,h=new g(u),S={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[R,x]of p.structIterator()){let I=x.getMergedTraits().xmlName??R,D=a[I]??s[I];S[R]=this.deserializer.readSchema(x,D)}throw this.mixin.decorateServiceException(Object.assign(h,m,{$fault:p.getMergedTraits().error,message:u},S),s)}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var pc,Zb=w(()=>{c();ym();pc=class extends Yr{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var eT,tT,Sm,rT,mc,Em=w(()=>{c();eT=T(lc()),tT=T(K());lm();Sm=(e,t)=>rc(e,t).then(r=>{if(r.length){let n;try{n=(0,eT.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,tT.getValueFromTextNode)(i)}return{}}),rT=async(e,t)=>{let r=await Sm(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},mc=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var it,wm,hc,As,_m=w(()=>{c();it=T(lc());dt();ae();nt();wm=T(K()),hc=T(Wt());Vr();Oo();As=class extends Ge{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=$.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??hc.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let s=t.getMergedTraits(),o=t.isMemberSchema()&&!s.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():s.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=it.XmlNode.of(o),[a,u]=this.getXmlnsAttribute(t,n);for(let[m,p]of Es(t,r)){let g=r[m];if(g!=null||p.isIdempotencyToken()){if(p.getMergedTraits().xmlAttribute){i.addAttribute(p.getMergedTraits().xmlName??m,this.writeSimple(p,g));continue}if(p.isListSchema())this.writeList(p,g,i,u);else if(p.isMapSchema())this.writeMap(p,g,i,u);else if(p.isStructSchema())i.addChildNode(this.writeStruct(p,g,u));else{let h=it.XmlNode.of(p.getMergedTraits().xmlName??p.getMemberName());this.writeSimpleInto(p,g,h,u),i.addChildNode(h)}}}let{$unknown:l}=r;if(l&&t.isUnionSchema()&&Array.isArray(l)&&Object.keys(r).length===1){let[m,p]=l,g=it.XmlNode.of(m);if(typeof p!="string")if(r instanceof it.XmlNode||r instanceof it.XmlText)i.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,p,g,u),i.addChildNode(g)}return u&&i.addAttribute(a,u),i}writeList(t,r,n,s){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),u=!!a.sparse,l=!!o.xmlFlattened,[m,p]=this.getXmlnsAttribute(t,s),g=(h,S)=>{if(i.isListSchema())this.writeList(i,Array.isArray(S)?S:[S],h,p);else if(i.isMapSchema())this.writeMap(i,S,h,p);else if(i.isStructSchema()){let R=this.writeStruct(i,S,p);h.addChildNode(R.withName(l?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let R=it.XmlNode.of(l?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,S,R,p),h.addChildNode(R)}};if(l)for(let h of r)(u||h!=null)&&g(n,h);else{let h=it.XmlNode.of(o.xmlName??t.getMemberName());p&&h.addAttribute(m,p);for(let S of r)(u||S!=null)&&g(h,S);n.addChildNode(h)}}writeMap(t,r,n,s,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),l=a.getMergedTraits().xmlName??"key",m=t.getValueSchema(),p=m.getMergedTraits(),g=p.xmlName??"value",h=!!p.sparse,S=!!i.xmlFlattened,[R,x]=this.getXmlnsAttribute(t,s),I=(D,k,U)=>{let z=it.XmlNode.of(l,k),[J,Ne]=this.getXmlnsAttribute(a,x);Ne&&z.addAttribute(J,Ne),D.addChildNode(z);let G=it.XmlNode.of(g);m.isListSchema()?this.writeList(m,U,G,x):m.isMapSchema()?this.writeMap(m,U,G,x,!0):m.isStructSchema()?G=this.writeStruct(m,U,x):this.writeSimpleInto(m,U,G,x),D.addChildNode(G)};if(S){for(let[D,k]of Object.entries(r))if(h||k!=null){let U=it.XmlNode.of(i.xmlName??t.getMemberName());I(U,D,k),n.addChildNode(U)}}else{let D;o||(D=it.XmlNode.of(i.xmlName??t.getMemberName()),x&&D.addAttribute(R,x),n.addChildNode(D));for(let[k,U]of Object.entries(r))if(h||U!=null){let z=it.XmlNode.of("entry");I(z,k,U),(o?n:D).addChildNode(z)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=$.of(t),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??hc.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(ht(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,wm.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,wm.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof _e?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,bt.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(t,r,n,s){let o=this.writeSimple(t,r),i=$.of(t),a=new it.XmlText(o),[u,l]=this.getXmlnsAttribute(i,s);l&&n.addAttribute(u,l),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var Rs,bm=w(()=>{c();Vr();dc();_m();Rs=class extends Ge{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new As(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Wr(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var gc,nT=w(()=>{c();dt();ae();Ss();Em();bm();gc=class extends An{codec;serializer;deserializer;mixin=new At;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new Rs(r),this.serializer=new Cn(this.codec.createSerializer(),r),this.deserializer=new vn(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n),o=$.of(t.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return typeof s.body=="string"&&s.headers["content-type"]===this.getDefaultContentType()&&!s.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,s,o){let i=mc(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),l=$.of(a),m=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",p=B.for(a[1]).getErrorCtor(a)??Error,g=new p(m);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[S,R]of l.structIterator()){let x=R.getMergedTraits().xmlName??S,I=s.Error?.[x]??s[x];h[S]=this.codec.createDeserializer().readSchema(R,I)}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:l.getMergedTraits().error,message:m},h),s)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(t){for(let[,r]of t.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var Tm={};lt(Tm,{AwsEc2QueryProtocol:()=>pc,AwsJson1_0Protocol:()=>ic,AwsJson1_1Protocol:()=>ac,AwsJsonRpcProtocol:()=>Kr,AwsQueryProtocol:()=>Yr,AwsRestJsonProtocol:()=>Gr,AwsRestXmlProtocol:()=>gc,AwsSmithyRpcV2CborProtocol:()=>Za,JsonCodec:()=>Qr,JsonShapeDeserializer:()=>bs,JsonShapeSerializer:()=>Ts,XmlCodec:()=>Rs,XmlShapeDeserializer:()=>Wr,XmlShapeSerializer:()=>As,_toBool:()=>bb,_toNum:()=>Tb,_toStr:()=>_b,awsExpectUnion:()=>jb,loadRestJsonErrorCode:()=>_s,loadRestXmlErrorCode:()=>mc,parseJsonBody:()=>No,parseJsonErrorBody:()=>Mb,parseXmlBody:()=>Sm,parseXmlErrorBody:()=>rT});var Mn=w(()=>{c();wb();Ab();Ub();Fb();oc();qb();sc();dm();pm();Hb();Do();Zb();ym();nT();bm();dc();_m();Em()});var Xr={};lt(Xr,{AWSSDKSigV4Signer:()=>Rp,AwsEc2QueryProtocol:()=>pc,AwsJson1_0Protocol:()=>ic,AwsJson1_1Protocol:()=>ac,AwsJsonRpcProtocol:()=>Kr,AwsQueryProtocol:()=>Yr,AwsRestJsonProtocol:()=>Gr,AwsRestXmlProtocol:()=>gc,AwsSdkSigV4ASigner:()=>Ro,AwsSdkSigV4Signer:()=>Qe,AwsSmithyRpcV2CborProtocol:()=>Za,JsonCodec:()=>Qr,JsonShapeDeserializer:()=>bs,JsonShapeSerializer:()=>Ts,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Fr,NODE_SIGV4A_CONFIG_OPTIONS:()=>x_,XmlCodec:()=>Rs,XmlShapeDeserializer:()=>Wr,XmlShapeSerializer:()=>As,_toBool:()=>bb,_toNum:()=>Tb,_toStr:()=>_b,awsExpectUnion:()=>jb,emitWarningIfUnsupportedVersion:()=>Lr,getBearerTokenEnvKey:()=>$a,loadRestJsonErrorCode:()=>_s,loadRestXmlErrorCode:()=>mc,parseJsonBody:()=>No,parseJsonErrorBody:()=>Mb,parseXmlBody:()=>Sm,parseXmlErrorBody:()=>rT,resolveAWSSDKSigV4Config:()=>rb,resolveAwsSdkSigV4AConfig:()=>C_,resolveAwsSdkSigV4Config:()=>mr,setCredentialFeature:()=>Ur,setFeature:()=>d_,setTokenFeature:()=>p_,state:()=>ka,validateSigningProperties:()=>ms});var qe=w(()=>{c();Tt();Vp();Mn()});var kn=O(vs=>{"use strict";c();var PL=(ot(),re(ds)),OL=On(),NL=me(),Yt=(qe(),re(Xr)),aT=void 0;function DL(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function ML(e){let t=PL.normalizeProvider(e.userAgentAppId??aT),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!DL(n)){let s=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var kL=/\d{12}\.ddb/;async function $L(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Yt.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Yt.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Yt.setFeature(e,"RETRY_MODE_STANDARD","E"):Yt.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(kL)&&Yt.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Yt.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Yt.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Yt.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&Yt.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Yt.setFeature(e,i,a)}}var sT="user-agent",Am="x-amz-user-agent",oT=" ",Rm="/",LL=/[^!$%&'*+\-.^_`|~\w]/g,UL=/[^!$%&'*+\-.^_`|~\w#]/g,iT="-",FL=1024;function qL(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=FL){t.length?t+=","+n:t+=n;continue}break}return t}var cT=e=>(t,r)=>async n=>{let{request:s}=n;if(!NL.HttpRequest.isInstance(s))return t(n);let{headers:o}=s,i=r?.userAgent?.map(yc)||[],a=(await e.defaultUserAgentProvider()).map(yc);await $L(r,e,n);let u=r;a.push(`m/${qL(Object.assign({},r.__smithy_context?.features,u.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(yc)||[],m=await e.userAgentAppId();m&&a.push(yc(["app",`${m}`]));let p=OL.getUserAgentPrefix(),g=(p?[p]:[]).concat([...a,...i,...l]).join(oT),h=[...a.filter(S=>S.startsWith("aws-sdk-")),...l].join(oT);return e.runtime!=="browser"?(h&&(o[Am]=o[Am]?`${o[sT]} ${h}`:h),o[sT]=g):o[Am]=g,t({...n,request:s})},yc=e=>{let t=e[0].split(Rm).map(i=>i.replace(LL,iT)).join(Rm),r=e[1]?.replace(UL,iT),n=t.indexOf(Rm),s=t.substring(0,n),o=t.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,u)=>{switch(u){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},uT={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},BL=e=>({applyToStack:t=>{t.add(cT(e),uT)}});vs.DEFAULT_UA_APP_ID=aT;vs.getUserAgentMiddlewareOptions=uT;vs.getUserAgentPlugin=BL;vs.resolveUserAgentConfig=ML;vs.userAgentMiddleware=cT});var lT=O(Cs=>{"use strict";c();var jL=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},HL=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};Cs.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Cs.SelectorType||(Cs.SelectorType={}));Cs.booleanSelector=jL;Cs.numberSelector=HL});var pt=O(Be=>{"use strict";c();var Jr=lT(),Sc=tt(),zL=$r(),pT="AWS_USE_DUALSTACK_ENDPOINT",mT="use_dualstack_endpoint",VL=!1,QL={environmentVariableSelector:e=>Jr.booleanSelector(e,pT,Jr.SelectorType.ENV),configFileSelector:e=>Jr.booleanSelector(e,mT,Jr.SelectorType.CONFIG),default:!1},hT="AWS_USE_FIPS_ENDPOINT",gT="use_fips_endpoint",KL=!1,GL={environmentVariableSelector:e=>Jr.booleanSelector(e,hT,Jr.SelectorType.ENV),configFileSelector:e=>Jr.booleanSelector(e,gT,Jr.SelectorType.CONFIG),default:!1},WL=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:s}=e;return Object.assign(e,{tls:t??!0,endpoint:Sc.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Sc.normalizeProvider(s??!1)})},YL=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},XL=e=>{let t=Sc.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?Sc.normalizeProvider(typeof r=="string"?s(r):r):()=>YL({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},yT="AWS_REGION",ST="region",JL={environmentVariableSelector:e=>e[yT],configFileSelector:e=>e[ST],default:()=>{throw new Error("Region is missing")}},ZL={preferredFile:"credentials"},dT=new Set,eU=(e,t=zL.isValidHostLabel)=>{if(!dT.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else dT.add(e)},ET=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),tU=e=>ET(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,rU=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let n=typeof t=="function"?await t():t,s=tU(n);return eU(s),s},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return ET(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},fT=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,nU=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),sU=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",oU=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(s);if(o)return o[0].slice(1,-1)}},iU=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:o})=>{let i=sU(e,{partitionHash:o}),a=e in s?e:o[i]?.endpoint??e,u={useFipsEndpoint:t,useDualstackEndpoint:r},l=fT(s[a]?.variants,u),m=fT(o[i]?.variants,u),p=nU(a,{regionHostname:l,partitionHostname:m});if(p===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let g=oU(p,{signingRegion:s[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:p,...g&&{signingRegion:g},...s[a]?.signingService&&{signingService:s[a].signingService}}};Be.CONFIG_USE_DUALSTACK_ENDPOINT=mT;Be.CONFIG_USE_FIPS_ENDPOINT=gT;Be.DEFAULT_USE_DUALSTACK_ENDPOINT=VL;Be.DEFAULT_USE_FIPS_ENDPOINT=KL;Be.ENV_USE_DUALSTACK_ENDPOINT=pT;Be.ENV_USE_FIPS_ENDPOINT=hT;Be.NODE_REGION_CONFIG_FILE_OPTIONS=ZL;Be.NODE_REGION_CONFIG_OPTIONS=JL;Be.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=QL;Be.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=GL;Be.REGION_ENV_NAME=yT;Be.REGION_INI_NAME=ST;Be.getRegionInfo=iU;Be.resolveCustomEndpointsConfig=WL;Be.resolveEndpointsConfig=XL;Be.resolveRegionConfig=rU});var xs=O(Ec=>{"use strict";c();var aU=me(),wT="content-length";function _T(e){return t=>async r=>{let n=r.request;if(aU.HttpRequest.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(wT)===-1)try{let i=e(s);n.headers={...n.headers,[wT]:String(i)}}catch{}}return t({...r,request:n})}}var bT={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},cU=e=>({applyToStack:t=>{t.add(_T(e.bodyLengthChecker),bT)}});Ec.contentLengthMiddleware=_T;Ec.contentLengthMiddlewareOptions=bT;Ec.getContentLengthPlugin=cU});var Cm=O(wc=>{"use strict";c();Object.defineProperty(wc,"__esModule",{value:!0});wc.getHomeDir=void 0;var uU=Y("os"),lU=Y("path"),vm={},dU=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",fU=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${lU.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let s=dU();return vm[s]||(vm[s]=(0,uU.homedir)()),vm[s]};wc.getHomeDir=fU});var xm=O(_c=>{"use strict";c();Object.defineProperty(_c,"__esModule",{value:!0});_c.getSSOTokenFilepath=void 0;var pU=Y("crypto"),mU=Y("path"),hU=Cm(),gU=e=>{let r=(0,pU.createHash)("sha1").update(e).digest("hex");return(0,mU.join)((0,hU.getHomeDir)(),".aws","sso","cache",`${r}.json`)};_c.getSSOTokenFilepath=gU});var TT=O(Zr=>{"use strict";c();Object.defineProperty(Zr,"__esModule",{value:!0});Zr.getSSOTokenFromFile=Zr.tokenIntercept=void 0;var yU=Y("fs/promises"),SU=xm();Zr.tokenIntercept={};var EU=async e=>{if(Zr.tokenIntercept[e])return Zr.tokenIntercept[e];let t=(0,SU.getSSOTokenFilepath)(e),r=await(0,yU.readFile)(t,"utf8");return JSON.parse(r)};Zr.getSSOTokenFromFile=EU});var AT=O(gt=>{"use strict";c();Object.defineProperty(gt,"__esModule",{value:!0});gt.readFile=gt.fileIntercept=gt.filePromises=void 0;var wU=Y("node:fs/promises");gt.filePromises={};gt.fileIntercept={};var _U=(e,t)=>gt.fileIntercept[e]!==void 0?gt.fileIntercept[e]:((!gt.filePromises[e]||t?.ignoreCache)&&(gt.filePromises[e]=(0,wU.readFile)(e,"utf8")),gt.filePromises[e]);gt.readFile=_U});var Xt=O(at=>{"use strict";c();var Mo=Cm(),RT=xm(),Im=TT(),bc=Y("path"),Tc=Ir(),Is=AT(),CT="AWS_PROFILE",xT="default",bU=e=>e.profile||process.env[CT]||xT,$n=".",TU=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf($n);return r===-1?!1:Object.values(Tc.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let s=r.indexOf($n),o=r.substring(0,s)===Tc.IniSectionType.PROFILE?r.substring(s+1):r;return t[o]=n,t},{...e.default&&{default:e.default}}),AU="AWS_CONFIG_FILE",IT=()=>process.env[AU]||bc.join(Mo.getHomeDir(),".aws","config"),RU="AWS_SHARED_CREDENTIALS_FILE",vU=()=>process.env[RU]||bc.join(Mo.getHomeDir(),".aws","credentials"),CU=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,xU=["__proto__","profile __proto__"],Pm=e=>{let t={},r,n;for(let s of e.split(/\r?\n/)){let o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),u=CU.exec(a);if(u){let[,l,,m]=u;Object.values(Tc.IniSectionType).includes(l)&&(r=[l,m].join($n))}else r=a;if(xU.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[u,l]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(l==="")n=u;else{n&&s.trimStart()===s&&(n=void 0),t[r]=t[r]||{};let m=n?[n,u].join($n):u;t[r][m]=l}}}}return t},vT=()=>({}),PT=async(e={})=>{let{filepath:t=vU(),configFilepath:r=IT()}=e,n=Mo.getHomeDir(),s="~/",o=t;t.startsWith(s)&&(o=bc.join(n,t.slice(2)));let i=r;r.startsWith(s)&&(i=bc.join(n,r.slice(2)));let a=await Promise.all([Is.readFile(i,{ignoreCache:e.ignoreCache}).then(Pm).then(TU).catch(vT),Is.readFile(o,{ignoreCache:e.ignoreCache}).then(Pm).catch(vT)]);return{configFile:a[0],credentialsFile:a[1]}},IU=e=>Object.entries(e).filter(([t])=>t.startsWith(Tc.IniSectionType.SSO_SESSION+$n)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf($n)+1)]:n}),{}),PU=()=>({}),OU=async(e={})=>Is.readFile(e.configFilepath??IT()).then(Pm).then(IU).catch(PU),NU=(...e)=>{let t={};for(let r of e)for(let[n,s]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],s):t[n]=s;return t},DU=async e=>{let t=await PT(e);return NU(t.configFile,t.credentialsFile)},MU={getFileRecord(){return Is.fileIntercept},interceptFile(e,t){Is.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return Im.tokenIntercept},interceptToken(e,t){Im.tokenIntercept[e]=t}};Object.defineProperty(at,"getSSOTokenFromFile",{enumerable:!0,get:function(){return Im.getSSOTokenFromFile}});Object.defineProperty(at,"readFile",{enumerable:!0,get:function(){return Is.readFile}});at.CONFIG_PREFIX_SEPARATOR=$n;at.DEFAULT_PROFILE=xT;at.ENV_PROFILE=CT;at.externalDataInterceptor=MU;at.getProfileName=bU;at.loadSharedConfigFiles=PT;at.loadSsoSessionData=OU;at.parseKnownFiles=DU;Object.keys(Mo).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(at,e)&&Object.defineProperty(at,e,{enumerable:!0,get:function(){return Mo[e]}})});Object.keys(RT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(at,e)&&Object.defineProperty(at,e,{enumerable:!0,get:function(){return RT[e]}})})});var Jt=O(DT=>{"use strict";c();var ko=Ke(),OT=Xt();function NT(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var kU=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new ko.CredentialsProviderError(r.message||`Not found in ENV: ${NT(e.toString())}`,{logger:t?.logger})}},$U=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=OT.getProfileName(r),{configFile:s,credentialsFile:o}=await OT.loadSharedConfigFiles(r),i=o[n]||{},a=s[n]||{},u=t==="config"?{...i,...a}:{...a,...i};try{let m=e(u,t==="config"?s:o);if(m===void 0)throw new Error;return m}catch(l){throw new ko.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${NT(e.toString())}`,{logger:r.logger})}},LU=e=>typeof e=="function",UU=e=>LU(e)?async()=>await e():ko.fromStatic(e),FU=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:s,logger:o}=n,i={signingName:s,logger:o};return ko.memoize(ko.chain(kU(e,i),$U(t,n),UU(r)))};DT.loadConfig=FU});var LT=O(Ac=>{"use strict";c();Object.defineProperty(Ac,"__esModule",{value:!0});Ac.getEndpointUrlConfig=void 0;var MT=Xt(),kT="AWS_ENDPOINT_URL",$T="endpoint_url",qU=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(o=>o.toUpperCase()),n=t[[kT,...r].join("_")];if(n)return n;let s=t[kT];if(s)return s},configFileSelector:(t,r)=>{if(r&&t.services){let s=r[["services",t.services].join(MT.CONFIG_PREFIX_SEPARATOR)];if(s){let o=e.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),$T].join(MT.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[$T];if(n)return n},default:void 0});Ac.getEndpointUrlConfig=qU});var UT=O(Rc=>{"use strict";c();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.getEndpointFromConfig=void 0;var BU=Jt(),jU=LT(),HU=async e=>(0,BU.loadConfig)((0,jU.getEndpointUrlConfig)(e??""))();Rc.getEndpointFromConfig=HU});var Zt=O(wr=>{"use strict";c();var qT=UT(),FT=fr(),zU=(ot(),re(ds)),vc=tt(),VU=ap(),QU=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),XU(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!YU(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},KU=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,GU=/(\d+\.){3}\d+/,WU=/\.\./,YU=e=>KU.test(e)&&!GU.test(e)&&!WU.test(e),XU=e=>{let[t,r,n,,,s]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=!!(o&&r&&n&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},JU=(e,t,r,n=!1)=>{let s=async()=>{let o;return n?o=r.clientContextParams?.[e]??r[e]??r[t]:o=r[e]??r[t],typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await s();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:a,port:u,path:l}=o;return`${i}//${a}${u?":"+u:""}${l}`}}return o}:s},Om=e=>typeof e=="object"?"url"in e?FT.parseUrl(e.url):e:FT.parseUrl(e),BT=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await qT.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Om(i)),r.isCustomEndpoint=!0)}let s=await jT(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},jT=async(e,t,r)=>{let n={},s=t?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":n[o]=i.value;break;case"contextParams":n[o]=e[i.name];break;case"clientContextParams":case"builtInParams":n[o]=await JU(i.name,o,r,i.type!=="builtInParams")();break;case"operationContextParams":n[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await QU(n),n},HT=({config:e,instructions:t})=>(r,n)=>async s=>{e.isCustomEndpoint&&zU.setFeature(n,"ENDPOINT_OVERRIDE","N");let o=await BT(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let u=vc.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...s})},zT={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:VU.serializerMiddlewareOption.name},ZU=(e,t)=>({applyToStack:r=>{r.addRelativeTo(HT({config:e,instructions:t}),zT)}}),eF=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=e,o=r!=null?async()=>Om(await vc.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:vc.normalizeProvider(n??!1),useFipsEndpoint:vc.normalizeProvider(s??!1)}),u;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!u&&(u=qT.getEndpointFromConfig(e.serviceId)),u),a},tF=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};wr.endpointMiddleware=HT;wr.endpointMiddlewareOptions=zT;wr.getEndpointFromInstructions=BT;wr.getEndpointPlugin=ZU;wr.resolveEndpointConfig=eF;wr.resolveEndpointRequiredConfig=tF;wr.resolveParams=jT;wr.toEndpointV1=Om});var Dm=O(en=>{"use strict";c();var rF=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],nF=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],sF=["TimeoutError","RequestTimeout","RequestTimeoutException"],oF=[500,502,503,504],iF=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],aF=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],VT=e=>e?.$retryable!==void 0,cF=e=>rF.includes(e.name),QT=e=>e.$metadata?.clockSkewCorrected,KT=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},uF=e=>e.$metadata?.httpStatusCode===429||nF.includes(e.name)||e.$retryable?.throttling==!0,Nm=(e,t=0)=>VT(e)||QT(e)||sF.includes(e.name)||iF.includes(e?.code||"")||aF.includes(e?.code||"")||oF.includes(e.$metadata?.httpStatusCode||0)||KT(e)||e.cause!==void 0&&t<=10&&Nm(e.cause,t+1),lF=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Nm(e)}return!1};en.isBrowserNetworkError=KT;en.isClockSkewCorrectedError=QT;en.isClockSkewError=cF;en.isRetryableByTrait=VT;en.isServerError=lF;en.isThrottlingError=uF;en.isTransientError=Nm});var Ln=O(Pe=>{"use strict";c();var dF=Dm();Pe.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Pe.RETRY_MODES||(Pe.RETRY_MODES={}));var Mm=3,fF=Pe.RETRY_MODES.STANDARD,Cc=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),dF.isThrottlingError(t)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},$o=100,Um=20*1e3,WT=500,km=500,YT=5,XT=10,JT=1,pF="amz-sdk-invocation-id",mF="amz-sdk-request",hF=()=>{let e=$o;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Um,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},GT=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Um,e),getRetryCost:()=>r}),Lo=class{maxAttempts;mode=Pe.RETRY_MODES.STANDARD;capacity=km;retryBackoffStrategy=hF();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return GT({retryDelay:$o,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?WT:$o);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,GT({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(km,this.capacity+(t.getRetryCost()??JT))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Mm}`),Mm}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?XT:YT}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},$m=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Pe.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Cc,this.standardRetryStrategy=new Lo(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},Lm=class extends Lo{computeNextBackoffDelay;constructor(t,r=$o){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Pe.AdaptiveRetryStrategy=$m;Pe.ConfiguredRetryStrategy=Lm;Pe.DEFAULT_MAX_ATTEMPTS=Mm;Pe.DEFAULT_RETRY_DELAY_BASE=$o;Pe.DEFAULT_RETRY_MODE=fF;Pe.DefaultRateLimiter=Cc;Pe.INITIAL_RETRY_TOKENS=km;Pe.INVOCATION_ID_HEADER=pF;Pe.MAXIMUM_RETRY_DELAY=Um;Pe.NO_RETRY_INCREMENT=JT;Pe.REQUEST_HEADER=mF;Pe.RETRY_COST=YT;Pe.StandardRetryStrategy=Lo;Pe.THROTTLING_RETRY_DELAY_BASE=WT;Pe.TIMEOUT_RETRY_COST=XT});var ZT=O(xc=>{"use strict";c();Object.defineProperty(xc,"__esModule",{value:!0});xc.isStreamingPayload=void 0;var gF=Y("stream"),yF=e=>e?.body instanceof gF.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;xc.isStreamingPayload=yF});var Lt=O($e=>{"use strict";c();var Ce=Ln(),Ps=me(),tn=Dm(),tA=Of(),eA=tt(),SF=K(),EF=ZT(),wF=(e,t)=>{let r=e,n=Ce.NO_RETRY_INCREMENT,s=Ce.RETRY_COST,o=Ce.TIMEOUT_RETRY_COST,i=e,a=p=>p.name==="TimeoutError"?o:s,u=p=>a(p)<=i;return Object.freeze({hasRetryTokens:u,retrieveRetryTokens:p=>{if(!u(p))throw new Error("No retry token available");let g=a(p);return i-=g,g},releaseRetryTokens:p=>{i+=p??n,i=Math.min(i,r)}})},rA=(e,t)=>Math.floor(Math.min(Ce.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),nA=e=>e?tn.isRetryableByTrait(e)||tn.isClockSkewError(e)||tn.isThrottlingError(e)||tn.isTransientError(e):!1,sA=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Ic=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ce.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??nA,this.delayDecider=r?.delayDecider??rA,this.retryQuota=r?.retryQuota??wF(Ce.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Ce.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let s,o=0,i=0,a=await this.getMaxAttempts(),{request:u}=r;for(Ps.HttpRequest.isInstance(u)&&(u.headers[Ce.INVOCATION_ID_HEADER]=tA.v4());;)try{Ps.HttpRequest.isInstance(u)&&(u.headers[Ce.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:m}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(s),m.$metadata.attempts=o+1,m.$metadata.totalRetryDelay=i,{response:l,output:m}}catch(l){let m=sA(l);if(o++,this.shouldRetry(m,o,a)){s=this.retryQuota.retrieveRetryTokens(m);let p=this.delayDecider(tn.isThrottlingError(m)?Ce.THROTTLING_RETRY_DELAY_BASE:Ce.DEFAULT_RETRY_DELAY_BASE,o),g=_F(m.$response),h=Math.max(g||0,p);i+=h,await new Promise(S=>setTimeout(S,h));continue}throw m.$metadata||(m.$metadata={}),m.$metadata.attempts=o,m.$metadata.totalRetryDelay=i,m}}},_F=e=>{if(!Ps.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},Fm=class extends Ic{rateLimiter;constructor(t,r){let{rateLimiter:n,...s}=r??{};super(t,s),this.rateLimiter=n??new Ce.DefaultRateLimiter,this.mode=Ce.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},qm="AWS_MAX_ATTEMPTS",Bm="max_attempts",bF={environmentVariableSelector:e=>{let t=e[qm];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${qm} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Bm];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Bm} mast be a number, got "${t}"`);return r},default:Ce.DEFAULT_MAX_ATTEMPTS},TF=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,s=eA.normalizeProvider(n??Ce.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:s,retryStrategy:async()=>t||(await eA.normalizeProvider(r)()===Ce.RETRY_MODES.ADAPTIVE?new Ce.AdaptiveRetryStrategy(s):new Ce.StandardRetryStrategy(s))})},oA="AWS_RETRY_MODE",iA="retry_mode",AF={environmentVariableSelector:e=>e[oA],configFileSelector:e=>e[iA],default:Ce.DEFAULT_RETRY_MODE},aA=()=>e=>async t=>{let{request:r}=t;return Ps.HttpRequest.isInstance(r)&&(delete r.headers[Ce.INVOCATION_ID_HEADER],delete r.headers[Ce.REQUEST_HEADER]),e(t)},cA={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},RF=e=>({applyToStack:t=>{t.addRelativeTo(aA(),cA)}}),uA=e=>(t,r)=>async n=>{let s=await e.retryStrategy(),o=await e.maxAttempts();if(vF(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,u=0,l=0,{request:m}=n,p=Ps.HttpRequest.isInstance(m);for(p&&(m.headers[Ce.INVOCATION_ID_HEADER]=tA.v4());;)try{p&&(m.headers[Ce.REQUEST_HEADER]=`attempt=${u+1}; max=${o}`);let{response:g,output:h}=await t(n);return s.recordSuccess(i),h.$metadata.attempts=u+1,h.$metadata.totalRetryDelay=l,{response:g,output:h}}catch(g){let h=CF(g);if(a=sA(g),p&&EF.isStreamingPayload(m))throw(r.logger instanceof SF.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=l,a}u=i.getRetryCount();let S=i.getRetryDelay();l+=S,await new Promise(R=>setTimeout(R,S))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},vF=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",CF=e=>{let t={error:e,errorType:xF(e)},r=dA(e.$response);return r&&(t.retryAfterHint=r),t},xF=e=>tn.isThrottlingError(e)?"THROTTLING":tn.isTransientError(e)?"TRANSIENT":tn.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",lA={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},IF=e=>({applyToStack:t=>{t.add(uA(e),lA)}}),dA=e=>{if(!Ps.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};$e.AdaptiveRetryStrategy=Fm;$e.CONFIG_MAX_ATTEMPTS=Bm;$e.CONFIG_RETRY_MODE=iA;$e.ENV_MAX_ATTEMPTS=qm;$e.ENV_RETRY_MODE=oA;$e.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=bF;$e.NODE_RETRY_MODE_CONFIG_OPTIONS=AF;$e.StandardRetryStrategy=Ic;$e.defaultDelayDecider=rA;$e.defaultRetryDecider=nA;$e.getOmitRetryHeadersPlugin=RF;$e.getRetryAfterHint=dA;$e.getRetryPlugin=IF;$e.omitRetryHeadersMiddleware=aA;$e.omitRetryHeadersMiddlewareOptions=cA;$e.resolveRetryConfig=TF;$e.retryMiddleware=uA;$e.retryMiddlewareOptions=lA});var Hm=O(rn=>{"use strict";c();Object.defineProperty(rn,"__esModule",{value:!0});rn.resolveHttpAuthSchemeConfig=rn.defaultSQSHttpAuthSchemeProvider=rn.defaultSQSHttpAuthSchemeParametersProvider=void 0;var PF=(qe(),re(Xr)),jm=tt(),OF=async(e,t,r)=>({operation:(0,jm.getSmithyContext)(t).operation,region:await(0,jm.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});rn.defaultSQSHttpAuthSchemeParametersProvider=OF;function NF(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sqs",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var DF=e=>{let t=[];switch(e.operation){default:t.push(NF(e))}return t};rn.defaultSQSHttpAuthSchemeProvider=DF;var MF=e=>{let t=(0,PF.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,jm.normalizeProvider)(e.authSchemePreference??[])})};rn.resolveHttpAuthSchemeConfig=MF});var fA=O((QJ,kF)=>{kF.exports={name:"@aws-sdk/client-sqs",description:"AWS SDK for JavaScript Sqs Client for Node.js, Browser and React Native",version:"3.974.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sqs","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sqs","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/credential-provider-node":"^3.972.1","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-sdk-sqs":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/md5-js":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sqs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sqs"}}});var zm=O(nn=>{"use strict";c();var $F=(Tt(),re(pr)),LF=Ke(),pA="AWS_ACCESS_KEY_ID",mA="AWS_SECRET_ACCESS_KEY",hA="AWS_SESSION_TOKEN",gA="AWS_CREDENTIAL_EXPIRATION",yA="AWS_CREDENTIAL_SCOPE",SA="AWS_ACCOUNT_ID",UF=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[pA],r=process.env[mA],n=process.env[hA],s=process.env[gA],o=process.env[yA],i=process.env[SA];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return $F.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new LF.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};nn.ENV_ACCOUNT_ID=SA;nn.ENV_CREDENTIAL_SCOPE=yA;nn.ENV_EXPIRATION=gA;nn.ENV_KEY=pA;nn.ENV_SECRET=mA;nn.ENV_SESSION=hA;nn.fromEnv=UF});var Fo=O(We=>{"use strict";c();var er=Ke(),FF=Y("url"),qF=Y("buffer"),BF=Y("http"),Wm=Jt(),jF=fr();function Uo(e){return new Promise((t,r)=>{let n=BF.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new er.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new er.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new er.ProviderError("Error response received from instance metadata service"),{statusCode:o})),n.destroy());let i=[];s.on("data",a=>{i.push(a)}),s.on("end",()=>{t(qF.Buffer.concat(i)),n.destroy()})}),n.end()})}var bA=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",TA=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),AA=1e3,RA=0,Ym=({maxRetries:e=RA,timeout:t=AA})=>({maxRetries:e,timeout:t}),Qm=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},Pc="AWS_CONTAINER_CREDENTIALS_FULL_URI",Oc="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Km="AWS_CONTAINER_AUTHORIZATION_TOKEN",HF=(e={})=>{let{timeout:t,maxRetries:r}=Ym(e);return()=>Qm(async()=>{let n=await GF({logger:e.logger}),s=JSON.parse(await zF(t,n));if(!bA(s))throw new er.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return TA(s)},r)},zF=async(e,t)=>(process.env[Km]&&(t.headers={...t.headers,Authorization:process.env[Km]}),(await Uo({...t,timeout:e})).toString()),VF="169.254.170.2",QF={localhost:!0,"127.0.0.1":!0},KF={"http:":!0,"https:":!0},GF=async({logger:e})=>{if(process.env[Oc])return{hostname:VF,path:process.env[Oc]};if(process.env[Pc]){let t=FF.parse(process.env[Pc]);if(!t.hostname||!(t.hostname in QF))throw new er.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in KF))throw new er.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new er.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Oc} or ${Pc} environment variable is set`,{tryNextLink:!1,logger:e})},Gm=class e extends er.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};We.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(We.Endpoint||(We.Endpoint={}));var WF="AWS_EC2_METADATA_SERVICE_ENDPOINT",YF="ec2_metadata_service_endpoint",XF={environmentVariableSelector:e=>e[WF],configFileSelector:e=>e[YF],default:void 0},Os;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(Os||(Os={}));var JF="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",ZF="ec2_metadata_service_endpoint_mode",eq={environmentVariableSelector:e=>e[JF],configFileSelector:e=>e[ZF],default:Os.IPv4},vA=async()=>jF.parseUrl(await tq()||await rq()),tq=async()=>Wm.loadConfig(XF)(),rq=async()=>{let e=await Wm.loadConfig(eq)();switch(e){case Os.IPv4:return We.Endpoint.IPv4;case Os.IPv6:return We.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(Os)}`)}},nq=5*60,sq=5*60,oq="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",EA=(e,t)=>{let r=nq+Math.floor(Math.random()*sq),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+oq);let s=e.originalExpiration??e.expiration;return{...e,...s?{originalExpiration:s}:{},expiration:n}},iq=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let s;try{s=await e(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=EA(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=EA(n,r);else throw o}return n=s,s}},CA="/latest/meta-data/iam/security-credentials/",aq="/latest/api/token",Vm="AWS_EC2_METADATA_V1_DISABLED",wA="ec2_metadata_v1_disabled",_A="x-aws-ec2-metadata-token",cq=(e={})=>iq(uq(e),{logger:e.logger}),uq=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:s,maxRetries:o}=Ym(e),i=async(a,u)=>{if(t||u.headers?.[_A]==null){let p=!1,g=!1,h=await Wm.loadConfig({environmentVariableSelector:S=>{let R=S[Vm];if(g=!!R&&R!=="false",R===void 0)throw new er.CredentialsProviderError(`${Vm} not set in env, checking config file next.`,{logger:e.logger});return g},configFileSelector:S=>{let R=S[wA];return p=!!R&&R!=="false",p},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||h){let S=[];throw e.ec2MetadataV1Disabled&&S.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),p&&S.push(`config file profile (${wA})`),g&&S.push(`process environment variable (${Vm})`),new Gm(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${S.join(", ")}].`)}}let m=(await Qm(async()=>{let p;try{p=await dq(u)}catch(g){throw g.statusCode===401&&(t=!1),g}return p},a)).trim();return Qm(async()=>{let p;try{p=await fq(m,u,e)}catch(g){throw g.statusCode===401&&(t=!1),g}return p},a)};return async()=>{let a=await vA();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:s});{let u;try{u=(await lq({...a,timeout:s})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:s})}return i(o,{...a,headers:{[_A]:u},timeout:s})}}},lq=async e=>Uo({...e,path:aq,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),dq=async e=>(await Uo({...e,path:CA})).toString(),fq=async(e,t,r)=>{let n=JSON.parse((await Uo({...t,path:CA+e})).toString());if(!bA(n))throw new er.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return TA(n)};We.DEFAULT_MAX_RETRIES=RA;We.DEFAULT_TIMEOUT=AA;We.ENV_CMDS_AUTH_TOKEN=Km;We.ENV_CMDS_FULL_URI=Pc;We.ENV_CMDS_RELATIVE_URI=Oc;We.fromContainerMetadata=HF;We.fromInstanceMetadata=cq;We.getInstanceMetadataEndpoint=vA;We.httpRequest=Uo;We.providerConfigFromInit=Ym});var xA=O(Nc=>{"use strict";c();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.checkUrl=void 0;var pq=Ke(),mq="169.254.170.2",hq="169.254.170.23",gq="[fd00:ec2::23]",yq=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===mq||e.hostname===hq||e.hostname===gq)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=s=>{let o=parseInt(s,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new pq.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Nc.checkUrl=yq});var IA=O(Dc=>{"use strict";c();Object.defineProperty(Dc,"__esModule",{value:!0});Dc.createGetRequest=_q;Dc.getCredentials=bq;var Xm=Ke(),Sq=me(),Eq=K(),wq=oa();function _q(e){return new Sq.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function bq(e,t){let n=await(0,wq.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new Xm.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,Eq.parseRfc3339DateTime)(s.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new Xm.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:s.Code,Message:s.Message})}throw new Xm.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var PA=O(Mc=>{"use strict";c();Object.defineProperty(Mc,"__esModule",{value:!0});Mc.retryWrapper=void 0;var Tq=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};Mc.retryWrapper=Tq});var DA=O(kc=>{"use strict";c();Object.defineProperty(kc,"__esModule",{value:!0});kc.fromHttp=void 0;var Aq=(So(),re(yo)),Rq=(Tt(),re(pr)),vq=Nr(),OA=Ke(),Cq=Aq.__importDefault(Y("fs/promises")),xq=xA(),NA=IA(),Iq=PA(),Pq="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Oq="http://169.254.170.2",Nq="AWS_CONTAINER_CREDENTIALS_FULL_URI",Dq="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",Mq="AWS_CONTAINER_AUTHORIZATION_TOKEN",kq=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[Pq],n=e.awsContainerCredentialsFullUri??process.env[Nq],s=e.awsContainerAuthorizationToken??process.env[Mq],o=e.awsContainerAuthorizationTokenFile??process.env[Dq],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),s&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${Oq}${r}`;else throw new OA.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,xq.checkUrl)(a,e.logger);let u=vq.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,Iq.retryWrapper)(async()=>{let l=(0,NA.createGetRequest)(a);s?l.headers.Authorization=s:o&&(l.headers.Authorization=(await Cq.default.readFile(o)).toString());try{let m=await u.handle(l);return(0,NA.getCredentials)(m.response).then(p=>(0,Rq.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(m){throw new OA.CredentialsProviderError(String(m),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};kc.fromHttp=kq});var Jm=O($c=>{"use strict";c();Object.defineProperty($c,"__esModule",{value:!0});$c.fromHttp=void 0;var $q=DA();Object.defineProperty($c,"fromHttp",{enumerable:!0,get:function(){return $q.fromHttp}})});function Lq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Uq(e){return{schemeId:"smithy.api#noAuth"}}var qo,MA,kA,$A,Zm=w(()=>{c();qe();qo=T(tt()),MA=async(e,t,r)=>({operation:(0,qo.getSmithyContext)(t).operation,region:await(0,qo.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});kA=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(Uq(e));break}default:t.push(Lq(e))}return t},$A=e=>{let t=mr(e);return Object.assign(t,{authSchemePreference:(0,qo.normalizeProvider)(e.authSchemePreference??[])})}});var LA,UA,eh=w(()=>{c();LA=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),UA={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Ns,Lc=w(()=>{Ns={name:"@aws-sdk/nested-clients",version:"3.974.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var Ds=O(Un=>{"use strict";c();var FA=Y("os"),th=Y("process"),qq=kn(),qA={isCrtAvailable:!1},Bq=()=>qA.isCrtAvailable?["md/crt-avail"]:null,BA=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${FA.platform()}`,FA.release()],["lang/js"],["md/nodejs",`${th.versions.node}`]],s=Bq();s&&n.push(s),e&&n.push([`api/${e}`,t]),th.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${th.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},jq=BA,jA="AWS_SDK_UA_APP_ID",HA="sdk_ua_app_id",Hq="sdk-ua-app-id",zq={environmentVariableSelector:e=>e[jA],configFileSelector:e=>e[HA]??e[Hq],default:qq.DEFAULT_UA_APP_ID};Un.NODE_APP_ID_CONFIG_OPTIONS=zq;Un.UA_APP_ID_ENV_NAME=jA;Un.UA_APP_ID_INI_NAME=HA;Un.createDefaultUserAgentProvider=BA;Un.crtAvailability=qA;Un.defaultUserAgent=jq});var Ms=O(QA=>{"use strict";c();var rh=wt(),Vq=Ie(),Qq=Y("buffer"),zA=Y("crypto"),nh=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Vq.toUint8Array(VA(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?zA.createHmac(this.algorithmIdentifier,VA(this.secret)):zA.createHash(this.algorithmIdentifier)}};function VA(e,t){return Qq.Buffer.isBuffer(e)?e:typeof e=="string"?rh.fromString(e,t):ArrayBuffer.isView(e)?rh.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):rh.fromArrayBuffer(e)}QA.Hash=nh});var ks=O(KA=>{"use strict";c();var sh=Y("node:fs"),Kq=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof sh.ReadStream){if(e.path!=null)return sh.lstatSync(e.path).size;if(typeof e.fd=="number")return sh.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};KA.calculateBodyLength=Kq});var $s=O(XA=>{"use strict";c();var Gq=pt(),GA=Jt(),Wq=Ke(),Yq="AWS_EXECUTION_ENV",WA="AWS_REGION",YA="AWS_DEFAULT_REGION",Xq="AWS_EC2_METADATA_DISABLED",Jq=["in-region","cross-region","mobile","standard","legacy"],Zq="/latest/meta-data/placement/region",eB="AWS_DEFAULTS_MODE",tB="defaults_mode",rB={environmentVariableSelector:e=>e[eB],configFileSelector:e=>e[tB],default:"legacy"},nB=({region:e=GA.loadConfig(Gq.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=GA.loadConfig(rB)}={})=>Wq.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return sB(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Jq.join(", ")}, got ${r}`)}}),sB=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await oB();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},oB=async()=>{if(process.env[Yq]&&(process.env[WA]||process.env[YA]))return process.env[WA]??process.env[YA];if(!process.env[Xq])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>T(Fo())),r=await e();return(await t({...r,path:Zq})).toString()}catch{}};XA.resolveDefaultsModeConfig=nB});var aR,vt,Ct,Fs,JA,Bo,Ls,Us,_r,oh,ih,ZA,eR,tR,cR,uR,Rt,rR,lR,nR,sR,oR,iR,iB,dR,fR=w(()=>{c();aR="required",vt="fn",Ct="argv",Fs="ref",JA="isSet",Bo="booleanEquals",Ls="error",Us="endpoint",_r="tree",oh="PartitionResult",ih="getAttr",ZA={[aR]:!1,type:"string"},eR={[aR]:!0,default:!1,type:"boolean"},tR={[Fs]:"Endpoint"},cR={[vt]:Bo,[Ct]:[{[Fs]:"UseFIPS"},!0]},uR={[vt]:Bo,[Ct]:[{[Fs]:"UseDualStack"},!0]},Rt={},rR={[vt]:ih,[Ct]:[{[Fs]:oh},"supportsFIPS"]},lR={[Fs]:oh},nR={[vt]:Bo,[Ct]:[!0,{[vt]:ih,[Ct]:[lR,"supportsDualStack"]}]},sR=[cR],oR=[uR],iR=[{[Fs]:"Region"}],iB={version:"1.0",parameters:{Region:ZA,UseDualStack:eR,UseFIPS:eR,Endpoint:ZA},rules:[{conditions:[{[vt]:JA,[Ct]:[tR]}],rules:[{conditions:sR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ls},{conditions:oR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ls},{endpoint:{url:tR,properties:Rt,headers:Rt},type:Us}],type:_r},{conditions:[{[vt]:JA,[Ct]:iR}],rules:[{conditions:[{[vt]:"aws.partition",[Ct]:iR,assign:oh}],rules:[{conditions:[cR,uR],rules:[{conditions:[{[vt]:Bo,[Ct]:[!0,rR]},nR],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Rt,headers:Rt},type:Us}],type:_r},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ls}],type:_r},{conditions:sR,rules:[{conditions:[{[vt]:Bo,[Ct]:[rR,!0]}],rules:[{conditions:[{[vt]:"stringEquals",[Ct]:[{[vt]:ih,[Ct]:[lR,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Rt,headers:Rt},type:Us},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Rt,headers:Rt},type:Us}],type:_r},{error:"FIPS is enabled but this partition does not support FIPS",type:Ls}],type:_r},{conditions:oR,rules:[{conditions:[nR],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Rt,headers:Rt},type:Us}],type:_r},{error:"DualStack is enabled but this partition does not support DualStack",type:Ls}],type:_r},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Rt,headers:Rt},type:Us}],type:_r}],type:_r},{error:"Invalid Configuration: Missing Region",type:Ls}]},dR=iB});var pR,qs,aB,mR,hR=w(()=>{c();pR=T(On()),qs=T($r());fR();aB=new qs.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),mR=(e,t={})=>aB.get(e,()=>(0,qs.resolveEndpoint)(dR,{endpointParams:e,logger:t.logger}));qs.customEndpointFunctions.aws=pR.awsEndpointFunctions});var gR,yR,Uc,Fc,SR,ER=w(()=>{c();qe();Mn();ot();gR=T(K()),yR=T(fr()),Uc=T(Wt()),Fc=T(Ie());Zm();hR();SR=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Uc.fromBase64,base64Encoder:e?.base64Encoder??Uc.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??mR,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??kA,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Qe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new kt}],logger:e?.logger??new gR.NoOpLogger,protocol:e?.protocol??Gr,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??yR.parseUrl,utf8Decoder:e?.utf8Decoder??Fc.fromUtf8,utf8Encoder:e?.utf8Encoder??Fc.toUtf8})});var qc,on,wR,Bc,sn,jc,Hc,_R,bR,TR,AR,RR=w(()=>{c();Lc();qe();qc=T(Ds()),on=T(pt()),wR=T(Ms()),Bc=T(Lt()),sn=T(Jt()),jc=T(Nr()),Hc=T(K()),_R=T(ks()),bR=T($s()),TR=T(Ln());ER();AR=e=>{(0,Hc.emitWarningIfUnsupportedVersion)(process.version);let t=(0,bR.resolveDefaultsModeConfig)(e),r=()=>t().then(Hc.loadConfigsForDefaultMode),n=SR(e);Lr(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,sn.loadConfig)(Fr,s),bodyLengthChecker:e?.bodyLengthChecker??_R.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,qc.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ns.version}),maxAttempts:e?.maxAttempts??(0,sn.loadConfig)(Bc.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,sn.loadConfig)(on.NODE_REGION_CONFIG_OPTIONS,{...on.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:jc.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,sn.loadConfig)({...Bc.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||TR.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??wR.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??jc.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,sn.loadConfig)(on.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,sn.loadConfig)(on.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,sn.loadConfig)(qc.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var CR=O(Bs=>{"use strict";c();Object.defineProperty(Bs,"__esModule",{value:!0});Bs.warning=void 0;Bs.stsRegionDefaultResolver=uB;var vR=pt(),cB=Jt();function uB(e={}){return(0,cB.loadConfig)({...vR.NODE_REGION_CONFIG_OPTIONS,async default(){return Bs.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...vR.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}Bs.warning={silence:!1}});var Fn=O(tr=>{"use strict";c();var xR=CR(),jo=pt(),lB=e=>({setRegion(t){e.region=t},region(){return e.region}}),dB=e=>({region:e.region()});Object.defineProperty(tr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return jo.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(tr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return jo.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(tr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return jo.REGION_ENV_NAME}});Object.defineProperty(tr,"REGION_INI_NAME",{enumerable:!0,get:function(){return jo.REGION_INI_NAME}});Object.defineProperty(tr,"resolveRegionConfig",{enumerable:!0,get:function(){return jo.resolveRegionConfig}});tr.getAwsRegionExtensionConfiguration=lB;tr.resolveAwsRegionExtensionConfiguration=dB;Object.keys(xR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(tr,e)&&Object.defineProperty(tr,e,{enumerable:!0,get:function(){return xR[e]}})})});var IR,PR,OR=w(()=>{c();IR=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},PR=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var zc,Vc,Qc,NR,DR=w(()=>{c();zc=T(Fn()),Vc=T(me()),Qc=T(K());OR();NR=(e,t)=>{let r=Object.assign((0,zc.getAwsRegionExtensionConfiguration)(e),(0,Qc.getDefaultExtensionConfiguration)(e),(0,Vc.getHttpHandlerExtensionConfiguration)(e),IR(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,zc.resolveAwsRegionExtensionConfiguration)(r),(0,Qc.resolveDefaultRuntimeConfig)(r),(0,Vc.resolveHttpHandlerRuntimeConfig)(r),PR(r))}});var Kc,MR,kR,Gc,$R,LR,UR,Wc,ah,Ho,ch=w(()=>{c();Kc=T(Zn()),MR=T(es()),kR=T(ts()),Gc=T(kn()),$R=T(pt());ot();ae();LR=T(xs()),UR=T(Zt()),Wc=T(Lt()),ah=T(K());Zm();eh();RR();DR();Ho=class extends ah.Client{config;constructor(...[t]){let r=AR(t||{});super(r),this.initConfig=r;let n=LA(r),s=(0,Gc.resolveUserAgentConfig)(n),o=(0,Wc.resolveRetryConfig)(s),i=(0,$R.resolveRegionConfig)(o),a=(0,Kc.resolveHostHeaderConfig)(i),u=(0,UR.resolveEndpointConfig)(a),l=$A(u),m=NR(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(_n(this.config)),this.middlewareStack.use((0,Gc.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Wc.getRetryPlugin)(this.config)),this.middlewareStack.use((0,LR.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Kc.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,MR.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,kR.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(xn(this.config,{httpAuthSchemeParametersProvider:MA,identityProviderConfigProvider:async p=>new dr({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(In(this.config))}destroy(){super.destroy()}}});var FR,Ue,Yc=w(()=>{c();FR=T(K()),Ue=class e extends FR.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var zo,Vo,Qo,Ko,Go,Wo,Yo,Xo,Jo,Zo,ei,uh=w(()=>{c();Yc();zo=class e extends Ue{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Vo=class e extends Ue{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Qo=class e extends Ue{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ko=class e extends Ue{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Go=class e extends Ue{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Wo=class e extends Ue{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Yo=class e extends Ue{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Xo=class e extends Ue{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Jo=class e extends Ue{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Zo=class e extends Ue{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ei=class e extends Ue{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var fB,pB,mB,hB,gB,yB,SB,EB,wB,_B,bB,TB,AB,RB,vB,CB,xB,IB,PB,OB,rr,NB,DB,MB,kB,$B,Oe,LB,Ut,UB,FB,Ft,qB,qR,BR,BB,jB,HB,jR,zB,ce,VB,QB,KB,GB,HR,zR,VR,QR,KR,GR,WR,YR,XR,JR,ZR,ev,tv,rv,nv,lh,dh=w(()=>{c();ae();uh();Yc();fB="AccessDeniedException",pB="AuthorizationPendingException",mB="AccessToken",hB="ClientSecret",gB="CreateToken",yB="CreateTokenRequest",SB="CreateTokenResponse",EB="CodeVerifier",wB="ExpiredTokenException",_B="InvalidClientException",bB="InvalidGrantException",TB="InvalidRequestException",AB="InternalServerException",RB="InvalidScopeException",vB="IdToken",CB="RefreshToken",xB="SlowDownException",IB="UnauthorizedClientException",PB="UnsupportedGrantTypeException",OB="accessToken",rr="client",NB="clientId",DB="clientSecret",MB="codeVerifier",kB="code",$B="deviceCode",Oe="error",LB="expiresIn",Ut="error_description",UB="grantType",FB="http",Ft="httpError",qB="idToken",qR="reason",BR="refreshToken",BB="redirectUri",jB="scope",HB="server",jR="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",zB="tokenType",ce="com.amazonaws.ssooidc",VB=[0,ce,mB,8,0],QB=[0,ce,hB,8,0],KB=[0,ce,EB,8,0],GB=[0,ce,vB,8,0],HR=[0,ce,CB,8,0],zR=[-3,ce,fB,{[Oe]:rr,[Ft]:400},[Oe,qR,Ut],[0,0,0]];B.for(ce).registerError(zR,zo);VR=[-3,ce,pB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(VR,Vo);QR=[3,ce,yB,0,[NB,DB,UB,$B,kB,BR,jB,BB,MB],[0,[()=>QB,0],0,0,0,[()=>HR,0],64,0,[()=>KB,0]],3],KR=[3,ce,SB,0,[OB,zB,LB,BR,qB],[[()=>VB,0],0,1,[()=>HR,0],[()=>GB,0]]],GR=[-3,ce,wB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(GR,Qo);WR=[-3,ce,AB,{[Oe]:HB,[Ft]:500},[Oe,Ut],[0,0]];B.for(ce).registerError(WR,Ko);YR=[-3,ce,_B,{[Oe]:rr,[Ft]:401},[Oe,Ut],[0,0]];B.for(ce).registerError(YR,Go);XR=[-3,ce,bB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(XR,Wo);JR=[-3,ce,TB,{[Oe]:rr,[Ft]:400},[Oe,qR,Ut],[0,0,0]];B.for(ce).registerError(JR,Yo);ZR=[-3,ce,RB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(ZR,Xo);ev=[-3,ce,xB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(ev,Jo);tv=[-3,ce,IB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(tv,Zo);rv=[-3,ce,PB,{[Oe]:rr,[Ft]:400},[Oe,Ut],[0,0]];B.for(ce).registerError(rv,ei);nv=[-3,jR,"SSOOIDCServiceException",0,[],[]];B.for(jR).registerError(nv,Ue);lh=[9,ce,gB,{[FB]:["POST","/token",200]},()=>QR,()=>KR]});var sv,fh,ti,ph=w(()=>{c();sv=T(Zt()),fh=T(K());eh();dh();ti=class extends fh.Command.classBuilder().ep(UA).m(function(t,r,n,s){return[(0,sv.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(lh).build(){}});var ov,WB,Xc,iv=w(()=>{c();ov=T(K());ph();ch();WB={CreateTokenCommand:ti},Xc=class extends Ho{};(0,ov.createAggregatedClient)(WB,Xc)});var av=w(()=>{c();ph()});var YB,XB,cv=w(()=>{c();YB={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},XB={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var uv=w(()=>{c()});var mh={};lt(mh,{$Command:()=>fh.Command,AccessDeniedException:()=>zo,AccessDeniedException$:()=>zR,AccessDeniedExceptionReason:()=>YB,AuthorizationPendingException:()=>Vo,AuthorizationPendingException$:()=>VR,CreateToken$:()=>lh,CreateTokenCommand:()=>ti,CreateTokenRequest$:()=>QR,CreateTokenResponse$:()=>KR,ExpiredTokenException:()=>Qo,ExpiredTokenException$:()=>GR,InternalServerException:()=>Ko,InternalServerException$:()=>WR,InvalidClientException:()=>Go,InvalidClientException$:()=>YR,InvalidGrantException:()=>Wo,InvalidGrantException$:()=>XR,InvalidRequestException:()=>Yo,InvalidRequestException$:()=>JR,InvalidRequestExceptionReason:()=>XB,InvalidScopeException:()=>Xo,InvalidScopeException$:()=>ZR,SSOOIDC:()=>Xc,SSOOIDCClient:()=>Ho,SSOOIDCServiceException:()=>Ue,SSOOIDCServiceException$:()=>nv,SlowDownException:()=>Jo,SlowDownException$:()=>ev,UnauthorizedClientException:()=>Zo,UnauthorizedClientException$:()=>tv,UnsupportedGrantTypeException:()=>ei,UnsupportedGrantTypeException$:()=>rv,__Client:()=>ah.Client});var hh=w(()=>{c();ch();iv();av();dh();cv();uh();uv();Yc()});var pv=O(ni=>{"use strict";c();var JB=(Tt(),re(pr)),ZB=(Vp(),re(ob)),yt=Ke(),ri=Xt(),ej=Y("fs"),tj=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new yt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=ZB.getBearerTokenEnvKey(t);if(!(r in process.env))throw new yt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return JB.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},rj=5*60*1e3,gh="To refresh this SSO session run 'aws sso login' with the corresponding profile.",nj=async(e,t={},r)=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(hh(),mh)),s=i=>t.clientConfig?.[i]??t.parentClientConfig?.[i]??r?.[i];return new n(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},sj=async(e,t,r={},n)=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(hh(),mh));return(await nj(t,r,n)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},lv=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new yt.TokenProviderError(`Token is expired. ${gh}`,!1)},qn=(e,t,r=!1)=>{if(typeof t>"u")throw new yt.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${gh}`,!1)},{writeFile:oj}=ej.promises,ij=(e,t)=>{let r=ri.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return oj(r,n)},dv=new Date(0),fv=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await ri.parseKnownFiles(e),n=ri.getProfileName({profile:e.profile??t?.profile}),s=r[n];if(s){if(!s.sso_session)throw new yt.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new yt.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=s.sso_session,a=(await ri.loadSsoSessionData(e))[o];if(!a)throw new yt.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!a[h])throw new yt.TokenProviderError(`Sso session '${o}' is missing required property '${h}'.`,!1);a.sso_start_url;let u=a.sso_region,l;try{l=await ri.getSSOTokenFromFile(o)}catch{throw new yt.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${gh}`,!1)}qn("accessToken",l.accessToken),qn("expiresAt",l.expiresAt);let{accessToken:m,expiresAt:p}=l,g={token:m,expiration:new Date(p)};if(g.expiration.getTime()-Date.now()>rj)return g;if(Date.now()-dv.getTime()<30*1e3)return lv(g),g;qn("clientId",l.clientId,!0),qn("clientSecret",l.clientSecret,!0),qn("refreshToken",l.refreshToken,!0);try{dv.setTime(Date.now());let h=await sj(l,u,e,t);qn("accessToken",h.accessToken),qn("expiresIn",h.expiresIn);let S=new Date(Date.now()+h.expiresIn*1e3);try{await ij(o,{...l,accessToken:h.accessToken,expiresAt:S.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:S}}catch{return lv(g),g}},aj=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new yt.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},cj=(e={})=>yt.memoize(yt.chain(fv(e),async()=>{throw new yt.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);ni.fromEnvSigningName=tj;ni.fromSso=fv;ni.fromStatic=aj;ni.nodeProvider=cj});var Sh=O(an=>{"use strict";c();Object.defineProperty(an,"__esModule",{value:!0});an.resolveHttpAuthSchemeConfig=an.defaultSSOHttpAuthSchemeProvider=an.defaultSSOHttpAuthSchemeParametersProvider=void 0;var uj=(qe(),re(Xr)),yh=tt(),lj=async(e,t,r)=>({operation:(0,yh.getSmithyContext)(t).operation,region:await(0,yh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});an.defaultSSOHttpAuthSchemeParametersProvider=lj;function dj(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Jc(e){return{schemeId:"smithy.api#noAuth"}}var fj=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Jc(e));break}case"ListAccountRoles":{t.push(Jc(e));break}case"ListAccounts":{t.push(Jc(e));break}case"Logout":{t.push(Jc(e));break}default:t.push(dj(e))}return t};an.defaultSSOHttpAuthSchemeProvider=fj;var pj=e=>{let t=(0,uj.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,yh.normalizeProvider)(e.authSchemePreference??[])})};an.resolveHttpAuthSchemeConfig=pj});var mv=O((Uee,mj)=>{mj.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.974.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Iv=O(Zc=>{"use strict";c();Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ruleSet=void 0;var Rv="required",It="fn",Pt="argv",zs="ref",hv=!0,gv="isSet",si="booleanEquals",js="error",Hs="endpoint",br="tree",Eh="PartitionResult",wh="getAttr",yv={[Rv]:!1,type:"string"},Sv={[Rv]:!0,default:!1,type:"boolean"},Ev={[zs]:"Endpoint"},vv={[It]:si,[Pt]:[{[zs]:"UseFIPS"},!0]},Cv={[It]:si,[Pt]:[{[zs]:"UseDualStack"},!0]},xt={},wv={[It]:wh,[Pt]:[{[zs]:Eh},"supportsFIPS"]},xv={[zs]:Eh},_v={[It]:si,[Pt]:[!0,{[It]:wh,[Pt]:[xv,"supportsDualStack"]}]},bv=[vv],Tv=[Cv],Av=[{[zs]:"Region"}],hj={version:"1.0",parameters:{Region:yv,UseDualStack:Sv,UseFIPS:Sv,Endpoint:yv},rules:[{conditions:[{[It]:gv,[Pt]:[Ev]}],rules:[{conditions:bv,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:js},{conditions:Tv,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:js},{endpoint:{url:Ev,properties:xt,headers:xt},type:Hs}],type:br},{conditions:[{[It]:gv,[Pt]:Av}],rules:[{conditions:[{[It]:"aws.partition",[Pt]:Av,assign:Eh}],rules:[{conditions:[vv,Cv],rules:[{conditions:[{[It]:si,[Pt]:[hv,wv]},_v],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:xt,headers:xt},type:Hs}],type:br},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:js}],type:br},{conditions:bv,rules:[{conditions:[{[It]:si,[Pt]:[wv,hv]}],rules:[{conditions:[{[It]:"stringEquals",[Pt]:[{[It]:wh,[Pt]:[xv,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:xt,headers:xt},type:Hs},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:xt,headers:xt},type:Hs}],type:br},{error:"FIPS is enabled but this partition does not support FIPS",type:js}],type:br},{conditions:Tv,rules:[{conditions:[_v],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:xt,headers:xt},type:Hs}],type:br},{error:"DualStack is enabled but this partition does not support DualStack",type:js}],type:br},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:xt,headers:xt},type:Hs}],type:br}],type:br},{error:"Invalid Configuration: Missing Region",type:js}]};Zc.ruleSet=hj});var Pv=O(eu=>{"use strict";c();Object.defineProperty(eu,"__esModule",{value:!0});eu.defaultEndpointResolver=void 0;var gj=On(),_h=$r(),yj=Iv(),Sj=new _h.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ej=(e,t={})=>Sj.get(e,()=>(0,_h.resolveEndpoint)(yj.ruleSet,{endpointParams:e,logger:t.logger}));eu.defaultEndpointResolver=Ej;_h.customEndpointFunctions.aws=gj.awsEndpointFunctions});var Dv=O(tu=>{"use strict";c();Object.defineProperty(tu,"__esModule",{value:!0});tu.getRuntimeConfig=void 0;var wj=(qe(),re(Xr)),_j=(Mn(),re(Tm)),bj=(ot(),re(ds)),Tj=K(),Aj=fr(),Ov=Wt(),Nv=Ie(),Rj=Sh(),vj=Pv(),Cj=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Ov.fromBase64,base64Encoder:e?.base64Encoder??Ov.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??vj.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Rj.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new wj.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new bj.NoAuthSigner}],logger:e?.logger??new Tj.NoOpLogger,protocol:e?.protocol??_j.AwsRestJsonProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Aj.parseUrl,utf8Decoder:e?.utf8Decoder??Nv.fromUtf8,utf8Encoder:e?.utf8Encoder??Nv.toUtf8});tu.getRuntimeConfig=Cj});var Fv=O(nu=>{"use strict";c();Object.defineProperty(nu,"__esModule",{value:!0});nu.getRuntimeConfig=void 0;var xj=(So(),re(yo)),Ij=xj.__importDefault(mv()),Mv=(qe(),re(Xr)),kv=Ds(),ru=pt(),Pj=Ms(),$v=Lt(),Bn=Jt(),Lv=Nr(),Uv=K(),Oj=ks(),Nj=$s(),Dj=Ln(),Mj=Dv(),kj=e=>{(0,Uv.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Nj.resolveDefaultsModeConfig)(e),r=()=>t().then(Uv.loadConfigsForDefaultMode),n=(0,Mj.getRuntimeConfig)(e);(0,Mv.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Bn.loadConfig)(Mv.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??Oj.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,kv.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ij.default.version}),maxAttempts:e?.maxAttempts??(0,Bn.loadConfig)($v.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Bn.loadConfig)(ru.NODE_REGION_CONFIG_OPTIONS,{...ru.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Lv.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Bn.loadConfig)({...$v.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Dj.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Pj.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Lv.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Bn.loadConfig)(ru.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Bn.loadConfig)(ru.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Bn.loadConfig)(kv.NODE_APP_ID_CONFIG_OPTIONS,s)}};nu.getRuntimeConfig=kj});var y0=O(Z=>{"use strict";c();var qv=Zn(),$j=es(),Lj=ts(),Bv=kn(),Uj=pt(),oi=(ot(),re(ds)),Qs=(ae(),re(ma)),Fj=xs(),ci=Zt(),jv=Lt(),qt=K(),Hv=Sh(),qj=Fv(),zv=Fn(),Vv=me(),Bj=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),du={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},jj=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Hj=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),zj=(e,t)=>{let r=Object.assign(zv.getAwsRegionExtensionConfiguration(e),qt.getDefaultExtensionConfiguration(e),Vv.getHttpHandlerExtensionConfiguration(e),jj(e));return t.forEach(n=>n.configure(r)),Object.assign(e,zv.resolveAwsRegionExtensionConfiguration(r),qt.resolveDefaultRuntimeConfig(r),Vv.resolveHttpHandlerRuntimeConfig(r),Hj(r))},Vs=class extends qt.Client{config;constructor(...[t]){let r=qj.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=Bj(r),s=Bv.resolveUserAgentConfig(n),o=jv.resolveRetryConfig(s),i=Uj.resolveRegionConfig(o),a=qv.resolveHostHeaderConfig(i),u=ci.resolveEndpointConfig(a),l=Hv.resolveHttpAuthSchemeConfig(u),m=zj(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(Qs.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(Bv.getUserAgentPlugin(this.config)),this.middlewareStack.use(jv.getRetryPlugin(this.config)),this.middlewareStack.use(Fj.getContentLengthPlugin(this.config)),this.middlewareStack.use(qv.getHostHeaderPlugin(this.config)),this.middlewareStack.use($j.getLoggerPlugin(this.config)),this.middlewareStack.use(Lj.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(oi.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Hv.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new oi.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(oi.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},cn=class e extends qt.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},su=class e extends cn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ou=class e extends cn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},iu=class e extends cn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},au=class e extends cn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Vj="AccountInfo",Qj="AccountListType",Kj="AccessTokenType",Gj="GetRoleCredentials",Wj="GetRoleCredentialsRequest",Yj="GetRoleCredentialsResponse",Xj="InvalidRequestException",Jj="Logout",Zj="ListAccounts",eH="ListAccountsRequest",tH="ListAccountRolesRequest",rH="ListAccountRolesResponse",nH="ListAccountsResponse",sH="ListAccountRoles",oH="LogoutRequest",iH="RoleCredentials",aH="RoleInfo",cH="RoleListType",uH="ResourceNotFoundException",lH="SecretAccessKeyType",dH="SessionTokenType",fH="TooManyRequestsException",pH="UnauthorizedException",fu="accountId",mH="accessKeyId",hH="accountList",gH="accountName",pu="accessToken",Qv="account_id",mu="client",hu="error",yH="emailAddress",SH="expiration",gu="http",yu="httpError",Su="httpHeader",jn="httpQuery",Eu="message",Kv="maxResults",Gv="max_result",wu="nextToken",Wv="next_token",EH="roleCredentials",wH="roleList",Yv="roleName",_H="role_name",Xv="smithy.ts.sdk.synthetic.com.amazonaws.sso",bH="secretAccessKey",TH="sessionToken",_u="x-amz-sso_bearer_token",we="com.amazonaws.sso",bu=[0,we,Kj,8,0],AH=[0,we,lH,8,0],RH=[0,we,dH,8,0],Jv=[3,we,Vj,0,[fu,gH,yH],[0,0,0]],Zv=[3,we,Wj,0,[Yv,fu,pu],[[0,{[jn]:_H}],[0,{[jn]:Qv}],[()=>bu,{[Su]:_u}]],3],e0=[3,we,Yj,0,[EH],[[()=>c0,0]]],t0=[-3,we,Xj,{[hu]:mu,[yu]:400},[Eu],[0]];Qs.TypeRegistry.for(we).registerError(t0,su);var r0=[3,we,tH,0,[pu,fu,wu,Kv],[[()=>bu,{[Su]:_u}],[0,{[jn]:Qv}],[0,{[jn]:Wv}],[1,{[jn]:Gv}]],2],n0=[3,we,rH,0,[wu,wH],[0,()=>xH]],s0=[3,we,eH,0,[pu,wu,Kv],[[()=>bu,{[Su]:_u}],[0,{[jn]:Wv}],[1,{[jn]:Gv}]],1],o0=[3,we,nH,0,[wu,hH],[0,()=>CH]],i0=[3,we,oH,0,[pu],[[()=>bu,{[Su]:_u}]],1],a0=[-3,we,uH,{[hu]:mu,[yu]:404},[Eu],[0]];Qs.TypeRegistry.for(we).registerError(a0,ou);var c0=[3,we,iH,0,[mH,bH,TH,SH],[0,[()=>AH,0],[()=>RH,0],1]],u0=[3,we,aH,0,[Yv,fu],[0,0]],l0=[-3,we,fH,{[hu]:mu,[yu]:429},[Eu],[0]];Qs.TypeRegistry.for(we).registerError(l0,iu);var d0=[-3,we,pH,{[hu]:mu,[yu]:401},[Eu],[0]];Qs.TypeRegistry.for(we).registerError(d0,au);var vH="unit",f0=[-3,Xv,"SSOServiceException",0,[],[]];Qs.TypeRegistry.for(Xv).registerError(f0,cn);var CH=[1,we,Qj,0,()=>Jv],xH=[1,we,cH,0,()=>u0],p0=[9,we,Gj,{[gu]:["GET","/federation/credentials",200]},()=>Zv,()=>e0],m0=[9,we,sH,{[gu]:["GET","/assignment/roles",200]},()=>r0,()=>n0],h0=[9,we,Zj,{[gu]:["GET","/assignment/accounts",200]},()=>s0,()=>o0],g0=[9,we,Jj,{[gu]:["POST","/logout",200]},()=>i0,()=>vH],cu=class extends qt.Command.classBuilder().ep(du).m(function(t,r,n,s){return[ci.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(p0).build(){},ii=class extends qt.Command.classBuilder().ep(du).m(function(t,r,n,s){return[ci.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(m0).build(){},ai=class extends qt.Command.classBuilder().ep(du).m(function(t,r,n,s){return[ci.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(h0).build(){},uu=class extends qt.Command.classBuilder().ep(du).m(function(t,r,n,s){return[ci.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(g0).build(){},IH={GetRoleCredentialsCommand:cu,ListAccountRolesCommand:ii,ListAccountsCommand:ai,LogoutCommand:uu},lu=class extends Vs{};qt.createAggregatedClient(IH,lu);var PH=oi.createPaginator(Vs,ii,"nextToken","nextToken","maxResults"),OH=oi.createPaginator(Vs,ai,"nextToken","nextToken","maxResults");Object.defineProperty(Z,"$Command",{enumerable:!0,get:function(){return qt.Command}});Object.defineProperty(Z,"__Client",{enumerable:!0,get:function(){return qt.Client}});Z.AccountInfo$=Jv;Z.GetRoleCredentials$=p0;Z.GetRoleCredentialsCommand=cu;Z.GetRoleCredentialsRequest$=Zv;Z.GetRoleCredentialsResponse$=e0;Z.InvalidRequestException=su;Z.InvalidRequestException$=t0;Z.ListAccountRoles$=m0;Z.ListAccountRolesCommand=ii;Z.ListAccountRolesRequest$=r0;Z.ListAccountRolesResponse$=n0;Z.ListAccounts$=h0;Z.ListAccountsCommand=ai;Z.ListAccountsRequest$=s0;Z.ListAccountsResponse$=o0;Z.Logout$=g0;Z.LogoutCommand=uu;Z.LogoutRequest$=i0;Z.ResourceNotFoundException=ou;Z.ResourceNotFoundException$=a0;Z.RoleCredentials$=c0;Z.RoleInfo$=u0;Z.SSO=lu;Z.SSOClient=Vs;Z.SSOServiceException=cn;Z.SSOServiceException$=f0;Z.TooManyRequestsException=iu;Z.TooManyRequestsException$=l0;Z.UnauthorizedException=au;Z.UnauthorizedException$=d0;Z.paginateListAccountRoles=PH;Z.paginateListAccounts=OH});var E0=O(bh=>{"use strict";c();var S0=y0();Object.defineProperty(bh,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return S0.GetRoleCredentialsCommand}});Object.defineProperty(bh,"SSOClient",{enumerable:!0,get:function(){return S0.SSOClient}})});var Th=O(Au=>{"use strict";c();var Bt=Ke(),Tu=Xt(),w0=(Tt(),re(pr)),NH=pv(),b0=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),ui=!1,_0=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,clientConfig:i,parentClientConfig:a,callerClientConfig:u,profile:l,filepath:m,configFilepath:p,ignoreCache:g,logger:h})=>{let S,R="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let ut=await NH.fromSso({profile:l,filepath:m,configFilepath:p,ignoreCache:g})();S={accessToken:ut.token,expiresAt:new Date(ut.expiration).toISOString()}}catch(ut){throw new Bt.CredentialsProviderError(ut.message,{tryNextLink:ui,logger:h})}else try{S=await Tu.getSSOTokenFromFile(e)}catch{throw new Bt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${R}`,{tryNextLink:ui,logger:h})}if(new Date(S.expiresAt).getTime()-Date.now()<=0)throw new Bt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${R}`,{tryNextLink:ui,logger:h});let{accessToken:x}=S,{SSOClient:I,GetRoleCredentialsCommand:D}=await Promise.resolve().then(function(){return E0()}),k=o||new I(Object.assign({},i??{},{logger:i?.logger??u?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??u?.userAgentAppId??a?.userAgentAppId})),U;try{U=await k.send(new D({accountId:r,roleName:s,accessToken:x}))}catch(ut){throw new Bt.CredentialsProviderError(ut,{tryNextLink:ui,logger:h})}let{roleCredentials:{accessKeyId:z,secretAccessKey:J,sessionToken:Ne,expiration:G,credentialScope:ee,accountId:Se}={}}=U;if(!z||!J||!Ne||!G)throw new Bt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:ui,logger:h});let Fe={accessKeyId:z,secretAccessKey:J,sessionToken:Ne,expiration:new Date(G),...ee&&{credentialScope:ee},...Se&&{accountId:Se}};return t?w0.setCredentialFeature(Fe,"CREDENTIALS_SSO","s"):w0.setCredentialFeature(Fe,"CREDENTIALS_SSO_LEGACY","u"),Fe},T0=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:o}=e;if(!r||!n||!s||!o)throw new Bt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},DH=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,u=Tu.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!s&&!o&&!i){let m=(await Tu.parseKnownFiles(e))[u];if(!m)throw new Bt.CredentialsProviderError(`Profile ${u} was not found.`,{logger:e.logger});if(!b0(m))throw new Bt.CredentialsProviderError(`Profile ${u} is not configured with SSO credentials.`,{logger:e.logger});if(m?.sso_session){let I=(await Tu.loadSsoSessionData(e))[m.sso_session],D=` configurations in profile ${u} and sso-session ${m.sso_session}`;if(s&&s!==I.sso_region)throw new Bt.CredentialsProviderError("Conflicting SSO region"+D,{tryNextLink:!1,logger:e.logger});if(r&&r!==I.sso_start_url)throw new Bt.CredentialsProviderError("Conflicting SSO start_url"+D,{tryNextLink:!1,logger:e.logger});m.sso_region=I.sso_region,m.sso_start_url=I.sso_start_url}let{sso_start_url:p,sso_account_id:g,sso_region:h,sso_role_name:S,sso_session:R}=T0(m,e.logger);return _0({ssoStartUrl:p,ssoSession:R,ssoAccountId:g,ssoRegion:h,ssoRoleName:S,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:u,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!s||!o)throw new Bt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return _0({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:u,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};Au.fromSSO=DH;Au.isSsoProfile=b0;Au.validateSsoProfile=T0});function MH(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function kH(e){return{schemeId:"smithy.api#noAuth"}}var li,A0,R0,v0,Ah=w(()=>{c();qe();li=T(tt()),A0=async(e,t,r)=>({operation:(0,li.getSmithyContext)(t).operation,region:await(0,li.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});R0=e=>{let t=[];switch(e.operation){case"CreateOAuth2Token":{t.push(kH(e));break}default:t.push(MH(e))}return t},v0=e=>{let t=mr(e);return Object.assign(t,{authSchemePreference:(0,li.normalizeProvider)(e.authSchemePreference??[])})}});var C0,x0,Rh=w(()=>{c();C0=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"signin"}),x0={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var $0,Xe,Je,Tr,I0,Hn,Ks,un,jt,Cu,vh,P0,O0,N0,Ch,xh,Ye,Ih,Ru,vu,D0,M0,k0,$H,L0,U0=w(()=>{c();$0="required",Xe="fn",Je="argv",Tr="ref",I0="isSet",Hn="booleanEquals",Ks="error",un="endpoint",jt="tree",Cu="PartitionResult",vh="stringEquals",P0={[$0]:!0,default:!1,type:"boolean"},O0={[$0]:!1,type:"string"},N0={[Tr]:"Endpoint"},Ch={[Xe]:Hn,[Je]:[{[Tr]:"UseFIPS"},!0]},xh={[Xe]:Hn,[Je]:[{[Tr]:"UseDualStack"},!0]},Ye={},Ih={[Xe]:"getAttr",[Je]:[{[Tr]:Cu},"name"]},Ru={[Xe]:Hn,[Je]:[{[Tr]:"UseFIPS"},!1]},vu={[Xe]:Hn,[Je]:[{[Tr]:"UseDualStack"},!1]},D0={[Xe]:"getAttr",[Je]:[{[Tr]:Cu},"supportsFIPS"]},M0={[Xe]:Hn,[Je]:[!0,{[Xe]:"getAttr",[Je]:[{[Tr]:Cu},"supportsDualStack"]}]},k0=[{[Tr]:"Region"}],$H={version:"1.0",parameters:{UseDualStack:P0,UseFIPS:P0,Endpoint:O0,Region:O0},rules:[{conditions:[{[Xe]:I0,[Je]:[N0]}],rules:[{conditions:[Ch],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ks},{rules:[{conditions:[xh],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ks},{endpoint:{url:N0,properties:Ye,headers:Ye},type:un}],type:jt}],type:jt},{rules:[{conditions:[{[Xe]:I0,[Je]:k0}],rules:[{conditions:[{[Xe]:"aws.partition",[Je]:k0,assign:Cu}],rules:[{conditions:[{[Xe]:vh,[Je]:[Ih,"aws"]},Ru,vu],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:Ye,headers:Ye},type:un},{conditions:[{[Xe]:vh,[Je]:[Ih,"aws-cn"]},Ru,vu],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:Ye,headers:Ye},type:un},{conditions:[{[Xe]:vh,[Je]:[Ih,"aws-us-gov"]},Ru,vu],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:Ye,headers:Ye},type:un},{conditions:[Ch,xh],rules:[{conditions:[{[Xe]:Hn,[Je]:[!0,D0]},M0],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ye,headers:Ye},type:un}],type:jt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ks}],type:jt},{conditions:[Ch,vu],rules:[{conditions:[{[Xe]:Hn,[Je]:[D0,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ye,headers:Ye},type:un}],type:jt},{error:"FIPS is enabled but this partition does not support FIPS",type:Ks}],type:jt},{conditions:[Ru,xh],rules:[{conditions:[M0],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ye,headers:Ye},type:un}],type:jt},{error:"DualStack is enabled but this partition does not support DualStack",type:Ks}],type:jt},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:Ye,headers:Ye},type:un}],type:jt}],type:jt},{error:"Invalid Configuration: Missing Region",type:Ks}],type:jt}]},L0=$H});var F0,Gs,LH,q0,B0=w(()=>{c();F0=T(On()),Gs=T($r());U0();LH=new Gs.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),q0=(e,t={})=>LH.get(e,()=>(0,Gs.resolveEndpoint)(L0,{endpointParams:e,logger:t.logger}));Gs.customEndpointFunctions.aws=F0.awsEndpointFunctions});var j0,H0,xu,Iu,z0,V0=w(()=>{c();qe();Mn();ot();j0=T(K()),H0=T(fr()),xu=T(Wt()),Iu=T(Ie());Ah();B0();z0=e=>({apiVersion:"2023-01-01",base64Decoder:e?.base64Decoder??xu.fromBase64,base64Encoder:e?.base64Encoder??xu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??q0,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??R0,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Qe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new kt}],logger:e?.logger??new j0.NoOpLogger,protocol:e?.protocol??Gr,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:e?.serviceId??"Signin",urlParser:e?.urlParser??H0.parseUrl,utf8Decoder:e?.utf8Decoder??Iu.fromUtf8,utf8Encoder:e?.utf8Encoder??Iu.toUtf8})});var Pu,dn,Q0,Ou,ln,Nu,Du,K0,G0,W0,Y0,X0=w(()=>{c();Lc();qe();Pu=T(Ds()),dn=T(pt()),Q0=T(Ms()),Ou=T(Lt()),ln=T(Jt()),Nu=T(Nr()),Du=T(K()),K0=T(ks()),G0=T($s()),W0=T(Ln());V0();Y0=e=>{(0,Du.emitWarningIfUnsupportedVersion)(process.version);let t=(0,G0.resolveDefaultsModeConfig)(e),r=()=>t().then(Du.loadConfigsForDefaultMode),n=z0(e);Lr(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ln.loadConfig)(Fr,s),bodyLengthChecker:e?.bodyLengthChecker??K0.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Pu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ns.version}),maxAttempts:e?.maxAttempts??(0,ln.loadConfig)(Ou.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ln.loadConfig)(dn.NODE_REGION_CONFIG_OPTIONS,{...dn.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Nu.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ln.loadConfig)({...Ou.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||W0.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Q0.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Nu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ln.loadConfig)(dn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,ln.loadConfig)(dn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,ln.loadConfig)(Pu.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var J0,Z0,eC=w(()=>{c();J0=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Z0=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Mu,ku,$u,tC,rC=w(()=>{c();Mu=T(Fn()),ku=T(me()),$u=T(K());eC();tC=(e,t)=>{let r=Object.assign((0,Mu.getAwsRegionExtensionConfiguration)(e),(0,$u.getDefaultExtensionConfiguration)(e),(0,ku.getHttpHandlerExtensionConfiguration)(e),J0(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Mu.resolveAwsRegionExtensionConfiguration)(r),(0,$u.resolveDefaultRuntimeConfig)(r),(0,ku.resolveHttpHandlerRuntimeConfig)(r),Z0(r))}});var Lu,nC,sC,Uu,oC,iC,aC,Fu,Ph,di,Oh=w(()=>{c();Lu=T(Zn()),nC=T(es()),sC=T(ts()),Uu=T(kn()),oC=T(pt());ot();ae();iC=T(xs()),aC=T(Zt()),Fu=T(Lt()),Ph=T(K());Ah();Rh();X0();rC();di=class extends Ph.Client{config;constructor(...[t]){let r=Y0(t||{});super(r),this.initConfig=r;let n=C0(r),s=(0,Uu.resolveUserAgentConfig)(n),o=(0,Fu.resolveRetryConfig)(s),i=(0,oC.resolveRegionConfig)(o),a=(0,Lu.resolveHostHeaderConfig)(i),u=(0,aC.resolveEndpointConfig)(a),l=v0(u),m=tC(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(_n(this.config)),this.middlewareStack.use((0,Uu.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Fu.getRetryPlugin)(this.config)),this.middlewareStack.use((0,iC.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Lu.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,nC.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,sC.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(xn(this.config,{httpAuthSchemeParametersProvider:A0,identityProviderConfigProvider:async p=>new dr({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(In(this.config))}destroy(){super.destroy()}}});var cC,Ht,qu=w(()=>{c();cC=T(K()),Ht=class e extends cC.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var fi,pi,mi,hi,Nh=w(()=>{c();qu();fi=class e extends Ht{name="AccessDeniedException";$fault="client";error;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},pi=class e extends Ht{name="InternalServerException";$fault="server";error;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},mi=class e extends Ht{name="TooManyRequestsError";$fault="client";error;constructor(t){super({name:"TooManyRequestsError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},hi=class e extends Ht{name="ValidationException";$fault="client";error;constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}}});var UH,FH,qH,BH,jH,HH,zH,VH,QH,KH,GH,uC,lC,Dh,dC,fC,WH,fn,pC,mC,YH,Mh,hC,St,ju,Bu,gC,XH,yC,SC,wC,JH,ZH,EC,ct,_C,bC,TC,AC,RC,vC,CC,xC,IC,PC,OC,kh,$h=w(()=>{c();ae();Nh();qu();UH="AccessDeniedException",FH="AccessToken",qH="CreateOAuth2Token",BH="CreateOAuth2TokenRequest",jH="CreateOAuth2TokenRequestBody",HH="CreateOAuth2TokenResponseBody",zH="CreateOAuth2TokenResponse",VH="InternalServerException",QH="RefreshToken",KH="TooManyRequestsError",GH="ValidationException",uC="accessKeyId",lC="accessToken",Dh="client",dC="clientId",fC="codeVerifier",WH="code",fn="error",pC="expiresIn",mC="grantType",YH="http",Mh="httpError",hC="idToken",St="jsonName",ju="message",Bu="refreshToken",gC="redirectUri",XH="server",yC="secretAccessKey",SC="sessionToken",wC="smithy.ts.sdk.synthetic.com.amazonaws.signin",JH="tokenInput",ZH="tokenOutput",EC="tokenType",ct="com.amazonaws.signin",_C=[0,ct,QH,8,0],bC=[-3,ct,UH,{[fn]:Dh},[fn,ju],[0,0],2];B.for(ct).registerError(bC,fi);TC=[3,ct,FH,8,[uC,yC,SC],[[0,{[St]:uC}],[0,{[St]:yC}],[0,{[St]:SC}]],3],AC=[3,ct,BH,0,[JH],[[()=>RC,16]],1],RC=[3,ct,jH,0,[dC,mC,WH,gC,fC,Bu],[[0,{[St]:dC}],[0,{[St]:mC}],0,[0,{[St]:gC}],[0,{[St]:fC}],[()=>_C,{[St]:Bu}]],2],vC=[3,ct,zH,0,[ZH],[[()=>CC,16]],1],CC=[3,ct,HH,0,[lC,EC,pC,Bu,hC],[[()=>TC,{[St]:lC}],[0,{[St]:EC}],[1,{[St]:pC}],[()=>_C,{[St]:Bu}],[0,{[St]:hC}]],4],xC=[-3,ct,VH,{[fn]:XH,[Mh]:500},[fn,ju],[0,0],2];B.for(ct).registerError(xC,pi);IC=[-3,ct,KH,{[fn]:Dh,[Mh]:429},[fn,ju],[0,0],2];B.for(ct).registerError(IC,mi);PC=[-3,ct,GH,{[fn]:Dh,[Mh]:400},[fn,ju],[0,0],2];B.for(ct).registerError(PC,hi);OC=[-3,wC,"SigninServiceException",0,[],[]];B.for(wC).registerError(OC,Ht);kh=[9,ct,qH,{[YH]:["POST","/v1/token",200]},()=>AC,()=>vC]});var NC,Lh,gi,Uh=w(()=>{c();NC=T(Zt()),Lh=T(K());Rh();$h();gi=class extends Lh.Command.classBuilder().ep(x0).m(function(t,r,n,s){return[(0,NC.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(kh).build(){}});var DC,e2,Hu,MC=w(()=>{c();DC=T(K());Uh();Oh();e2={CreateOAuth2TokenCommand:gi},Hu=class extends di{};(0,DC.createAggregatedClient)(e2,Hu)});var kC=w(()=>{c();Uh()});var t2,$C=w(()=>{c();t2={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var LC=w(()=>{c()});var UC={};lt(UC,{$Command:()=>Lh.Command,AccessDeniedException:()=>fi,AccessDeniedException$:()=>bC,AccessToken$:()=>TC,CreateOAuth2Token$:()=>kh,CreateOAuth2TokenCommand:()=>gi,CreateOAuth2TokenRequest$:()=>AC,CreateOAuth2TokenRequestBody$:()=>RC,CreateOAuth2TokenResponse$:()=>vC,CreateOAuth2TokenResponseBody$:()=>CC,InternalServerException:()=>pi,InternalServerException$:()=>xC,OAuth2ErrorCode:()=>t2,Signin:()=>Hu,SigninClient:()=>di,SigninServiceException:()=>Ht,SigninServiceException$:()=>OC,TooManyRequestsError:()=>mi,TooManyRequestsError$:()=>IC,ValidationException:()=>hi,ValidationException$:()=>PC,__Client:()=>Ph.Client});var FC=w(()=>{c();Oh();MC();kC();$h();$C();Nh();LC();qu()});var BC=O(qC=>{"use strict";c();var r2=(Tt(),re(pr)),pn=Ke(),Bh=Xt(),n2=me(),zu=Y("node:crypto"),Fh=Y("node:fs"),s2=Y("node:os"),qh=Y("node:path"),jh=class e{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=5*60*1e3;constructor(t,r,n){this.profileData=t,this.init=r,this.callerClientConfig=n}async loadCredentials(){let t=await this.loadToken();if(!t)throw new pn.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,n=Date.now();return new Date(r.expiresAt).getTime()-n<=e.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(t){let{SigninClient:r,CreateOAuth2TokenCommand:n}=await Promise.resolve().then(()=>(FC(),UC)),{logger:s,userAgentAppId:o}=this.callerClientConfig??{},a=(p=>p?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,u=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,l=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:u,requestHandler:a,logger:s,userAgentAppId:o,...this.init?.clientConfig});this.createDPoPInterceptor(l.middlewareStack);let m={tokenInput:{clientId:t.clientId,refreshToken:t.refreshToken,grantType:"refresh_token"}};try{let p=await l.send(new n(m)),{accessKeyId:g,secretAccessKey:h,sessionToken:S}=p.tokenOutput?.accessToken??{},{refreshToken:R,expiresIn:x}=p.tokenOutput??{};if(!g||!h||!S||!R)throw new pn.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let I=(x??900)*1e3,D=new Date(Date.now()+I),k={...t,accessToken:{...t.accessToken,accessKeyId:g,secretAccessKey:h,sessionToken:S,expiresAt:D.toISOString()},refreshToken:R};await this.saveToken(k);let U=k.accessToken;return{accessKeyId:U.accessKeyId,secretAccessKey:U.secretAccessKey,sessionToken:U.sessionToken,accountId:U.accountId,expiration:D}}catch(p){if(p.name==="AccessDeniedException"){let g=p.error,h;switch(g){case"TOKEN_EXPIRED":h="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":h="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":h="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:h=`Failed to refresh token: ${String(p)}. Please re-authenticate using \`aws login\``}throw new pn.CredentialsProviderError(h,{logger:this.logger,tryNextLink:!1})}throw new pn.CredentialsProviderError(`Failed to refresh token: ${String(p)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let t=this.getTokenFilePath();try{let r;try{r=await Bh.readFile(t,{ignoreCache:this.init?.ignoreCache})}catch{r=await Fh.promises.readFile(t,"utf8")}let n=JSON.parse(r),s=["accessToken","clientId","refreshToken","dpopKey"].filter(o=>!n[o]);if(n.accessToken?.accountId||s.push("accountId"),s.length>0)throw new pn.CredentialsProviderError(`Token validation failed, missing fields: ${s.join(", ")}`,{logger:this.logger,tryNextLink:!1});return n}catch(r){throw new pn.CredentialsProviderError(`Failed to load token from ${t}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(t){let r=this.getTokenFilePath(),n=qh.dirname(r);try{await Fh.promises.mkdir(n,{recursive:!0})}catch{}await Fh.promises.writeFile(r,JSON.stringify(t,null,2),"utf8")}getTokenFilePath(){let t=process.env.AWS_LOGIN_CACHE_DIRECTORY??qh.join(s2.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),n=zu.createHash("sha256").update(r).digest("hex");return qh.join(t,`${n}.json`)}derToRawSignature(t){let r=2;if(t[r]!==2)throw new Error("Invalid DER signature");r++;let n=t[r++],s=t.subarray(r,r+n);if(r+=n,t[r]!==2)throw new Error("Invalid DER signature");r++;let o=t[r++],i=t.subarray(r,r+o);s=s[0]===0?s.subarray(1):s,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-s.length),s]),u=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,u])}createDPoPInterceptor(t){t.add(r=>async n=>{if(n2.HttpRequest.isInstance(n.request)){let s=n.request,o=`${s.protocol}//${s.hostname}${s.port?`:${s.port}`:""}${s.path}`,i=await this.generateDpop(s.method,o);s.headers={...s.headers,DPoP:i}}return r(n)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(t="POST",r){let n=await this.loadToken();try{let s=zu.createPrivateKey({key:n.dpopKey,format:"pem",type:"sec1"}),i=zu.createPublicKey(s).export({format:"der",type:"spki"}),a=-1;for(let D=0;D<i.length;D++)if(i[D]===4){a=D;break}let u=i.slice(a+1,a+33),l=i.slice(a+33,a+65),m={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:u.toString("base64url"),y:l.toString("base64url")}},p={jti:crypto.randomUUID(),htm:t,htu:r,iat:Math.floor(Date.now()/1e3)},g=Buffer.from(JSON.stringify(m)).toString("base64url"),h=Buffer.from(JSON.stringify(p)).toString("base64url"),S=`${g}.${h}`,R=zu.sign("sha256",Buffer.from(S),s),I=this.derToRawSignature(R).toString("base64url");return`${S}.${I}`}catch(s){throw new pn.CredentialsProviderError(`Failed to generate Dpop proof: ${s instanceof Error?s.message:String(s)}`,{logger:this.logger,tryNextLink:!1})}}},o2=e=>async({callerClientConfig:t}={})=>{e?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await Bh.parseKnownFiles(e||{}),n=Bh.getProfileName({profile:e?.profile??t?.profile}),s=r[n];if(!s?.login_session)throw new pn.CredentialsProviderError(`Profile ${n} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let i=await new jh(s,e,t).loadCredentials();return r2.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};qC.fromLoginCredentials=o2});function i2(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function a2(e){return{schemeId:"smithy.api#noAuth"}}var yi,jC,HC,c2,zC,Hh=w(()=>{c();qe();yi=T(tt());Si();jC=async(e,t,r)=>({operation:(0,yi.getSmithyContext)(t).operation,region:await(0,yi.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});HC=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(a2(e));break}default:t.push(i2(e))}return t},c2=e=>Object.assign(e,{stsClientCtor:nr}),zC=e=>{let t=c2(e),r=mr(t);return Object.assign(r,{authSchemePreference:(0,yi.normalizeProvider)(e.authSchemePreference??[])})}});var VC,Vu,Qu=w(()=>{c();VC=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Vu={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var rx,V,se,oe,hn,mn,je,nx,sx,ox,Te,QC,sr,Ws,Vh,KC,zh,ix,GC,He,WC,ax,cx,Ze,Et,YC,ux,lx,XC,dx,JC,ZC,ex,tx,u2,fx,px=w(()=>{c();rx="required",V="type",se="fn",oe="argv",hn="ref",mn="booleanEquals",je="stringEquals",nx="sigv4",sx="sts",ox="us-east-1",Te="endpoint",QC="https://sts.{Region}.{PartitionResult#dnsSuffix}",sr="tree",Ws="error",Vh="getAttr",KC={[rx]:!1,[V]:"string"},zh={[rx]:!0,default:!1,[V]:"boolean"},ix={[hn]:"Endpoint"},GC={[se]:"isSet",[oe]:[{[hn]:"Region"}]},He={[hn]:"Region"},WC={[se]:"aws.partition",[oe]:[He],assign:"PartitionResult"},ax={[hn]:"UseFIPS"},cx={[hn]:"UseDualStack"},Ze={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:nx,signingName:sx,signingRegion:ox}]},headers:{}},Et={},YC={conditions:[{[se]:je,[oe]:[He,"aws-global"]}],[Te]:Ze,[V]:Te},ux={[se]:mn,[oe]:[ax,!0]},lx={[se]:mn,[oe]:[cx,!0]},XC={[se]:Vh,[oe]:[{[hn]:"PartitionResult"},"supportsFIPS"]},dx={[hn]:"PartitionResult"},JC={[se]:mn,[oe]:[!0,{[se]:Vh,[oe]:[dx,"supportsDualStack"]}]},ZC=[{[se]:"isSet",[oe]:[ix]}],ex=[ux],tx=[lx],u2={version:"1.0",parameters:{Region:KC,UseDualStack:zh,UseFIPS:zh,Endpoint:KC,UseGlobalEndpoint:zh},rules:[{conditions:[{[se]:mn,[oe]:[{[hn]:"UseGlobalEndpoint"},!0]},{[se]:"not",[oe]:ZC},GC,WC,{[se]:mn,[oe]:[ax,!1]},{[se]:mn,[oe]:[cx,!1]}],rules:[{conditions:[{[se]:je,[oe]:[He,"ap-northeast-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"ap-south-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"ap-southeast-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"ap-southeast-2"]}],endpoint:Ze,[V]:Te},YC,{conditions:[{[se]:je,[oe]:[He,"ca-central-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"eu-central-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"eu-north-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"eu-west-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"eu-west-2"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"eu-west-3"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"sa-east-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,ox]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"us-east-2"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"us-west-1"]}],endpoint:Ze,[V]:Te},{conditions:[{[se]:je,[oe]:[He,"us-west-2"]}],endpoint:Ze,[V]:Te},{endpoint:{url:QC,properties:{authSchemes:[{name:nx,signingName:sx,signingRegion:"{Region}"}]},headers:Et},[V]:Te}],[V]:sr},{conditions:ZC,rules:[{conditions:ex,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[V]:Ws},{conditions:tx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[V]:Ws},{endpoint:{url:ix,properties:Et,headers:Et},[V]:Te}],[V]:sr},{conditions:[GC],rules:[{conditions:[WC],rules:[{conditions:[ux,lx],rules:[{conditions:[{[se]:mn,[oe]:[!0,XC]},JC],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Et,headers:Et},[V]:Te}],[V]:sr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[V]:Ws}],[V]:sr},{conditions:ex,rules:[{conditions:[{[se]:mn,[oe]:[XC,!0]}],rules:[{conditions:[{[se]:je,[oe]:[{[se]:Vh,[oe]:[dx,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Et,headers:Et},[V]:Te},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Et,headers:Et},[V]:Te}],[V]:sr},{error:"FIPS is enabled but this partition does not support FIPS",[V]:Ws}],[V]:sr},{conditions:tx,rules:[{conditions:[JC],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Et,headers:Et},[V]:Te}],[V]:sr},{error:"DualStack is enabled but this partition does not support DualStack",[V]:Ws}],[V]:sr},YC,{endpoint:{url:QC,properties:Et,headers:Et},[V]:Te}],[V]:sr}],[V]:sr},{error:"Invalid Configuration: Missing Region",[V]:Ws}]},fx=u2});var mx,Ys,l2,hx,gx=w(()=>{c();mx=T(On()),Ys=T($r());px();l2=new Ys.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),hx=(e,t={})=>l2.get(e,()=>(0,Ys.resolveEndpoint)(fx,{endpointParams:e,logger:t.logger}));Ys.customEndpointFunctions.aws=mx.awsEndpointFunctions});var yx,Sx,Ku,Gu,Ex,wx=w(()=>{c();qe();Mn();ot();yx=T(K()),Sx=T(fr()),Ku=T(Wt()),Gu=T(Ie());Hh();gx();Ex=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Ku.fromBase64,base64Encoder:e?.base64Encoder??Ku.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??hx,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??HC,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Qe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new kt}],logger:e?.logger??new yx.NoOpLogger,protocol:e?.protocol??Yr,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Sx.parseUrl,utf8Decoder:e?.utf8Decoder??Gu.fromUtf8,utf8Encoder:e?.utf8Encoder??Gu.toUtf8})});var Wu,yn,_x,Yu,gn,Xu,Ju,bx,Tx,Ax,Rx,vx=w(()=>{c();Lc();qe();Wu=T(Ds()),yn=T(pt());ot();_x=T(Ms()),Yu=T(Lt()),gn=T(Jt()),Xu=T(Nr()),Ju=T(K()),bx=T(ks()),Tx=T($s()),Ax=T(Ln());wx();Rx=e=>{(0,Ju.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Tx.resolveDefaultsModeConfig)(e),r=()=>t().then(Ju.loadConfigsForDefaultMode),n=Ex(e);Lr(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,gn.loadConfig)(Fr,s),bodyLengthChecker:e?.bodyLengthChecker??bx.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Wu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ns.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new Qe},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new kt}],maxAttempts:e?.maxAttempts??(0,gn.loadConfig)(Yu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,gn.loadConfig)(yn.NODE_REGION_CONFIG_OPTIONS,{...yn.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Xu.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,gn.loadConfig)({...Yu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Ax.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??_x.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Xu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,gn.loadConfig)(yn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,gn.loadConfig)(yn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,gn.loadConfig)(Wu.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var Cx,xx,Ix=w(()=>{c();Cx=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},xx=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Zu,el,tl,Px,Ox=w(()=>{c();Zu=T(Fn()),el=T(me()),tl=T(K());Ix();Px=(e,t)=>{let r=Object.assign((0,Zu.getAwsRegionExtensionConfiguration)(e),(0,tl.getDefaultExtensionConfiguration)(e),(0,el.getHttpHandlerExtensionConfiguration)(e),Cx(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Zu.resolveAwsRegionExtensionConfiguration)(r),(0,tl.resolveDefaultRuntimeConfig)(r),(0,el.resolveHttpHandlerRuntimeConfig)(r),xx(r))}});var rl,Nx,Dx,nl,Mx,kx,$x,sl,Qh,nr,Si=w(()=>{c();rl=T(Zn()),Nx=T(es()),Dx=T(ts()),nl=T(kn()),Mx=T(pt());ot();ae();kx=T(xs()),$x=T(Zt()),sl=T(Lt()),Qh=T(K());Hh();Qu();vx();Ox();nr=class extends Qh.Client{config;constructor(...[t]){let r=Rx(t||{});super(r),this.initConfig=r;let n=VC(r),s=(0,nl.resolveUserAgentConfig)(n),o=(0,sl.resolveRetryConfig)(s),i=(0,Mx.resolveRegionConfig)(o),a=(0,rl.resolveHostHeaderConfig)(i),u=(0,$x.resolveEndpointConfig)(a),l=zC(u),m=Px(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(_n(this.config)),this.middlewareStack.use((0,nl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,sl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,kx.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,rl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Nx.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Dx.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(xn(this.config,{httpAuthSchemeParametersProvider:jC,identityProviderConfigProvider:async p=>new dr({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(In(this.config))}destroy(){super.destroy()}}});var Lx,mt,ol=w(()=>{c();Lx=T(K()),mt=class e extends Lx.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Ei,wi,_i,bi,Ti,Ai,Ri,Kh=w(()=>{c();ol();Ei=class e extends mt{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},wi=class e extends mt{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},_i=class e extends mt{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},bi=class e extends mt{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ti=class e extends mt{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ai=class e extends mt{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ri=class e extends mt{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var d2,f2,p2,m2,h2,g2,Gh,y2,S2,E2,w2,Wh,_2,Ux,b2,T2,A2,R2,v2,C2,x2,I2,Fx,qx,P2,O2,N2,D2,M2,k2,Bx,$2,L2,jx,U2,Hx,F2,q2,Yh,B2,j2,H2,z2,V2,Q2,K2,G2,W2,Y2,zn,Vn,X2,Qn,Kn,Gn,J2,zx,Z2,ue,e4,t4,Xh,Vx,Qx,Kx,Gx,Jh,Wx,Yx,Xx,Jx,Zx,eI,tI,rI,nI,sI,oI,iI,r4,n4,Zh,eg,il=w(()=>{c();ae();Kh();ol();d2="Arn",f2="AccessKeyId",p2="AssumeRole",m2="AssumedRoleId",h2="AssumeRoleRequest",g2="AssumeRoleResponse",Gh="AssumedRoleUser",y2="AssumeRoleWithWebIdentity",S2="AssumeRoleWithWebIdentityRequest",E2="AssumeRoleWithWebIdentityResponse",w2="Audience",Wh="Credentials",_2="ContextAssertion",Ux="DurationSeconds",b2="Expiration",T2="ExternalId",A2="ExpiredTokenException",R2="IDPCommunicationErrorException",v2="IDPRejectedClaimException",C2="InvalidIdentityTokenException",x2="Key",I2="MalformedPolicyDocumentException",Fx="Policy",qx="PolicyArns",P2="ProviderArn",O2="ProvidedContexts",N2="ProvidedContextsListType",D2="ProvidedContext",M2="PolicyDescriptorType",k2="ProviderId",Bx="PackedPolicySize",$2="PackedPolicyTooLargeException",L2="Provider",jx="RoleArn",U2="RegionDisabledException",Hx="RoleSessionName",F2="SecretAccessKey",q2="SubjectFromWebIdentityToken",Yh="SourceIdentity",B2="SerialNumber",j2="SessionToken",H2="Tags",z2="TokenCode",V2="TransitiveTagKeys",Q2="Tag",K2="Value",G2="WebIdentityToken",W2="arn",Y2="accessKeySecretType",zn="awsQueryError",Vn="client",X2="clientTokenType",Qn="error",Kn="httpError",Gn="message",J2="policyDescriptorListType",zx="smithy.ts.sdk.synthetic.com.amazonaws.sts",Z2="tagListType",ue="com.amazonaws.sts",e4=[0,ue,Y2,8,0],t4=[0,ue,X2,8,0],Xh=[3,ue,Gh,0,[m2,d2],[0,0],2],Vx=[3,ue,h2,0,[jx,Hx,qx,Fx,Ux,H2,V2,T2,B2,z2,Yh,O2],[0,0,()=>iI,0,1,()=>n4,64,0,0,0,0,()=>r4],2],Qx=[3,ue,g2,0,[Wh,Gh,Bx,Yh],[[()=>Jh,0],()=>Xh,1,0]],Kx=[3,ue,S2,0,[jx,Hx,G2,k2,qx,Fx,Ux],[0,0,[()=>t4,0],0,()=>iI,0,1],3],Gx=[3,ue,E2,0,[Wh,q2,Gh,Bx,L2,w2,Yh],[[()=>Jh,0],0,()=>Xh,1,0,0,0]],Jh=[3,ue,Wh,0,[f2,F2,j2,b2],[0,[()=>e4,0],0,4],4],Wx=[-3,ue,A2,{[zn]:["ExpiredTokenException",400],[Qn]:Vn,[Kn]:400},[Gn],[0]];B.for(ue).registerError(Wx,Ei);Yx=[-3,ue,R2,{[zn]:["IDPCommunicationError",400],[Qn]:Vn,[Kn]:400},[Gn],[0]];B.for(ue).registerError(Yx,Ri);Xx=[-3,ue,v2,{[zn]:["IDPRejectedClaim",403],[Qn]:Vn,[Kn]:403},[Gn],[0]];B.for(ue).registerError(Xx,Ti);Jx=[-3,ue,C2,{[zn]:["InvalidIdentityToken",400],[Qn]:Vn,[Kn]:400},[Gn],[0]];B.for(ue).registerError(Jx,Ai);Zx=[-3,ue,I2,{[zn]:["MalformedPolicyDocument",400],[Qn]:Vn,[Kn]:400},[Gn],[0]];B.for(ue).registerError(Zx,wi);eI=[-3,ue,$2,{[zn]:["PackedPolicyTooLarge",400],[Qn]:Vn,[Kn]:400},[Gn],[0]];B.for(ue).registerError(eI,_i);tI=[3,ue,M2,0,[W2],[0]],rI=[3,ue,D2,0,[P2,_2],[0,0]],nI=[-3,ue,U2,{[zn]:["RegionDisabledException",403],[Qn]:Vn,[Kn]:403},[Gn],[0]];B.for(ue).registerError(nI,bi);sI=[3,ue,Q2,0,[x2,K2],[0,0],2],oI=[-3,zx,"STSServiceException",0,[],[]];B.for(zx).registerError(oI,mt);iI=[1,ue,J2,0,()=>tI],r4=[1,ue,N2,0,()=>rI],n4=[1,ue,Z2,0,()=>sI],Zh=[9,ue,p2,0,()=>Vx,()=>Qx],eg=[9,ue,y2,0,()=>Kx,()=>Gx]});var aI,cI,Wn,al=w(()=>{c();aI=T(Zt()),cI=T(K());Qu();il();Wn=class extends cI.Command.classBuilder().ep(Vu).m(function(t,r,n,s){return[(0,aI.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(Zh).build(){}});var uI,lI,Yn,cl=w(()=>{c();uI=T(Zt()),lI=T(K());Qu();il();Yn=class extends lI.Command.classBuilder().ep(Vu).m(function(t,r,n,s){return[(0,uI.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(eg).build(){}});var dI,s4,ul,fI=w(()=>{c();dI=T(K());al();cl();Si();s4={AssumeRoleCommand:Wn,AssumeRoleWithWebIdentityCommand:Yn},ul=class extends nr{};(0,dI.createAggregatedClient)(s4,ul)});var pI=w(()=>{c();al();cl()});var mI=w(()=>{c()});var hI,gI,yI,SI,EI,wI,_I=w(()=>{c();Tt();hI=T(Fn());al();cl();gI=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},yI=async(e,t,r,n={})=>{let s=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i="",a=s??o??(i=await(0,hI.stsRegionDefaultResolver)(n)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),a},SI=(e,t)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:m=e?.parentClientConfig?.logger,profile:p=e?.parentClientConfig?.profile,region:g,requestHandler:h=e?.parentClientConfig?.requestHandler,credentialProviderLogger:S,userAgentAppId:R=e?.parentClientConfig?.userAgentAppId}=e,x=await yI(g,e?.parentClientConfig?.region,S,{logger:m,profile:p}),I=!wI(h);r=new t({...e,userAgentAppId:R,profile:p,credentialDefaultProvider:()=>async()=>n,region:x,requestHandler:I?h:void 0,logger:m})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Wn(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let u=gI(a),l={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...u&&{accountId:u}};return Ur(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},EI=(e,t)=>{let r;return async n=>{if(!r){let{logger:u=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:m,requestHandler:p=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:h=e?.parentClientConfig?.userAgentAppId}=e,S=await yI(m,e?.parentClientConfig?.region,g,{logger:u,profile:l}),R=!wI(p);r=new t({...e,userAgentAppId:h,profile:l,region:S,requestHandler:R?p:void 0,logger:u})}let{Credentials:s,AssumedRoleUser:o}=await r.send(new Yn(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=gI(o),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}};return i&&Ur(a,"RESOLVED_ACCOUNT_ID","T"),Ur(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},wI=e=>e?.metadata?.handlerProtocol==="h2"});var bI,TI,AI,o4,RI=w(()=>{c();_I();Si();bI=(e,t)=>t?class extends e{constructor(n){super(n);for(let s of t)this.middlewareStack.use(s)}}:e,TI=(e={},t)=>SI(e,bI(nr,t)),AI=(e={},t)=>EI(e,bI(nr,t)),o4=e=>t=>e({roleAssumer:TI(t),roleAssumerWithWebIdentity:AI(t),...t})});var tg={};lt(tg,{AssumeRole$:()=>Zh,AssumeRoleCommand:()=>Wn,AssumeRoleRequest$:()=>Vx,AssumeRoleResponse$:()=>Qx,AssumeRoleWithWebIdentity$:()=>eg,AssumeRoleWithWebIdentityCommand:()=>Yn,AssumeRoleWithWebIdentityRequest$:()=>Kx,AssumeRoleWithWebIdentityResponse$:()=>Gx,AssumedRoleUser$:()=>Xh,Credentials$:()=>Jh,ExpiredTokenException:()=>Ei,ExpiredTokenException$:()=>Wx,IDPCommunicationErrorException:()=>Ri,IDPCommunicationErrorException$:()=>Yx,IDPRejectedClaimException:()=>Ti,IDPRejectedClaimException$:()=>Xx,InvalidIdentityTokenException:()=>Ai,InvalidIdentityTokenException$:()=>Jx,MalformedPolicyDocumentException:()=>wi,MalformedPolicyDocumentException$:()=>Zx,PackedPolicyTooLargeException:()=>_i,PackedPolicyTooLargeException$:()=>eI,PolicyDescriptorType$:()=>tI,ProvidedContext$:()=>rI,RegionDisabledException:()=>bi,RegionDisabledException$:()=>nI,STS:()=>ul,STSClient:()=>nr,STSServiceException:()=>mt,STSServiceException$:()=>oI,Tag$:()=>sI,__Client:()=>Qh.Client,decorateDefaultCredentialProvider:()=>o4,getDefaultRoleAssumer:()=>TI,getDefaultRoleAssumerWithWebIdentity:()=>AI});var rg=w(()=>{c();Si();fI();pI();il();Kh();mI();RI();ol()});var og=O(vI=>{"use strict";c();var sg=Xt(),ng=Ke(),i4=Y("child_process"),a4=Y("util"),c4=(Tt(),re(pr)),u4=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let s={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return c4.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},l4=async(e,t,r)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let o=a4.promisify(sg.externalDataInterceptor?.getTokenRecord?.().exec??i4.exec);try{let{stdout:i}=await o(s),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return u4(e,a,t)}catch(i){throw new ng.CredentialsProviderError(i.message,{logger:r})}}else throw new ng.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new ng.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},d4=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await sg.parseKnownFiles(e);return l4(sg.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};vI.fromProcess=d4});var ig=O(or=>{"use strict";c();var f4=or&&or.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),p4=or&&or.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m4=or&&or.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),s=0;s<n.length;s++)n[s]!=="default"&&f4(r,t,n[s]);return p4(r,t),r}}();Object.defineProperty(or,"__esModule",{value:!0});or.fromWebToken=void 0;var h4=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:o,policyArns:i,policy:a,durationSeconds:u}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:m}=await Promise.resolve().then(()=>m4((rg(),re(tg))));l=m({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:u})};or.fromWebToken=h4});var xI=O(ll=>{"use strict";c();Object.defineProperty(ll,"__esModule",{value:!0});ll.fromTokenFile=void 0;var g4=(Tt(),re(pr)),y4=Ke(),S4=Xt(),E4=Y("fs"),w4=ig(),CI="AWS_WEB_IDENTITY_TOKEN_FILE",_4="AWS_ROLE_ARN",b4="AWS_ROLE_SESSION_NAME",T4=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[CI],n=e?.roleArn??process.env[_4],s=e?.roleSessionName??process.env[b4];if(!r||!n)throw new y4.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,w4.fromWebToken)({...e,webIdentityToken:S4.externalDataInterceptor?.getTokenRecord?.()[r]??(0,E4.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(t);return r===process.env[CI]&&(0,g4.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};ll.fromTokenFile=T4});var ag=O(vi=>{"use strict";c();var II=xI(),PI=ig();Object.keys(II).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(vi,e)&&Object.defineProperty(vi,e,{enumerable:!0,get:function(){return II[e]}})});Object.keys(PI).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(vi,e)&&Object.defineProperty(vi,e,{enumerable:!0,get:function(){return PI[e]}})})});var $I=O(kI=>{"use strict";c();var ug=Xt(),Ci=Ke(),Ar=(Tt(),re(pr)),A4=BC(),R4=(e,t,r)=>{let n={EcsContainer:async s=>{let{fromHttp:o}=await Promise.resolve().then(()=>T(Jm())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>T(Fo()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Ci.chain(o(s??{}),i(s))().then(cg)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>T(Fo()));return async()=>o(s)().then(cg)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>T(zm()));return async()=>o(s)().then(cg)}};if(e in n)return n[e];throw new Ci.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},cg=e=>Ar.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),v4=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(C4(e,{profile:t,logger:r})||x4(e,{profile:t,logger:r})),C4=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},x4=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},I4=async(e,t,r,n,s={},o)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=t[e],{source_profile:a,region:u}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:m}=await Promise.resolve().then(()=>(rg(),tg));r.roleAssumer=m({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...n,...r?.parentClientConfig,region:u??r?.parentClientConfig?.region??n?.region}},r.clientPlugins)}if(a&&a in s)throw new Ci.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${ug.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${e}]`}`);let l=a?o(a,t,r,n,{...s,[a]:!0},OI(t[a]??{})):(await R4(i.credential_source,e,r.logger)(r))();if(OI(i))return l.then(m=>Ar.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let m={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:p}=i;if(p){if(!r.mfaCodeProvider)throw new Ci.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});m.SerialNumber=p,m.TokenCode=await r.mfaCodeProvider(p)}let g=await l;return r.roleAssumer(g,m).then(h=>Ar.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},OI=e=>!e.role_arn&&!!e.credential_source,P4=e=>!!(e&&e.login_session),O4=async(e,t,r)=>{let n=await A4.fromLoginCredentials({...t,profile:e})({callerClientConfig:r});return Ar.setCredentialFeature(n,"CREDENTIALS_PROFILE_LOGIN","AC")},N4=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",D4=async(e,t)=>Promise.resolve().then(()=>T(og())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>Ar.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),M4=async(e,t,r={},n)=>{let{fromSSO:s}=await Promise.resolve().then(()=>T(Th()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:n}).then(o=>t.sso_session?Ar.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):Ar.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},k4=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),NI=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,DI=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return Ar.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},$4=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,L4=async(e,t,r)=>Promise.resolve().then(()=>T(ag())).then(({fromTokenFile:n})=>n({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})({callerClientConfig:r}).then(s=>Ar.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),MI=async(e,t,r,n,s={},o=!1)=>{let i=t[e];if(Object.keys(s).length>0&&NI(i))return DI(i,r);if(o||v4(i,{profile:e,logger:r.logger}))return I4(e,t,r,n,s,MI);if(NI(i))return DI(i,r);if($4(i))return L4(i,r,n);if(N4(i))return D4(r,e);if(k4(i))return await M4(e,i,r,n);if(P4(i))return O4(e,r,n);throw new Ci.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},U4=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await ug.parseKnownFiles(e);return MI(ug.getProfileName({profile:e.profile??t?.profile}),r,e,t)};kI.fromIni=U4});var qI=O(dl=>{"use strict";c();var lg=zm(),xi=Ke(),F4=Xt(),LI="AWS_EC2_METADATA_DISABLED",q4=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>T(Fo()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>T(Jm()));return xi.chain(o(e),n(e))}return process.env[LI]&&process.env[LI]!=="false"?async()=>{throw new xi.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(e))};function B4(e,t){let r=j4(e),n,s,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),n)await n;else if(!o||t?.(o))if(o)s||(s=r(a).then(u=>{o=u,s=void 0}));else return n=r(a).then(u=>{o=u,n=void 0}),i(a);return o};return i}var j4=e=>async t=>{let r;for(let n of e)try{return await n(t)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},UI=!1,H4=(e={})=>B4([async()=>{if(e.profile??process.env[F4.ENV_PROFILE])throw process.env[lg.ENV_KEY]&&process.env[lg.ENV_SECRET]&&(UI||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),UI=!0)),new xi.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),lg.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=e;if(!r&&!n&&!s&&!o&&!i)throw new xi.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>T(Th()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>T($I()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>T(og()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>T(ag()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await q4(e))()),async()=>{throw new xi.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],FI),z4=e=>e?.expiration!==void 0,FI=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;dl.credentialsTreatedAsExpired=FI;dl.credentialsWillNeedRefresh=z4;dl.defaultProvider=H4});var tP=O(fl=>{"use strict";c();Object.defineProperty(fl,"__esModule",{value:!0});fl.ruleSet=void 0;var XI="required",Nt="fn",Dt="argv",Zs="ref",BI=!0,jI="isSet",Ii="booleanEquals",Xs="error",Js="endpoint",Rr="tree",dg="PartitionResult",fg="getAttr",HI={[XI]:!1,type:"string"},zI={[XI]:!0,default:!1,type:"boolean"},VI={[Zs]:"Endpoint"},JI={[Nt]:Ii,[Dt]:[{[Zs]:"UseFIPS"},!0]},ZI={[Nt]:Ii,[Dt]:[{[Zs]:"UseDualStack"},!0]},Ot={},QI={[Nt]:fg,[Dt]:[{[Zs]:dg},"supportsFIPS"]},eP={[Zs]:dg},KI={[Nt]:Ii,[Dt]:[!0,{[Nt]:fg,[Dt]:[eP,"supportsDualStack"]}]},GI=[JI],WI=[ZI],YI=[{[Zs]:"Region"}],V4={version:"1.0",parameters:{Region:HI,UseDualStack:zI,UseFIPS:zI,Endpoint:HI},rules:[{conditions:[{[Nt]:jI,[Dt]:[VI]}],rules:[{conditions:GI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Xs},{conditions:WI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Xs},{endpoint:{url:VI,properties:Ot,headers:Ot},type:Js}],type:Rr},{conditions:[{[Nt]:jI,[Dt]:YI}],rules:[{conditions:[{[Nt]:"aws.partition",[Dt]:YI,assign:dg}],rules:[{conditions:[JI,ZI],rules:[{conditions:[{[Nt]:Ii,[Dt]:[BI,QI]},KI],rules:[{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ot,headers:Ot},type:Js}],type:Rr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Xs}],type:Rr},{conditions:GI,rules:[{conditions:[{[Nt]:Ii,[Dt]:[QI,BI]}],rules:[{conditions:[{[Nt]:"stringEquals",[Dt]:[{[Nt]:fg,[Dt]:[eP,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sqs.{Region}.amazonaws.com",properties:Ot,headers:Ot},type:Js},{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ot,headers:Ot},type:Js}],type:Rr},{error:"FIPS is enabled but this partition does not support FIPS",type:Xs}],type:Rr},{conditions:WI,rules:[{conditions:[KI],rules:[{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ot,headers:Ot},type:Js}],type:Rr},{error:"DualStack is enabled but this partition does not support DualStack",type:Xs}],type:Rr},{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dnsSuffix}",properties:Ot,headers:Ot},type:Js}],type:Rr}],type:Rr},{error:"Invalid Configuration: Missing Region",type:Xs}]};fl.ruleSet=V4});var rP=O(pl=>{"use strict";c();Object.defineProperty(pl,"__esModule",{value:!0});pl.defaultEndpointResolver=void 0;var Q4=On(),pg=$r(),K4=tP(),G4=new pg.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),W4=(e,t={})=>G4.get(e,()=>(0,pg.resolveEndpoint)(K4.ruleSet,{endpointParams:e,logger:t.logger}));pl.defaultEndpointResolver=W4;pg.customEndpointFunctions.aws=Q4.awsEndpointFunctions});var oP=O(ml=>{"use strict";c();Object.defineProperty(ml,"__esModule",{value:!0});ml.getRuntimeConfig=void 0;var Y4=(qe(),re(Xr)),X4=(Mn(),re(Tm)),J4=K(),Z4=fr(),nP=Wt(),sP=Ie(),ez=Hm(),tz=rP(),rz=e=>({apiVersion:"2012-11-05",base64Decoder:e?.base64Decoder??nP.fromBase64,base64Encoder:e?.base64Encoder??nP.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??tz.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ez.defaultSQSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Y4.AwsSdkSigV4Signer}],logger:e?.logger??new J4.NoOpLogger,protocol:e?.protocol??X4.AwsJson1_0Protocol,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sqs",version:"2012-11-05",serviceTarget:"AmazonSQS",awsQueryCompatible:!0},serviceId:e?.serviceId??"SQS",urlParser:e?.urlParser??Z4.parseUrl,utf8Decoder:e?.utf8Decoder??sP.fromUtf8,utf8Encoder:e?.utf8Encoder??sP.toUtf8});ml.getRuntimeConfig=rz});var fP=O(gl=>{"use strict";c();Object.defineProperty(gl,"__esModule",{value:!0});gl.getRuntimeConfig=void 0;var nz=(So(),re(yo)),sz=nz.__importDefault(fA()),iP=(qe(),re(Xr)),oz=qI(),aP=Ds(),hl=pt(),cP=Ms(),uP=Lt(),Xn=Jt(),lP=Nr(),dP=K(),iz=ks(),az=$s(),cz=Ln(),uz=oP(),lz=e=>{(0,dP.emitWarningIfUnsupportedVersion)(process.version);let t=(0,az.resolveDefaultsModeConfig)(e),r=()=>t().then(dP.loadConfigsForDefaultMode),n=(0,uz.getRuntimeConfig)(e);(0,iP.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Xn.loadConfig)(iP.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??iz.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??oz.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,aP.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:sz.default.version}),maxAttempts:e?.maxAttempts??(0,Xn.loadConfig)(uP.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),md5:e?.md5??cP.Hash.bind(null,"md5"),region:e?.region??(0,Xn.loadConfig)(hl.NODE_REGION_CONFIG_OPTIONS,{...hl.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:lP.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Xn.loadConfig)({...uP.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||cz.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??cP.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??lP.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Xn.loadConfig)(hl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Xn.loadConfig)(hl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Xn.loadConfig)(aP.NODE_APP_ID_CONFIG_OPTIONS,s)}};gl.getRuntimeConfig=lz});var zN=O(A=>{"use strict";c();var pP=Zn(),dz=es(),fz=ts(),Oi=ow(),mP=kn(),pz=pt(),Pi=(ot(),re(ds)),de=(ae(),re(ma)),mz=xs(),Ae=Zt(),hP=Lt(),le=K(),gP=Hm(),hz=fP(),yP=Fn(),SP=me(),gz=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sqs"}),xe={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},yz=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Sz=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Ez=(e,t)=>{let r=Object.assign(yP.getAwsRegionExtensionConfiguration(e),le.getDefaultExtensionConfiguration(e),SP.getHttpHandlerExtensionConfiguration(e),yz(e));return t.forEach(n=>n.configure(r)),Object.assign(e,yP.resolveAwsRegionExtensionConfiguration(r),le.resolveDefaultRuntimeConfig(r),SP.resolveHttpHandlerRuntimeConfig(r),Sz(r))},eo=class extends le.Client{config;constructor(...[t]){let r=hz.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=gz(r),s=mP.resolveUserAgentConfig(n),o=hP.resolveRetryConfig(s),i=pz.resolveRegionConfig(o),a=pP.resolveHostHeaderConfig(i),u=Ae.resolveEndpointConfig(a),l=Oi.resolveQueueUrlConfig(u),m=gP.resolveHttpAuthSchemeConfig(l),p=Ez(m,t?.extensions||[]);this.config=p,this.middlewareStack.use(de.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(mP.getUserAgentPlugin(this.config)),this.middlewareStack.use(hP.getRetryPlugin(this.config)),this.middlewareStack.use(mz.getContentLengthPlugin(this.config)),this.middlewareStack.use(pP.getHostHeaderPlugin(this.config)),this.middlewareStack.use(dz.getLoggerPlugin(this.config)),this.middlewareStack.use(fz.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Oi.getQueueUrlPlugin(this.config)),this.middlewareStack.use(Pi.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:gP.defaultSQSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async g=>new Pi.DefaultIdentityProviderConfig({"aws.auth#sigv4":g.credentials})})),this.middlewareStack.use(Pi.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},ie=class e extends le.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},yl=class e extends ie{name="InvalidAddress";$fault="client";constructor(t){super({name:"InvalidAddress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Sl=class e extends ie{name="InvalidSecurity";$fault="client";constructor(t){super({name:"InvalidSecurity",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},El=class e extends ie{name="OverLimit";$fault="client";constructor(t){super({name:"OverLimit",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},wl=class e extends ie{name="QueueDoesNotExist";$fault="client";constructor(t){super({name:"QueueDoesNotExist",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},_l=class e extends ie{name="RequestThrottled";$fault="client";constructor(t){super({name:"RequestThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},bl=class e extends ie{name="UnsupportedOperation";$fault="client";constructor(t){super({name:"UnsupportedOperation",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Tl=class e extends ie{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Al=class e extends ie{name="MessageNotInflight";$fault="client";constructor(t){super({name:"MessageNotInflight",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Rl=class e extends ie{name="ReceiptHandleIsInvalid";$fault="client";constructor(t){super({name:"ReceiptHandleIsInvalid",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},vl=class e extends ie{name="BatchEntryIdsNotDistinct";$fault="client";constructor(t){super({name:"BatchEntryIdsNotDistinct",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Cl=class e extends ie{name="EmptyBatchRequest";$fault="client";constructor(t){super({name:"EmptyBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},xl=class e extends ie{name="InvalidBatchEntryId";$fault="client";constructor(t){super({name:"InvalidBatchEntryId",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Il=class e extends ie{name="TooManyEntriesInBatchRequest";$fault="client";constructor(t){super({name:"TooManyEntriesInBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Pl=class e extends ie{name="InvalidAttributeName";$fault="client";constructor(t){super({name:"InvalidAttributeName",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ol=class e extends ie{name="InvalidAttributeValue";$fault="client";constructor(t){super({name:"InvalidAttributeValue",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Nl=class e extends ie{name="QueueDeletedRecently";$fault="client";constructor(t){super({name:"QueueDeletedRecently",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Dl=class e extends ie{name="QueueNameExists";$fault="client";constructor(t){super({name:"QueueNameExists",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ml=class e extends ie{name="InvalidIdFormat";$fault="client";constructor(t){super({name:"InvalidIdFormat",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},kl=class e extends ie{name="PurgeQueueInProgress";$fault="client";constructor(t){super({name:"PurgeQueueInProgress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$l=class e extends ie{name="KmsAccessDenied";$fault="client";constructor(t){super({name:"KmsAccessDenied",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ll=class e extends ie{name="KmsDisabled";$fault="client";constructor(t){super({name:"KmsDisabled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ul=class e extends ie{name="KmsInvalidKeyUsage";$fault="client";constructor(t){super({name:"KmsInvalidKeyUsage",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fl=class e extends ie{name="KmsInvalidState";$fault="client";constructor(t){super({name:"KmsInvalidState",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ql=class e extends ie{name="KmsNotFound";$fault="client";constructor(t){super({name:"KmsNotFound",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Bl=class e extends ie{name="KmsOptInRequired";$fault="client";constructor(t){super({name:"KmsOptInRequired",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},jl=class e extends ie{name="KmsThrottled";$fault="client";constructor(t){super({name:"KmsThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Hl=class e extends ie{name="InvalidMessageContents";$fault="client";constructor(t){super({name:"InvalidMessageContents",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},zl=class e extends ie{name="BatchRequestTooLong";$fault="client";constructor(t){super({name:"BatchRequestTooLong",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},wz="Actions",_z="ActionName",wP="ApproximateNumberOfMessagesMoved",bz="ApproximateNumberOfMessagesToMove",_P="AttributeNames",mg="AttributeName",Tz="AddPermission",Az="AddPermissionRequest",Rz="AWSAccountIds",vz="AWSAccountId",pd="Attributes",md="Attribute",Cz="Body",xz="BatchEntryIdsNotDistinct",Iz="BinaryList",bP="BinaryListValues",hg="BinaryListValue",hd="BatchResultErrorEntry",Pz="BatchResultErrorEntryList",Oz="BatchRequestTooLong",TP="BinaryValue",Nz="Code",Dz="CancelMessageMoveTask",Mz="CancelMessageMoveTaskRequest",kz="CancelMessageMoveTaskResult",$z="ChangeMessageVisibility",Lz="ChangeMessageVisibilityBatch",Uz="ChangeMessageVisibilityBatchRequest",AP="ChangeMessageVisibilityBatchRequestEntry",Fz="ChangeMessageVisibilityBatchRequestEntryList",qz="ChangeMessageVisibilityBatchResultEntryList",RP="ChangeMessageVisibilityBatchResultEntry",Bz="ChangeMessageVisibilityBatchResult",jz="ChangeMessageVisibilityRequest",Hz="CreateQueue",zz="CreateQueueRequest",Vz="CreateQueueResult",vP="DestinationArn",Qz="DeleteMessage",Kz="DeleteMessageBatch",Gz="DeleteMessageBatchRequest",CP="DeleteMessageBatchRequestEntry",Wz="DeleteMessageBatchRequestEntryList",Yz="DeleteMessageBatchResultEntryList",xP="DeleteMessageBatchResultEntry",Xz="DeleteMessageBatchResult",Jz="DeleteMessageRequest",Zz="DeleteQueue",eV="DeleteQueueRequest",IP="DelaySeconds",PP="DataType",gg="Entries",tV="EmptyBatchRequest",yg="Failed",rV="FailureReason",nV="GetQueueAttributes",sV="GetQueueAttributesRequest",oV="GetQueueAttributesResult",iV="GetQueueUrl",aV="GetQueueUrlRequest",cV="GetQueueUrlResult",Jn="Id",uV="InvalidAddress",lV="InvalidAttributeName",dV="InvalidAttributeValue",fV="InvalidBatchEntryId",pV="InvalidIdFormat",mV="InvalidMessageContents",hV="InvalidSecurity",gV="Key",yV="KmsAccessDenied",SV="KmsDisabled",EV="KmsInvalidKeyUsage",wV="KmsInvalidState",_V="KmsNotFound",bV="KmsOptInRequired",TV="KmsThrottled",OP="Label",AV="ListDeadLetterSourceQueues",RV="ListDeadLetterSourceQueuesRequest",vV="ListDeadLetterSourceQueuesResult",CV="ListMessageMoveTasks",xV="ListMessageMoveTasksRequest",NP="ListMessageMoveTasksResultEntry",IV="ListMessageMoveTasksResultEntryList",EP="ListMessageMoveTasksResult",PV="ListQueues",OV="ListQueuesRequest",NV="ListQueuesResult",DV="ListQueueTags",MV="ListQueueTagsRequest",kV="ListQueueTagsResult",Sg="Message",Eg="MessageAttributes",$V="MessageAttributeNames",LV="MessageAttributeName",UV="MessageAttributeValue",wg="MessageAttribute",DP="MessageBody",FV="MessageBodyAttributeMap",qV="MessageBodySystemAttributeMap",MP="MessageDeduplicationId",BV="MD5OfBody",_g="MD5OfMessageAttributes",kP="MD5OfMessageBody",$P="MD5OfMessageSystemAttributes",LP="MessageGroupId",bg="MessageId",jV="MessageList",HV="MessageNotInflight",zV="MaxNumberOfMessages",UP="MaxNumberOfMessagesPerSecond",Tg="MaxResults",FP="MessageSystemAttributes",VV="MessageSystemAttributeMap",QV="MessageSystemAttributeNames",KV="MessageSystemAttributeValue",qP="MessageSystemAttribute",GV="Messages",gd="Name",yd="NextToken",WV="OverLimit",YV="PurgeQueue",XV="PurgeQueueInProgress",JV="PurgeQueueRequest",ZV="QueueAttributeMap",e3="QueueDoesNotExist",t3="QueueDeletedRecently",BP="QueueName",r3="QueueNameExists",n3="QueueNamePrefix",s3="QueueOwnerAWSAccountId",Me="QueueUrl",o3="QueueUrls",i3="Results",Mi="ReceiptHandle",a3="ReceiptHandleIsInvalid",c3="ReceiveMessage",u3="ReceiveMessageRequest",l3="ReceiveMessageResult",d3="ResourceNotFoundException",f3="RemovePermission",p3="RemovePermissionRequest",m3="ReceiveRequestAttemptId",h3="RequestThrottled",Ag="Successful",Rg="SourceArn",g3="SenderFault",y3="StringList",jP="StringListValues",vg="StringListValue",S3="SendMessage",E3="SendMessageBatch",w3="SendMessageBatchRequest",HP="SendMessageBatchRequestEntry",_3="SendMessageBatchRequestEntryList",b3="SendMessageBatchResultEntryList",zP="SendMessageBatchResultEntry",T3="SendMessageBatchResult",A3="StartMessageMoveTask",R3="StartMessageMoveTaskRequest",v3="StartMessageMoveTaskResult",C3="SendMessageRequest",x3="SendMessageResult",VP="SequenceNumber",I3="SetQueueAttributes",P3="SetQueueAttributesRequest",O3="StartedTimestamp",QP="StringValue",N3="Status",Cg="Tag",xg="TaskHandle",D3="TagKeys",M3="TagKey",k3="TagMap",$3="TooManyEntriesInBatchRequest",L3="TagQueue",U3="TagQueueRequest",KP="Tags",F3="UnsupportedOperation",q3="UntagQueue",B3="UntagQueueRequest",ki="Value",Ig="VisibilityTimeout",j3="WaitTimeSeconds",Re="awsQueryError",ge="client",ye="error",ve="httpError",be="message",H3="queueUrls",GP="smithy.ts.sdk.synthetic.com.amazonaws.sqs",z3="tags",X="xmlFlattened",q="xmlName",v="com.amazonaws.sqs",WP=[3,v,Az,0,[Me,OP,Rz,wz],[0,0,[64,{[X]:1,[q]:vz}],[64,{[X]:1,[q]:_z}]],4],YP=[-3,v,xz,{[Re]:["AWS.SimpleQueueService.BatchEntryIdsNotDistinct",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(YP,vl);var XP=[-3,v,Oz,{[Re]:["AWS.SimpleQueueService.BatchRequestTooLong",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(XP,zl);var JP=[3,v,hd,0,[Jn,g3,Nz,Sg],[0,2,0,0],3],ZP=[3,v,Mz,0,[xg],[0],1],eO=[3,v,kz,0,[wP],[1]],tO=[3,v,Uz,0,[Me,gg],[0,[()=>V3,{[X]:1,[q]:AP}]],2],rO=[3,v,AP,0,[Jn,Mi,Ig],[0,0,1],2],nO=[3,v,Bz,0,[Ag,yg],[[()=>Q3,{[X]:1,[q]:RP}],[()=>Pg,{[X]:1,[q]:hd}]],2],sO=[3,v,RP,0,[Jn],[0],1],oO=[3,v,jz,0,[Me,Mi,Ig],[0,0,1],3],iO=[3,v,zz,0,[BP,pd,z3],[0,[()=>Ng,{[X]:1,[q]:md}],[()=>Dg,{[X]:1,[q]:Cg}]],1],aO=[3,v,Vz,0,[Me],[0]],cO=[3,v,Gz,0,[Me,gg],[0,[()=>K3,{[X]:1,[q]:CP}]],2],uO=[3,v,CP,0,[Jn,Mi],[0,0],2],lO=[3,v,Xz,0,[Ag,yg],[[()=>G3,{[X]:1,[q]:xP}],[()=>Pg,{[X]:1,[q]:hd}]],2],dO=[3,v,xP,0,[Jn],[0],1],fO=[3,v,Jz,0,[Me,Mi],[0,0],2],pO=[3,v,eV,0,[Me],[0],1],mO=[-3,v,tV,{[Re]:["AWS.SimpleQueueService.EmptyBatchRequest",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(mO,Cl);var hO=[3,v,sV,0,[Me,_P],[0,[64,{[X]:1,[q]:mg}]],1],gO=[3,v,oV,0,[pd],[[()=>Ng,{[X]:1,[q]:md}]]],yO=[3,v,aV,0,[BP,s3],[0,0],1],SO=[3,v,cV,0,[Me],[0]],EO=[-3,v,uV,{[Re]:["InvalidAddress",404],[ye]:ge,[ve]:404},[be],[0]];de.TypeRegistry.for(v).registerError(EO,yl);var wO=[-3,v,lV,{[ye]:ge},[be],[0]];de.TypeRegistry.for(v).registerError(wO,Pl);var _O=[-3,v,dV,{[ye]:ge},[be],[0]];de.TypeRegistry.for(v).registerError(_O,Ol);var bO=[-3,v,fV,{[Re]:["AWS.SimpleQueueService.InvalidBatchEntryId",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(bO,xl);var TO=[-3,v,pV,{[ye]:ge},[],[]];de.TypeRegistry.for(v).registerError(TO,Ml);var AO=[-3,v,mV,{[ye]:ge},[be],[0]];de.TypeRegistry.for(v).registerError(AO,Hl);var RO=[-3,v,hV,{[Re]:["InvalidSecurity",403],[ye]:ge,[ve]:403},[be],[0]];de.TypeRegistry.for(v).registerError(RO,Sl);var vO=[-3,v,yV,{[Re]:["KMS.AccessDeniedException",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(vO,$l);var CO=[-3,v,SV,{[Re]:["KMS.DisabledException",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(CO,Ll);var xO=[-3,v,EV,{[Re]:["KMS.InvalidKeyUsageException",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(xO,Ul);var IO=[-3,v,wV,{[Re]:["KMS.InvalidStateException",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(IO,Fl);var PO=[-3,v,_V,{[Re]:["KMS.NotFoundException",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(PO,ql);var OO=[-3,v,bV,{[Re]:["KMS.OptInRequired",403],[ye]:ge,[ve]:403},[be],[0]];de.TypeRegistry.for(v).registerError(OO,Bl);var NO=[-3,v,TV,{[Re]:["KMS.ThrottlingException",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(NO,jl);var DO=[3,v,RV,0,[Me,yd,Tg],[0,0,1],1],MO=[3,v,vV,0,[H3,yd],[[64,{[X]:1,[q]:Me}],0],1],kO=[3,v,xV,0,[Rg,Tg],[0,1],1],$O=[3,v,EP,{[q]:EP},[i3],[[()=>W3,{[X]:1,[q]:NP}]]],LO=[3,v,NP,0,[xg,N3,Rg,vP,UP,wP,bz,rV,O3],[0,0,0,0,1,1,1,0,1]],UO=[3,v,OV,0,[n3,yd,Tg],[0,0,1]],FO=[3,v,NV,0,[o3,yd],[[64,{[X]:1,[q]:Me}],0]],qO=[3,v,MV,0,[Me],[0],1],BO=[3,v,kV,0,[KP],[[()=>Dg,{[X]:1,[q]:Cg}]]],jO=[3,v,Sg,0,[bg,Mi,BV,Cz,pd,_g,Eg],[0,0,0,0,[()=>Z3,{[X]:1,[q]:md}],0,[()=>Og,{[X]:1,[q]:wg}]]],HO=[3,v,UV,0,[PP,QP,TP,jP,bP],[0,0,21,[()=>EN,{[X]:1,[q]:vg}],[()=>SN,{[X]:1,[q]:hg}]],1],zO=[-3,v,HV,{[Re]:["AWS.SimpleQueueService.MessageNotInflight",400],[ye]:ge,[ve]:400},[],[]];de.TypeRegistry.for(v).registerError(zO,Al);var VO=[3,v,KV,0,[PP,QP,TP,jP,bP],[0,0,21,[()=>EN,{[X]:1,[q]:vg}],[()=>SN,{[X]:1,[q]:hg}]],1],QO=[-3,v,WV,{[Re]:["OverLimit",403],[ye]:ge,[ve]:403},[be],[0]];de.TypeRegistry.for(v).registerError(QO,El);var KO=[-3,v,XV,{[Re]:["AWS.SimpleQueueService.PurgeQueueInProgress",403],[ye]:ge,[ve]:403},[be],[0]];de.TypeRegistry.for(v).registerError(KO,kl);var GO=[3,v,JV,0,[Me],[0],1],WO=[-3,v,t3,{[Re]:["AWS.SimpleQueueService.QueueDeletedRecently",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(WO,Nl);var YO=[-3,v,e3,{[Re]:["AWS.SimpleQueueService.NonExistentQueue",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(YO,wl);var XO=[-3,v,r3,{[Re]:["QueueAlreadyExists",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(XO,Dl);var JO=[-3,v,a3,{[Re]:["ReceiptHandleIsInvalid",404],[ye]:ge,[ve]:404},[be],[0]];de.TypeRegistry.for(v).registerError(JO,Rl);var ZO=[3,v,u3,0,[Me,_P,QV,$V,zV,Ig,j3,m3],[0,[64,{[X]:1,[q]:mg}],[64,{[X]:1,[q]:mg}],[64,{[X]:1,[q]:LV}],1,1,1,0],1],eN=[3,v,l3,0,[GV],[[()=>Y3,{[X]:1,[q]:Sg}]]],tN=[3,v,p3,0,[Me,OP],[0,0],2],rN=[-3,v,h3,{[Re]:["RequestThrottled",403],[ye]:ge,[ve]:403},[be],[0]];de.TypeRegistry.for(v).registerError(rN,_l);var nN=[-3,v,d3,{[Re]:["ResourceNotFoundException",404],[ye]:ge,[ve]:404},[be],[0]];de.TypeRegistry.for(v).registerError(nN,Tl);var sN=[3,v,w3,0,[Me,gg],[0,[()=>X3,{[X]:1,[q]:HP}]],2],oN=[3,v,HP,0,[Jn,DP,IP,Eg,FP,MP,LP],[0,0,1,[()=>Og,{[X]:1,[q]:wg}],[()=>wN,{[X]:1,[q]:qP}],0,0],2],iN=[3,v,T3,0,[Ag,yg],[[()=>J3,{[X]:1,[q]:zP}],[()=>Pg,{[X]:1,[q]:hd}]],2],aN=[3,v,zP,0,[Jn,bg,kP,_g,$P,VP],[0,0,0,0,0,0],3],cN=[3,v,C3,0,[Me,DP,IP,Eg,FP,MP,LP],[0,0,1,[()=>Og,{[X]:1,[q]:wg}],[()=>wN,{[X]:1,[q]:qP}],0,0],2],uN=[3,v,x3,0,[kP,_g,$P,bg,VP],[0,0,0,0,0]],lN=[3,v,P3,0,[Me,pd],[0,[()=>Ng,{[X]:1,[q]:md}]],2],dN=[3,v,R3,0,[Rg,vP,UP],[0,0,1],1],fN=[3,v,v3,0,[xg],[0]],pN=[3,v,U3,0,[Me,KP],[0,[()=>Dg,{[X]:1,[q]:Cg}]],2],mN=[-3,v,$3,{[Re]:["AWS.SimpleQueueService.TooManyEntriesInBatchRequest",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(mN,Il);var hN=[-3,v,F3,{[Re]:["AWS.SimpleQueueService.UnsupportedOperation",400],[ye]:ge,[ve]:400},[be],[0]];de.TypeRegistry.for(v).registerError(hN,bl);var gN=[3,v,B3,0,[Me,D3],[0,[64,{[X]:1,[q]:M3}]],2],vr="unit",yN=[-3,GP,"SQSServiceException",0,[],[]];de.TypeRegistry.for(GP).registerError(yN,ie);var Pg=[1,v,Pz,0,()=>JP],SN=[1,v,Iz,0,[21,{[q]:hg}]],V3=[1,v,Fz,0,()=>rO],Q3=[1,v,qz,0,()=>sO],K3=[1,v,Wz,0,()=>uO],G3=[1,v,Yz,0,()=>dO],W3=[1,v,IV,0,()=>LO],Y3=[1,v,jV,0,[()=>jO,0]],X3=[1,v,_3,0,[()=>oN,0]],J3=[1,v,b3,0,()=>aN],EN=[1,v,y3,0,[0,{[q]:vg}]],Og=[2,v,FV,0,[0,{[q]:gd}],[()=>HO,{[q]:ki}]],wN=[2,v,qV,0,[0,{[q]:gd}],[()=>VO,{[q]:ki}]],Z3=[2,v,VV,0,[0,{[q]:gd}],[0,{[q]:ki}]],Ng=[2,v,ZV,0,[0,{[q]:gd}],[0,{[q]:ki}]],Dg=[2,v,k3,0,[0,{[q]:gV}],[0,{[q]:ki}]],_N=[9,v,Tz,0,()=>WP,()=>vr],bN=[9,v,Dz,0,()=>ZP,()=>eO],TN=[9,v,$z,0,()=>oO,()=>vr],AN=[9,v,Lz,0,()=>tO,()=>nO],RN=[9,v,Hz,0,()=>iO,()=>aO],vN=[9,v,Qz,0,()=>fO,()=>vr],CN=[9,v,Kz,0,()=>cO,()=>lO],xN=[9,v,Zz,0,()=>pO,()=>vr],IN=[9,v,nV,0,()=>hO,()=>gO],PN=[9,v,iV,0,()=>yO,()=>SO],ON=[9,v,AV,0,()=>DO,()=>MO],NN=[9,v,CV,0,()=>kO,()=>$O],DN=[9,v,PV,0,()=>UO,()=>FO],MN=[9,v,DV,0,()=>qO,()=>BO],kN=[9,v,YV,0,()=>GO,()=>vr],$N=[9,v,c3,0,()=>ZO,()=>eN],LN=[9,v,f3,0,()=>tN,()=>vr],UN=[9,v,S3,0,()=>cN,()=>uN],FN=[9,v,E3,0,()=>sN,()=>iN],qN=[9,v,I3,0,()=>lN,()=>vr],BN=[9,v,A3,0,()=>dN,()=>fN],jN=[9,v,L3,0,()=>pN,()=>vr],HN=[9,v,q3,0,()=>gN,()=>vr],Vl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","AddPermission",{}).n("SQSClient","AddPermissionCommand").sc(_N).build(){},Ql=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CancelMessageMoveTask",{}).n("SQSClient","CancelMessageMoveTaskCommand").sc(bN).build(){},Kl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibilityBatch",{}).n("SQSClient","ChangeMessageVisibilityBatchCommand").sc(AN).build(){},Gl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibility",{}).n("SQSClient","ChangeMessageVisibilityCommand").sc(TN).build(){},Wl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CreateQueue",{}).n("SQSClient","CreateQueueCommand").sc(RN).build(){},Yl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessageBatch",{}).n("SQSClient","DeleteMessageBatchCommand").sc(CN).build(){},Xl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessage",{}).n("SQSClient","DeleteMessageCommand").sc(vN).build(){},Jl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteQueue",{}).n("SQSClient","DeleteQueueCommand").sc(xN).build(){},Zl=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueAttributes",{}).n("SQSClient","GetQueueAttributesCommand").sc(IN).build(){},ed=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueUrl",{}).n("SQSClient","GetQueueUrlCommand").sc(PN).build(){},Ni=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListDeadLetterSourceQueues",{}).n("SQSClient","ListDeadLetterSourceQueuesCommand").sc(ON).build(){},td=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListMessageMoveTasks",{}).n("SQSClient","ListMessageMoveTasksCommand").sc(NN).build(){},Di=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueues",{}).n("SQSClient","ListQueuesCommand").sc(DN).build(){},rd=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueueTags",{}).n("SQSClient","ListQueueTagsCommand").sc(MN).build(){},nd=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","PurgeQueue",{}).n("SQSClient","PurgeQueueCommand").sc(kN).build(){},sd=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions()),Oi.getReceiveMessagePlugin(n)]}).s("AmazonSQS","ReceiveMessage",{}).n("SQSClient","ReceiveMessageCommand").sc($N).build(){},od=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","RemovePermission",{}).n("SQSClient","RemovePermissionCommand").sc(LN).build(){},id=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions()),Oi.getSendMessageBatchPlugin(n)]}).s("AmazonSQS","SendMessageBatch",{}).n("SQSClient","SendMessageBatchCommand").sc(FN).build(){},ad=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions()),Oi.getSendMessagePlugin(n)]}).s("AmazonSQS","SendMessage",{}).n("SQSClient","SendMessageCommand").sc(UN).build(){},cd=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","SetQueueAttributes",{}).n("SQSClient","SetQueueAttributesCommand").sc(qN).build(){},ud=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","StartMessageMoveTask",{}).n("SQSClient","StartMessageMoveTaskCommand").sc(BN).build(){},ld=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","TagQueue",{}).n("SQSClient","TagQueueCommand").sc(jN).build(){},dd=class extends le.Command.classBuilder().ep(xe).m(function(t,r,n,s){return[Ae.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonSQS","UntagQueue",{}).n("SQSClient","UntagQueueCommand").sc(HN).build(){},eQ={AddPermissionCommand:Vl,CancelMessageMoveTaskCommand:Ql,ChangeMessageVisibilityCommand:Gl,ChangeMessageVisibilityBatchCommand:Kl,CreateQueueCommand:Wl,DeleteMessageCommand:Xl,DeleteMessageBatchCommand:Yl,DeleteQueueCommand:Jl,GetQueueAttributesCommand:Zl,GetQueueUrlCommand:ed,ListDeadLetterSourceQueuesCommand:Ni,ListMessageMoveTasksCommand:td,ListQueuesCommand:Di,ListQueueTagsCommand:rd,PurgeQueueCommand:nd,ReceiveMessageCommand:sd,RemovePermissionCommand:od,SendMessageCommand:ad,SendMessageBatchCommand:id,SetQueueAttributesCommand:cd,StartMessageMoveTaskCommand:ud,TagQueueCommand:ld,UntagQueueCommand:dd},fd=class extends eo{};le.createAggregatedClient(eQ,fd);var tQ=Pi.createPaginator(eo,Ni,"NextToken","NextToken","MaxResults"),rQ=Pi.createPaginator(eo,Di,"NextToken","NextToken","MaxResults"),nQ={All:"All",ApproximateNumberOfMessages:"ApproximateNumberOfMessages",ApproximateNumberOfMessagesDelayed:"ApproximateNumberOfMessagesDelayed",ApproximateNumberOfMessagesNotVisible:"ApproximateNumberOfMessagesNotVisible",ContentBasedDeduplication:"ContentBasedDeduplication",CreatedTimestamp:"CreatedTimestamp",DeduplicationScope:"DeduplicationScope",DelaySeconds:"DelaySeconds",FifoQueue:"FifoQueue",FifoThroughputLimit:"FifoThroughputLimit",KmsDataKeyReusePeriodSeconds:"KmsDataKeyReusePeriodSeconds",KmsMasterKeyId:"KmsMasterKeyId",LastModifiedTimestamp:"LastModifiedTimestamp",MaximumMessageSize:"MaximumMessageSize",MessageRetentionPeriod:"MessageRetentionPeriod",Policy:"Policy",QueueArn:"QueueArn",ReceiveMessageWaitTimeSeconds:"ReceiveMessageWaitTimeSeconds",RedriveAllowPolicy:"RedriveAllowPolicy",RedrivePolicy:"RedrivePolicy",SqsManagedSseEnabled:"SqsManagedSseEnabled",VisibilityTimeout:"VisibilityTimeout"},sQ={AWSTraceHeader:"AWSTraceHeader",All:"All",ApproximateFirstReceiveTimestamp:"ApproximateFirstReceiveTimestamp",ApproximateReceiveCount:"ApproximateReceiveCount",DeadLetterQueueSourceArn:"DeadLetterQueueSourceArn",MessageDeduplicationId:"MessageDeduplicationId",MessageGroupId:"MessageGroupId",SenderId:"SenderId",SentTimestamp:"SentTimestamp",SequenceNumber:"SequenceNumber"},oQ={AWSTraceHeader:"AWSTraceHeader"};Object.defineProperty(A,"$Command",{enumerable:!0,get:function(){return le.Command}});Object.defineProperty(A,"__Client",{enumerable:!0,get:function(){return le.Client}});A.AddPermission$=_N;A.AddPermissionCommand=Vl;A.AddPermissionRequest$=WP;A.BatchEntryIdsNotDistinct=vl;A.BatchEntryIdsNotDistinct$=YP;A.BatchRequestTooLong=zl;A.BatchRequestTooLong$=XP;A.BatchResultErrorEntry$=JP;A.CancelMessageMoveTask$=bN;A.CancelMessageMoveTaskCommand=Ql;A.CancelMessageMoveTaskRequest$=ZP;A.CancelMessageMoveTaskResult$=eO;A.ChangeMessageVisibility$=TN;A.ChangeMessageVisibilityBatch$=AN;A.ChangeMessageVisibilityBatchCommand=Kl;A.ChangeMessageVisibilityBatchRequest$=tO;A.ChangeMessageVisibilityBatchRequestEntry$=rO;A.ChangeMessageVisibilityBatchResult$=nO;A.ChangeMessageVisibilityBatchResultEntry$=sO;A.ChangeMessageVisibilityCommand=Gl;A.ChangeMessageVisibilityRequest$=oO;A.CreateQueue$=RN;A.CreateQueueCommand=Wl;A.CreateQueueRequest$=iO;A.CreateQueueResult$=aO;A.DeleteMessage$=vN;A.DeleteMessageBatch$=CN;A.DeleteMessageBatchCommand=Yl;A.DeleteMessageBatchRequest$=cO;A.DeleteMessageBatchRequestEntry$=uO;A.DeleteMessageBatchResult$=lO;A.DeleteMessageBatchResultEntry$=dO;A.DeleteMessageCommand=Xl;A.DeleteMessageRequest$=fO;A.DeleteQueue$=xN;A.DeleteQueueCommand=Jl;A.DeleteQueueRequest$=pO;A.EmptyBatchRequest=Cl;A.EmptyBatchRequest$=mO;A.GetQueueAttributes$=IN;A.GetQueueAttributesCommand=Zl;A.GetQueueAttributesRequest$=hO;A.GetQueueAttributesResult$=gO;A.GetQueueUrl$=PN;A.GetQueueUrlCommand=ed;A.GetQueueUrlRequest$=yO;A.GetQueueUrlResult$=SO;A.InvalidAddress=yl;A.InvalidAddress$=EO;A.InvalidAttributeName=Pl;A.InvalidAttributeName$=wO;A.InvalidAttributeValue=Ol;A.InvalidAttributeValue$=_O;A.InvalidBatchEntryId=xl;A.InvalidBatchEntryId$=bO;A.InvalidIdFormat=Ml;A.InvalidIdFormat$=TO;A.InvalidMessageContents=Hl;A.InvalidMessageContents$=AO;A.InvalidSecurity=Sl;A.InvalidSecurity$=RO;A.KmsAccessDenied=$l;A.KmsAccessDenied$=vO;A.KmsDisabled=Ll;A.KmsDisabled$=CO;A.KmsInvalidKeyUsage=Ul;A.KmsInvalidKeyUsage$=xO;A.KmsInvalidState=Fl;A.KmsInvalidState$=IO;A.KmsNotFound=ql;A.KmsNotFound$=PO;A.KmsOptInRequired=Bl;A.KmsOptInRequired$=OO;A.KmsThrottled=jl;A.KmsThrottled$=NO;A.ListDeadLetterSourceQueues$=ON;A.ListDeadLetterSourceQueuesCommand=Ni;A.ListDeadLetterSourceQueuesRequest$=DO;A.ListDeadLetterSourceQueuesResult$=MO;A.ListMessageMoveTasks$=NN;A.ListMessageMoveTasksCommand=td;A.ListMessageMoveTasksRequest$=kO;A.ListMessageMoveTasksResult$=$O;A.ListMessageMoveTasksResultEntry$=LO;A.ListQueueTags$=MN;A.ListQueueTagsCommand=rd;A.ListQueueTagsRequest$=qO;A.ListQueueTagsResult$=BO;A.ListQueues$=DN;A.ListQueuesCommand=Di;A.ListQueuesRequest$=UO;A.ListQueuesResult$=FO;A.Message$=jO;A.MessageAttributeValue$=HO;A.MessageNotInflight=Al;A.MessageNotInflight$=zO;A.MessageSystemAttributeName=sQ;A.MessageSystemAttributeNameForSends=oQ;A.MessageSystemAttributeValue$=VO;A.OverLimit=El;A.OverLimit$=QO;A.PurgeQueue$=kN;A.PurgeQueueCommand=nd;A.PurgeQueueInProgress=kl;A.PurgeQueueInProgress$=KO;A.PurgeQueueRequest$=GO;A.QueueAttributeName=nQ;A.QueueDeletedRecently=Nl;A.QueueDeletedRecently$=WO;A.QueueDoesNotExist=wl;A.QueueDoesNotExist$=YO;A.QueueNameExists=Dl;A.QueueNameExists$=XO;A.ReceiptHandleIsInvalid=Rl;A.ReceiptHandleIsInvalid$=JO;A.ReceiveMessage$=$N;A.ReceiveMessageCommand=sd;A.ReceiveMessageRequest$=ZO;A.ReceiveMessageResult$=eN;A.RemovePermission$=LN;A.RemovePermissionCommand=od;A.RemovePermissionRequest$=tN;A.RequestThrottled=_l;A.RequestThrottled$=rN;A.ResourceNotFoundException=Tl;A.ResourceNotFoundException$=nN;A.SQS=fd;A.SQSClient=eo;A.SQSServiceException=ie;A.SQSServiceException$=yN;A.SendMessage$=UN;A.SendMessageBatch$=FN;A.SendMessageBatchCommand=id;A.SendMessageBatchRequest$=sN;A.SendMessageBatchRequestEntry$=oN;A.SendMessageBatchResult$=iN;A.SendMessageBatchResultEntry$=aN;A.SendMessageCommand=ad;A.SendMessageRequest$=cN;A.SendMessageResult$=uN;A.SetQueueAttributes$=qN;A.SetQueueAttributesCommand=cd;A.SetQueueAttributesRequest$=lN;A.StartMessageMoveTask$=BN;A.StartMessageMoveTaskCommand=ud;A.StartMessageMoveTaskRequest$=dN;A.StartMessageMoveTaskResult$=fN;A.TagQueue$=jN;A.TagQueueCommand=ld;A.TagQueueRequest$=pN;A.TooManyEntriesInBatchRequest=Il;A.TooManyEntriesInBatchRequest$=mN;A.UnsupportedOperation=bl;A.UnsupportedOperation$=hN;A.UntagQueue$=HN;A.UntagQueueCommand=dd;A.UntagQueueRequest$=gN;A.paginateListDeadLetterSourceQueues=tQ;A.paginateListQueues=rQ});c();var Mg=T(zN(),1);var mse=async e=>{if(console.log("Market Worker Triggered"),e.Records){console.log("Processing SQS batch of size:",e.Records.length);for(let t of e.Records)try{let r=JSON.parse(t.body),{ticker:n,type:s}=r;await iQ(n,s),await new Promise(o=>setTimeout(o,12e3))}catch(r){console.error("Error processing SQS record:",r)}return}if(e.arguments&&(e.arguments.tickers||e.info?.fieldName==="syncMarketData")){let t=e.arguments?.tickers||[];console.log("Offloading tickers to SQS:",t);try{if(!QUEUE_URL)throw new Error("MARKET_QUEUE_URL environment variable is missing.");for(let r of t)try{await sqs.send(new Mg.SendMessageCommand({QueueUrl:QUEUE_URL,MessageBody:JSON.stringify({ticker:r,type:"PRICE"})})),await sqs.send(new Mg.SendMessageCommand({QueueUrl:QUEUE_URL,MessageBody:JSON.stringify({ticker:r,type:"FUNDAMENTAL"})}))}catch(n){console.error(`Error offloading ticker ${r}:`,n)}return await client.models.AuditLog.create({action:"SYNC_OFFLOAD_ACCEPTED",details:`Dispatched SQS refresh for: ${t.join(", ")}`}),JSON.stringify({status:"ACCEPTED",count:t.length})}catch(r){return console.error("[WORKER] Mutation Handler Failed:",r),JSON.stringify({status:"FAILED",error:r.message||"Internal lambda error"})}}return console.warn("Unknown event type received by Market Worker"),JSON.stringify({status:"IGNORED",detail:"Unknown event type"})};async function iQ(e,t){t==="PRICE"?await aQ(e):t==="FUNDAMENTAL"&&await cQ(e)}async function aQ(e){console.log(`[ALPHAVANTAGE] Fetching price for ${e}`);let r=await(await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=${e}&apikey=${ALPHA_VANTAGE_API_KEY}`)).json(),n=r["Time Series (Daily)"];if(n){let s=Object.keys(n)[0],o=n[s];await client.models.MarketPrice.create({ticker:e,date:s,close:parseFloat(o["4. close"]),adjustedClose:parseFloat(o["5. adjusted close"]),volume:parseFloat(o["6. volume"])}),await client.models.AuditLog.create({action:"MARKET_SYNC_SUCCESS",details:`Updated price for ${e} (${s}): $${o["4. close"]}`}),console.log(`[ALPHAVANTAGE] Stored price for ${e}`)}else{let s=r.Note||r["Error Message"]||"Unknown AlphaVantage error";await client.models.AuditLog.create({action:"MARKET_SYNC_ERROR",details:`Failed to fetch price for ${e}: ${s}`}),console.error(`[ALPHAVANTAGE] No price data for ${e}. Response:`,JSON.stringify(r))}}async function cQ(e){console.log(`[ALPHAVANTAGE] Fetching fundamentals for ${e}`);let r=await(await fetch(`https://www.alphavantage.co/query?function=OVERVIEW&symbol=${e}&apikey=${ALPHA_VANTAGE_API_KEY}`)).json();if(r&&r.Symbol){let n=parseFloat(r.DebtToEquityRatioTTM||"0"),s=parseFloat(r.PayoutRatio||"0"),o=parseFloat(r.DividendYield||"0");await client.models.MarketFundamental.create({ticker:e,asOf:new Date().toISOString().split("T")[0],dividendYield:o,payoutRatio:s,debtToEquity:n,dataJson:JSON.stringify(r),qualityScore:uQ(s,n)}),await client.models.AuditLog.create({action:"FUNDAMENTAL_SYNC_SUCCESS",details:`Updated fundamentals for ${e}. Yield: ${o}`}),console.log(`[ALPHAVANTAGE] Stored fundamentals for ${e}`)}else{let n=r.Note||r["Error Message"]||"Unknown AlphaVantage error";await client.models.AuditLog.create({action:"FUNDAMENTAL_SYNC_ERROR",details:`Failed to fetch fundamentals for ${e}: ${n}`}),console.error(`[ALPHAVANTAGE] No fundamentals for ${e}. Response:`,JSON.stringify(r))}}function uQ(e,t){let r=100;return e>.8&&(r-=40),t>2&&(r-=30),Math.max(0,r)}export{mse as handler};
//# sourceMappingURL=index.mjs.map

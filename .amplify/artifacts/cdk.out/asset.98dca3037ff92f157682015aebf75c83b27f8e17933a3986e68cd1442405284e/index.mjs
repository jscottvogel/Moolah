/** * Reads SSM environment context from a known Amplify environment variable, * fetches values from SSM and places those values in the corresponding environment variables */export const internalAmplifyFunctionResolveSsmParams = async (client) => {    const envPathObject = JSON.parse(process.env.AMPLIFY_SSM_ENV_CONFIG ?? '{}');    const paths = Object.values(envPathObject).map((paths) => paths.path);    if (paths.length === 0) {        return;    }    let actualSsmClient;    if (client) {        actualSsmClient = client;    }    else {        const ssmSdk = await import('@aws-sdk/client-ssm');        actualSsmClient = new ssmSdk.SSM();    }    const chunkArray = (array, chunkSize) => {        const chunks = [];        for (let i = 0; i < array.length; i += chunkSize) {            chunks.push(array.slice(i, i + chunkSize));        }        return chunks;    };    const resolveSecrets = async (paths) => {        const response = (await Promise.all(chunkArray(paths, 10).map(async (chunkedPaths) => await actualSsmClient.getParameters({            Names: chunkedPaths,            WithDecryption: true,        })))).reduce((accumulator, res) => {            accumulator.Parameters?.push(...(res.Parameters ?? []));            accumulator.InvalidParameters?.push(...(res.InvalidParameters ?? []));            return accumulator;        }, {            Parameters: [],            InvalidParameters: [],        });        if (response.Parameters && response.Parameters.length > 0) {            for (const parameter of response.Parameters) {                if (parameter.Name) {                    const envKey = Object.keys(envPathObject).find((key) => envPathObject[key].sharedPath === parameter.Name ||                        envPathObject[key].path === parameter.Name);                    if (envKey) {                        process.env[envKey] = parameter.Value;                    }                }            }        }        return response;    };    const response = await resolveSecrets(paths);    const sharedPaths = (response?.InvalidParameters || [])        .map((invalidParam) => Object.values(envPathObject).find((paths) => paths.path === invalidParam)?.sharedPath)        .filter((sharedParam) => !!sharedParam);     if (sharedPaths.length > 0) {        await resolveSecrets(sharedPaths);    }};await internalAmplifyFunctionResolveSsmParams();const SSM_PARAMETER_REFRESH_MS = 1000 * 60;setInterval(async () => {    try {        await internalAmplifyFunctionResolveSsmParams();    }    catch (error) {        try {                        console.debug(error);                    }        catch {                    }    }}, SSM_PARAMETER_REFRESH_MS);export {};
var Dj=Object.create;var Wu=Object.defineProperty;var Mj=Object.getOwnPropertyDescriptor;var $j=Object.getOwnPropertyNames;var Uj=Object.getPrototypeOf,Bj=Object.prototype.hasOwnProperty;var ee=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var S=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Be=(t,e)=>{for(var r in e)Wu(t,r,{get:e[r],enumerable:!0})},zv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $j(e))!Bj.call(t,s)&&s!==r&&Wu(t,s,{get:()=>e[s],enumerable:!(n=Mj(e,s))||n.enumerable});return t};var v=(t,e,r)=>(r=t!=null?Dj(Uj(t)):{},zv(e||!t||!t.__esModule?Wu(r,"default",{value:t,enumerable:!0}):r,t)),Y=t=>zv(Wu({},"__esModule",{value:!0}),t);import{createRequire as Lj}from"node:module";import Fj from"node:path";import jj from"node:url";var c=S(()=>{global.require=Lj(import.meta.url);global.__filename=jj.fileURLToPath(import.meta.url);global.__dirname=Fj.dirname(__filename)});var Mn=R(be=>{"use strict";c();be.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(be.HttpAuthLocation||(be.HttpAuthLocation={}));be.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(be.HttpApiKeyAuthLocation||(be.HttpApiKeyAuthLocation={}));be.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(be.EndpointURLScheme||(be.EndpointURLScheme={}));be.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(be.AlgorithmId||(be.AlgorithmId={}));var Hj=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>be.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>be.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},qj=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Gj=t=>Hj(t),zj=t=>qj(t);be.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(be.FieldPosition||(be.FieldPosition={}));var Vj="__smithy_context";be.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(be.IniSectionType||(be.IniSectionType={}));be.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(be.RequestHandlerProtocol||(be.RequestHandlerProtocol={}));be.SMITHY_CONTEXT_KEY=Vj;be.getDefaultClientConfiguration=Gj;be.resolveDefaultRuntimeConfig=zj});var ie=R($n=>{"use strict";c();var Wj=Mn(),Kj=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),Yj=t=>({httpHandler:t.httpHandler()}),$h=class{name;kind;values;constructor({name:e,kind:r=Wj.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},Uh=class{entries={};encoding;constructor({fields:e=[],encoding:r="utf-8"}){e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},Bh=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=Xj(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function Xj(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var Lh=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function Qj(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}$n.Field=$h;$n.Fields=Uh;$n.HttpRequest=Bh;$n.HttpResponse=Lh;$n.getHttpHandlerExtensionConfiguration=Kj;$n.isValidHostname=Qj;$n.resolveHttpHandlerRuntimeConfig=Yj});var Qv=R(Ls=>{"use strict";c();var Vv=ie();function Jj(t){let e=t.signer,r=t.signer,n=Object.assign(t,{eventSigner:e,messageSigner:r}),s=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:s})}var Wv=t=>(e,r)=>async n=>{let{request:s}=n;return Vv.HttpRequest.isInstance(s)?t.eventStreamPayloadHandler.handle(e,n,r):e(n)},Kv={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},Yv=t=>async e=>{let{request:r}=e;return Vv.HttpRequest.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},t({...e,request:r})):t(e)},Xv={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},Zj=t=>({applyToStack:e=>{e.addRelativeTo(Wv(t),Kv),e.add(Yv,Xv)}});Ls.eventStreamHandlingMiddleware=Wv;Ls.eventStreamHandlingMiddlewareOptions=Kv;Ls.eventStreamHeaderMiddleware=Yv;Ls.eventStreamHeaderMiddlewareOptions=Xv;Ls.getEventStreamPlugin=Zj;Ls.resolveEventStreamConfig=Jj});var Fh=R(pa=>{"use strict";c();var eH=ie();function tH(t){return t}var Jv=t=>e=>async r=>{if(!eH.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},Zv={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},rH=t=>({applyToStack:e=>{e.add(Jv(t),Zv)}});pa.getHostHeaderPlugin=rH;pa.hostHeaderMiddleware=Jv;pa.hostHeaderMiddlewareOptions=Zv;pa.resolveHostHeaderConfig=tH});var jh=R(Ku=>{"use strict";c();var eb=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:d}=a,f=u??e.inputFilterSensitiveLog,l=d??e.outputFilterSensitiveLog,{$metadata:g,...h}=n.output;return i?.info?.({clientName:s,commandName:o,input:f(r.input),output:l(h),metadata:g}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:u}=a,d=u??e.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:d(r.input),error:n,metadata:n.$metadata}),n}},tb={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},nH=t=>({applyToStack:e=>{e.add(eb(),tb)}});Ku.getLoggerPlugin=nH;Ku.loggerMiddleware=eb;Ku.loggerMiddlewareOptions=tb});var Vh={};Be(Vh,{InvokeStore:()=>zh,InvokeStoreBase:()=>ha});var ma,Hh,ha,qh,Gh,zh,Wh=S(()=>{c();ma={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},Hh=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");Hh||(globalThis.awslambda=globalThis.awslambda||{});ha=class{static PROTECTED_KEYS=ma;isProtectedKey(e){return Object.values(ma).includes(e)}getRequestId(){return this.get(ma.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(ma.X_RAY_TRACE_ID)}getTenantId(){return this.get(ma.TENANT_ID)}},qh=class extends ha{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=r}run(e,r){return this.currentContext=e,r()}},Gh=class t extends ha{als;static async create(){let e=new t,r=await import("node:async_hooks");return e.als=new r.AsyncLocalStorage,e}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);let n=this.als.getStore();if(!n)throw new Error("No context available");n[e]=r}run(e,r){return this.als.run(e,r)}};(function(t){let e=null;async function r(){return e||(e=(async()=>{let s="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await Gh.create():new qh;return!Hh&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!Hh&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=s),s)})()),e}t.getInstanceAsync=r,t._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{e=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={InvokeStore:void 0}}}:void 0})(zh||(zh={}))});var rb=R(Yu=>{"use strict";c();Object.defineProperty(Yu,"__esModule",{value:!0});Yu.recursionDetectionMiddleware=void 0;var sH=(Wh(),Y(Vh)),oH=ie(),Kh="X-Amzn-Trace-Id",iH="AWS_LAMBDA_FUNCTION_NAME",aH="_X_AMZN_TRACE_ID",cH=()=>t=>async e=>{let{request:r}=e;if(!oH.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(f=>f.toLowerCase()===Kh.toLowerCase())??Kh;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[iH],o=process.env[aH],u=(await sH.InvokeStore.getInstanceAsync())?.getXRayTraceId()??o,d=f=>typeof f=="string"&&f.length>0;return d(s)&&d(u)&&(r.headers[Kh]=u),t({...e,request:r})};Yu.recursionDetectionMiddleware=cH});var Xh=R(Xu=>{"use strict";c();var Yh=rb(),uH={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},dH=t=>({applyToStack:e=>{e.add(Yh.recursionDetectionMiddleware(),uH)}});Xu.getRecursionDetectionPlugin=dH;Object.keys(Yh).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Xu,t)&&Object.defineProperty(Xu,t,{enumerable:!0,get:function(){return Yh[t]}})})});var Qh,lH,nb=S(()=>{c();Qh=v(Mn()),lH=t=>t[Qh.SMITHY_CONTEXT_KEY]||(t[Qh.SMITHY_CONTEXT_KEY]={})});var tt=R(Jh=>{"use strict";c();var sb=Mn(),fH=t=>t[sb.SMITHY_CONTEXT_KEY]||(t[sb.SMITHY_CONTEXT_KEY]={}),pH=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Jh.getSmithyContext=fH;Jh.normalizeProvider=pH});var ob,ib=S(()=>{c();ob=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function mH(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var ab,ga,Qu=S(()=>{c();ab=v(tt());ib();ga=(t,e)=>(r,n)=>async s=>{let o=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),i=t.authSchemePreference?await t.authSchemePreference():[],a=ob(o,i),u=mH(t.httpAuthSchemes),d=(0,ab.getSmithyContext)(n),f=[];for(let l of a){let g=u.get(l.schemeId);if(!g){f.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let h=g.identityProvider(await e.identityProviderConfigProvider(t));if(!h){f.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:y={},signingProperties:x={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},y),l.signingProperties=Object.assign(l.signingProperties||{},x),d.selectedHttpAuthScheme={httpAuthOption:l,identity:await h(l.identityProperties),signer:g.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(s)}});var cb,en,ub=S(()=>{c();Qu();cb={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},en=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ga(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),cb)}})});var eg=R(Bo=>{"use strict";c();var hH=ie(),db=(t,e)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(hH.HttpResponse.isInstance(o)){let{headers:u={}}=o,d=Object.entries(u);i.$metadata={httpStatusCode:o.statusCode,requestId:Zh(/^x-[\w-]+-request-?id$/,d),extendedRequestId:Zh(/^x-[\w-]+-id-2$/,d),cfId:Zh(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw i}},Zh=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],lb=(t,e)=>(r,n)=>async s=>{let o=t,i=n.endpointV2?.url&&o.urlParser?async()=>o.urlParser(n.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:i});return r({...s,request:a})},fb={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},pb={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function gH(t,e,r){return{applyToStack:n=>{n.add(db(t,r),fb),n.add(lb(t,e),pb)}}}Bo.deserializerMiddleware=db;Bo.deserializerMiddlewareOption=fb;Bo.getSerdePlugin=gH;Bo.serializerMiddleware=lb;Bo.serializerMiddlewareOption=pb});var mb,hb,yH,gb=S(()=>{c();mb=v(eg());Qu();hb={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:mb.serializerMiddlewareOption.name},yH=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ga(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),hb)}})});var yb=S(()=>{c();Qu();ub();gb()});var Sb,_b,SH,_H,tg,rg=S(()=>{c();Sb=v(ie()),_b=v(tt()),SH=t=>e=>{throw e},_H=(t,e)=>{},tg=t=>(e,r)=>async n=>{if(!Sb.HttpRequest.isInstance(n.request))return e(n);let o=(0,_b.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:u}=o,d=await e({...n,request:await u.sign(n.request,a,i)}).catch((u.errorHandler||SH)(i));return(u.successHandler||_H)(d.response,i),d}});var Eb,tn,wb=S(()=>{c();rg();Eb={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},tn=t=>({applyToStack:e=>{e.addRelativeTo(tg(t),Eb)}})});var vb=S(()=>{c();rg();wb()});var mt,bb=S(()=>{c();mt=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function xb(t,e,r,n,s){return async function*(i,a,...u){let d=a,f=i.startingToken??d[r],l=!0,g;for(;l;){if(d[r]=f,s&&(d[s]=d[s]??i.pageSize),i.client instanceof t)g=await EH(e,i.client,a,i.withCommand,...u);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield g;let h=f;f=wH(g,n),l=!!(f&&(!i.stopOnSameToken||f!==h))}return void 0}}var EH,wH,Cb=S(()=>{c();EH=async(t,e,r,n=o=>o,...s)=>{let o=new t(r);return o=n(o)??o,await e.send(o,...s)};wH=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var ng=R(Ab=>{"use strict";c();var vH=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";Ab.isArrayBuffer=vH});var Tt=R(og=>{"use strict";c();var bH=ng(),sg=ee("buffer"),xH=(t,e=0,r=t.byteLength-e)=>{if(!bH.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return sg.Buffer.from(t,e,r)},CH=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?sg.Buffer.from(t,e):sg.Buffer.from(t)};og.fromArrayBuffer=xH;og.fromString=CH});var Tb=R(Ju=>{"use strict";c();Object.defineProperty(Ju,"__esModule",{value:!0});Ju.fromBase64=void 0;var AH=Tt(),TH=/^[A-Za-z0-9+/]*={0,2}$/,RH=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!TH.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,AH.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};Ju.fromBase64=RH});var Ce=R(Zu=>{"use strict";c();var Rb=Tt(),Ib=t=>{let e=Rb.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},IH=t=>typeof t=="string"?Ib(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),OH=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Rb.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};Zu.fromUtf8=Ib;Zu.toUint8Array=IH;Zu.toUtf8=OH});var Ob=R(ed=>{"use strict";c();Object.defineProperty(ed,"__esModule",{value:!0});ed.toBase64=void 0;var PH=Tt(),NH=Ce(),kH=t=>{let e;if(typeof t=="string"?e=(0,NH.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,PH.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};ed.toBase64=kH});var Sa=R(ya=>{"use strict";c();var Pb=Tb(),Nb=Ob();Object.keys(Pb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ya,t)&&Object.defineProperty(ya,t,{enumerable:!0,get:function(){return Pb[t]}})});Object.keys(Nb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ya,t)&&Object.defineProperty(ya,t,{enumerable:!0,get:function(){return Nb[t]}})})});var ag=R(td=>{"use strict";c();Object.defineProperty(td,"__esModule",{value:!0});td.ChecksumStream=void 0;var DH=Sa(),MH=ee("stream"),ig=class extends MH.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:o}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=o??DH.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(e){}_write(e,r,n){try{this.checksum.update(e),this.push(e)}catch(s){return n(s)}return n()}async _final(e){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};td.ChecksumStream=ig});var rn=R(Lo=>{"use strict";c();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.isBlob=Lo.isReadableStream=void 0;var $H=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Lo.isReadableStream=$H;var UH=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Lo.isBlob=UH});var kb=R(rd=>{"use strict";c();Object.defineProperty(rd,"__esModule",{value:!0});rd.ChecksumStream=void 0;var BH=typeof ReadableStream=="function"?ReadableStream:function(){},cg=class extends BH{};rd.ChecksumStream=cg});var Db=R(nd=>{"use strict";c();Object.defineProperty(nd,"__esModule",{value:!0});nd.createChecksumStream=void 0;var LH=Sa(),FH=rn(),jH=kb(),HH=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,FH.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=s??LH.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(u,d){e.update(u),d.enqueue(u)},async flush(u){let d=await e.digest(),f=o(d);if(t!==f){let l=new Error(`Checksum mismatch: expected "${t}" but received "${f}" in response header "${n}".`);u.error(l)}else u.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,jH.ChecksumStream.prototype),a};nd.createChecksumStream=HH});var Mb=R(ug=>{"use strict";c();Object.defineProperty(ug,"__esModule",{value:!0});ug.createChecksumStream=VH;var qH=rn(),GH=ag(),zH=Db();function VH(t){return typeof ReadableStream=="function"&&(0,qH.isReadableStream)(t.source)?(0,zH.createChecksumStream)(t):new GH.ChecksumStream(t)}});var lg=R(sd=>{"use strict";c();Object.defineProperty(sd,"__esModule",{value:!0});sd.ByteArrayCollector=void 0;var dg=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};sd.ByteArrayCollector=dg});var Lb=R(nn=>{"use strict";c();Object.defineProperty(nn,"__esModule",{value:!0});nn.createBufferedReadable=void 0;nn.createBufferedReadableStream=$b;nn.merge=Ub;nn.flush=od;nn.sizeOf=Fo;nn.modeOf=Bb;var WH=lg();function $b(t,e,r){let n=t.getReader(),s=!1,o=0,i=["",new WH.ByteArrayCollector(d=>new Uint8Array(d))],a=-1,u=async d=>{let{value:f,done:l}=await n.read(),g=f;if(l){if(a!==-1){let h=od(i,a);Fo(h)>0&&d.enqueue(h)}d.close()}else{let h=Bb(g,!1);if(a!==h&&(a>=0&&d.enqueue(od(i,a)),a=h),a===-1){d.enqueue(g);return}let y=Fo(g);o+=y;let x=Fo(i[a]);if(y>=e&&x===0)d.enqueue(g);else{let T=Ub(i,a,g);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${y} is below threshold of ${e}, automatically buffering.`)),T>=e?d.enqueue(od(i,a)):await u(d)}}};return new ReadableStream({pull:u})}nn.createBufferedReadable=$b;function Ub(t,e,r){switch(e){case 0:return t[0]+=r,Fo(t[0]);case 1:case 2:return t[e].push(r),Fo(t[e])}}function od(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Fo(t){return t?.byteLength??t?.length??0}function Bb(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var jb=R(fg=>{"use strict";c();Object.defineProperty(fg,"__esModule",{value:!0});fg.createBufferedReadable=XH;var KH=ee("node:stream"),Fb=lg(),sn=Lb(),YH=rn();function XH(t,e,r){if((0,YH.isReadableStream)(t))return(0,sn.createBufferedReadableStream)(t,e,r);let n=new KH.Readable({read(){}}),s=!1,o=0,i=["",new Fb.ByteArrayCollector(u=>new Uint8Array(u)),new Fb.ByteArrayCollector(u=>Buffer.from(new Uint8Array(u)))],a=-1;return t.on("data",u=>{let d=(0,sn.modeOf)(u,!0);if(a!==d&&(a>=0&&n.push((0,sn.flush)(i,a)),a=d),a===-1){n.push(u);return}let f=(0,sn.sizeOf)(u);o+=f;let l=(0,sn.sizeOf)(i[a]);if(f>=e&&l===0)n.push(u);else{let g=(0,sn.merge)(i,a,u);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${f} is below threshold of ${e}, automatically buffering.`)),g>=e&&n.push((0,sn.flush)(i,a))}}),t.on("end",()=>{if(a!==-1){let u=(0,sn.flush)(i,a);(0,sn.sizeOf)(u)>0&&n.push(u)}n.push(null)}),n}});var Hb=R(id=>{"use strict";c();Object.defineProperty(id,"__esModule",{value:!0});id.getAwsChunkedEncodingStream=void 0;var QH=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=e,a=r!==void 0&&n!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,u=a?i(s,t):void 0,d=t.getReader();return new ReadableStream({async pull(f){let{value:l,done:g}=await d.read();if(g){if(f.enqueue(`0\r
`),a){let h=r(await u);f.enqueue(`${o}:${h}\r
`),f.enqueue(`\r
`)}f.close()}else f.enqueue(`${(n(l)||0).toString(16)}\r
${l}\r
`)}})};id.getAwsChunkedEncodingStream=QH});var qb=R(pg=>{"use strict";c();Object.defineProperty(pg,"__esModule",{value:!0});pg.getAwsChunkedEncodingStream=tq;var JH=ee("node:stream"),ZH=Hb(),eq=rn();function tq(t,e){let r=t,n=t;if((0,eq.isReadableStream)(n))return(0,ZH.getAwsChunkedEncodingStream)(n,e);let{base64Encoder:s,bodyLengthChecker:o,checksumAlgorithmFn:i,checksumLocationName:a,streamHasher:u}=e,d=s!==void 0&&i!==void 0&&a!==void 0&&u!==void 0,f=d?u(i,r):void 0,l=new JH.Readable({read:()=>{}});return r.on("data",g=>{let h=o(g)||0;h!==0&&(l.push(`${h.toString(16)}\r
`),l.push(g),l.push(`\r
`))}),r.on("end",async()=>{if(l.push(`0\r
`),d){let g=s(await f);l.push(`${a}:${g}\r
`),l.push(`\r
`)}l.push(null)}),l}});var Gb=R(mg=>{"use strict";c();Object.defineProperty(mg,"__esModule",{value:!0});mg.headStream=rq;async function rq(t,e){let r=0,n=[],s=t.getReader(),o=!1;for(;!o;){let{done:u,value:d}=await s.read();if(d&&(n.push(d),r+=d?.byteLength??0),r>=e)break;o=u}s.releaseLock();let i=new Uint8Array(Math.min(e,r)),a=0;for(let u of n){if(u.byteLength>i.byteLength-a){i.set(u.subarray(0,i.byteLength-a),a);break}else i.set(u,a);a+=u.length}return i}});var zb=R(ad=>{"use strict";c();Object.defineProperty(ad,"__esModule",{value:!0});ad.headStream=void 0;var nq=ee("stream"),sq=Gb(),oq=rn(),iq=(t,e)=>(0,oq.isReadableStream)(t)?(0,sq.headStream)(t,e):new Promise((r,n)=>{let s=new hg;s.limit=e,t.pipe(s),t.on("error",o=>{s.end(),n(o)}),s.on("error",n),s.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});ad.headStream=iq;var hg=class extends nq.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,r,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}n()}}});var Wb=R(gg=>{"use strict";c();var Vb=t=>encodeURIComponent(t).replace(/[!'()*]/g,aq),aq=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,cq=t=>t.split("/").map(Vb).join("/");gg.escapeUri=Vb;gg.escapeUriPath=cq});var Yb=R(Kb=>{"use strict";c();var yg=Wb();function uq(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=yg.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${yg.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${yg.escapeUri(n)}`),e.push(s)}}return e.join("&")}Kb.buildQueryString=uq});var on=R(_a=>{"use strict";c();var Zb=ie(),e0=Yb(),cd=ee("http"),ud=ee("https"),t0=ee("stream"),Sg=ee("http2"),dq=["ECONNRESET","EPIPE","ETIMEDOUT"],r0=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},ht={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},Xb=1e3,lq=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let o=ht.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),i=a=>{a?.connecting?a.on("connect",()=>{ht.clearTimeout(o)}):ht.clearTimeout(o)};t.socket?i(t.socket):t.on("socket",i)};return r<2e3?(n(0),0):ht.setTimeout(n.bind(null,Xb),Xb)},fq=(t,e,r=0,n,s)=>r?ht.setTimeout(()=>{let o=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(i),e(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(o)},r):-1,pq=3e3,mq=(t,{keepAlive:e,keepAliveMsecs:r},n=pq)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",o=>{o.setKeepAlive(e,r||0)})};return n===0?(s(),0):ht.setTimeout(s,n)},Qb=3e3,hq=(t,e,r=0)=>{let n=s=>{let o=r-s,i=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(o,i),t.on("close",()=>t.socket?.removeListener("timeout",i))):t.setTimeout(o,i)};return 0<r&&r<6e3?(n(0),0):ht.setTimeout(n.bind(null,r===0?0:Qb),Qb)},Jb=6e3;async function n0(t,e,r=Jb,n=!1){let s=e.headers??{},o=s.Expect||s.expect,i=-1,a=!0;!n&&o==="100-continue"&&(a=await Promise.race([new Promise(u=>{i=Number(ht.setTimeout(()=>u(!0),Math.max(Jb,r)))}),new Promise(u=>{t.on("continue",()=>{ht.clearTimeout(i),u(!0)}),t.on("response",()=>{ht.clearTimeout(i),u(!1)}),t.on("error",()=>{ht.clearTimeout(i),u(!1)})})])),a&&gq(t,e.body)}function gq(t,e){if(e instanceof t0.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var yq=0,_g=class t{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:o,maxSockets:i}=e;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(s&&o)for(let u in s){let d=s[u]?.length??0,f=o[u]?.length??0;if(d>=i&&f>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${f} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:u}=e||{},d=!0,f=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:u,httpAgent:i instanceof cd.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new cd.Agent({keepAlive:d,maxSockets:f,...i}),httpsAgent:a instanceof ud.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new ud.Agent({keepAlive:d,maxSockets:f,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,o)=>{let i=this.config,a,u=[],d=async Z=>{await a,u.forEach(ht.clearTimeout),s(Z)},f=async Z=>{await a,u.forEach(ht.clearTimeout),o(Z)};if(r?.aborted){let Z=new Error("Request aborted");Z.name="AbortError",f(Z);return}let l=e.protocol==="https:",g=e.headers??{},h=(g.Expect??g.expect)==="100-continue",y=l?i.httpsAgent:i.httpAgent;h&&!this.externalAgent&&(y=new(l?ud.Agent:cd.Agent)({keepAlive:!1,maxSockets:1/0})),u.push(ht.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(y,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let x=e0.buildQueryString(e.query||{}),T;if(e.username!=null||e.password!=null){let Z=e.username??"",le=e.password??"";T=`${Z}:${le}`}let O=e.path;x&&(O+=`?${x}`),e.fragment&&(O+=`#${e.fragment}`);let N=e.hostname??"";N[0]==="["&&N.endsWith("]")?N=e.hostname.slice(1,-1):N=e.hostname;let L={headers:e.headers,host:N,method:e.method,path:O,port:e.port,agent:y,auth:T},V=(l?ud.request:cd.request)(L,Z=>{let le=new Zb.HttpResponse({statusCode:Z.statusCode||-1,reason:Z.statusMessage,headers:r0(Z.headers),body:Z});d({response:le})});if(V.on("error",Z=>{dq.includes(Z.code)?f(Object.assign(Z,{name:"TimeoutError"})):f(Z)}),r){let Z=()=>{V.destroy();let le=new Error("Request aborted");le.name="AbortError",f(le)};if(typeof r.addEventListener=="function"){let le=r;le.addEventListener("abort",Z,{once:!0}),V.once("close",()=>le.removeEventListener("abort",Z))}else r.onabort=Z}let ce=n??i.requestTimeout;u.push(lq(V,f,i.connectionTimeout)),u.push(fq(V,f,ce,i.throwOnRequestTimeout,i.logger??console)),u.push(hq(V,f,i.socketTimeout));let Ae=L.agent;typeof Ae=="object"&&"keepAlive"in Ae&&u.push(mq(V,{keepAlive:Ae.keepAlive,keepAliveMsecs:Ae.keepAliveMsecs})),a=n0(V,e,ce,this.externalAgent).catch(Z=>(u.forEach(ht.clearTimeout),o(Z)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Eg=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},wg=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let u=s.poll();if(u&&!this.config.disableConcurrency)return u}let o=Sg.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},u=>{if(u)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new Eg;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},vg=class t{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new wg({});static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:o}=this.config,i=n??s;return new Promise((a,u)=>{let d=!1,f,l=async ve=>{await f,a(ve)},g=async ve=>{await f,u(ve)};if(r?.aborted){d=!0;let ve=new Error("Request aborted");ve.name="AbortError",g(ve);return}let{hostname:h,method:y,port:x,protocol:T,query:O}=e,N="";if(e.username!=null||e.password!=null){let ve=e.username??"",Ye=e.password??"";N=`${ve}:${Ye}@`}let L=`${T}//${N}${h}${x?`:${x}`:""}`,j={destination:new URL(L)},V=this.connectionManager.lease(j,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),ce=ve=>{o&&this.destroySession(V),d=!0,g(ve)},Ae=e0.buildQueryString(O||{}),Z=e.path;Ae&&(Z+=`?${Ae}`),e.fragment&&(Z+=`#${e.fragment}`);let le=V.request({...e.headers,[Sg.constants.HTTP2_HEADER_PATH]:Z,[Sg.constants.HTTP2_HEADER_METHOD]:y});if(V.ref(),le.on("response",ve=>{let Ye=new Zb.HttpResponse({statusCode:ve[":status"]||-1,headers:r0(ve),body:le});d=!0,l({response:Ye}),o&&(V.close(),this.connectionManager.deleteSession(L,V))}),i&&le.setTimeout(i,()=>{le.close();let ve=new Error(`Stream timed out because of no activity for ${i} ms`);ve.name="TimeoutError",ce(ve)}),r){let ve=()=>{le.close();let Ye=new Error("Request aborted");Ye.name="AbortError",ce(Ye)};if(typeof r.addEventListener=="function"){let Ye=r;Ye.addEventListener("abort",ve,{once:!0}),le.once("close",()=>Ye.removeEventListener("abort",ve))}else r.onabort=ve}le.on("frameError",(ve,Ye,At)=>{ce(new Error(`Frame type id ${ve} in stream id ${At} has failed with code ${Ye}.`))}),le.on("error",ce),le.on("aborted",()=>{ce(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${le.rstCode}.`))}),le.on("close",()=>{V.unref(),o&&V.destroy(),d||ce(new Error("Unexpected error: http2 request did not get a response"))}),f=n0(le,e,i)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},bg=class extends t0.Writable{bufferedBytes=[];_write(e,r,n){this.bufferedBytes.push(e),n()}},Sq=t=>_q(t)?Eq(t):new Promise((e,r)=>{let n=new bg;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),_q=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function Eq(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:u}=await r.read();u&&(e.push(u),s+=u.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}_a.DEFAULT_REQUEST_TIMEOUT=yq;_a.NodeHttp2Handler=vg;_a.NodeHttpHandler=_g;_a.streamCollector=Sq});var o0=R(xg=>{"use strict";c();var s0=t=>encodeURIComponent(t).replace(/[!'()*]/g,wq),wq=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,vq=t=>t.split("/").map(s0).join("/");xg.escapeUri=s0;xg.escapeUriPath=vq});var a0=R(i0=>{"use strict";c();var Cg=o0();function bq(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Cg.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${Cg.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Cg.escapeUri(n)}`),e.push(s)}}return e.join("&")}i0.buildQueryString=bq});var c0=R(dd=>{"use strict";c();Object.defineProperty(dd,"__esModule",{value:!0});dd.fromBase64=void 0;var xq=Tt(),Cq=/^[A-Za-z0-9+/]*={0,2}$/,Aq=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Cq.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,xq.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};dd.fromBase64=Aq});var u0=R(ld=>{"use strict";c();Object.defineProperty(ld,"__esModule",{value:!0});ld.toBase64=void 0;var Tq=Tt(),Rq=Ce(),Iq=t=>{let e;if(typeof t=="string"?e=(0,Rq.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Tq.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};ld.toBase64=Iq});var f0=R(Ea=>{"use strict";c();var d0=c0(),l0=u0();Object.keys(d0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ea,t)&&Object.defineProperty(Ea,t,{enumerable:!0,get:function(){return d0[t]}})});Object.keys(l0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ea,t)&&Object.defineProperty(Ea,t,{enumerable:!0,get:function(){return l0[t]}})})});var Tg=R(pd=>{"use strict";c();var p0=ie(),Oq=a0(),Pq=f0();function m0(t,e){return new Request(t,e)}function Nq(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var fd={supported:void 0},Ag=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),fd.supported===void 0&&(fd.supported=typeof Request<"u"&&"keepalive"in m0("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=e.path,u=Oq.buildQueryString(e.query||{});u&&(a+=`?${u}`),e.fragment&&(a+=`#${e.fragment}`);let d="";if(e.username!=null||e.password!=null){let N=e.username??"",L=e.password??"";d=`${N}:${L}@`}let{port:f,method:l}=e,g=`${e.protocol}//${d}${e.hostname}${f?`:${f}`:""}${a}`,h=l==="GET"||l==="HEAD"?void 0:e.body,y={body:h,headers:new Headers(e.headers),method:l,credentials:i};this.config?.cache&&(y.cache=this.config.cache),h&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=r),fd.supported&&(y.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(e));let x=()=>{},T=m0(g,y),O=[fetch(T).then(N=>{let L=N.headers,j={};for(let ce of L.entries())j[ce[0]]=ce[1];return N.body!=null?{response:new p0.HttpResponse({headers:j,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(ce=>({response:new p0.HttpResponse({headers:j,reason:N.statusText,statusCode:N.status,body:ce})}))}),Nq(s)];return r&&O.push(new Promise((N,L)=>{let j=()=>{let V=new Error("Request aborted");V.name="AbortError",L(V)};if(typeof r.addEventListener=="function"){let V=r;V.addEventListener("abort",j,{once:!0}),x=()=>V.removeEventListener("abort",j)}else r.onabort=j})),Promise.race(O).finally(x)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},kq=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):Dq(t):Mq(t);async function Dq(t){let e=await $q(t),r=Pq.fromBase64(e);return new Uint8Array(r)}async function Mq(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:u}=await r.read();u&&(e.push(u),s+=u.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}function $q(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;e(s.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}pd.FetchHttpHandler=Ag;pd.keepAliveSupport=fd;pd.streamCollector=kq});var wa=R(Ig=>{"use strict";c();var h0={},Rg={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),h0[t]=e,Rg[e]=t}function Uq(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in Rg)e[r/2]=Rg[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Bq(t){let e="";for(let r=0;r<t.byteLength;r++)e+=h0[t[r]];return e}Ig.fromHex=Uq;Ig.toHex=Bq});var _0=R(md=>{"use strict";c();Object.defineProperty(md,"__esModule",{value:!0});md.sdkStreamMixin=void 0;var Lq=Tg(),Fq=Sa(),jq=wa(),Hq=Ce(),g0=rn(),y0="The stream has already been transformed.",qq=t=>{if(!S0(t)&&!(0,g0.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(y0);return e=!0,await(0,Lq.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let o=await r();if(s==="base64")return(0,Fq.toBase64)(o);if(s==="hex")return(0,jq.toHex)(o);if(s===void 0||s==="utf8"||s==="utf-8")return(0,Hq.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(y0);if(e=!0,S0(t))return n(t);if((0,g0.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};md.sdkStreamMixin=qq;var S0=t=>typeof Blob=="function"&&t instanceof Blob});var w0=R(hd=>{"use strict";c();Object.defineProperty(hd,"__esModule",{value:!0});hd.sdkStreamMixin=void 0;var Gq=on(),zq=Tt(),Og=ee("stream"),Vq=_0(),E0="The stream has already been transformed.",Wq=t=>{if(!(t instanceof Og.Readable))try{return(0,Vq.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(E0);return e=!0,await(0,Gq.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,zq.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(E0);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Og.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,Og.Readable.toWeb(t)}})};hd.sdkStreamMixin=Wq});var v0=R(Pg=>{"use strict";c();Object.defineProperty(Pg,"__esModule",{value:!0});Pg.splitStream=Kq;async function Kq(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var C0=R(Ng=>{"use strict";c();Object.defineProperty(Ng,"__esModule",{value:!0});Ng.splitStream=Xq;var b0=ee("stream"),Yq=v0(),x0=rn();async function Xq(t){if((0,x0.isReadableStream)(t)||(0,x0.isBlob)(t))return(0,Yq.splitStream)(t);let e=new b0.PassThrough,r=new b0.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var gd=R(qe=>{"use strict";c();var A0=Sa(),T0=Ce(),R0=ag(),I0=Mb(),O0=jb(),P0=qb(),N0=zb(),k0=w0(),D0=C0(),M0=rn(),kg=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(A0.fromBase64(e)):t.mutate(T0.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?A0.toBase64(this):T0.toUtf8(this)}};Object.defineProperty(qe,"isBlob",{enumerable:!0,get:function(){return M0.isBlob}});Object.defineProperty(qe,"isReadableStream",{enumerable:!0,get:function(){return M0.isReadableStream}});qe.Uint8ArrayBlobAdapter=kg;Object.keys(R0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return R0[t]}})});Object.keys(I0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return I0[t]}})});Object.keys(O0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return O0[t]}})});Object.keys(P0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return P0[t]}})});Object.keys(N0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return N0[t]}})});Object.keys(k0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return k0[t]}})});Object.keys(D0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return D0[t]}})})});var yd,gt,Sd=S(()=>{c();yd=v(gd()),gt=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return yd.Uint8ArrayBlobAdapter.mutate(t);if(!t)return yd.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return yd.Uint8ArrayBlobAdapter.mutate(await r)}});function Dt(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var _d=S(()=>{c()});var yt,Dg=S(()=>{c();yt=t=>typeof t=="function"?t():t});var va,Ed=S(()=>{c();va=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var $0,U0,B0,Mg,L0=S(()=>{c();$0=v(ie()),U0=v(tt());Ed();B0=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:o}=(0,U0.getSmithyContext)(r),[,i,a,u,d,f]=o??[];try{let l=await t.protocol.deserializeResponse(va(i,a,u,d,f),{...t,...r},s);return{response:s,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){let g="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+g}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(g):r.logger?.warn?.(g)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if($0.HttpResponse.isInstance(s)){let{headers:h={}}=s,y=Object.entries(h);l.$metadata={httpStatusCode:s.statusCode,requestId:Mg(/^x-[\w-]+-request-?id$/,y),extendedRequestId:Mg(/^x-[\w-]+-id-2$/,y),cfId:Mg(/^x-[\w-]+-cf-id$/,y)}}}catch{}}throw l}},Mg=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var F0,j0,H0=S(()=>{c();F0=v(tt());Ed();j0=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,F0.getSmithyContext)(r),[,o,i,a,u,d]=s??[],f=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(va(o,i,a,u,d),n.input,{...t,...r,endpoint:f});return e({...n,request:l})}});function an(t){return{applyToStack:e=>{e.add(j0(t),G0),e.add(B0(t),q0),t.protocol.setSerdeContext(t)}}}var q0,G0,z0=S(()=>{c();L0();H0();q0={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},G0={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var De,Un=S(()=>{c();De=class{name;namespace;traits;static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var wd,Qq,V0=S(()=>{c();Un();wd=class t extends De{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=t.symbol},Qq=(t,e,r,n)=>De.assign(new wd,{name:e,namespace:t,traits:r,valueSchema:n})});var vd,Jq,W0=S(()=>{c();Un();vd=class t extends De{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=t.symbol},Jq=(t,e,r,n,s)=>De.assign(new vd,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var bd,Zq,K0=S(()=>{c();Un();bd=class t extends De{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=t.symbol},Zq=(t,e,r,n,s)=>De.assign(new bd,{name:e,namespace:t,traits:r,input:n,output:s})});var jo,e3,$g=S(()=>{c();Un();jo=class t extends De{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=t.symbol},e3=(t,e,r,n,s)=>De.assign(new jo,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var xd,t3,Y0=S(()=>{c();Un();$g();xd=class t extends jo{static symbol=Symbol.for("@smithy/err");ctor;symbol=t.symbol},t3=(t,e,r,n,s,o)=>De.assign(new xd,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function Rr(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var Ug=S(()=>{c()});function ba(t,e){if(t instanceof M)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=M;return new r(t,e)}var X0,M,Bg,Q0,J0=S(()=>{c();Dg();Ug();X0={it:Symbol.for("@smithy/nor-struct-it")},M=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let n=[],s=e,o=e;for(this._isMemberSchema=!1;Bg(s);)n.push(s[1]),s=s[0],o=yt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Rr(a))}}else this.memberTraits=0;if(o instanceof t){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=yt(o),Q0(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=yt(e);if(r instanceof t)return r;if(Bg(r)){let[n,s]=r;if(n instanceof t)return Object.assign(n.getMergedTraits(),Rr(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Rr(this.memberTraits)}getOwnTraits(){return Rr(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return ba([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(o!=null)return ba([o,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return ba(Bg(s)?s:[s,0],e)}if(this.isDocumentSchema())return ba([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema(),r=e[4].length,n=e[X0.it];if(n&&r===n.length){yield*n;return}n=Array(r);for(let s=0;s<r;++s){let o=e[4][s],i=ba([e[5][s],0],o);yield n[s]=[o,i]}e[X0.it]=n}};Bg=t=>Array.isArray(t)&&t.length===2,Q0=t=>Array.isArray(t)&&t.length>=5});var xa,r3,n3,Z0=S(()=>{c();Un();xa=class t extends De{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=t.symbol},r3=(t,e,r,n)=>De.assign(new xa,{name:e,namespace:t,traits:n,schemaRef:r}),n3=(t,e,r,n)=>De.assign(new xa,{name:e,namespace:t,traits:r,schemaRef:n})});var s3,ex=S(()=>{c();s3={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var B,tx=S(()=>{c();B=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);t.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=t.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}});var Cd={};Be(Cd,{ErrorSchema:()=>xd,ListSchema:()=>wd,MapSchema:()=>vd,NormalizedSchema:()=>M,OperationSchema:()=>bd,SCHEMA:()=>s3,Schema:()=>De,SimpleSchema:()=>xa,StructureSchema:()=>jo,TypeRegistry:()=>B,deref:()=>yt,deserializerMiddlewareOption:()=>q0,error:()=>t3,getSchemaSerdePlugin:()=>an,isStaticSchema:()=>Q0,list:()=>Qq,map:()=>Jq,op:()=>Zq,operation:()=>va,serializerMiddlewareOption:()=>G0,sim:()=>r3,simAdapter:()=>n3,struct:()=>e3,translateTraits:()=>Rr});var J=S(()=>{c();Dg();z0();V0();W0();K0();Ed();Y0();J0();Un();Z0();$g();ex();Ug();tx()});var o3,rx=S(()=>{c();o3=(t,e,r=n=>n)=>t});var i3,a3,Ca,c3,Ad,Aa,u3,Lg,Fg,jg,Hg,d3,l3,nx,f3,p3,Rd,m3,qg,h3,Ho,Gg,g3,y3,S3,sx,ox,_3,E3,Fs,zg,Td,Ta,Vg=S(()=>{c();i3=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},a3=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&Ta.warn(Td(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&Ta.warn(Td(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},Ca=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Ta.warn(Td(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},c3=Math.ceil(34028234663852886e22),Ad=t=>{let e=Ca(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>c3)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Aa=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},u3=Aa,Lg=t=>Hg(t,32),Fg=t=>Hg(t,16),jg=t=>Hg(t,8),Hg=(t,e)=>{let r=Aa(t);if(r!==void 0&&d3(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},d3=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},l3=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},nx=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},f3=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return Ta.warn(Td(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},p3=t=>{if(t==null)return;let e=nx(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Rd=t=>Ca(typeof t=="string"?Ho(t):t),m3=Rd,qg=t=>Ad(typeof t=="string"?Ho(t):t),h3=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ho=t=>{let e=t.match(h3);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},Gg=t=>typeof t=="string"?sx(t):Ca(t),g3=Gg,y3=Gg,S3=t=>typeof t=="string"?sx(t):Ad(t),sx=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},ox=t=>Aa(typeof t=="string"?Ho(t):t),_3=ox,E3=t=>Lg(typeof t=="string"?Ho(t):t),Fs=t=>Fg(typeof t=="string"?Ho(t):t),zg=t=>jg(typeof t=="string"?Ho(t):t),Td=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),Ta={warn:console.warn}});function js(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),u=s<10?`0${s}`:`${s}`,d=o<10?`0${o}`:`${o}`,f=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`;return`${w3[n]}, ${u} ${Kg[r]} ${e} ${d}:${f}:${l} GMT`}var w3,Kg,v3,b3,x3,Ia,C3,A3,T3,Oa,Pa,Ra,R3,I3,O3,Wg,P3,N3,k3,Ir,D3,M3,qo,ix=S(()=>{c();Vg();w3=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Kg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];v3=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),b3=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=v3.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,u,d]=e,f=Fs(qo(n)),l=Ir(s,"month",1,12),g=Ir(o,"day",1,31);return Ra(f,l,g,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:d})},x3=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ia=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=x3.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,u,d,f]=e,l=Fs(qo(n)),g=Ir(s,"month",1,12),h=Ir(o,"day",1,31),y=Ra(l,g,h,{hours:i,minutes:a,seconds:u,fractionalMilliseconds:d});return f.toUpperCase()!="Z"&&y.setTime(y.getTime()-M3(f)),y},C3=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),A3=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),T3=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Oa=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=C3.exec(t);if(e){let[r,n,s,o,i,a,u,d]=e;return Ra(Fs(qo(o)),Wg(s),Ir(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:d})}if(e=A3.exec(t),e){let[r,n,s,o,i,a,u,d]=e;return O3(Ra(R3(o),Wg(s),Ir(n,"day",1,31),{hours:i,minutes:a,seconds:u,fractionalMilliseconds:d}))}if(e=T3.exec(t),e){let[r,n,s,o,i,a,u,d]=e;return Ra(Fs(qo(d)),Wg(n),Ir(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")},Pa=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Rd(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},Ra=(t,e,r,n)=>{let s=e-1;return N3(t,s,r),new Date(Date.UTC(t,s,r,Ir(n.hours,"hour",0,23),Ir(n.minutes,"minute",0,59),Ir(n.seconds,"seconds",0,60),D3(n.fractionalMilliseconds)))},R3=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Fs(qo(t));return r<e?r+100:r},I3=50*365*24*60*60*1e3,O3=t=>t.getTime()-new Date().getTime()>I3?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,Wg=t=>{let e=Kg.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},P3=[31,28,31,30,31,30,31,31,30,31,30,31],N3=(t,e,r)=>{let n=P3[e];if(e===1&&k3(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Kg[e]} in ${t}: ${r}`)},k3=t=>t%4===0&&(t%100!==0||t%400===0),Ir=(t,e,r,n)=>{let s=zg(qo(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},D3=t=>t==null?0:qg("0."+t)*1e3,M3=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},qo=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var cn={};Be(cn,{__addDisposableResource:()=>Px,__assign:()=>Id,__asyncDelegator:()=>bx,__asyncGenerator:()=>vx,__asyncValues:()=>xx,__await:()=>Go,__awaiter:()=>gx,__classPrivateFieldGet:()=>Rx,__classPrivateFieldIn:()=>Ox,__classPrivateFieldSet:()=>Ix,__createBinding:()=>Pd,__decorate:()=>ux,__disposeResources:()=>Nx,__esDecorate:()=>lx,__exportStar:()=>Sx,__extends:()=>ax,__generator:()=>yx,__importDefault:()=>Tx,__importStar:()=>Ax,__makeTemplateObject:()=>Cx,__metadata:()=>hx,__param:()=>dx,__propKey:()=>px,__read:()=>Qg,__rest:()=>cx,__rewriteRelativeImportExtension:()=>kx,__runInitializers:()=>fx,__setFunctionName:()=>mx,__spread:()=>_x,__spreadArray:()=>wx,__spreadArrays:()=>Ex,__values:()=>Od,default:()=>B3});function ax(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yg(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function cx(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function ux(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function dx(t,e){return function(r,n){e(r,n,t)}}function lx(t,e,r,n,s,o){function i(O){if(O!==void 0&&typeof O!="function")throw new TypeError("Function expected");return O}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",d=!e&&t?n.static?t:t.prototype:null,f=e||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),l,g=!1,h=r.length-1;h>=0;h--){var y={};for(var x in n)y[x]=x==="access"?{}:n[x];for(var x in n.access)y.access[x]=n.access[x];y.addInitializer=function(O){if(g)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(O||null))};var T=(0,r[h])(a==="accessor"?{get:f.get,set:f.set}:f[u],y);if(a==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(l=i(T.get))&&(f.get=l),(l=i(T.set))&&(f.set=l),(l=i(T.init))&&s.unshift(l)}else(l=i(T))&&(a==="field"?s.unshift(l):f[u]=l)}d&&Object.defineProperty(d,n.name,f),g=!0}function fx(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function px(t){return typeof t=="symbol"?t:"".concat(t)}function mx(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function hx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function gx(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(f){try{d(n.next(f))}catch(l){i(l)}}function u(f){try{d(n.throw(f))}catch(l){i(l)}}function d(f){f.done?o(f.value):s(f.value).then(a,u)}d((n=n.apply(t,e||[])).next())})}function yx(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(f){return u([d,f])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(f){d=[6,f],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Sx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Pd(e,t,r)}function Od(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function _x(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qg(arguments[e]));return t}function Ex(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function wx(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Go(t){return this instanceof Go?(this.v=t,this):new Go(t)}function vx(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(h){return function(y){return Promise.resolve(y).then(h,l)}}function a(h,y){n[h]&&(s[h]=function(x){return new Promise(function(T,O){o.push([h,x,T,O])>1||u(h,x)})},y&&(s[h]=y(s[h])))}function u(h,y){try{d(n[h](y))}catch(x){g(o[0][3],x)}}function d(h){h.value instanceof Go?Promise.resolve(h.value.v).then(f,l):g(o[0][2],h)}function f(h){u("next",h)}function l(h){u("throw",h)}function g(h,y){h(y),o.shift(),o.length&&u(o[0][0],o[0][1])}}function bx(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:Go(t[s](i)),done:!1}:o?o(i):i}:o}}function xx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Od=="function"?Od(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,u){i=t[o](i),s(a,u,i.done,i.value)})}}function s(o,i,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},i)}}function Cx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ax(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Xg(t),n=0;n<r.length;n++)r[n]!=="default"&&Pd(e,t,r[n]);return $3(e,t),e}function Tx(t){return t&&t.__esModule?t:{default:t}}function Rx(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Ix(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Ox(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Px(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function Nx(t){function e(o){t.error=t.hasError?new U3(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function kx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}var Yg,Id,Pd,$3,Xg,U3,B3,un=S(()=>{c();Yg=function(t,e){return Yg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Yg(t,e)};Id=function(){return Id=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Id.apply(this,arguments)};Pd=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};$3=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Xg=function(t){return Xg=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Xg(t)};U3=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};B3={__extends:ax,__assign:Id,__rest:cx,__decorate:ux,__param:dx,__esDecorate:lx,__runInitializers:fx,__propKey:px,__setFunctionName:mx,__metadata:hx,__awaiter:gx,__generator:yx,__createBinding:Pd,__exportStar:Sx,__values:Od,__read:Qg,__spread:_x,__spreadArrays:Ex,__spreadArray:wx,__await:Go,__asyncGenerator:vx,__asyncDelegator:bx,__asyncValues:xx,__makeTemplateObject:Cx,__importStar:Ax,__importDefault:Tx,__classPrivateFieldGet:Rx,__classPrivateFieldSet:Ix,__classPrivateFieldIn:Ox,__addDisposableResource:Px,__disposeResources:Nx,__rewriteRelativeImportExtension:kx}});var Mx=R(Nd=>{"use strict";c();Object.defineProperty(Nd,"__esModule",{value:!0});Nd.randomUUID=void 0;var L3=(un(),Y(cn)),Dx=L3.__importDefault(ee("crypto"));Nd.randomUUID=Dx.default.randomUUID.bind(Dx.default)});var Jg=R(Ux=>{"use strict";c();var $x=Mx(),rt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),F3=()=>{if($x.randomUUID)return $x.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,rt[t[0]]+rt[t[1]]+rt[t[2]]+rt[t[3]]+"-"+rt[t[4]]+rt[t[5]]+"-"+rt[t[6]]+rt[t[7]]+"-"+rt[t[8]]+rt[t[9]]+"-"+rt[t[10]]+rt[t[11]]+rt[t[12]]+rt[t[13]]+rt[t[14]]+rt[t[15]]};Ux.v4=F3});var Ge,Bx=S(()=>{c();Ge=v(Jg())});var je,Lx=S(()=>{c();je=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};je.from=t=>t&&typeof t=="object"&&(t instanceof je||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?je(String(t)):je(JSON.stringify(t));je.fromObject=je.from});function Zg(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var Fx=S(()=>{c()});function dn(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var ey,ty,ry,jx,Hx,j3,H3,q3,G3,z3,zo,ny,sy,qx=S(()=>{c();ey="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",ty="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",ry="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",jx="(\\d?\\d)",Hx="(\\d{4})",j3=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),H3=new RegExp(`^${ey}, ${jx} ${ty} ${Hx} ${ry} GMT$`),q3=new RegExp(`^${ey}, ${jx}-${ty}-(\\d\\d) ${ry} GMT$`),G3=new RegExp(`^${ey} ${ty} ( [1-9]|\\d\\d) ${ry} ${Hx}$`),z3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zo=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},ny=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=j3.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,o,i,a,,u,d]=e;dn(n,1,12),dn(s,1,31),dn(o,0,23),dn(i,0,59),dn(a,0,60);let f=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(u)?Math.round(parseFloat(`0.${u}`)*1e3):0));if(f.setUTCFullYear(Number(r)),d.toUpperCase()!="Z"){let[,l,g,h]=/([+-])(\d\d):(\d\d)/.exec(d)||[void 0,"+",0,0],y=l==="-"?1:-1;f.setTime(f.getTime()+y*(Number(g)*60*60*1e3+Number(h)*60*1e3))}return f},sy=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,o,i,a,u;if((u=H3.exec(t))?[,e,r,n,s,o,i,a]=u:(u=q3.exec(t))?([,e,r,n,s,o,i,a]=u,n=(Number(n)+1900).toString()):(u=G3.exec(t))&&([,r,e,s,o,i,a,n]=u),n&&i){let d=Date.UTC(Number(n),z3.indexOf(r),Number(e),Number(s),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);dn(e,1,31),dn(s,0,23),dn(o,0,59),dn(i,0,60);let f=new Date(d);return f.setUTCFullYear(Number(n)),f}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function oy(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],o="";for(let i=0;i<n.length;i++)o===""?o=n[i]:o+=e+n[i],(i+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}var Gx=S(()=>{c()});var Na,zx=S(()=>{c();Na=t=>{let e=t.length,r=[],n=!1,s,o=0;for(let i=0;i<e;++i){let a=t[i];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(o,i)),o=i+1);break;default:}s=a}return r.push(t.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function iy(t){return new te(String(t),"bigDecimal")}var Vx,te,Wx=S(()=>{c();Vx=/^-?\d*(\.\d+)?$/,te=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!Vx.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&Vx.test(r.string)}}});var Kx={};Be(Kx,{LazyJsonString:()=>je,NumericValue:()=>te,_parseEpochTimestamp:()=>zo,_parseRfc3339DateTimeWithOffset:()=>ny,_parseRfc7231DateTime:()=>sy,copyDocumentWithTransform:()=>o3,dateToUtcString:()=>js,expectBoolean:()=>a3,expectByte:()=>jg,expectFloat32:()=>Ad,expectInt:()=>u3,expectInt32:()=>Lg,expectLong:()=>Aa,expectNonNull:()=>l3,expectNumber:()=>Ca,expectObject:()=>nx,expectShort:()=>Fg,expectString:()=>f3,expectUnion:()=>p3,generateIdempotencyToken:()=>Ge.v4,handleFloat:()=>g3,limitedParseDouble:()=>Gg,limitedParseFloat:()=>y3,limitedParseFloat32:()=>S3,logger:()=>Ta,nv:()=>iy,parseBoolean:()=>i3,parseEpochTimestamp:()=>Pa,parseRfc3339DateTime:()=>b3,parseRfc3339DateTimeWithOffset:()=>Ia,parseRfc7231DateTime:()=>Oa,quoteHeader:()=>Zg,splitEvery:()=>oy,splitHeader:()=>Na,strictParseByte:()=>zg,strictParseDouble:()=>Rd,strictParseFloat:()=>m3,strictParseFloat32:()=>qg,strictParseInt:()=>_3,strictParseInt32:()=>E3,strictParseLong:()=>ox,strictParseShort:()=>Fs});var Me=S(()=>{c();rx();ix();Bx();Lx();Vg();Fx();qx();Gx();zx();Wx()});var St,Vo=S(()=>{c();St=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var kd,ay,Yx=S(()=>{c();kd=v(Ce()),ay=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:o}){this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=o}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,u=this.defaultContentType,d=Symbol("initialRequestMarker"),f={async*[Symbol.asyncIterator](){if(n){let l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:u}};a.write(r,n);let g=a.flush();yield{[d]:!0,headers:l,body:g}}for await(let l of e)yield l}};return s.serialize(f,l=>{if(l[d])return{headers:l.headers,body:l.body};let g=Object.keys(l).find(N=>N!=="__type")??"",{additionalHeaders:h,body:y,eventType:x,explicitPayloadContentType:T}=this.writeEventBody(g,i,l);return{headers:{":event-type":{type:"string",value:x},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:T??u},...h},body:y}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),u=Symbol("initialResponseMarker"),d=s.deserialize(e.body,async g=>{let h=Object.keys(g).find(x=>x!=="__type")??"",y=g[h].body;if(h==="initial-response"){let x=await this.deserializer.read(r,y);return delete x[o],{[u]:!0,...x}}else if(h in a){let x=a[h];if(x.isStructSchema()){let T={},O=!1;for(let[N,L]of x.structIterator()){let{eventHeader:j,eventPayload:V}=L.getMergedTraits();if(O=O||!!(j||V),V)L.isBlobSchema()?T[N]=y:L.isStringSchema()?T[N]=(this.serdeContext?.utf8Encoder??kd.toUtf8)(y):L.isStructSchema()&&(T[N]=await this.deserializer.read(L,y));else if(j){let ce=g[h].headers[N]?.value;ce!=null&&(L.isNumericSchema()?ce&&typeof ce=="object"&&"bytes"in ce?T[N]=BigInt(ce.toString()):T[N]=Number(ce):T[N]=ce)}}if(O)return{[h]:T};if(y.byteLength===0)return{[h]:{}}}return{[h]:await this.deserializer.read(x,y)}}else return{$unknown:g}}),f=d[Symbol.asyncIterator](),l=await f.next();if(l.done)return d;if(l.value?.[u]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[g,h]of Object.entries(l.value))n[g]=h}return{async*[Symbol.asyncIterator](){for(l?.value?.[u]||(yield l.value);;){let{done:g,value:h}=await f.next();if(g)break;yield h}}}}writeEventBody(e,r,n){let s=this.serializer,o=e,i=null,a,u=r.getSchema()[4].includes(e),d={};if(u){let g=r.getMemberSchema(e);if(g.isStructSchema()){for(let[h,y]of g.structIterator()){let{eventHeader:x,eventPayload:T}=y.getMergedTraits();if(T)i=h;else if(x){let O=n[e][h],N="binary";y.isNumericSchema()?(-2)**31<=O&&O<=2**31-1?N="integer":N="long":y.isTimestampSchema()?N="timestamp":y.isStringSchema()?N="string":y.isBooleanSchema()&&(N="boolean"),O!=null&&(d[h]={type:N,value:O},delete n[e][h])}}if(i!==null){let h=g.getMemberSchema(i);h.isBlobSchema()?a="application/octet-stream":h.isStringSchema()&&(a="text/plain"),s.write(h,n[e][i])}else s.write(g,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[g,h]=n[e];o=g,s.write(15,h)}let f=s.flush();return{body:typeof f=="string"?(this.serdeContext?.utf8Decoder??kd.fromUtf8)(f):f,eventType:o,explicitPayloadContentType:a,additionalHeaders:d}}}});var Xx={};Be(Xx,{EventStreamSerde:()=>ay});var Qx=S(()=>{c();Yx()});var Dd,Hs,Md=S(()=>{c();J();Dd=v(ie());Vo();Hs=class extends St{options;constructor(e){super(),this.options=e}getRequestType(){return Dd.HttpRequest}getResponseType(){return Dd.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){if(this.serdeContext?.disableHostPrefix)return;let s=M.of(r.input),o=Rr(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of a){let d=n[u];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);i=i.replace(`{${u}}`,d)}e.hostname=i+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(Qx(),Xx));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,o){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}});var Jx,Zx,dr,eC=S(()=>{c();J();Me();Jx=v(ie()),Zx=v(gd());Sd();_d();Md();dr=class extends Hs{async serializeRequest(e,r,n){let s={...r??{}},o=this.serializer,i={},a={},u=await n.endpoint(),d=M.of(e?.input),f=d.getSchema(),l=!1,g,h=new Jx.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(u){this.updateServiceEndpoint(h,u),this.setHostPrefix(h,e,s);let y=Rr(e.traits);if(y.http){h.method=y.http[0];let[x,T]=y.http[1].split("?");h.path=="/"?h.path=x:h.path+=x;let O=new URLSearchParams(T??"");Object.assign(i,Object.fromEntries(O))}}for(let[y,x]of d.structIterator()){let T=x.getMergedTraits()??{},O=s[y];if(O==null&&!x.isIdempotencyToken()){if(T.httpLabel&&(h.path.includes(`{${y}+}`)||h.path.includes(`{${y}}`)))throw new Error(`No value provided for input HTTP label: ${y}.`);continue}if(T.httpPayload)x.isStreaming()?x.isStructSchema()?s[y]&&(g=await this.serializeEventStream({eventStream:s[y],requestSchema:d})):g=O:(o.write(x,O),g=o.flush()),delete s[y];else if(T.httpLabel){o.write(x,O);let N=o.flush();h.path.includes(`{${y}+}`)?h.path=h.path.replace(`{${y}+}`,N.split("/").map(Dt).join("/")):h.path.includes(`{${y}}`)&&(h.path=h.path.replace(`{${y}}`,Dt(N))),delete s[y]}else if(T.httpHeader)o.write(x,O),a[T.httpHeader.toLowerCase()]=String(o.flush()),delete s[y];else if(typeof T.httpPrefixHeaders=="string"){for(let[N,L]of Object.entries(O)){let j=T.httpPrefixHeaders+N;o.write([x.getValueSchema(),{httpHeader:j}],L),a[j.toLowerCase()]=o.flush()}delete s[y]}else T.httpQuery||T.httpQueryParams?(this.serializeQuery(x,O,i),delete s[y]):l=!0}return l&&s&&(o.write(f,s),g=o.flush()),h.headers=a,h.query=i,h.body=g,h}serializeQuery(e,r,n){let s=this.serializer,o=e.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let u=e.getValueSchema();Object.assign(u.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(u,a,n)}return}if(e.isListSchema()){let i=!!e.getMergedTraits().sparse,a=[];for(let u of r){s.write([e.getValueSchema(),o],u);let d=s.flush();(i||d!==void 0)&&a.push(d)}n[o.httpQuery]=a}else s.write([e,o],r),n[o.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,o=M.of(e.output),i={};if(n.statusCode>=300){let u=await gt(n.body,r);throw u.byteLength>0&&Object.assign(i,await s.read(15,u)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let u in n.headers){let d=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=d}let a=await this.deserializeHttpMessage(o,r,n,i);if(a.length){let u=await gt(n.body,r);if(u.byteLength>0){let d=await s.read(o,u);for(let f of a)i[f]=d[f]}}else a.discardResponseBody&&await gt(n.body,r);return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(e,r,n,s,o){let i;s instanceof Set?i=o:i=s;let a=!0,u=this.deserializer,d=M.of(e),f=[];for(let[l,g]of d.structIterator()){let h=g.getMemberTraits();if(h.httpPayload){if(a=!1,g.isStreaming())g.isStructSchema()?i[l]=await this.deserializeEventStream({response:n,responseSchema:d}):i[l]=(0,Zx.sdkStreamMixin)(n.body);else if(n.body){let x=await gt(n.body,r);x.byteLength>0&&(i[l]=await u.read(g,x))}}else if(h.httpHeader){let y=String(h.httpHeader).toLowerCase(),x=n.headers[y];if(x!=null)if(g.isListSchema()){let T=g.getValueSchema();T.getMergedTraits().httpHeader=y;let O;T.isTimestampSchema()&&T.getSchema()===4?O=oy(x,",",2):O=Na(x);let N=[];for(let L of O)N.push(await u.read(T,L.trim()));i[l]=N}else i[l]=await u.read(g,x)}else if(h.httpPrefixHeaders!==void 0){i[l]={};for(let[y,x]of Object.entries(n.headers))if(y.startsWith(h.httpPrefixHeaders)){let T=g.getValueSchema();T.getMergedTraits().httpHeader=y,i[l][y.slice(h.httpPrefixHeaders.length)]=await u.read(T,x)}}else h.httpResponseCode?i[l]=n.statusCode:f.push(l)}return f.discardResponseBody=a,f}}});var tC,Mt,rC=S(()=>{c();J();tC=v(ie());Sd();Md();Mt=class extends Hs{async serializeRequest(e,r,n){let s=this.serializer,o={},i={},a=await n.endpoint(),u=M.of(e?.input),d=u.getSchema(),f,l=new tC.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,e,r));let g={...r};if(r){let h=u.getEventStreamMember();if(h){if(g[h]){let y={};for(let[x,T]of u.structIterator())x!==h&&g[x]&&(s.write(T,g[x]),y[x]=s.flush());f=await this.serializeEventStream({eventStream:g[h],requestSchema:u,initialRequest:y})}}else s.write(d,g),f=s.flush()}return l.headers=i,l.query=o,l.body=f,l.method="POST",l}async deserializeResponse(e,r,n){let s=this.deserializer,o=M.of(e.output),i={};if(n.statusCode>=300){let u=await gt(n.body,r);throw u.byteLength>0&&Object.assign(i,await s.read(15,u)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let u in n.headers){let d=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=d}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:o,initialResponseContainer:i});else{let u=await gt(n.body,r);u.byteLength>0&&Object.assign(i,await s.read(o,u))}return i.$metadata=this.deserializeMetadata(n),i}}});var cy,uy=S(()=>{c();_d();cy=(t,e,r,n,s,o)=>{if(e!=null&&e[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?i.split("/").map(a=>Dt(a)).join("/"):Dt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function dy(t,e){return new $d(t,e)}var nC,$d,sC=S(()=>{c();nC=v(ie());uy();$d=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(e,r){this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let o of this.resolvePathStack)o(this.path);return new nC.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(o=>{this.path=cy(o,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});var oC=R(Ud=>{"use strict";c();Object.defineProperty(Ud,"__esModule",{value:!0});Ud.fromBase64=void 0;var V3=Tt(),W3=/^[A-Za-z0-9+/]*={0,2}$/,K3=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!W3.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,V3.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};Ud.fromBase64=K3});var iC=R(Bd=>{"use strict";c();Object.defineProperty(Bd,"__esModule",{value:!0});Bd.toBase64=void 0;var Y3=Tt(),X3=Ce(),Q3=t=>{let e;if(typeof t=="string"?e=(0,X3.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Y3.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};Bd.toBase64=Q3});var Ld=R(ka=>{"use strict";c();var aC=oC(),cC=iC();Object.keys(aC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ka,t)&&Object.defineProperty(ka,t,{enumerable:!0,get:function(){return aC[t]}})});Object.keys(cC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ka,t)&&Object.defineProperty(ka,t,{enumerable:!0,get:function(){return cC[t]}})})});function $e(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:o}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:o||r?5:void 0:void 0)??e.timestampFormat.default}var Fd=S(()=>{c()});var ly,uC,ln,fy=S(()=>{c();J();Me();ly=v(Ld()),uC=v(Ce());Vo();Fd();ln=class extends St{settings;constructor(e){super(),this.settings=e}read(e,r){let n=M.of(e);if(n.isListSchema())return Na(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??ly.fromBase64)(r);if(n.isTimestampSchema())switch($e(n,this.settings)){case 5:return ny(r);case 6:return sy(r);case 7:return zo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,o=r;if(s)return n.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(s==="application/json"||s.endsWith("+json"))&&(o=je.from(o)),o}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new te(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??uC.toUtf8)((this.serdeContext?.base64Decoder??ly.fromBase64)(e))}}});var jd,lr,dC=S(()=>{c();J();jd=v(Ce());Vo();fy();lr=class extends St{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new ln(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let n=M.of(e),s=n.getMergedTraits(),o=this.serdeContext?.utf8Encoder??jd.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(s.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??jd.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}});var py,Da,my=S(()=>{c();J();Me();py=v(Ld());Vo();Fd();Da=class extends St{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let n=M.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch($e(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=js(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??py.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let u=this.flush(),d=n.getValueSchema().isTimestampSchema()?u:Zg(u);i!==""&&(i+=", "),i+=d}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,o=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(o=je.from(o)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??py.toBase64)(o.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,Ge.v4)():this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}});var fr,lC=S(()=>{c();J();my();fr=class{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new Da(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=M.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var fC={};Be(fC,{FromStringShapeDeserializer:()=>ln,HttpBindingProtocol:()=>dr,HttpInterceptingShapeDeserializer:()=>lr,HttpInterceptingShapeSerializer:()=>fr,HttpProtocol:()=>Hs,RequestBuilder:()=>$d,RpcProtocol:()=>Mt,SerdeContext:()=>St,ToStringShapeSerializer:()=>Da,collectBody:()=>gt,determineTimestampFormat:()=>$e,extendedEncodeURIComponent:()=>Dt,requestBuilder:()=>dy,resolvedPath:()=>cy});var Re=S(()=>{c();Sd();_d();eC();Md();rC();sC();uy();fy();dC();lC();my();Fd();Vo()});var pC=S(()=>{c();Re()});function J3(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var mC=S(()=>{c()});var pr,hC=S(()=>{c();pr=class{authSchemes=new Map;constructor(e){for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var gC,hy,gy,yC=S(()=>{c();gC=v(ie()),hy=v(Mn()),gy=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=gC.HttpRequest.clone(e);if(n.in===hy.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===hy.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var SC,yy,_C=S(()=>{c();SC=v(ie()),yy=class{async sign(e,r,n){let s=SC.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var $t,EC=S(()=>{c();$t=class{async sign(e,r,n){return e}}});var wC=S(()=>{c();yC();_C();EC()});var vC,Z3,Ma,Wo,$a,bC=S(()=>{c();vC=t=>function(r){return Wo(r)&&r.expiration.getTime()-Date.now()<t},Z3=3e5,Ma=vC(3e5),Wo=t=>t.expiration!==void 0,$a=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,o,i,a=!1,u=async d=>{o||(o=n(d));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return e===void 0?async d=>((!i||d?.forceRefresh)&&(s=await u(d)),s):async d=>((!i||d?.forceRefresh)&&(s=await u(d)),a?s:r(s)?(e(s)&&await u(d),s):(a=!0,s))}});var xC=S(()=>{c();hC();wC();bC()});var Or={};Be(Or,{DefaultIdentityProviderConfig:()=>pr,EXPIRATION_MS:()=>Z3,HttpApiKeyAuthSigner:()=>gy,HttpBearerAuthSigner:()=>yy,NoAuthSigner:()=>$t,createIsIdentityExpiredFunction:()=>vC,createPaginator:()=>xb,doesIdentityRequireRefresh:()=>Wo,getHttpAuthSchemeEndpointRuleSetPlugin:()=>en,getHttpAuthSchemePlugin:()=>yH,getHttpSigningPlugin:()=>tn,getSmithyContext:()=>lH,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>cb,httpAuthSchemeMiddleware:()=>ga,httpAuthSchemeMiddlewareOptions:()=>hb,httpSigningMiddleware:()=>tg,httpSigningMiddlewareOptions:()=>Eb,isIdentityExpired:()=>Ma,memoizeIdentityProvider:()=>$a,normalizeProvider:()=>mt,requestBuilder:()=>dy,setFeature:()=>J3});var Ie=S(()=>{c();nb();yb();vb();bb();Cb();pC();mC();xC()});var fn=R(qs=>{"use strict";c();var _y=Mn(),Ey=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),o=0;for(;;){let{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let o=String(e[s]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},eG=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),CC=t=>eG.test(t)||t.startsWith("[")&&t.endsWith("]"),tG=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),vy=(t,e=!1)=>{if(!e)return tG.test(t);let r=t.split(".");for(let n of r)if(!vy(n))return!1;return!0},wy={},Ua="endpoints";function Bn(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Bn(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Bn).join(", ")})`:JSON.stringify(t,null,2)}var nt=class extends Error{constructor(e){super(e),this.name="EndpointError"}},rG=(t,e)=>t===e,nG=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new nt(`Path: '${t}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new nt(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r},AC=(t,e)=>nG(e).reduce((r,n)=>{if(typeof r!="object")throw new nt(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),sG=t=>t!=null,oG=t=>!t,Sy={[_y.EndpointURLScheme.HTTP]:80,[_y.EndpointURLScheme.HTTPS]:443},iG=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:g,port:h,protocol:y="",path:x="",query:T={}}=t,O=new URL(`${y}//${g}${h?`:${h}`:""}${x}`);return O.search=Object.entries(T).map(([N,L])=>`${N}=${L}`).join("&"),O}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;let u=i.slice(0,-1);if(!Object.values(_y.EndpointURLScheme).includes(u))return null;let d=CC(s),f=r.includes(`${n}:${Sy[u]}`)||typeof t=="string"&&t.includes(`${n}:${Sy[u]}`),l=`${n}${f?`:${Sy[u]}`:""}`;return{scheme:u,authority:l,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}},aG=(t,e)=>t===e,cG=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),uG=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),dG={booleanEquals:rG,getAttr:AC,isSet:sG,isValidHostLabel:vy,not:oG,parseURL:iG,stringEquals:aG,substring:cG,uriEncode:uG},TC=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let i=t.indexOf("}",o);if(i===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(o+1,i)),s=i+2);let a=t.substring(o+1,i);if(a.includes("#")){let[u,d]=a.split("#");r.push(AC(n[u],d))}else r.push(n[a]);s=i+1}return r.join("")},lG=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Hd=(t,e,r)=>{if(typeof t=="string")return TC(t,r);if(t.fn)return IC.callFunction(t,r);if(t.ref)return lG(t,r);throw new nt(`'${e}': ${String(t)} is not a string, function or reference.`)},RC=({fn:t,argv:e},r)=>{let n=e.map(o=>["boolean","number"].includes(typeof o)?o:IC.evaluateExpression(o,"arg",r)),s=t.split(".");return s[0]in wy&&s[1]!=null?wy[s[0]][s[1]](...n):dG[t](...n)},IC={evaluateExpression:Hd,callFunction:RC},fG=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new nt(`'${t}' is already defined in Reference Record.`);let n=RC(e,r);return r.logger?.debug?.(`${Ua} evaluateCondition: ${Bn(e)} = ${Bn(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},by=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:o}=fG(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};o&&(r[o.name]=o.value,e.logger?.debug?.(`${Ua} assign: ${o.name} := ${Bn(o.value)}`))}return{result:!0,referenceRecord:r}},pG=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=Hd(o,"Header value entry",e);if(typeof i!="string")throw new nt(`Header '${n}' value '${i}' is not a string`);return i})}),{}),OC=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:NC.getEndpointProperty(s,e)}),{}),PC=(t,e)=>{if(Array.isArray(t))return t.map(r=>PC(r,e));switch(typeof t){case"string":return TC(t,e);case"object":if(t===null)throw new nt(`Unexpected endpoint property: ${t}`);return NC.getEndpointProperties(t,e);case"boolean":return t;default:throw new nt(`Unexpected endpoint property type: ${typeof t}`)}},NC={getEndpointProperty:PC,getEndpointProperties:OC},mG=(t,e)=>{let r=Hd(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new nt(`Endpoint URL must be a string, got ${typeof r}`)},hG=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:o}=by(r,e);if(!s)return;let i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:u,headers:d}=n;return e.logger?.debug?.(`${Ua} Resolving endpoint from template: ${Bn(n)}`),{...d!=null&&{headers:pG(d,i)},...u!=null&&{properties:OC(u,i)},url:mG(a,i)}},gG=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:o}=by(r,e);if(s)throw new nt(Hd(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},kC=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=hG(r,e);if(n)return n}else if(r.type==="error")gG(r,e);else if(r.type==="tree"){let n=DC.evaluateTreeRule(r,e);if(n)return n}else throw new nt(`Unknown endpoint rule: ${r}`);throw new nt("Rules evaluation failed")},yG=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:o}=by(r,e);if(s)return DC.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...o}})},DC={evaluateRules:kC,evaluateTreeRule:yG},SG=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:o}=t;e.logger?.debug?.(`${Ua} Initial EndpointParams: ${Bn(r)}`);let i=Object.entries(s).filter(([,d])=>d.default!=null).map(([d,f])=>[d,f.default]);if(i.length>0)for(let[d,f]of i)r[d]=r[d]??f;let a=Object.entries(s).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new nt(`Missing required parameter: '${d}'`);let u=kC(o,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Ua} Resolved endpoint: ${Bn(u)}`),u};qs.EndpointCache=Ey;qs.EndpointError=nt;qs.customEndpointFunctions=wy;qs.isIpAddress=CC;qs.isValidHostLabel=vy;qs.resolveEndpoint=SG});var $C=R(MC=>{"use strict";c();function _G(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}MC.parseQueryString=_G});var Pr=R(BC=>{"use strict";c();var EG=$C(),UC=t=>{if(typeof t=="string")return UC(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:o}=t,i;return o&&(i=EG.parseQueryString(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};BC.parseUrl=UC});var pn=R(mr=>{"use strict";c();var Ko=fn(),wG=Pr(),FC=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!FC(r))return!1;return!0}return!(!Ko.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Ko.isIpAddress(t))},LC=":",vG="/",bG=t=>{let e=t.split(LC);if(e.length<6)return null;let[r,n,s,o,i,...a]=e;if(r!=="arn"||n===""||s===""||a.join(LC)==="")return null;let u=a.map(d=>d.split(vG)).flat();return{partition:n,service:s,region:o,accountId:i,resourceId:u}},xG=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],CG="1.1",jC={partitions:xG,version:CG},HC=jC,qC="",GC=t=>{let{partitions:e}=HC;for(let n of e){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(let n of e){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},zC=(t,e="")=>{HC=t,qC=e},AG=()=>{zC(jC,"")},TG=()=>qC,VC={isVirtualHostableS3Bucket:FC,parseArn:bG,partition:GC};Ko.customEndpointFunctions.aws=VC;var RG=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>WC(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},WC=t=>wG.parseUrl(t.url);Object.defineProperty(mr,"EndpointError",{enumerable:!0,get:function(){return Ko.EndpointError}});Object.defineProperty(mr,"isIpAddress",{enumerable:!0,get:function(){return Ko.isIpAddress}});Object.defineProperty(mr,"resolveEndpoint",{enumerable:!0,get:function(){return Ko.resolveEndpoint}});mr.awsEndpointFunctions=VC;mr.getUserAgentPrefix=TG;mr.partition=GC;mr.resolveDefaultAwsRegionalEndpointsConfig=RG;mr.setPartitionInfo=zC;mr.toEndpointV1=WC;mr.useDefaultPartitionInfo=AG});var qd,Gd,KC=S(()=>{c();qd={warningEmitted:!1},Gd=t=>{t&&!qd.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20&&(qd.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function zd(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var YC=S(()=>{c()});function XC(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var QC=S(()=>{c()});function JC(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var ZC=S(()=>{c()});var eA={};Be(eA,{emitWarningIfUnsupportedVersion:()=>Gd,setCredentialFeature:()=>zd,setFeature:()=>XC,setTokenFeature:()=>JC,state:()=>qd});var Vd=S(()=>{c();KC();YC();QC();ZC()});var tA,xy,rA=S(()=>{c();tA=v(ie()),xy=t=>tA.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Yo,Cy=S(()=>{c();Yo=t=>new Date(Date.now()+t)});var nA,sA=S(()=>{c();Cy();nA=(t,e)=>Math.abs(Yo(e).getTime()-t)>=3e5});var Ay,oA=S(()=>{c();sA();Ay=(t,e)=>{let r=Date.parse(t);return nA(r,e)?r-Date.now():e}});var Ty=S(()=>{c();rA();Cy();oA()});var iA,Ba,Xo,Nr,Ry,Iy=S(()=>{c();iA=v(ie());Ty();Ba=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Xo=async t=>{let e=Ba("context",t.context),r=Ba("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],o=await Ba("signer",r.signer)(n),i=t?.signingRegion,a=t?.signingRegionSet,u=t?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:u}},Nr=class{async sign(e,r,n){if(!iA.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await Xo(n),{config:o,signer:i}=s,{signingRegion:a,signingName:u}=s,d=n.context;if(d?.authSchemes?.length??!1){let[l,g]=d.authSchemes;l?.name==="sigv4a"&&g?.name==="sigv4"&&(a=g?.signingRegion??a,u=g?.signingName??u)}return await i.sign(e,{signingDate:Yo(o.systemClockOffset),signingRegion:a,signingService:u})}errorHandler(e){return r=>{let n=r.ServerTime??xy(r.$response);if(n){let s=Ba("config",e.config),o=s.systemClockOffset;s.systemClockOffset=Ay(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=xy(e);if(n){let s=Ba("config",r.config);s.systemClockOffset=Ay(n,s.systemClockOffset)}}},Ry=Nr});var aA,La,cA=S(()=>{c();aA=v(ie());Ty();Iy();La=class extends Nr{async sign(e,r,n){if(!aA.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:u}=await Xo(n),f=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(e,{signingDate:Yo(s.systemClockOffset),signingRegion:f,signingService:u})}}});var Oy,uA=S(()=>{c();Oy=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var Wd,Py=S(()=>{c();Wd=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var dA,lA,Kd,fA=S(()=>{c();uA();Py();dA="AWS_AUTH_SCHEME_PREFERENCE",lA="auth_scheme_preference",Kd={environmentVariableSelector:(t,e)=>{if(e?.signingName&&Wd(e.signingName)in t)return["httpBearerAuth"];if(dA in t)return Oy(t[dA])},configFileSelector:t=>{if(lA in t)return Oy(t[lA])},default:[]}});var ze=R(Gs=>{"use strict";c();var Qo=class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,t.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}},Ny=class t extends Qo{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},ky=class t extends Qo{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},IG=(...t)=>async()=>{if(t.length===0)throw new Qo("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},OG=t=>()=>Promise.resolve(t),PG=(t,e,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=t());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return e===void 0?async u=>((!o||u?.forceRefresh)&&(n=await a()),n):async u=>((!o||u?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(e(n)&&await a(),n))};Gs.CredentialsProviderError=Ny;Gs.ProviderError=Qo;Gs.TokenProviderError=ky;Gs.chain=IG;Gs.fromStatic=OG;Gs.memoize=PG});var Dy,pA,mA,hA=S(()=>{c();Ie();Dy=v(ze()),pA=t=>(t.sigv4aSigningRegionSet=mt(t.sigv4aSigningRegionSet),t),mA={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new Dy.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new Dy.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var yA=R(My=>{"use strict";c();var gA=t=>encodeURIComponent(t).replace(/[!'()*]/g,NG),NG=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,kG=t=>t.split("/").map(gA).join("/");My.escapeUri=gA;My.escapeUriPath=kG});var rl=R(se=>{"use strict";c();var Ln=wa(),zs=Ce(),DG=ng(),wA=ie(),SA=tt(),Yd=yA(),vA="X-Amz-Algorithm",bA="X-Amz-Credential",jy="X-Amz-Date",xA="X-Amz-SignedHeaders",CA="X-Amz-Expires",Hy="X-Amz-Signature",qy="X-Amz-Security-Token",MG="X-Amz-Region-Set",Gy="authorization",zy=jy.toLowerCase(),AA="date",TA=[Gy,zy,AA],RA=Hy.toLowerCase(),el="x-amz-content-sha256",IA=qy.toLowerCase(),$G="host",OA={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},PA=/^proxy-/,NA=/^sec-/,UG=[/^proxy-/i,/^sec-/i],Xd="AWS4-HMAC-SHA256",BG="AWS4-ECDSA-P256-SHA256",kA="AWS4-HMAC-SHA256-PAYLOAD",DA="UNSIGNED-PAYLOAD",MA=50,Vy="aws4_request",$A=60*60*24*7,Jo={},Qd=[],Jd=(t,e,r)=>`${t}/${e}/${r}/${Vy}`,UA=async(t,e,r,n,s)=>{let o=await _A(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${n}:${s}:${Ln.toHex(o)}:${e.sessionToken}`;if(i in Jo)return Jo[i];for(Qd.push(i);Qd.length>MA;)delete Jo[Qd.shift()];let a=`AWS4${e.secretAccessKey}`;for(let u of[r,n,s,Vy])a=await _A(t,a,u);return Jo[i]=a},LG=()=>{Qd.length=0,Object.keys(Jo).forEach(t=>{delete Jo[t]})},_A=(t,e,r)=>{let n=new t(e);return n.update(zs.toUint8Array(r)),n.digest()},$y=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in OA||e?.has(o)||PA.test(o)||NA.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[s].trim().replace(/\s+/g," "))}return n},Zd=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===el)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||DG.isArrayBuffer(e)){let n=new r;return n.update(zs.toUint8Array(e)),Ln.toHex(await n.digest())}return DA},Uy=class{format(e){let r=[];for(let o of Object.keys(e)){let i=zs.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=zs.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);let d=new Uint8Array(u.buffer);return d.set(a,3),d;case"timestamp":let f=new Uint8Array(9);return f[0]=8,f.set(By.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!FG.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(Ln.fromHex(e.value.replace(/\-/g,"")),1),l}}},FG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,By=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&EA(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&EA(e),parseInt(Ln.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function EA(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var BA=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},LA=(t,e={})=>{let{headers:r,query:n={}}=wA.HttpRequest.clone(t);for(let s of Object.keys(r)){let o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(o)||e.hoistableHeaders?.has(o))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},Ly=t=>{t=wA.HttpRequest.clone(t);for(let e of Object.keys(t.headers))TA.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},FA=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===RA)continue;let s=Yd.escapeUri(n);e.push(s);let o=t[n];typeof o=="string"?r[s]=`${s}=${Yd.escapeUri(o)}`:Array.isArray(o)&&(r[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${Yd.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},jG=t=>HG(t).toISOString().replace(/\.\d{3}Z$/,"Z"),HG=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,tl=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=SA.normalizeProvider(n),this.credentialProvider=SA.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${FA(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let o=new this.sha256;o.update(zs.toUint8Array(n));let i=await o.digest();return`${s}
${e}
${r}
${Ln.toHex(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Yd.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=jG(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},Fy=class extends tl{headerFormatter=new Uy;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i})}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:u,signingRegion:d,signingService:f}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let g=d??await this.regionProvider(),{longDate:h,shortDate:y}=this.formatDate(n);if(s>$A)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=Jd(y,g,f??this.service),T=LA(Ly(e),{unhoistableHeaders:i,hoistableHeaders:u});l.sessionToken&&(T.query[qy]=l.sessionToken),T.query[vA]=Xd,T.query[bA]=`${l.accessKeyId}/${x}`,T.query[jy]=h,T.query[CA]=s.toString(10);let O=$y(T,o,a);return T.query[xA]=this.getCanonicalHeaderList(O),T.query[Hy]=await this.getSignature(h,x,this.getSigningKey(l,g,y,f),this.createCanonicalRequest(T,O,await Zd(e,this.sha256))),T}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:u,longDate:d}=this.formatDate(n),f=Jd(u,a,i??this.service),l=await Zd({headers:{},body:r},this.sha256),g=new this.sha256;g.update(e);let h=Ln.toHex(await g.digest()),y=[kA,d,f,s,h,l].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(i=>({message:e.message,signature:i}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(o,i,a,s));return u.update(zs.toUint8Array(e)),Ln.toHex(await u.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let u=o??await this.regionProvider(),d=Ly(e),{longDate:f,shortDate:l}=this.formatDate(r),g=Jd(l,u,i??this.service);d.headers[zy]=f,a.sessionToken&&(d.headers[IA]=a.sessionToken);let h=await Zd(d,this.sha256);!BA(el,d.headers)&&this.applyChecksum&&(d.headers[el]=h);let y=$y(d,s,n),x=await this.getSignature(f,g,this.getSigningKey(a,u,l,i),this.createCanonicalRequest(d,y,h));return d.headers[Gy]=`${Xd} Credential=${a.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${x}`,d}async getSignature(e,r,n,s){let o=await this.createStringToSign(e,r,s,Xd),i=new this.sha256(await n);return i.update(zs.toUint8Array(o)),Ln.toHex(await i.digest())}getSigningKey(e,r,n,s){return UA(this.sha256,e,n,r,s||this.service)}},qG={SignatureV4a:null};se.ALGORITHM_IDENTIFIER=Xd;se.ALGORITHM_IDENTIFIER_V4A=BG;se.ALGORITHM_QUERY_PARAM=vA;se.ALWAYS_UNSIGNABLE_HEADERS=OA;se.AMZ_DATE_HEADER=zy;se.AMZ_DATE_QUERY_PARAM=jy;se.AUTH_HEADER=Gy;se.CREDENTIAL_QUERY_PARAM=bA;se.DATE_HEADER=AA;se.EVENT_ALGORITHM_IDENTIFIER=kA;se.EXPIRES_QUERY_PARAM=CA;se.GENERATED_HEADERS=TA;se.HOST_HEADER=$G;se.KEY_TYPE_IDENTIFIER=Vy;se.MAX_CACHE_SIZE=MA;se.MAX_PRESIGNED_TTL=$A;se.PROXY_HEADER_PATTERN=PA;se.REGION_SET_PARAM=MG;se.SEC_HEADER_PATTERN=NA;se.SHA256_HEADER=el;se.SIGNATURE_HEADER=RA;se.SIGNATURE_QUERY_PARAM=Hy;se.SIGNED_HEADERS_QUERY_PARAM=xA;se.SignatureV4=Fy;se.SignatureV4Base=tl;se.TOKEN_HEADER=IA;se.TOKEN_QUERY_PARAM=qy;se.UNSIGNABLE_PATTERNS=UG;se.UNSIGNED_PAYLOAD=DA;se.clearCredentialCache=LG;se.createScope=Jd;se.getCanonicalHeaders=$y;se.getCanonicalQuery=FA;se.getPayloadHash=Zd;se.getSigningKey=UA;se.hasHeader=BA;se.moveHeadersToQuery=LA;se.prepareRequest=Ly;se.signatureV4aContainer=qG});function GG(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=$a(e,Ma,Wo):r?n=mt(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function zG(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var Wy,Fa,jA,HA=S(()=>{c();Vd();Ie();Wy=v(rl()),Fa=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(d){d&&d!==e&&d!==n&&(r=!0),e=d;let f=GG(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=zG(t,f);if(r&&!l.attributed){let g=typeof e=="object"&&e!==null;n=async h=>{let x=await l(h);return g&&(!x.$source||Object.keys(x.$source).length===0)?zd(x,"CREDENTIALS_CODE","e"):x},n.memoized=l.memoized,n.configBound=l.configBound,n.attributed=!0}else n=l},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:o=t.systemClockOffset||0,sha256:i}=t,a;return t.signer?a=mt(t.signer):t.regionInfoProvider?a=()=>mt(t.region)().then(async d=>[await t.regionInfoProvider(d,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},d]).then(([d,f])=>{let{signingRegion:l,signingService:g}=d;t.signingRegion=t.signingRegion||l||f,t.signingName=t.signingName||g||t.serviceId;let h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},y=t.signerConstructor||Wy.SignatureV4;return new y(h)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await mt(t.region)(),properties:{}},d);let f=d.signingRegion,l=d.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||l||t.serviceId;let g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},h=t.signerConstructor||Wy.SignatureV4;return new h(g)},Object.assign(t,{systemClockOffset:o,signingEscapePath:s,signer:a})},jA=Fa});var qA=S(()=>{c();Iy();cA();fA();hA();HA()});var GA={};Be(GA,{AWSSDKSigV4Signer:()=>Ry,AwsSdkSigV4ASigner:()=>La,AwsSdkSigV4Signer:()=>Nr,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Kd,NODE_SIGV4A_CONFIG_OPTIONS:()=>mA,getBearerTokenEnvKey:()=>Wd,resolveAWSSDKSigV4Config:()=>jA,resolveAwsSdkSigV4AConfig:()=>pA,resolveAwsSdkSigV4Config:()=>Fa,validateSigningProperties:()=>Xo});var Ky=S(()=>{c();qA();Py()});function Fn(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function nl(t){return t[Yy]=!0,t}var Yy,sl=S(()=>{c();Yy=Symbol("@smithy/core/cbor::tagSymbol")});function WA(t){we=t,hn=new DataView(we.buffer,we.byteOffset,we.byteLength)}function kr(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(we[t]&224)>>5,n=we[t]&31;switch(r){case 0:case 1:case 6:let s,o;if(n<24)s=n,o=1;else switch(n){case 24:case 25:case 26:case 27:let i=YA[n],a=i+1;if(o=a,e-t<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let u=t+1;i===1?s=we[u]:i===2?s=hn.getUint16(u):i===4?s=hn.getUint32(u):s=hn.getBigUint64(u);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return ae=o,Xy(s);if(r===1){let i;return typeof s=="bigint"?i=BigInt(-1)-s:i=-1-s,ae=o,Xy(i)}else if(n===2||n===3){let i=Ga(t+o,e),a=BigInt(0),u=t+o+ae;for(let d=u;d<u+i;++d)a=a<<BigInt(8)|BigInt(we[d]);return ae=o+ae+i,n===3?-a-BigInt(1):a}else if(n===4){let i=kr(t+o,e),[a,u]=i,d=u<0?-1:1,f="0".repeat(Math.abs(a)+1)+String(BigInt(d)*BigInt(u)),l,g=u<0?"-":"";return l=a===0?f:f.slice(0,f.length+a)+"."+f.slice(a),l=l.replace(/^0+/g,""),l===""&&(l="0"),l[0]==="."&&(l="0"+l),l=g+l,ae=o+ae,iy(l)}else{let i=kr(t+o,e);return ae=o+ae,nl({tag:Xy(s),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return JG(t,e);case 5:return n6(t,e);case 4:return t6(t,e);case 2:return ZG(t,e)}else switch(r){case 3:return QG(t,e);case 5:return r6(t,e);case 4:return e6(t,e);case 2:return rS(t,e)}default:return s6(t,e)}}function KA(t,e,r){return KG&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):zA?zA.decode(t.subarray(e,r)):(0,VA.toUtf8)(t.subarray(e,r))}function YG(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function XG(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,o=r===0?1:-1,i,a;if(n===0){if(s===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return s===0?o*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=s/1024,o*(i*a)}function Ga(t,e){let r=we[t]&31;if(r<24)return ae=1,r;if(r===24||r===25||r===26||r===27){let n=YA[r];if(ae=n+1,e-t<ae)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?we[s]:n===2?hn.getUint16(s):n===4?hn.getUint32(s):YG(hn.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function QG(t,e){let r=Ga(t,e),n=ae;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=KA(we,t,t+r);return ae=n+r,s}function JG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(we[t]===255){let u=Fn(r.length);return u.set(r,0),ae=t-n+2,KA(u,0,u.length)}let s=(we[t]&224)>>5,o=we[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=rS(t,e);t+=ae;for(let u=0;u<i.length;++u)r.push(i[u])}throw new Error("expected break marker.")}function rS(t,e){let r=Ga(t,e),n=ae;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=we.subarray(t,t+r);return ae=n+r,s}function ZG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(we[t]===255){let u=Fn(r.length);return u.set(r,0),ae=t-n+2,u}let s=(we[t]&224)>>5,o=we[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=rS(t,e);t+=ae;for(let u=0;u<i.length;++u)r.push(i[u])}throw new Error("expected break marker.")}function e6(t,e){let r=Ga(t,e),n=ae;t+=n;let s=t,o=Array(r);for(let i=0;i<r;++i){let a=kr(t,e),u=ae;o[i]=a,t+=u}return ae=n+(t-s),o}function t6(t,e){t+=1;let r=[];for(let n=t;t<e;){if(we[t]===255)return ae=t-n+2,r;let s=kr(t,e);t+=ae,r.push(s)}throw new Error("expected break marker.")}function r6(t,e){let r=Ga(t,e),n=ae;t+=n;let s=t,o={};for(let i=0;i<r;++i){if(t>=e)throw new Error("unexpected end of map payload.");let a=(we[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let u=kr(t,e);t+=ae;let d=kr(t,e);t+=ae,o[u]=d}return ae=n+(t-s),o}function n6(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(we[t]===255)return ae=t-r+2,n;let s=(we[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let o=kr(t,e);t+=ae;let i=kr(t,e);t+=ae,n[o]=i}throw new Error("expected break marker.")}function s6(t,e){let r=we[t]&31;switch(r){case 21:case 20:return ae=1,r===21;case 22:return ae=1,null;case 23:return ae=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return ae=3,XG(we[t+1],we[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return ae=5,hn.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return ae=9,hn.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Xy(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var VA,WG,KG,we,hn,zA,ae,YA,XA=S(()=>{c();Me();VA=v(Ce());sl();WG=typeof TextDecoder<"u",KG=typeof Buffer<"u",we=Fn(0),hn=new DataView(we.buffer,we.byteOffset,we.byteLength),zA=WG?new TextDecoder:null,ae=0;YA={[24]:1,[25]:2,[26]:4,[27]:8}});function sS(t){X.byteLength-q<t&&(q<16e6?il(Math.max(X.byteLength*4,X.byteLength+t)):il(X.byteLength+t+16e6))}function oS(){let t=Fn(q);return t.set(X.subarray(0,q),0),q=0,t}function il(t){let e=X;X=Fn(t),e&&(e.copy?e.copy(X,0,0,e.byteLength):X.set(e,0)),Sn=new DataView(X.buffer,X.byteOffset,X.byteLength)}function yn(t,e){e<24?X[q++]=t<<5|e:e<256?(X[q++]=t<<5|24,X[q++]=e):e<65536?(X[q++]=t<<5|25,Sn.setUint16(q,e),q+=2):e<2**32?(X[q++]=t<<5|26,Sn.setUint32(q,e),q+=4):(X[q++]=t<<5|27,Sn.setBigUint64(q,typeof e=="bigint"?e:BigInt(e)),q+=8)}function ZA(t){let e=[t];for(;e.length;){let r=e.pop();if(sS(typeof r=="string"?r.length*4:64),typeof r=="string"){if(QA)yn(3,Buffer.byteLength(r)),q+=X.write(r,q);else{let n=(0,JA.fromUtf8)(r);yn(3,n.byteLength),X.set(n,q),q+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,o=n?r:-r-1;o<24?X[q++]=s<<5|o:o<256?(X[q++]=s<<5|24,X[q++]=o):o<65536?(X[q++]=s<<5|25,X[q++]=o>>8,X[q++]=o):o<4294967296?(X[q++]=s<<5|26,Sn.setUint32(q,o),q+=4):(X[q++]=s<<5|27,Sn.setBigUint64(q,BigInt(o)),q+=8);continue}X[q++]=251,Sn.setFloat64(q,r),q+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,o=n?r:-r-BigInt(1),i=Number(o);if(i<24)X[q++]=s<<5|i;else if(i<256)X[q++]=s<<5|24,X[q++]=i;else if(i<65536)X[q++]=s<<5|25,X[q++]=i>>8,X[q++]=i&255;else if(i<4294967296)X[q++]=s<<5|26,Sn.setUint32(q,i),q+=4;else if(o<BigInt("18446744073709551616"))X[q++]=s<<5|27,Sn.setBigUint64(q,o),q+=8;else{let a=o.toString(2),u=new Uint8Array(Math.ceil(a.length/8)),d=o,f=0;for(;u.byteLength-++f>=0;)u[u.byteLength-f]=Number(d&BigInt(255)),d>>=BigInt(8);sS(u.byteLength*2),X[q++]=n?194:195,QA?yn(2,Buffer.byteLength(u)):yn(2,u.byteLength),X.set(u,q),q+=u.byteLength}continue}else if(r===null){X[q++]=246;continue}else if(typeof r=="boolean"){X[q++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);yn(4,r.length);continue}else if(typeof r.byteLength=="number"){sS(r.length*2),yn(2,r.length),X.set(r,q),q+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof te){let s=r.string.indexOf("."),o=s===-1?0:s-r.string.length+1,i=BigInt(r.string.replace(".",""));X[q++]=196,e.push(i),e.push(o),yn(4,2);continue}if(r[Yy])if("tag"in r&&"value"in r){e.push(r.value),yn(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let o=n[s];e.push(r[o]),e.push(o)}yn(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var JA,QA,o6,X,Sn,q,eT=S(()=>{c();Me();JA=v(Ce());sl();QA=typeof Buffer<"u",o6=2048,X=Fn(o6),Sn=new DataView(X.buffer,X.byteOffset,X.byteLength),q=0});var iS,tT=S(()=>{c();XA();eT();iS={deserialize(t){return WA(t),kr(0,t.length)},serialize(t){try{return ZA(t),oS()}catch(e){throw oS(),e}},resizeEncodingBuffer(t){il(t)}}});var al,ei,cl=S(()=>{c();sl();al=t=>nl({tag:1,value:t.getTime()/1e3}),ei=(t,e)=>{let r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var uS,ul,aS,cS,dS=S(()=>{c();Re();J();Me();Me();uS=v(Ld());tT();cl();ul=class extends St{createSerializer(){let e=new aS;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new cS;return e.setSerdeContext(this.serdeContext),e}},aS=class extends St{value;write(e,r){this.value=this.serialize(e,r)}serialize(e,r){let n=M.of(e);if(r==null)return n.isIdempotencyToken()?(0,Ge.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??uS.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?al(new Date(Number(r)/1e3|0)):al(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let i=!!n.getMergedTraits().sparse,a=[],u=0;for(let d of s){let f=this.serialize(n.getValueSchema(),d);(f!=null||i)&&(a[u++]=f)}return a}if(s instanceof Date)return al(s);let o={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let u=this.serialize(n.getValueSchema(),s[a]);(u!=null||i)&&(o[a]=u)}}else if(n.isStructSchema()){for(let[a,u]of n.structIterator()){let d=this.serialize(u,s[a]);d!=null&&(o[a]=d)}if(n.isUnionSchema()&&Array.isArray(s.$unknown)){let[a,u]=s.$unknown;o[a]=u}else if(typeof s.__type=="string")for(let[a,u]of Object.entries(s))a in o||(o[a]=this.serialize(15,u))}else if(n.isDocumentSchema())for(let i of Object.keys(s))o[i]=this.serialize(n.getValueSchema(),s[i]);else if(n.isBigDecimalSchema())return s;return o}return r}flush(){let e=iS.serialize(this.value);return this.value=void 0,e}},cS=class extends St{read(e,r){let n=iS.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=M.of(e);if(n.isTimestampSchema()){if(typeof r=="number")return zo(r);if(typeof r=="object"&&r.tag===1&&"value"in r)return zo(r.value)}if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??uS.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let o=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let u of r){let d=this.readValue(i,u);(d!=null||a)&&o.push(d)}return o}let s={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let u=this.readValue(i,r[a]);(u!=null||o)&&(s[a]=u)}}else if(n.isStructSchema()){let o=n.isUnionSchema(),i;o&&(i=new Set(Object.keys(r).filter(a=>a!=="__type")));for(let[a,u]of n.structIterator())o&&i.delete(a),r[a]!=null&&(s[a]=this.readValue(u,r[a]));if(o&&i?.size===1&&Object.keys(s).length===0){let a=i.values().next().value;s.$unknown=[a,r[a]]}else if(typeof r.__type=="string")for(let[a,u]of Object.entries(r))a in s||(s[a]=u)}else if(r instanceof te)return r;return s}else return r}}});var rT,ti,nT=S(()=>{c();Re();J();rT=v(tt());dS();cl();ti=class extends Mt{codec=new ul;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),yt(e.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:o,operation:i}=(0,rT.getSmithyContext)(n),a=`/service/${o}/operation/${i}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=ei(n,s)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let u={$metadata:o,$fault:n.statusCode<=500?"client":"server"},d=B.for(a),f;try{f=d.getSchema(i)}catch{s.Message&&(s.message=s.Message);let O=B.for("smithy.ts.sdk.synthetic."+a),N=O.getBaseException();if(N){let L=O.getErrorCtor(N);throw Object.assign(new L({name:i}),u,s)}throw Object.assign(new Error(i),u,s)}let l=M.of(f),g=d.getErrorCtor(f),h=s.message??s.Message??"Unknown",y=new g(h),x={};for(let[T,O]of l.structIterator())x[T]=this.deserializer.readValue(O,s[T]);throw Object.assign(y,u,{$fault:l.getMergedTraits().error,message:h},x)}getDefaultContentType(){return"application/cbor"}}});var lS=S(()=>{c();cl();nT();dS()});var aT=R(iT=>{"use strict";c();var Vs=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},Gn=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,fS=()=>{let t=[],e=[],r=!1,n=new Set,s=l=>l.sort((g,h)=>sT[h.step]-sT[g.step]||oT[h.priority||"normal"]-oT[g.priority||"normal"]),o=l=>{let g=!1,h=y=>{let x=Vs(y.name,y.aliases);if(x.includes(l)){g=!0;for(let T of x)n.delete(T);return!1}return!0};return t=t.filter(h),e=e.filter(h),g},i=l=>{let g=!1,h=y=>{if(y.middleware===l){g=!0;for(let x of Vs(y.name,y.aliases))n.delete(x);return!1}return!0};return t=t.filter(h),e=e.filter(h),g},a=l=>(t.forEach(g=>{l.add(g.middleware,{...g})}),e.forEach(g=>{l.addRelativeTo(g.middleware,{...g})}),l.identifyOnResolve?.(f.identifyOnResolve()),l),u=l=>{let g=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...u(h))}),g.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...u(h))}),g},d=(l=!1)=>{let g=[],h=[],y={};return t.forEach(T=>{let O={...T,before:[],after:[]};for(let N of Vs(O.name,O.aliases))y[N]=O;g.push(O)}),e.forEach(T=>{let O={...T,before:[],after:[]};for(let N of Vs(O.name,O.aliases))y[N]=O;h.push(O)}),h.forEach(T=>{if(T.toMiddleware){let O=y[T.toMiddleware];if(O===void 0){if(l)return;throw new Error(`${T.toMiddleware} is not found when adding ${Gn(T.name,T.aliases)} middleware ${T.relation} ${T.toMiddleware}`)}T.relation==="after"&&O.after.push(T),T.relation==="before"&&O.before.push(T)}}),s(g).map(u).reduce((T,O)=>(T.push(...O),T),[])},f={add:(l,g={})=>{let{name:h,override:y,aliases:x}=g,T={step:"initialize",priority:"normal",middleware:l,...g},O=Vs(h,x);if(O.length>0){if(O.some(N=>n.has(N))){if(!y)throw new Error(`Duplicate middleware name '${Gn(h,x)}'`);for(let N of O){let L=t.findIndex(V=>V.name===N||V.aliases?.some(ce=>ce===N));if(L===-1)continue;let j=t[L];if(j.step!==T.step||T.priority!==j.priority)throw new Error(`"${Gn(j.name,j.aliases)}" middleware with ${j.priority} priority in ${j.step} step cannot be overridden by "${Gn(h,x)}" middleware with ${T.priority} priority in ${T.step} step.`);t.splice(L,1)}}for(let N of O)n.add(N)}t.push(T)},addRelativeTo:(l,g)=>{let{name:h,override:y,aliases:x}=g,T={middleware:l,...g},O=Vs(h,x);if(O.length>0){if(O.some(N=>n.has(N))){if(!y)throw new Error(`Duplicate middleware name '${Gn(h,x)}'`);for(let N of O){let L=e.findIndex(V=>V.name===N||V.aliases?.some(ce=>ce===N));if(L===-1)continue;let j=e[L];if(j.toMiddleware!==T.toMiddleware||j.relation!==T.relation)throw new Error(`"${Gn(j.name,j.aliases)}" middleware ${j.relation} "${j.toMiddleware}" middleware cannot be overridden by "${Gn(h,x)}" middleware ${T.relation} "${T.toMiddleware}" middleware.`);e.splice(L,1)}}for(let N of O)n.add(N)}e.push(T)},clone:()=>a(fS()),use:l=>{l.applyToStack(f)},remove:l=>typeof l=="string"?o(l):i(l),removeByTag:l=>{let g=!1,h=y=>{let{tags:x,name:T,aliases:O}=y;if(x&&x.includes(l)){let N=Vs(T,O);for(let L of N)n.delete(L);return g=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),g},concat:l=>{let g=a(fS());return g.use(l),g.identifyOnResolve(r||g.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),g},applyToStack:a,identify:()=>d(!0).map(l=>{let g=l.step??l.relation+" "+l.toMiddleware;return Gn(l.name,l.aliases)+" - "+g}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,g)=>{for(let h of d().map(y=>y.middleware).reverse())l=h(l,g);return r&&console.log(f.identify()),l}};return f},sT={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},oT={high:3,normal:2,low:1};iT.constructStack=fS});var z=R(Ee=>{"use strict";c();var dT=aT(),wS=(Re(),Y(fC)),mS=Mn(),i6=(J(),Y(Cd)),cT=(Me(),Y(Kx)),hS=class{config;middlewareStack=dT.constructStack();initConfig;handlers;constructor(e){this.config=e;let{protocol:r,protocolSettings:n}=e;n&&typeof r=="function"&&(e.protocol=new r(n))}send(e,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=s===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let u=this.handlers;u.has(e.constructor)?a=u.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),u.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(u=>o(null,u.output),u=>o(u)).catch(()=>{});else return a(e).then(u=>u.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},pS="***SensitiveInformation***";function gS(t,e){if(e==null)return e;let r=i6.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return pS;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return pS}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return pS}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[o,i]of r.structIterator())n[o]!=null&&(s[o]=gS(i,n[o]));return s}return e}var dl=class{middlewareStack=dT.constructStack();schema;static classBuilder(){return new yS}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:d,additionalContext:f,CommandCtor:l}){for(let T of s.bind(this)(l,e,r,n))this.middlewareStack.use(T);let g=e.concat(this.middlewareStack),{logger:h}=r,y={logger:h,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[mS.SMITHY_CONTEXT_KEY]:{commandInstance:this,...d},...f},{requestHandler:x}=r;return g.resolve(T=>x.handle(T.request,n||{}),y)}},yS=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends dl{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,o){let i=e._operationSchema,a=i?.[4]??i?.input,u=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,s,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?gS.bind(null,a):d=>d),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?gS.bind(null,u):d=>d),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}},a6="***SensitiveInformation***",c6=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(i,a,u){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof u=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},u)}else return this.send(d,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[o]=s}},SS=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},lT=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},fT=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=d6(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:e?.code||e?.Code||n||o||"UnknownError",$fault:"client",$metadata:s});throw lT(i,e)},u6=t=>({output:e,parsedBody:r,errorCode:n})=>{fT({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},d6=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),l6=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},uT=!1,f6=t=>{t&&!uT&&parseInt(t.substring(1,t.indexOf(".")))<16&&(uT=!0)},p6=t=>{let e=[];for(let r in mS.AlgorithmId){let n=mS.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},m6=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},h6=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),g6=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},pT=t=>Object.assign(p6(t),h6(t)),y6=pT,S6=t=>Object.assign(m6(t),g6(t)),_6=t=>Array.isArray(t)?t:[t],mT=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=mT(t[r]));return t},E6=t=>t!=null,_S=class{trace(){}debug(){}info(){}warn(){}error(){}};function hT(t,e,r){let n,s,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return s=e,o=r,b6(n,s,o);o=e}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}gT(n,null,o,i)}return n}var w6=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},v6=(t,e)=>{let r={};for(let n in e)gT(r,t,e,n);return r},b6=(t,e,r)=>hT(t,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[e,o()]:n[s]=[e,o],n),{})),gT=(t,e,r,n)=>{if(e!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=x6,u=C6,d=n]=i;(typeof a=="function"&&a(e[d])||typeof a!="function"&&a)&&(t[n]=u(e[d]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,u=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=i:u&&(t[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(t[n]=o)}},x6=t=>t!=null,C6=t=>t,A6=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},T6=t=>t.toISOString().replace(".000Z","Z"),ES=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(ES);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=ES(t[r]));return e}return t};Object.defineProperty(Ee,"collectBody",{enumerable:!0,get:function(){return wS.collectBody}});Object.defineProperty(Ee,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return wS.extendedEncodeURIComponent}});Object.defineProperty(Ee,"resolvedPath",{enumerable:!0,get:function(){return wS.resolvedPath}});Ee.Client=hS;Ee.Command=dl;Ee.NoOpLogger=_S;Ee.SENSITIVE_STRING=a6;Ee.ServiceException=SS;Ee._json=ES;Ee.convertMap=w6;Ee.createAggregatedClient=c6;Ee.decorateServiceException=lT;Ee.emitWarningIfUnsupportedVersion=f6;Ee.getArrayIfSingleItem=_6;Ee.getDefaultClientConfiguration=y6;Ee.getDefaultExtensionConfiguration=pT;Ee.getValueFromTextNode=mT;Ee.isSerializableHeaderValue=E6;Ee.loadConfigsForDefaultMode=l6;Ee.map=hT;Ee.resolveDefaultRuntimeConfig=S6;Ee.serializeDateTime=T6;Ee.serializeFloat=A6;Ee.take=v6;Ee.throwDefaultError=fT;Ee.withBaseException=u6;Object.keys(cT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ee,t)&&Object.defineProperty(Ee,t,{enumerable:!0,get:function(){return cT[t]}})})});var vS,qt,ri=S(()=>{c();J();vS=v(z()),qt=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:u,httpHeader:d,httpLabel:f,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!u&&!d&&!f&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,o,i){let a=r,u=e;e.includes("#")&&([a,u]=e.split("#"));let d={$metadata:o,$fault:n.statusCode<500?"client":"server"},f=B.for(a);try{return{errorSchema:i?.(f,u)??f.getSchema(e),errorMetadata:d}}catch{s.message=s.message??s.Message??"UnknownError";let g=B.for("smithy.ts.sdk.synthetic."+a),h=g.getBaseException();if(h){let y=g.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new y({name:u}),d),s)}throw this.decorateServiceException(Object.assign(new Error(u),d),s)}}decorateServiceException(e,r={}){if(this.queryCompat){let n=e.Message??r.Message,s=(0,vS.decorateServiceException)(e,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};let o=s.$metadata.requestId;return o&&(s.RequestId=o),s}return(0,vS.decorateServiceException)(e,r)}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(e),a={Code:s,Type:o};Object.assign(e,a);for(let[u,d]of i)a[u==="message"?"Message":u]=d;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(s=>M.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}});var ll,yT=S(()=>{c();lS();J();ri();ll=class extends ti{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r,this.mixin=new qt(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=(()=>{let y=n.headers["x-amzn-query-error"];return y&&this.awsQueryCompatible?y.split(";")[0]:ei(n,s)??"Unknown"})(),{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),d=M.of(a),f=s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f),h={};for(let[y,x]of d.structIterator())s[y]!=null&&(h[y]=this.deserializer.readValue(x,s[y]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}}});var ST,_T,ET,wT=S(()=>{c();ST=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},_T=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},ET=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var st,zn=S(()=>{c();st=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var vT=R(fl=>{"use strict";c();Object.defineProperty(fl,"__esModule",{value:!0});fl.fromBase64=void 0;var R6=Tt(),I6=/^[A-Za-z0-9+/]*={0,2}$/,O6=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!I6.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,R6.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};fl.fromBase64=O6});var bT=R(pl=>{"use strict";c();Object.defineProperty(pl,"__esModule",{value:!0});pl.toBase64=void 0;var P6=Tt(),N6=Ce(),k6=t=>{let e;if(typeof t=="string"?e=(0,N6.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,P6.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};pl.toBase64=k6});var Ws=R(za=>{"use strict";c();var xT=vT(),CT=bT();Object.keys(xT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(za,t)&&Object.defineProperty(za,t,{enumerable:!0,get:function(){return xT[t]}})});Object.keys(CT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(za,t)&&Object.defineProperty(za,t,{enumerable:!0,get:function(){return CT[t]}})})});function*ni(t,e){if(t.isUnitSchema())return;let r=t.getSchema();for(let n=0;n<r[4].length;++n){let s=r[4][n],o=r[5][n],i=new M([o,0],s);!(s in e)&&!i.isIdempotencyToken()||(yield[s,i])}}function*AT(t,e,r){if(t.isUnitSchema())return;let n=t.getSchema(),s=Object.keys(e).filter(o=>o!=="__type").length;for(let o=0;o<n[4].length&&s!==0;++o){let i=n[4][o],a=n[5][o],u=new M([a,0],i),d=i;r&&(d=u.getMergedTraits()[r]??i),d in e&&(yield[i,u],s-=1)}}var Va=S(()=>{c();J()});var si,bS=S(()=>{c();si=class{from;to;keys;constructor(e,r){this.from=e,this.to=r,this.keys=new Set(Object.keys(this.from).filter(n=>n!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let e=this.keys.values().next().value,r=this.from[e];this.to.$unknown=[e,r]}}}});function TT(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new te(n,"bigDecimal"):BigInt(n)}return e}var RT=S(()=>{c();Me()});var IT,OT,ml,xS=S(()=>{c();IT=v(z()),OT=v(Ce()),ml=(t,e)=>(0,IT.collectBody)(t,e).then(r=>(e?.utf8Encoder??OT.toUtf8)(r))});var Wa,PT,oi,Ka=S(()=>{c();xS();Wa=(t,e)=>ml(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),PT=async(t,e)=>{let r=await Wa(t,e);return r.message=r.message??r.Message,r},oi=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let o=r(e,"code");if(o&&e[o]!==void 0)return n(e[o]);if(e.__type!==void 0)return n(e.__type)}}});var NT,ii,CS=S(()=>{c();Re();J();Me();NT=v(Ws());zn();Va();bS();RT();Ka();ii=class extends st{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,TT):await Wa(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let n=r!==null&&typeof r=="object",s=M.of(e);if(n){if(s.isStructSchema()){let i=r,a=s.isUnionSchema(),u={},d,{jsonName:f}=this.settings;f&&(d={});let l;a&&(l=new si(i,u));for(let[g,h]of AT(s,i,f?"jsonName":!1)){let y=g;f&&(y=h.getMergedTraits().jsonName??y,d[y]=g),a&&l.mark(y),i[y]!=null&&(u[g]=this._read(h,i[y]))}if(a)l.writeUnknown();else if(typeof i.__type=="string")for(let[g,h]of Object.entries(i)){let y=f?d[g]??g:g;y in u||(u[y]=h)}return u}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],u=!!s.getMergedTraits().sparse;for(let d of r)(u||d!=null)&&a.push(this._read(i,d));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},u=!!s.getMergedTraits().sparse;for(let[d,f]of Object.entries(r))(u||f!=null)&&(a[d]=this._read(i,f));return a}}if(s.isBlobSchema()&&typeof r=="string")return(0,NT.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o)return o==="application/json"||o.endsWith("+json")?je.from(r):r;if(s.isTimestampSchema()&&r!=null)switch($e(s,this.settings)){case 5:return Ia(r);case 6:return Oa(r);case 7:return Pa(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof te)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new te(i.string,i.type):new te(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof te?i[a]=u:i[a]=this._read(s,u);return i}else return structuredClone(r);return r}}});var kT,hl,DT=S(()=>{c();Me();kT="\u039D",hl=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof te){let n=`${kT+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${kT+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var AS,ai,TS=S(()=>{c();Re();J();Me();AS=v(Ws());zn();Va();DT();ai=class extends st{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=M.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=M.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let n=new hl;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(e,r,n){let s=r!==null&&typeof r=="object",o=M.of(e);if(s){if(o.isStructSchema()){let i=r,a={},{jsonName:u}=this.settings,d;u&&(d={});for(let[f,l]of ni(o,i)){let g=this._write(l,i[f],o);if(g!==void 0){let h=f;u&&(h=l.getMergedTraits().jsonName??f,d[f]=h),a[h]=g}}if(o.isUnionSchema()&&Object.keys(a).length===0){let{$unknown:f}=i;if(Array.isArray(f)){let[l,g]=f;a[l]=this._write(15,g)}}else if(typeof i.__type=="string")for(let[f,l]of Object.entries(i)){let g=u?d[f]??f:f;g in a||(a[g]=this._write(15,l))}return a}if(Array.isArray(r)&&o.isListSchema()){let i=o.getValueSchema(),a=[],u=!!o.getMergedTraits().sparse;for(let d of r)(u||d!=null)&&a.push(this._write(i,d));return a}if(o.isMapSchema()){let i=o.getValueSchema(),a={},u=!!o.getMergedTraits().sparse;for(let[d,f]of Object.entries(r))(u||f!=null)&&(a[d]=this._write(i,f));return a}if(r instanceof Uint8Array&&(o.isBlobSchema()||o.isDocumentSchema()))return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??AS.toBase64)(r);if(r instanceof Date&&(o.isTimestampSchema()||o.isDocumentSchema()))switch($e(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return js(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof te&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Ge.v4)();let i=o.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?je.from(r):r}if(typeof r=="number"&&o.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&o.isBlobSchema())return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??AS.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof te?(this.useReplacer=!0,i[a]=u):i[a]=this._write(o,u);return i}else return structuredClone(r);return r}}}});var Vn,gl=S(()=>{c();zn();CS();TS();Vn=class extends st{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new ai(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new ii(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Wn,yl=S(()=>{c();Re();J();ri();gl();Ka();Wn=class extends Mt{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=s??new Vn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new qt(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(yt(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=oi(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),d=M.of(a),f=s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f),h={};for(let[y,x]of d.structIterator())s[y]!=null&&(h[y]=this.codec.createDeserializer().readObject(x,s[y]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}}});var Sl,MT=S(()=>{c();yl();Sl=class extends Wn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var _l,$T=S(()=>{c();yl();_l=class extends Wn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var ci,UT=S(()=>{c();Re();J();ri();gl();Ka();ci=class extends dr{serializer;deserializer;codec;mixin=new qt;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Vn(r),this.serializer=new fr(this.codec.createSerializer(),r),this.deserializer=new lr(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=M.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,r,n){let s=await super.deserializeResponse(e,r,n),o=M.of(e.output);for(let[i,a]of o.structIterator())a.getMemberTraits().httpPayload&&!(i in s)&&(s[i]=null);return s}async handleError(e,r,n,s,o){let i=oi(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),d=M.of(a),f=s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[y,x]of d.structIterator()){let T=x.getMergedTraits().jsonName??y;h[y]=this.codec.createDeserializer().readObject(x,s[T])}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}getDefaultContentType(){return"application/json"}}});var BT,LT,FT=S(()=>{c();BT=v(z()),LT=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,BT.expectUnion)(t)}});var RS=R((Dye,jT)=>{c();(()=>{"use strict";var t={d:(p,m)=>{for(var w in m)t.o(m,w)&&!t.o(p,w)&&Object.defineProperty(p,w,{enumerable:!0,get:m[w]})},o:(p,m)=>Object.prototype.hasOwnProperty.call(p,m),r:p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>kn,XMLParser:()=>Cj,XMLValidator:()=>kj});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(p,m){let w=[],A=m.exec(p);for(;A;){let b=[];b.startIndex=m.lastIndex-A[0].length;let C=A.length;for(let P=0;P<C;P++)b.push(A[P]);w.push(b),A=m.exec(p)}return w}let o=function(p){return n.exec(p)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(p,m){m=Object.assign({},i,m);let w=[],A=!1,b=!1;p[0]==="\uFEFF"&&(p=p.substr(1));for(let C=0;C<p.length;C++)if(p[C]==="<"&&p[C+1]==="?"){if(C+=2,C=d(p,C),C.err)return C}else{if(p[C]!=="<"){if(u(p[C]))continue;return O("InvalidChar","char '"+p[C]+"' is not expected.",L(p,C))}{let P=C;if(C++,p[C]==="!"){C=f(p,C);continue}{let I=!1;p[C]==="/"&&(I=!0,C++);let k="";for(;C<p.length&&p[C]!==">"&&p[C]!==" "&&p[C]!=="	"&&p[C]!==`
`&&p[C]!=="\r";C++)k+=p[C];if(k=k.trim(),k[k.length-1]==="/"&&(k=k.substring(0,k.length-1),C--),!o(k)){let G;return G=k.trim().length===0?"Invalid space after '<'.":"Tag '"+k+"' is an invalid name.",O("InvalidTag",G,L(p,C))}let U=h(p,C);if(U===!1)return O("InvalidAttr","Attributes for '"+k+"' have open quote.",L(p,C));let Q=U.value;if(C=U.index,Q[Q.length-1]==="/"){let G=C-Q.length;Q=Q.substring(0,Q.length-1);let fe=x(Q,m);if(fe!==!0)return O(fe.err.code,fe.err.msg,L(p,G+fe.err.line));A=!0}else if(I){if(!U.tagClosed)return O("InvalidTag","Closing tag '"+k+"' doesn't have proper closing.",L(p,C));if(Q.trim().length>0)return O("InvalidTag","Closing tag '"+k+"' can't have attributes or invalid starting.",L(p,P));if(w.length===0)return O("InvalidTag","Closing tag '"+k+"' has not been opened.",L(p,P));{let G=w.pop();if(k!==G.tagName){let fe=L(p,G.tagStartPos);return O("InvalidTag","Expected closing tag '"+G.tagName+"' (opened in line "+fe.line+", col "+fe.col+") instead of closing tag '"+k+"'.",L(p,P))}w.length==0&&(b=!0)}}else{let G=x(Q,m);if(G!==!0)return O(G.err.code,G.err.msg,L(p,C-Q.length+G.err.line));if(b===!0)return O("InvalidXml","Multiple possible root nodes found.",L(p,C));m.unpairedTags.indexOf(k)!==-1||w.push({tagName:k,tagStartPos:P}),A=!0}for(C++;C<p.length;C++)if(p[C]==="<"){if(p[C+1]==="!"){C++,C=f(p,C);continue}if(p[C+1]!=="?")break;if(C=d(p,++C),C.err)return C}else if(p[C]==="&"){let G=T(p,C);if(G==-1)return O("InvalidChar","char '&' is not expected.",L(p,C));C=G}else if(b===!0&&!u(p[C]))return O("InvalidXml","Extra text at the end",L(p,C));p[C]==="<"&&C--}}}return A?w.length==1?O("InvalidTag","Unclosed tag '"+w[0].tagName+"'.",L(p,w[0].tagStartPos)):!(w.length>0)||O("InvalidXml","Invalid '"+JSON.stringify(w.map(C=>C.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):O("InvalidXml","Start tag expected.",1)}function u(p){return p===" "||p==="	"||p===`
`||p==="\r"}function d(p,m){let w=m;for(;m<p.length;m++)if(!(p[m]!="?"&&p[m]!=" ")){let A=p.substr(w,m-w);if(m>5&&A==="xml")return O("InvalidXml","XML declaration allowed only at the start of the document.",L(p,m));if(p[m]=="?"&&p[m+1]==">"){m++;break}}return m}function f(p,m){if(p.length>m+5&&p[m+1]==="-"&&p[m+2]==="-"){for(m+=3;m<p.length;m++)if(p[m]==="-"&&p[m+1]==="-"&&p[m+2]===">"){m+=2;break}}else if(p.length>m+8&&p[m+1]==="D"&&p[m+2]==="O"&&p[m+3]==="C"&&p[m+4]==="T"&&p[m+5]==="Y"&&p[m+6]==="P"&&p[m+7]==="E"){let w=1;for(m+=8;m<p.length;m++)if(p[m]==="<")w++;else if(p[m]===">"&&(w--,w===0))break}else if(p.length>m+9&&p[m+1]==="["&&p[m+2]==="C"&&p[m+3]==="D"&&p[m+4]==="A"&&p[m+5]==="T"&&p[m+6]==="A"&&p[m+7]==="["){for(m+=8;m<p.length;m++)if(p[m]==="]"&&p[m+1]==="]"&&p[m+2]===">"){m+=2;break}}return m}let l='"',g="'";function h(p,m){let w="",A="",b=!1;for(;m<p.length;m++){if(p[m]===l||p[m]===g)A===""?A=p[m]:A!==p[m]||(A="");else if(p[m]===">"&&A===""){b=!0;break}w+=p[m]}return A===""&&{value:w,index:m,tagClosed:b}}let y=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function x(p,m){let w=s(p,y),A={};for(let b=0;b<w.length;b++){if(w[b][1].length===0)return O("InvalidAttr","Attribute '"+w[b][2]+"' has no space in starting.",j(w[b]));if(w[b][3]!==void 0&&w[b][4]===void 0)return O("InvalidAttr","Attribute '"+w[b][2]+"' is without value.",j(w[b]));if(w[b][3]===void 0&&!m.allowBooleanAttributes)return O("InvalidAttr","boolean attribute '"+w[b][2]+"' is not allowed.",j(w[b]));let C=w[b][2];if(!N(C))return O("InvalidAttr","Attribute '"+C+"' is an invalid name.",j(w[b]));if(A.hasOwnProperty(C))return O("InvalidAttr","Attribute '"+C+"' is repeated.",j(w[b]));A[C]=1}return!0}function T(p,m){if(p[++m]===";")return-1;if(p[m]==="#")return function(A,b){let C=/\d/;for(A[b]==="x"&&(b++,C=/[\da-fA-F]/);b<A.length;b++){if(A[b]===";")return b;if(!A[b].match(C))break}return-1}(p,++m);let w=0;for(;m<p.length;m++,w++)if(!(p[m].match(/\w/)&&w<20)){if(p[m]===";")break;return-1}return m}function O(p,m,w){return{err:{code:p,msg:m,line:w.line||w,col:w.col}}}function N(p){return o(p)}function L(p,m){let w=p.substring(0,m).split(/\r?\n/);return{line:w.length,col:w[w.length-1].length+1}}function j(p){return p.startIndex+p[1].length}let V={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(p,m){return m},attributeValueProcessor:function(p,m){return m},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(p,m,w){return p},captureMetaData:!1},ce;ce=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Ae{constructor(m){this.tagname=m,this.child=[],this[":@"]={}}add(m,w){m==="__proto__"&&(m="#__proto__"),this.child.push({[m]:w})}addChild(m,w){m.tagname==="__proto__"&&(m.tagname="#__proto__"),m[":@"]&&Object.keys(m[":@"]).length>0?this.child.push({[m.tagname]:m.child,":@":m[":@"]}):this.child.push({[m.tagname]:m.child}),w!==void 0&&(this.child[this.child.length-1][ce]={startIndex:w})}static getMetaDataSymbol(){return ce}}function Z(p,m){let w={};if(p[m+3]!=="O"||p[m+4]!=="C"||p[m+5]!=="T"||p[m+6]!=="Y"||p[m+7]!=="P"||p[m+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{m+=9;let A=1,b=!1,C=!1,P="";for(;m<p.length;m++)if(p[m]!=="<"||C)if(p[m]===">"){if(C?p[m-1]==="-"&&p[m-2]==="-"&&(C=!1,A--):A--,A===0)break}else p[m]==="["?b=!0:P+=p[m];else{if(b&&Us(p,"!ENTITY",m)){let I,k;m+=7,[I,k,m]=ve(p,m+1),k.indexOf("&")===-1&&(w[I]={regx:RegExp(`&${I};`,"g"),val:k})}else if(b&&Us(p,"!ELEMENT",m)){m+=8;let{index:I}=sj(p,m+1);m=I}else if(b&&Us(p,"!ATTLIST",m))m+=8;else if(b&&Us(p,"!NOTATION",m)){m+=9;let{index:I}=Ye(p,m+1);m=I}else{if(!Us(p,"!--",m))throw new Error("Invalid DOCTYPE");C=!0}A++,P=""}if(A!==0)throw new Error("Unclosed DOCTYPE")}return{entities:w,i:m}}let le=(p,m)=>{for(;m<p.length&&/\s/.test(p[m]);)m++;return m};function ve(p,m){m=le(p,m);let w="";for(;m<p.length&&!/\s/.test(p[m])&&p[m]!=='"'&&p[m]!=="'";)w+=p[m],m++;if(kh(w),m=le(p,m),p.substring(m,m+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(p[m]==="%")throw new Error("Parameter entities are not supported");let A="";return[m,A]=At(p,m,"entity"),[w,A,--m]}function Ye(p,m){m=le(p,m);let w="";for(;m<p.length&&!/\s/.test(p[m]);)w+=p[m],m++;kh(w),m=le(p,m);let A=p.substring(m,m+6).toUpperCase();if(A!=="SYSTEM"&&A!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${A}"`);m+=A.length,m=le(p,m);let b=null,C=null;if(A==="PUBLIC")[m,b]=At(p,m,"publicIdentifier"),p[m=le(p,m)]!=='"'&&p[m]!=="'"||([m,C]=At(p,m,"systemIdentifier"));else if(A==="SYSTEM"&&([m,C]=At(p,m,"systemIdentifier"),!C))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:w,publicIdentifier:b,systemIdentifier:C,index:--m}}function At(p,m,w){let A="",b=p[m];if(b!=='"'&&b!=="'")throw new Error(`Expected quoted string, found "${b}"`);for(m++;m<p.length&&p[m]!==b;)A+=p[m],m++;if(p[m]!==b)throw new Error(`Unterminated ${w} value`);return[++m,A]}function sj(p,m){m=le(p,m);let w="";for(;m<p.length&&!/\s/.test(p[m]);)w+=p[m],m++;if(!kh(w))throw new Error(`Invalid element name: "${w}"`);let A="";if(p[m=le(p,m)]==="E"&&Us(p,"MPTY",m))m+=4;else if(p[m]==="A"&&Us(p,"NY",m))m+=2;else{if(p[m]!=="(")throw new Error(`Invalid Element Expression, found "${p[m]}"`);for(m++;m<p.length&&p[m]!==")";)A+=p[m],m++;if(p[m]!==")")throw new Error("Unterminated content model")}return{elementName:w,contentModel:A.trim(),index:m}}function Us(p,m,w){for(let A=0;A<m.length;A++)if(m[A]!==p[w+A+1])return!1;return!0}function kh(p){if(o(p))return p;throw new Error(`Invalid entity name ${p}`)}let oj=/^[-+]?0x[a-fA-F0-9]+$/,ij=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,aj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},cj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Lv(p){return typeof p=="function"?p:Array.isArray(p)?m=>{for(let w of p)if(typeof w=="string"&&m===w||w instanceof RegExp&&w.test(m))return!0}:()=>!1}class uj{constructor(m){this.options=m,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(w,A)=>String.fromCodePoint(Number.parseInt(A,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(w,A)=>String.fromCodePoint(Number.parseInt(A,16))}},this.addExternalEntities=dj,this.parseXml=hj,this.parseTextData=lj,this.resolveNameSpace=fj,this.buildAttributesMap=mj,this.isItStopNode=_j,this.replaceEntitiesValue=yj,this.readStopNodeData=Ej,this.saveTextToParentTag=Sj,this.addChild=gj,this.ignoreAttributesFn=Lv(this.options.ignoreAttributes)}}function dj(p){let m=Object.keys(p);for(let w=0;w<m.length;w++){let A=m[w];this.lastEntities[A]={regex:new RegExp("&"+A+";","g"),val:p[A]}}}function lj(p,m,w,A,b,C,P){if(p!==void 0&&(this.options.trimValues&&!A&&(p=p.trim()),p.length>0)){P||(p=this.replaceEntitiesValue(p));let I=this.options.tagValueProcessor(m,p,w,b,C);return I==null?p:typeof I!=typeof p||I!==p?I:this.options.trimValues||p.trim()===p?Fv(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function fj(p){if(this.options.removeNSPrefix){let m=p.split(":"),w=p.charAt(0)==="/"?"/":"";if(m[0]==="xmlns")return"";m.length===2&&(p=w+m[1])}return p}let pj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function mj(p,m,w){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){let A=s(p,pj),b=A.length,C={};for(let P=0;P<b;P++){let I=this.resolveNameSpace(A[P][1]);if(this.ignoreAttributesFn(I,m))continue;let k=A[P][4],U=this.options.attributeNamePrefix+I;if(I.length)if(this.options.transformAttributeName&&(U=this.options.transformAttributeName(U)),U==="__proto__"&&(U="#__proto__"),k!==void 0){this.options.trimValues&&(k=k.trim()),k=this.replaceEntitiesValue(k);let Q=this.options.attributeValueProcessor(I,k,m);C[U]=Q==null?k:typeof Q!=typeof k||Q!==k?Q:Fv(k,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(C[U]=!0)}if(!Object.keys(C).length)return;if(this.options.attributesGroupName){let P={};return P[this.options.attributesGroupName]=C,P}return C}}let hj=function(p){p=p.replace(/\r\n?/g,`
`);let m=new Ae("!xml"),w=m,A="",b="";for(let C=0;C<p.length;C++)if(p[C]==="<")if(p[C+1]==="/"){let P=Bs(p,">",C,"Closing Tag is not closed."),I=p.substring(C+2,P).trim();if(this.options.removeNSPrefix){let Q=I.indexOf(":");Q!==-1&&(I=I.substr(Q+1))}this.options.transformTagName&&(I=this.options.transformTagName(I)),w&&(A=this.saveTextToParentTag(A,w,b));let k=b.substring(b.lastIndexOf(".")+1);if(I&&this.options.unpairedTags.indexOf(I)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${I}>`);let U=0;k&&this.options.unpairedTags.indexOf(k)!==-1?(U=b.lastIndexOf(".",b.lastIndexOf(".")-1),this.tagsNodeStack.pop()):U=b.lastIndexOf("."),b=b.substring(0,U),w=this.tagsNodeStack.pop(),A="",C=P}else if(p[C+1]==="?"){let P=Dh(p,C,!1,"?>");if(!P)throw new Error("Pi Tag is not closed.");if(A=this.saveTextToParentTag(A,w,b),!(this.options.ignoreDeclaration&&P.tagName==="?xml"||this.options.ignorePiTags)){let I=new Ae(P.tagName);I.add(this.options.textNodeName,""),P.tagName!==P.tagExp&&P.attrExpPresent&&(I[":@"]=this.buildAttributesMap(P.tagExp,b,P.tagName)),this.addChild(w,I,b,C)}C=P.closeIndex+1}else if(p.substr(C+1,3)==="!--"){let P=Bs(p,"-->",C+4,"Comment is not closed.");if(this.options.commentPropName){let I=p.substring(C+4,P-2);A=this.saveTextToParentTag(A,w,b),w.add(this.options.commentPropName,[{[this.options.textNodeName]:I}])}C=P}else if(p.substr(C+1,2)==="!D"){let P=Z(p,C);this.docTypeEntities=P.entities,C=P.i}else if(p.substr(C+1,2)==="!["){let P=Bs(p,"]]>",C,"CDATA is not closed.")-2,I=p.substring(C+9,P);A=this.saveTextToParentTag(A,w,b);let k=this.parseTextData(I,w.tagname,b,!0,!1,!0,!0);k==null&&(k=""),this.options.cdataPropName?w.add(this.options.cdataPropName,[{[this.options.textNodeName]:I}]):w.add(this.options.textNodeName,k),C=P+2}else{let P=Dh(p,C,this.options.removeNSPrefix),I=P.tagName,k=P.rawTagName,U=P.tagExp,Q=P.attrExpPresent,G=P.closeIndex;this.options.transformTagName&&(I=this.options.transformTagName(I)),w&&A&&w.tagname!=="!xml"&&(A=this.saveTextToParentTag(A,w,b,!1));let fe=w;fe&&this.options.unpairedTags.indexOf(fe.tagname)!==-1&&(w=this.tagsNodeStack.pop(),b=b.substring(0,b.lastIndexOf("."))),I!==m.tagname&&(b+=b?"."+I:I);let _e=C;if(this.isItStopNode(this.options.stopNodes,b,I)){let pe="";if(U.length>0&&U.lastIndexOf("/")===U.length-1)I[I.length-1]==="/"?(I=I.substr(0,I.length-1),b=b.substr(0,b.length-1),U=I):U=U.substr(0,U.length-1),C=P.closeIndex;else if(this.options.unpairedTags.indexOf(I)!==-1)C=P.closeIndex;else{let Tr=this.readStopNodeData(p,k,G+1);if(!Tr)throw new Error(`Unexpected end of ${k}`);C=Tr.i,pe=Tr.tagContent}let Ue=new Ae(I);I!==U&&Q&&(Ue[":@"]=this.buildAttributesMap(U,b,I)),pe&&(pe=this.parseTextData(pe,I,b,!0,Q,!0,!0)),b=b.substr(0,b.lastIndexOf(".")),Ue.add(this.options.textNodeName,pe),this.addChild(w,Ue,b,_e)}else{if(U.length>0&&U.lastIndexOf("/")===U.length-1){I[I.length-1]==="/"?(I=I.substr(0,I.length-1),b=b.substr(0,b.length-1),U=I):U=U.substr(0,U.length-1),this.options.transformTagName&&(I=this.options.transformTagName(I));let pe=new Ae(I);I!==U&&Q&&(pe[":@"]=this.buildAttributesMap(U,b,I)),this.addChild(w,pe,b,_e),b=b.substr(0,b.lastIndexOf("."))}else{let pe=new Ae(I);this.tagsNodeStack.push(w),I!==U&&Q&&(pe[":@"]=this.buildAttributesMap(U,b,I)),this.addChild(w,pe,b,_e),w=pe}A="",C=G}}else A+=p[C];return m.child};function gj(p,m,w,A){this.options.captureMetaData||(A=void 0);let b=this.options.updateTag(m.tagname,w,m[":@"]);b===!1||(typeof b=="string"&&(m.tagname=b),p.addChild(m,A))}let yj=function(p){if(this.options.processEntities){for(let m in this.docTypeEntities){let w=this.docTypeEntities[m];p=p.replace(w.regx,w.val)}for(let m in this.lastEntities){let w=this.lastEntities[m];p=p.replace(w.regex,w.val)}if(this.options.htmlEntities)for(let m in this.htmlEntities){let w=this.htmlEntities[m];p=p.replace(w.regex,w.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function Sj(p,m,w,A){return p&&(A===void 0&&(A=m.child.length===0),(p=this.parseTextData(p,m.tagname,w,!1,!!m[":@"]&&Object.keys(m[":@"]).length!==0,A))!==void 0&&p!==""&&m.add(this.options.textNodeName,p),p=""),p}function _j(p,m,w){let A="*."+w;for(let b in p){let C=p[b];if(A===C||m===C)return!0}return!1}function Bs(p,m,w,A){let b=p.indexOf(m,w);if(b===-1)throw new Error(A);return b+m.length-1}function Dh(p,m,w,A=">"){let b=function(G,fe,_e=">"){let pe,Ue="";for(let Tr=fe;Tr<G.length;Tr++){let Dn=G[Tr];if(pe)Dn===pe&&(pe="");else if(Dn==='"'||Dn==="'")pe=Dn;else if(Dn===_e[0]){if(!_e[1])return{data:Ue,index:Tr};if(G[Tr+1]===_e[1])return{data:Ue,index:Tr}}else Dn==="	"&&(Dn=" ");Ue+=Dn}}(p,m+1,A);if(!b)return;let C=b.data,P=b.index,I=C.search(/\s/),k=C,U=!0;I!==-1&&(k=C.substring(0,I),C=C.substring(I+1).trimStart());let Q=k;if(w){let G=k.indexOf(":");G!==-1&&(k=k.substr(G+1),U=k!==b.data.substr(G+1))}return{tagName:k,tagExp:C,closeIndex:P,attrExpPresent:U,rawTagName:Q}}function Ej(p,m,w){let A=w,b=1;for(;w<p.length;w++)if(p[w]==="<")if(p[w+1]==="/"){let C=Bs(p,">",w,`${m} is not closed`);if(p.substring(w+2,C).trim()===m&&(b--,b===0))return{tagContent:p.substring(A,w),i:C};w=C}else if(p[w+1]==="?")w=Bs(p,"?>",w+1,"StopNode is not closed.");else if(p.substr(w+1,3)==="!--")w=Bs(p,"-->",w+3,"StopNode is not closed.");else if(p.substr(w+1,2)==="![")w=Bs(p,"]]>",w,"StopNode is not closed.")-2;else{let C=Dh(p,w,">");C&&((C&&C.tagName)===m&&C.tagExp[C.tagExp.length-1]!=="/"&&b++,w=C.closeIndex)}}function Fv(p,m,w){if(m&&typeof p=="string"){let A=p.trim();return A==="true"||A!=="false"&&function(b,C={}){if(C=Object.assign({},aj,C),!b||typeof b!="string")return b;let P=b.trim();if(C.skipLike!==void 0&&C.skipLike.test(P))return b;if(b==="0")return 0;if(C.hex&&oj.test(P))return function(k){if(parseInt)return parseInt(k,16);if(Number.parseInt)return Number.parseInt(k,16);if(window&&window.parseInt)return window.parseInt(k,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(P);if(P.search(/.+[eE].+/)!==-1)return function(k,U,Q){if(!Q.eNotation)return k;let G=U.match(cj);if(G){let fe=G[1]||"",_e=G[3].indexOf("e")===-1?"E":"e",pe=G[2],Ue=fe?k[pe.length+1]===_e:k[pe.length]===_e;return pe.length>1&&Ue?k:pe.length!==1||!G[3].startsWith(`.${_e}`)&&G[3][0]!==_e?Q.leadingZeros&&!Ue?(U=(G[1]||"")+G[3],Number(U)):k:Number(U)}return k}(b,P,C);{let k=ij.exec(P);if(k){let U=k[1]||"",Q=k[2],G=((I=k[3])&&I.indexOf(".")!==-1&&((I=I.replace(/0+$/,""))==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substring(0,I.length-1))),I),fe=U?b[Q.length+1]===".":b[Q.length]===".";if(!C.leadingZeros&&(Q.length>1||Q.length===1&&!fe))return b;{let _e=Number(P),pe=String(_e);if(_e===0||_e===-0)return _e;if(pe.search(/[eE]/)!==-1)return C.eNotation?_e:b;if(P.indexOf(".")!==-1)return pe==="0"||pe===G||pe===`${U}${G}`?_e:b;let Ue=Q?G:P;return Q?Ue===pe||U+Ue===pe?_e:b:Ue===pe||Ue===U+pe?_e:b}}return b}var I}(p,w)}return p!==void 0?p:""}let Mh=Ae.getMetaDataSymbol();function wj(p,m){return jv(p,m)}function jv(p,m,w){let A,b={};for(let C=0;C<p.length;C++){let P=p[C],I=vj(P),k="";if(k=w===void 0?I:w+"."+I,I===m.textNodeName)A===void 0?A=P[I]:A+=""+P[I];else{if(I===void 0)continue;if(P[I]){let U=jv(P[I],m,k),Q=xj(U,m);P[Mh]!==void 0&&(U[Mh]=P[Mh]),P[":@"]?bj(U,P[":@"],k,m):Object.keys(U).length!==1||U[m.textNodeName]===void 0||m.alwaysCreateTextNode?Object.keys(U).length===0&&(m.alwaysCreateTextNode?U[m.textNodeName]="":U=""):U=U[m.textNodeName],b[I]!==void 0&&b.hasOwnProperty(I)?(Array.isArray(b[I])||(b[I]=[b[I]]),b[I].push(U)):m.isArray(I,k,Q)?b[I]=[U]:b[I]=U}}}return typeof A=="string"?A.length>0&&(b[m.textNodeName]=A):A!==void 0&&(b[m.textNodeName]=A),b}function vj(p){let m=Object.keys(p);for(let w=0;w<m.length;w++){let A=m[w];if(A!==":@")return A}}function bj(p,m,w,A){if(m){let b=Object.keys(m),C=b.length;for(let P=0;P<C;P++){let I=b[P];A.isArray(I,w+"."+I,!0,!0)?p[I]=[m[I]]:p[I]=m[I]}}}function xj(p,m){let{textNodeName:w}=m,A=Object.keys(p).length;return A===0||!(A!==1||!p[w]&&typeof p[w]!="boolean"&&p[w]!==0)}class Cj{constructor(m){this.externalEntities={},this.options=function(w){return Object.assign({},V,w)}(m)}parse(m,w){if(typeof m!="string"){if(!m.toString)throw new Error("XML data is accepted in String or Bytes[] form.");m=m.toString()}if(w){w===!0&&(w={});let C=a(m,w);if(C!==!0)throw Error(`${C.err.msg}:${C.err.line}:${C.err.col}`)}let A=new uj(this.options);A.addExternalEntities(this.externalEntities);let b=A.parseXml(m);return this.options.preserveOrder||b===void 0?b:wj(b,this.options)}addEntity(m,w){if(w.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(m.indexOf("&")!==-1||m.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(w==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[m]=w}static getMetaDataSymbol(){return Ae.getMetaDataSymbol()}}function Aj(p,m){let w="";return m.format&&m.indentBy.length>0&&(w=`
`),Hv(p,m,"",w)}function Hv(p,m,w,A){let b="",C=!1;for(let P=0;P<p.length;P++){let I=p[P],k=Tj(I);if(k===void 0)continue;let U="";if(U=w.length===0?k:`${w}.${k}`,k===m.textNodeName){let _e=I[k];Rj(U,m)||(_e=m.tagValueProcessor(k,_e),_e=Gv(_e,m)),C&&(b+=A),b+=_e,C=!1;continue}if(k===m.cdataPropName){C&&(b+=A),b+=`<![CDATA[${I[k][0][m.textNodeName]}]]>`,C=!1;continue}if(k===m.commentPropName){b+=A+`<!--${I[k][0][m.textNodeName]}-->`,C=!0;continue}if(k[0]==="?"){let _e=qv(I[":@"],m),pe=k==="?xml"?"":A,Ue=I[k][0][m.textNodeName];Ue=Ue.length!==0?" "+Ue:"",b+=pe+`<${k}${Ue}${_e}?>`,C=!0;continue}let Q=A;Q!==""&&(Q+=m.indentBy);let G=A+`<${k}${qv(I[":@"],m)}`,fe=Hv(I[k],m,U,Q);m.unpairedTags.indexOf(k)!==-1?m.suppressUnpairedNode?b+=G+">":b+=G+"/>":fe&&fe.length!==0||!m.suppressEmptyNode?fe&&fe.endsWith(">")?b+=G+`>${fe}${A}</${k}>`:(b+=G+">",fe&&A!==""&&(fe.includes("/>")||fe.includes("</"))?b+=A+m.indentBy+fe+A:b+=fe,b+=`</${k}>`):b+=G+"/>",C=!0}return b}function Tj(p){let m=Object.keys(p);for(let w=0;w<m.length;w++){let A=m[w];if(p.hasOwnProperty(A)&&A!==":@")return A}}function qv(p,m){let w="";if(p&&!m.ignoreAttributes)for(let A in p){if(!p.hasOwnProperty(A))continue;let b=m.attributeValueProcessor(A,p[A]);b=Gv(b,m),b===!0&&m.suppressBooleanAttributes?w+=` ${A.substr(m.attributeNamePrefix.length)}`:w+=` ${A.substr(m.attributeNamePrefix.length)}="${b}"`}return w}function Rj(p,m){let w=(p=p.substr(0,p.length-m.textNodeName.length-1)).substr(p.lastIndexOf(".")+1);for(let A in m.stopNodes)if(m.stopNodes[A]===p||m.stopNodes[A]==="*."+w)return!0;return!1}function Gv(p,m){if(p&&p.length>0&&m.processEntities)for(let w=0;w<m.entities.length;w++){let A=m.entities[w];p=p.replace(A.regex,A.val)}return p}let Ij={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(p,m){return m},attributeValueProcessor:function(p,m){return m},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function kn(p){this.options=Object.assign({},Ij,p),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Lv(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Nj),this.processTextOrObjNode=Oj,this.options.format?(this.indentate=Pj,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function Oj(p,m,w,A){let b=this.j2x(p,w+1,A.concat(m));return p[this.options.textNodeName]!==void 0&&Object.keys(p).length===1?this.buildTextValNode(p[this.options.textNodeName],m,b.attrStr,w):this.buildObjectNode(b.val,m,b.attrStr,w)}function Pj(p){return this.options.indentBy.repeat(p)}function Nj(p){return!(!p.startsWith(this.options.attributeNamePrefix)||p===this.options.textNodeName)&&p.substr(this.attrPrefixLen)}kn.prototype.build=function(p){return this.options.preserveOrder?Aj(p,this.options):(Array.isArray(p)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(p={[this.options.arrayNodeName]:p}),this.j2x(p,0,[]).val)},kn.prototype.j2x=function(p,m,w){let A="",b="",C=w.join(".");for(let P in p)if(Object.prototype.hasOwnProperty.call(p,P))if(p[P]===void 0)this.isAttribute(P)&&(b+="");else if(p[P]===null)this.isAttribute(P)||P===this.options.cdataPropName?b+="":P[0]==="?"?b+=this.indentate(m)+"<"+P+"?"+this.tagEndChar:b+=this.indentate(m)+"<"+P+"/"+this.tagEndChar;else if(p[P]instanceof Date)b+=this.buildTextValNode(p[P],P,"",m);else if(typeof p[P]!="object"){let I=this.isAttribute(P);if(I&&!this.ignoreAttributesFn(I,C))A+=this.buildAttrPairStr(I,""+p[P]);else if(!I)if(P===this.options.textNodeName){let k=this.options.tagValueProcessor(P,""+p[P]);b+=this.replaceEntitiesValue(k)}else b+=this.buildTextValNode(p[P],P,"",m)}else if(Array.isArray(p[P])){let I=p[P].length,k="",U="";for(let Q=0;Q<I;Q++){let G=p[P][Q];if(G!==void 0)if(G===null)P[0]==="?"?b+=this.indentate(m)+"<"+P+"?"+this.tagEndChar:b+=this.indentate(m)+"<"+P+"/"+this.tagEndChar;else if(typeof G=="object")if(this.options.oneListGroup){let fe=this.j2x(G,m+1,w.concat(P));k+=fe.val,this.options.attributesGroupName&&G.hasOwnProperty(this.options.attributesGroupName)&&(U+=fe.attrStr)}else k+=this.processTextOrObjNode(G,P,m,w);else if(this.options.oneListGroup){let fe=this.options.tagValueProcessor(P,G);fe=this.replaceEntitiesValue(fe),k+=fe}else k+=this.buildTextValNode(G,P,"",m)}this.options.oneListGroup&&(k=this.buildObjectNode(k,P,U,m)),b+=k}else if(this.options.attributesGroupName&&P===this.options.attributesGroupName){let I=Object.keys(p[P]),k=I.length;for(let U=0;U<k;U++)A+=this.buildAttrPairStr(I[U],""+p[P][I[U]])}else b+=this.processTextOrObjNode(p[P],P,m,w);return{attrStr:A,val:b}},kn.prototype.buildAttrPairStr=function(p,m){return m=this.options.attributeValueProcessor(p,""+m),m=this.replaceEntitiesValue(m),this.options.suppressBooleanAttributes&&m==="true"?" "+p:" "+p+'="'+m+'"'},kn.prototype.buildObjectNode=function(p,m,w,A){if(p==="")return m[0]==="?"?this.indentate(A)+"<"+m+w+"?"+this.tagEndChar:this.indentate(A)+"<"+m+w+this.closeTag(m)+this.tagEndChar;{let b="</"+m+this.tagEndChar,C="";return m[0]==="?"&&(C="?",b=""),!w&&w!==""||p.indexOf("<")!==-1?this.options.commentPropName!==!1&&m===this.options.commentPropName&&C.length===0?this.indentate(A)+`<!--${p}-->`+this.newLine:this.indentate(A)+"<"+m+w+C+this.tagEndChar+p+this.indentate(A)+b:this.indentate(A)+"<"+m+w+C+">"+p+b}},kn.prototype.closeTag=function(p){let m="";return this.options.unpairedTags.indexOf(p)!==-1?this.options.suppressUnpairedNode||(m="/"):m=this.options.suppressEmptyNode?"/":`></${p}`,m},kn.prototype.buildTextValNode=function(p,m,w,A){if(this.options.cdataPropName!==!1&&m===this.options.cdataPropName)return this.indentate(A)+`<![CDATA[${p}]]>`+this.newLine;if(this.options.commentPropName!==!1&&m===this.options.commentPropName)return this.indentate(A)+`<!--${p}-->`+this.newLine;if(m[0]==="?")return this.indentate(A)+"<"+m+w+"?"+this.tagEndChar;{let b=this.options.tagValueProcessor(m,p);return b=this.replaceEntitiesValue(b),b===""?this.indentate(A)+"<"+m+w+this.closeTag(m)+this.tagEndChar:this.indentate(A)+"<"+m+w+">"+b+"</"+m+this.tagEndChar}},kn.prototype.replaceEntitiesValue=function(p){if(p&&p.length>0&&this.options.processEntities)for(let m=0;m<this.options.entities.length;m++){let w=this.options.entities[m];p=p.replace(w.regex,w.val)}return p};let kj={validate:a};jT.exports=e})()});var HT=R(OS=>{"use strict";c();Object.defineProperty(OS,"__esModule",{value:!0});OS.parseXML=M6;var D6=RS(),IS=new D6.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});IS.addEntity("#xD","\r");IS.addEntity("#10",`
`);function M6(t){return IS.parse(t,!0)}});var vl=R(wl=>{"use strict";c();var $6=HT();function U6(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function B6(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var El=class{value;constructor(e){this.value=e}toString(){return B6(""+this.value)}},PS=class t{name;children;attributes={};static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new El(r)),n!==void 0&&s.withName(n),s}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(e,r,n,s){if(e[r]!=null){let o=s(),i=new t(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${U6(""+o)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(wl,"parseXML",{enumerable:!0,get:function(){return $6.parseXML}});wl.XmlNode=PS;wl.XmlText=El});var qT,GT,zT,Kn,bl=S(()=>{c();qT=v(vl());Re();J();GT=v(z()),zT=v(Ce());zn();bS();Kn=class extends st{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new ln(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){let s=M.of(e),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},f=Object.keys(o)[0];return o[f].isBlobSchema()?d[f]=r:d[f]=this.read(o[f],r),d}let a=(this.serdeContext?.utf8Encoder??zT.toUtf8)(r),u=this.parseXml(a);return this.readSchema(e,n?u[n]:u)}readSchema(e,r){let n=M.of(e);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let u=n.getValueSchema(),d=[],f=u.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[f],g=Array.isArray(l)?l:[l];for(let h of g)(h!=null||o)&&d.push(this.readSchema(u,h));return d}let a={};if(n.isMapSchema()){let u=n.getKeySchema(),d=n.getValueSchema(),f;i?f=Array.isArray(r)?r:[r]:f=Array.isArray(r.entry)?r.entry:[r.entry];let l=u.getMergedTraits().xmlName??"key",g=d.getMergedTraits().xmlName??"value";for(let h of f){let y=h[l],x=h[g];(x!=null||o)&&(a[y]=this.readSchema(d,x))}return a}if(n.isStructSchema()){let u=n.isUnionSchema(),d;u&&(d=new si(r,a));for(let[f,l]of n.structIterator()){let g=l.getMergedTraits(),h=g.httpPayload?g.xmlName??l.getName():l.getMemberTraits().xmlName??f;u&&d.mark(h),r[h]!=null&&(a[f]=this.readSchema(l,r[h]))}return u&&d.writeUnknown(),a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=(0,qT.parseXML)(e)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:e}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,GT.getValueFromTextNode)(o)}return{}}}});var VT,WT,xl,KT=S(()=>{c();Re();J();Me();VT=v(z()),WT=v(Ws());zn();Va();xl=class extends st{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");let s=M.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??WT.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Ge.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof te?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),$e(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,VT.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(s.isDocumentSchema())Array.isArray(r)?this.write(79,r,n):r instanceof Date?this.write(4,r,n):r instanceof Uint8Array?this.write(21,r,n):r&&typeof r=="object"?this.write(143,r,n):(this.writeKey(n),this.writeValue(String(r)));else if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let u of r){if(u==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),f=i?`${n}${a}`:`${n}${d}.${a}`;this.write(o,u,f),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,u=1;for(let[d,f]of Object.entries(r)){if(f==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),g=a?`${n}${u}.${l}`:`${n}entry.${u}.${l}`,h=this.getKey("value",i.getMergedTraits().xmlName),y=a?`${n}${u}.${h}`:`${n}entry.${u}.${h}`;this.write(o,d,g),this.write(i,f,y),++u}}}else if(s.isStructSchema()){if(r&&typeof r=="object"){let o=!1;for(let[i,a]of ni(s,r)){if(r[i]==null&&!a.isIdempotencyToken())continue;let u=this.getKey(i,a.getMergedTraits().xmlName),d=`${n}${u}`;this.write(a,r[i],d),o=!0}if(!o&&s.isUnionSchema()){let{$unknown:i}=r;if(Array.isArray(i)){let[a,u]=i,d=`${n}${a}`;this.write(15,u,d)}}}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${Dt(e)}=`}writeValue(e){this.buffer+=Dt(e)}}});var ui,NS=S(()=>{c();Re();J();ri();bl();KT();ui=class extends Mt{options;serializer;deserializer;mixin=new qt;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new xl(r),this.deserializer=new Kn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(yt(e.input)==="unit"||!s.body)&&(s.body="");let o=e.name.split("#")[1]??e.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){let s=this.deserializer,o=M.of(e.output),i={};if(n.statusCode>=300){let l=await gt(n.body,r);l.byteLength>0&&Object.assign(i,await s.read(15,l)),await this.handleError(e,r,n,i,this.deserializeMetadata(n))}for(let l in n.headers){let g=n.headers[l];delete n.headers[l],n.headers[l.toLowerCase()]=g}let a=e.name.split("#")[1]??e.name,u=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await gt(n.body,r);return d.byteLength>0&&Object.assign(i,await s.read(o,d,u)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(e,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),u=this.loadQueryErrorMessage(s);a.message=u,a.Error={Type:a.Type,Code:a.Code,Message:u};let{errorSchema:d,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,this.mixin.findQueryCompatibleError),l=M.of(d),g=B.for(d[1]).getErrorCtor(d)??Error,h=new g(u),y={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[x,T]of l.structIterator()){let O=T.getMergedTraits().xmlName??x,N=a[O]??s[O];y[x]=this.deserializer.readSchema(T,N)}throw this.mixin.decorateServiceException(Object.assign(h,f,{$fault:l.getMergedTraits().error,message:u},y),s)}loadQueryErrorCode(e,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Cl,YT=S(()=>{c();NS();Cl=class extends ui{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var XT,QT,kS,JT,Al,DS=S(()=>{c();XT=v(vl()),QT=v(z());xS();kS=(t,e)=>ml(t,e).then(r=>{if(r.length){let n;try{n=(0,XT.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,QT.getValueFromTextNode)(i)}return{}}),JT=async(t,e)=>{let r=await kS(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Al=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var _t,MS,Tl,di,$S=S(()=>{c();_t=v(vl());Re();J();Me();MS=v(z()),Tl=v(Ws());zn();Va();di=class extends st{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let n=M.of(e);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Tl.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,n){let s=e.getMergedTraits(),o=e.isMemberSchema()&&!s.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():s.xmlName??e.getName();if(!o||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let i=_t.XmlNode.of(o),[a,u]=this.getXmlnsAttribute(e,n);for(let[f,l]of ni(e,r)){let g=r[f];if(g!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){i.addAttribute(l.getMergedTraits().xmlName??f,this.writeSimple(l,g));continue}if(l.isListSchema())this.writeList(l,g,i,u);else if(l.isMapSchema())this.writeMap(l,g,i,u);else if(l.isStructSchema())i.addChildNode(this.writeStruct(l,g,u));else{let h=_t.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,g,h,u),i.addChildNode(h)}}}let{$unknown:d}=r;if(d&&e.isUnionSchema()&&Array.isArray(d)&&Object.keys(r).length===1){let[f,l]=d,g=_t.XmlNode.of(f);if(typeof l!="string")if(r instanceof _t.XmlNode||r instanceof _t.XmlText)i.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,l,g,u),i.addChildNode(g)}return u&&i.addAttribute(a,u),i}writeList(e,r,n,s){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let o=e.getMergedTraits(),i=e.getValueSchema(),a=i.getMergedTraits(),u=!!a.sparse,d=!!o.xmlFlattened,[f,l]=this.getXmlnsAttribute(e,s),g=(h,y)=>{if(i.isListSchema())this.writeList(i,Array.isArray(y)?y:[y],h,l);else if(i.isMapSchema())this.writeMap(i,y,h,l);else if(i.isStructSchema()){let x=this.writeStruct(i,y,l);h.addChildNode(x.withName(d?o.xmlName??e.getMemberName():a.xmlName??"member"))}else{let x=_t.XmlNode.of(d?o.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,y,x,l),h.addChildNode(x)}};if(d)for(let h of r)(u||h!=null)&&g(n,h);else{let h=_t.XmlNode.of(o.xmlName??e.getMemberName());l&&h.addAttribute(f,l);for(let y of r)(u||y!=null)&&g(h,y);n.addChildNode(h)}}writeMap(e,r,n,s,o=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getKeySchema(),d=a.getMergedTraits().xmlName??"key",f=e.getValueSchema(),l=f.getMergedTraits(),g=l.xmlName??"value",h=!!l.sparse,y=!!i.xmlFlattened,[x,T]=this.getXmlnsAttribute(e,s),O=(N,L,j)=>{let V=_t.XmlNode.of(d,L),[ce,Ae]=this.getXmlnsAttribute(a,T);Ae&&V.addAttribute(ce,Ae),N.addChildNode(V);let Z=_t.XmlNode.of(g);f.isListSchema()?this.writeList(f,j,Z,T):f.isMapSchema()?this.writeMap(f,j,Z,T,!0):f.isStructSchema()?Z=this.writeStruct(f,j,T):this.writeSimpleInto(f,j,Z,T),N.addChildNode(Z)};if(y){for(let[N,L]of Object.entries(r))if(h||L!=null){let j=_t.XmlNode.of(i.xmlName??e.getMemberName());O(j,N,L),n.addChildNode(j)}}else{let N;o||(N=_t.XmlNode.of(i.xmlName??e.getMemberName()),T&&N.addAttribute(x,T),n.addChildNode(N));for(let[L,j]of Object.entries(r))if(h||j!=null){let V=_t.XmlNode.of("entry");O(V,L,j),(o?n:N).addChildNode(V)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=M.of(e),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??Tl.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch($e(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,MS.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,MS.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof te?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,Ge.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(e,r,n,s){let o=this.writeSimple(e,r),i=M.of(e),a=new _t.XmlText(o),[u,d]=this.getXmlnsAttribute(i,s);d&&n.addAttribute(u,d),n.addChildNode(a)}getXmlnsAttribute(e,r){let n=e.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var li,US=S(()=>{c();zn();bl();$S();li=class extends st{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new di(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Kn(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Rl,ZT=S(()=>{c();Re();J();ri();DS();US();Rl=class extends dr{codec;serializer;deserializer;mixin=new qt;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new li(r),this.serializer=new fr(this.codec.createSerializer(),r),this.deserializer=new lr(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=M.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return typeof s.body=="string"&&s.headers["content-type"]===this.getDefaultContentType()&&!s.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=Al(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),d=M.of(a),f=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[y,x]of d.structIterator()){let T=x.getMergedTraits().xmlName??y,O=s.Error?.[T]??s[T];h[y]=this.codec.createDeserializer().readSchema(x,O)}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(let[,r]of e.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var eR={};Be(eR,{AwsEc2QueryProtocol:()=>Cl,AwsJson1_0Protocol:()=>Sl,AwsJson1_1Protocol:()=>_l,AwsJsonRpcProtocol:()=>Wn,AwsQueryProtocol:()=>ui,AwsRestJsonProtocol:()=>ci,AwsRestXmlProtocol:()=>Rl,AwsSmithyRpcV2CborProtocol:()=>ll,JsonCodec:()=>Vn,JsonShapeDeserializer:()=>ii,JsonShapeSerializer:()=>ai,XmlCodec:()=>li,XmlShapeDeserializer:()=>Kn,XmlShapeSerializer:()=>di,_toBool:()=>_T,_toNum:()=>ET,_toStr:()=>ST,awsExpectUnion:()=>LT,loadRestJsonErrorCode:()=>oi,loadRestXmlErrorCode:()=>Al,parseJsonBody:()=>Wa,parseJsonErrorBody:()=>PT,parseXmlBody:()=>kS,parseXmlErrorBody:()=>JT});var Il=S(()=>{c();yT();wT();MT();$T();yl();UT();gl();CS();TS();FT();Ka();YT();NS();ZT();US();bl();$S();DS()});var Ya={};Be(Ya,{AWSSDKSigV4Signer:()=>Ry,AwsEc2QueryProtocol:()=>Cl,AwsJson1_0Protocol:()=>Sl,AwsJson1_1Protocol:()=>_l,AwsJsonRpcProtocol:()=>Wn,AwsQueryProtocol:()=>ui,AwsRestJsonProtocol:()=>ci,AwsRestXmlProtocol:()=>Rl,AwsSdkSigV4ASigner:()=>La,AwsSdkSigV4Signer:()=>Nr,AwsSmithyRpcV2CborProtocol:()=>ll,JsonCodec:()=>Vn,JsonShapeDeserializer:()=>ii,JsonShapeSerializer:()=>ai,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Kd,NODE_SIGV4A_CONFIG_OPTIONS:()=>mA,XmlCodec:()=>li,XmlShapeDeserializer:()=>Kn,XmlShapeSerializer:()=>di,_toBool:()=>_T,_toNum:()=>ET,_toStr:()=>ST,awsExpectUnion:()=>LT,emitWarningIfUnsupportedVersion:()=>Gd,getBearerTokenEnvKey:()=>Wd,loadRestJsonErrorCode:()=>oi,loadRestXmlErrorCode:()=>Al,parseJsonBody:()=>Wa,parseJsonErrorBody:()=>PT,parseXmlBody:()=>kS,parseXmlErrorBody:()=>JT,resolveAWSSDKSigV4Config:()=>jA,resolveAwsSdkSigV4AConfig:()=>pA,resolveAwsSdkSigV4Config:()=>Fa,setCredentialFeature:()=>zd,setFeature:()=>XC,setTokenFeature:()=>JC,state:()=>qd,validateSigningProperties:()=>Xo});var Yn=S(()=>{c();Vd();Ky();Il()});var Pl=R(fi=>{"use strict";c();var L6=(Ie(),Y(Or)),F6=pn(),j6=ie(),Dr=(Yn(),Y(Ya)),sR=void 0;function H6(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function q6(t){let e=L6.normalizeProvider(t.userAgentAppId??sR),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!H6(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var G6=/\d{12}\.ddb/;async function z6(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Dr.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let o=await e.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Dr.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):Dr.setFeature(t,"RETRY_MODE_STANDARD","E"):Dr.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let o=t.endpointV2;switch(String(o?.url?.hostname).match(G6)&&Dr.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Dr.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Dr.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Dr.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&Dr.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Dr.setFeature(t,i,a)}}var tR="user-agent",BS="x-amz-user-agent",rR=" ",LS="/",V6=/[^!$%&'*+\-.^_`|~\w]/g,W6=/[^!$%&'*+\-.^_`|~\w#]/g,nR="-",K6=1024;function Y6(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=K6){e.length?e+=","+n:e+=n;continue}break}return e}var oR=t=>(e,r)=>async n=>{let{request:s}=n;if(!j6.HttpRequest.isInstance(s))return e(n);let{headers:o}=s,i=r?.userAgent?.map(Ol)||[],a=(await t.defaultUserAgentProvider()).map(Ol);await z6(r,t,n);let u=r;a.push(`m/${Y6(Object.assign({},r.__smithy_context?.features,u.__aws_sdk_context?.features))}`);let d=t?.customUserAgent?.map(Ol)||[],f=await t.userAgentAppId();f&&a.push(Ol(["app",`${f}`]));let l=F6.getUserAgentPrefix(),g=(l?[l]:[]).concat([...a,...i,...d]).join(rR),h=[...a.filter(y=>y.startsWith("aws-sdk-")),...d].join(rR);return t.runtime!=="browser"?(h&&(o[BS]=o[BS]?`${o[tR]} ${h}`:h),o[tR]=g):o[BS]=g,e({...n,request:s})},Ol=t=>{let e=t[0].split(LS).map(i=>i.replace(V6,nR)).join(LS),r=t[1]?.replace(W6,nR),n=e.indexOf(LS),s=e.substring(0,n),o=e.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,u)=>{switch(u){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},iR={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},X6=t=>({applyToStack:e=>{e.add(oR(t),iR)}});fi.DEFAULT_UA_APP_ID=sR;fi.getUserAgentMiddlewareOptions=iR;fi.getUserAgentPlugin=X6;fi.resolveUserAgentConfig=q6;fi.userAgentMiddleware=oR});var uR=R((r_e,cR)=>{c();var Nl=Object.defineProperty,Q6=Object.getOwnPropertyDescriptor,J6=Object.getOwnPropertyNames,Z6=Object.prototype.hasOwnProperty,ez=(t,e)=>Nl(t,"name",{value:e,configurable:!0}),tz=(t,e)=>{for(var r in e)Nl(t,r,{get:e[r],enumerable:!0})},rz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of J6(e))!Z6.call(t,s)&&s!==r&&Nl(t,s,{get:()=>e[s],enumerable:!(n=Q6(e,s))||n.enumerable});return t},nz=t=>rz(Nl({},"__esModule",{value:!0}),t),aR={};tz(aR,{isArrayBuffer:()=>sz});cR.exports=nz(aR);var sz=ez(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer")});var pR=R((s_e,fR)=>{c();var kl=Object.defineProperty,oz=Object.getOwnPropertyDescriptor,iz=Object.getOwnPropertyNames,az=Object.prototype.hasOwnProperty,dR=(t,e)=>kl(t,"name",{value:e,configurable:!0}),cz=(t,e)=>{for(var r in e)kl(t,r,{get:e[r],enumerable:!0})},uz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of iz(e))!az.call(t,s)&&s!==r&&kl(t,s,{get:()=>e[s],enumerable:!(n=oz(e,s))||n.enumerable});return t},dz=t=>uz(kl({},"__esModule",{value:!0}),t),lR={};cz(lR,{fromArrayBuffer:()=>fz,fromString:()=>pz});fR.exports=dz(lR);var lz=uR(),FS=ee("buffer"),fz=dR((t,e=0,r=t.byteLength-e)=>{if(!(0,lz.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return FS.Buffer.from(t,e,r)},"fromArrayBuffer"),pz=dR((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?FS.Buffer.from(t,e):FS.Buffer.from(t)},"fromString")});var SR=R((i_e,yR)=>{c();var Dl=Object.defineProperty,mz=Object.getOwnPropertyDescriptor,hz=Object.getOwnPropertyNames,gz=Object.prototype.hasOwnProperty,jS=(t,e)=>Dl(t,"name",{value:e,configurable:!0}),yz=(t,e)=>{for(var r in e)Dl(t,r,{get:e[r],enumerable:!0})},Sz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of hz(e))!gz.call(t,s)&&s!==r&&Dl(t,s,{get:()=>e[s],enumerable:!(n=mz(e,s))||n.enumerable});return t},_z=t=>Sz(Dl({},"__esModule",{value:!0}),t),mR={};yz(mR,{fromUtf8:()=>gR,toUint8Array:()=>Ez,toUtf8:()=>wz});yR.exports=_z(mR);var hR=pR(),gR=jS(t=>{let e=(0,hR.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),Ez=jS(t=>typeof t=="string"?gR(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array"),wz=jS(t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,hR.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8")},"toUtf8")});var _R=R(Ml=>{"use strict";c();Object.defineProperty(Ml,"__esModule",{value:!0});Ml.convertToBuffer=void 0;var vz=SR(),bz=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:vz.fromUtf8;function xz(t){return t instanceof Uint8Array?t:typeof t=="string"?bz(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}Ml.convertToBuffer=xz});var ER=R($l=>{"use strict";c();Object.defineProperty($l,"__esModule",{value:!0});$l.isEmptyData=void 0;function Cz(t){return typeof t=="string"?t.length===0:t.byteLength===0}$l.isEmptyData=Cz});var wR=R(Ul=>{"use strict";c();Object.defineProperty(Ul,"__esModule",{value:!0});Ul.numToUint8=void 0;function Az(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}Ul.numToUint8=Az});var vR=R(Bl=>{"use strict";c();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.uint32ArrayFrom=void 0;function Tz(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}Bl.uint32ArrayFrom=Tz});var Ll=R(Mr=>{"use strict";c();Object.defineProperty(Mr,"__esModule",{value:!0});Mr.uint32ArrayFrom=Mr.numToUint8=Mr.isEmptyData=Mr.convertToBuffer=void 0;var Rz=_R();Object.defineProperty(Mr,"convertToBuffer",{enumerable:!0,get:function(){return Rz.convertToBuffer}});var Iz=ER();Object.defineProperty(Mr,"isEmptyData",{enumerable:!0,get:function(){return Iz.isEmptyData}});var Oz=wR();Object.defineProperty(Mr,"numToUint8",{enumerable:!0,get:function(){return Oz.numToUint8}});var Pz=vR();Object.defineProperty(Mr,"uint32ArrayFrom",{enumerable:!0,get:function(){return Pz.uint32ArrayFrom}})});var CR=R(Fl=>{"use strict";c();Object.defineProperty(Fl,"__esModule",{value:!0});Fl.AwsCrc32=void 0;var bR=(un(),Y(cn)),HS=Ll(),xR=qS(),Nz=function(){function t(){this.crc32=new xR.Crc32}return t.prototype.update=function(e){(0,HS.isEmptyData)(e)||this.crc32.update((0,HS.convertToBuffer)(e))},t.prototype.digest=function(){return bR.__awaiter(this,void 0,void 0,function(){return bR.__generator(this,function(e){return[2,(0,HS.numToUint8)(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new xR.Crc32},t}();Fl.AwsCrc32=Nz});var qS=R(Xn=>{"use strict";c();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.AwsCrc32=Xn.Crc32=Xn.crc32=void 0;var kz=(un(),Y(cn)),Dz=Ll();function Mz(t){return new AR().update(t).digest()}Xn.crc32=Mz;var AR=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=kz.__values(e),o=s.next();!o.done;o=s.next()){var i=o.value;this.checksum=this.checksum>>>8^Uz[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();Xn.Crc32=AR;var $z=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Uz=(0,Dz.uint32ArrayFrom)($z),Bz=CR();Object.defineProperty(Xn,"AwsCrc32",{enumerable:!0,get:function(){return Bz.AwsCrc32}})});var Hl=R(Jn=>{"use strict";c();var IR=qS(),Ks=wa(),pi=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&TR(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&TR(e),parseInt(Ks.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function TR(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var jl=class{toUtf8;fromUtf8;constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){let r=[];for(let o of Object.keys(e)){let i=this.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=this.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);let d=new Uint8Array(u.buffer);return d.set(a,3),d;case"timestamp":let f=new Uint8Array(9);return f[0]=8,f.set(pi.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!Wz.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(Ks.fromHex(e.value.replace(/\-/g,"")),1),l}}parse(e){let r={},n=0;for(;n<e.byteLength;){let s=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[o]={type:RR,value:!0};break;case 1:r[o]={type:RR,value:!1};break;case 2:r[o]={type:Lz,value:e.getInt8(n++)};break;case 3:r[o]={type:Fz,value:e.getInt16(n,!1)},n+=2;break;case 4:r[o]={type:jz,value:e.getInt32(n,!1)},n+=4;break;case 5:r[o]={type:Hz,value:new pi(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:let i=e.getUint16(n,!1);n+=2,r[o]={type:qz,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:let a=e.getUint16(n,!1);n+=2,r[o]={type:Gz,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:r[o]={type:zz,value:new Date(new pi(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let u=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[o]={type:Vz,value:`${Ks.toHex(u.subarray(0,4))}-${Ks.toHex(u.subarray(4,6))}-${Ks.toHex(u.subarray(6,8))}-${Ks.toHex(u.subarray(8,10))}-${Ks.toHex(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},RR="boolean",Lz="byte",Fz="short",jz="integer",Hz="long",qz="binary",Gz="string",zz="timestamp",Vz="uuid",Wz=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,OR=4,Qn=OR*2,Ys=4,Kz=Qn+Ys*2;function Yz({byteLength:t,byteOffset:e,buffer:r}){if(t<Kz)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");let o=n.getUint32(OR,!1),i=n.getUint32(Qn,!1),a=n.getUint32(t-Ys,!1),u=new IR.Crc32().update(new Uint8Array(r,e,Qn));if(i!==u.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,e+Qn,t-(Qn+Ys))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+Qn+Ys,o),body:new Uint8Array(r,e+Qn+Ys+o,s-o-(Qn+Ys+Ys))}}var GS=class{headerMarshaller;messageBuffer;isEndOfStream;constructor(e,r){this.headerMarshaller=new jl(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){let n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,o=new Uint8Array(s),i=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new IR.Crc32;return i.setUint32(0,s,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),i.setUint32(s-4,a.update(o.subarray(8,s-4)).digest(),!1),o}decode(e){let{headers:r,body:n}=Yz(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}},zS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.decoder.decode(e)}},VS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}},WS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream){let r=await this.options.deserializer(e);r!==void 0&&(yield r)}}},KS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.serializer(e)}};Jn.EventStreamCodec=GS;Jn.HeaderMarshaller=jl;Jn.Int64=pi;Jn.MessageDecoderStream=zS;Jn.MessageEncoderStream=VS;Jn.SmithyMessageDecoderStream=WS;Jn.SmithyMessageEncoderStream=KS});var NR=R(YS=>{"use strict";c();var PR=t=>encodeURIComponent(t).replace(/[!'()*]/g,Xz),Xz=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,Qz=t=>t.split("/").map(PR).join("/");YS.escapeUri=PR;YS.escapeUriPath=Qz});var DR=R(kR=>{"use strict";c();var XS=NR();function Jz(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=XS.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${XS.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${XS.escapeUri(n)}`),e.push(s)}}return e.join("&")}kR.buildQueryString=Jz});var $R=R(MR=>{"use strict";c();var Zz=DR();function eV(t){let{port:e,query:r}=t,{protocol:n,path:s,hostname:o}=t;n&&n.slice(-1)!==":"&&(n+=":"),e&&(o+=`:${e}`),s&&s.charAt(0)!=="/"&&(s=`/${s}`);let i=r?Zz.buildQueryString(r):"";i&&i[0]!=="?"&&(i=`?${i}`);let a="";if(t.username!=null||t.password!=null){let d=t.username??"",f=t.password??"";a=`${d}:${f}@`}let u="";return t.fragment&&(u=`#${t.fragment}`),`${n}//${a}${o}${s}${i}${u}`}MR.formatUrl=eV});var JS=R(QS=>{"use strict";c();var Xa=Hl();function tV(t){let e=0,r=0,n=null,s=null,o=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=t[Symbol.asyncIterator]();for(;;){let{value:u,done:d}=await a.next();if(d){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}let f=u.length,l=0;for(;l<f;){if(!n){let h=f-l;s||(s=new Uint8Array(4));let y=Math.min(4-r,h);if(s.set(u.slice(l,l+y),r),r+=y,l+=y,r<4)break;o(new DataView(s.buffer).getUint32(0,!1)),s=null}let g=Math.min(e-r,f-l);n.set(u.slice(l,l+g),r),r+=g,l+=g,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function rV(t,e){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){let s=r.headers[":exception-type"].value,o={[s]:r},i=await t(o);if(i.$unknown){let a=new Error(e(r.body));throw a.name=s,a}throw i[s]}else if(n==="event"){let s={[r.headers[":event-type"].value]:r},o=await t(s);return o.$unknown?void 0:o}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var ql=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new Xa.EventStreamCodec(e,r),this.utfEncoder=e}deserialize(e,r){let n=tV(e);return new Xa.SmithyMessageDecoderStream({messageStream:new Xa.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:rV(r,this.utfEncoder)})}serialize(e,r){return new Xa.MessageEncoderStream({messageStream:new Xa.SmithyMessageEncoderStream({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},nV=t=>new ql(t);QS.EventStreamMarshaller=ql;QS.eventStreamSerdeProvider=nV});var LR=R(Qa=>{"use strict";c();var sV=JS(),UR=t=>({[Symbol.asyncIterator]:async function*(){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}}),BR=t=>{let e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:s}=await e.next();if(n)return r.close();r.enqueue(s)}})},Gl=class{universalMarshaller;constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new sV.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){let n=oV(e)?UR(e):e;return this.universalMarshaller.deserialize(n,r)}serialize(e,r){let n=this.universalMarshaller.serialize(e,r);return typeof ReadableStream=="function"?BR(n):n}},oV=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,iV=t=>new Gl(t);Qa.EventStreamMarshaller=Gl;Qa.eventStreamSerdeProvider=iV;Qa.iterableToReadableStream=BR;Qa.readableStreamtoIterable=UR});var qR=R(Ja=>{"use strict";c();var aV=Hl(),cV=wa(),r_=ie(),uV=$R(),jR=LR(),FR=Tg(),dV=(t,e,r,n)=>{let s=t,o={start(){},async transform(i,a){try{let u=new Date(Date.now()+await n()),d={":date":{type:"timestamp",value:u}},f=await e.sign({message:{body:i,headers:d},priorSignature:s},{signingDate:u});s=f.signature;let l=r.encode({headers:{...d,":chunk-signature":{type:"binary",value:cV.fromHex(f.signature)}},body:i});a.enqueue(l)}catch(u){a.error(u)}}};return new TransformStream({...o})},ZS=class{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new aV.EventStreamCodec(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,r,n={}){let s=r.request,{body:o,headers:i,query:a}=s;if(!(o instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");let u=new TransformStream;s.body=u.readable;let d;try{d=await e(r)}catch(y){throw s.body.cancel(),y}let l=((i.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||a&&a["X-Amz-Signature"]||"",g=dV(l,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return o.pipeThrough(g).pipeThrough(u),d}},lV=t=>new ZS(t),fV=()=>t=>async e=>{let r={...e.input},n=await t(e),s=n.output;return r.SessionId&&s.SessionId==null&&(s.SessionId=r.SessionId),n},pV={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},mV=(t,e)=>r=>n=>{let{request:s}=n;if(r_.HttpRequest.isInstance(s)&&t.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){s.protocol="wss:",s.method="GET",s.path=`${s.path}-websocket`;let{headers:o}=s;delete o["content-type"],delete o["x-amz-content-sha256"];for(let i of Object.keys(o))if(i.indexOf(e.headerPrefix)===0){let a=i.replace(e.headerPrefix,"");s.query[a]=o[i]}o["x-amz-user-agent"]&&(s.query["user-agent"]=o["x-amz-user-agent"]),s.headers={host:o.host??s.hostname}}return r(n)},hV={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},gV=(t,e)=>({applyToStack:r=>{r.addRelativeTo(mV(t,e),hV),r.add(fV(),pV)}}),HR=t=>t.protocol==="ws:"||t.protocol==="wss:",e_=class{signer;constructor(e){this.signer=e.signer}presign(e,r={}){return this.signer.presign(e,r)}async sign(e,r){return r_.HttpRequest.isInstance(e)&&HR(e)?{...await this.signer.presign({...e,body:""},{...r,expiresIn:60,unsignableHeaders:new Set(Object.keys(e.headers).filter(s=>s!=="host"))}),body:e.body}:this.signer.sign(e,r)}},yV=t=>{let{signer:e}=t;return Object.assign(t,{signer:async r=>{let n=await e(r);if(SV(n))return new e_({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},SV=t=>!!t,_V=2e3,t_=class t{metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(e,r=new FR.FetchHttpHandler){return typeof e?.handle=="function"?e:new t(e,r)}constructor(e,r=new FR.FetchHttpHandler){this.httpHandler=r,typeof e=="function"?(this.config={},this.configPromise=e().then(n=>this.config=n??{})):(this.config=e??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[e,r]of Object.entries(this.sockets)){for(let n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[e]}}async handle(e){if(!HR(e))return this.httpHandler.handle(e);let r=uV.formatUrl(e),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:s=_V}=this.config;await this.waitForReady(n,s);let{body:o}=e,i=EV(o),a=this.connect(n,i),u=wV(a);return{response:new r_.HttpResponse({statusCode:200,body:u})}}updateHttpClientConfig(e,r){this.configPromise=this.configPromise.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(e){this.sockets[e]=(this.sockets[e]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(e,r){return new Promise((n,s)=>{let o=setTimeout(()=>{this.removeNotUsableSockets(e.url),s({$metadata:{httpStatusCode:500}})},r);e.onopen=()=>{clearTimeout(o),n()}})}connect(e,r){let n,s=!1,o=()=>{},i=()=>{};e.onmessage=d=>{i({done:!1,value:new Uint8Array(d.data)})},e.onerror=d=>{s=!0,e.close(),o(d)},e.onclose=()=>{this.removeNotUsableSockets(e.url),!s&&(n?o(n):i({done:!0,value:void 0}))};let a={[Symbol.asyncIterator]:()=>({next:()=>new Promise((d,f)=>{i=d,o=f})})};return(async()=>{try{for await(let d of r)e.send(d)}catch(d){n=d}finally{e.close(1e3)}})(),a}},EV=t=>t[Symbol.asyncIterator]?t:vV(t)?jR.readableStreamtoIterable(t):{[Symbol.asyncIterator]:async function*(){yield t}},wV=t=>typeof ReadableStream=="function"?jR.iterableToReadableStream(t):t,vV=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;Ja.WebSocketFetchHandler=t_;Ja.eventStreamPayloadHandlerProvider=lV;Ja.getWebSocketPlugin=gV;Ja.resolveWebSocketConfig=yV});var GR=R(mi=>{"use strict";c();var bV=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},xV=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};mi.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(mi.SelectorType||(mi.SelectorType={}));mi.booleanSelector=bV;mi.numberSelector=xV});var Ve=R(Xe=>{"use strict";c();var Zn=GR(),zl=tt(),CV=fn(),WR="AWS_USE_DUALSTACK_ENDPOINT",KR="use_dualstack_endpoint",AV=!1,TV={environmentVariableSelector:t=>Zn.booleanSelector(t,WR,Zn.SelectorType.ENV),configFileSelector:t=>Zn.booleanSelector(t,KR,Zn.SelectorType.CONFIG),default:!1},YR="AWS_USE_FIPS_ENDPOINT",XR="use_fips_endpoint",RV=!1,IV={environmentVariableSelector:t=>Zn.booleanSelector(t,YR,Zn.SelectorType.ENV),configFileSelector:t=>Zn.booleanSelector(t,XR,Zn.SelectorType.CONFIG),default:!1},OV=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:zl.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:zl.normalizeProvider(s??!1)})},PV=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),o=await t.useFipsEndpoint(),{hostname:i}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${i}`)},NV=t=>{let e=zl.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:o}=t;return Object.assign(t,{tls:o??!0,endpoint:r?zl.normalizeProvider(typeof r=="string"?s(r):r):()=>PV({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},QR="AWS_REGION",JR="region",kV={environmentVariableSelector:t=>t[QR],configFileSelector:t=>t[JR],default:()=>{throw new Error("Region is missing")}},DV={preferredFile:"credentials"},zR=new Set,MV=(t,e=CV.isValidHostLabel)=>{if(!zR.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else zR.add(t)},ZR=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),$V=t=>ZR(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,UV=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=$V(n);return MV(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return ZR(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},VR=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,BV=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),LV=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",FV=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},jV=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:o})=>{let i=LV(t,{partitionHash:o}),a=t in s?t:o[i]?.endpoint??t,u={useFipsEndpoint:e,useDualstackEndpoint:r},d=VR(s[a]?.variants,u),f=VR(o[i]?.variants,u),l=BV(a,{regionHostname:d,partitionHostname:f});if(l===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let g=FV(l,{signingRegion:s[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:e});return{partition:i,signingService:n,hostname:l,...g&&{signingRegion:g},...s[a]?.signingService&&{signingService:s[a].signingService}}};Xe.CONFIG_USE_DUALSTACK_ENDPOINT=KR;Xe.CONFIG_USE_FIPS_ENDPOINT=XR;Xe.DEFAULT_USE_DUALSTACK_ENDPOINT=AV;Xe.DEFAULT_USE_FIPS_ENDPOINT=RV;Xe.ENV_USE_DUALSTACK_ENDPOINT=WR;Xe.ENV_USE_FIPS_ENDPOINT=YR;Xe.NODE_REGION_CONFIG_FILE_OPTIONS=DV;Xe.NODE_REGION_CONFIG_OPTIONS=kV;Xe.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=TV;Xe.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=IV;Xe.REGION_ENV_NAME=QR;Xe.REGION_INI_NAME=JR;Xe.getRegionInfo=jV;Xe.resolveCustomEndpointsConfig=OV;Xe.resolveEndpointsConfig=NV;Xe.resolveRegionConfig=UV});var tI=R(eI=>{"use strict";c();var HV=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)});eI.resolveEventStreamSerdeConfig=HV});var Xs=R(Vl=>{"use strict";c();var qV=ie(),rI="content-length";function nI(t){return e=>async r=>{let n=r.request;if(qV.HttpRequest.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(rI)===-1)try{let i=t(s);n.headers={...n.headers,[rI]:String(i)}}catch{}}return e({...r,request:n})}}var sI={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},GV=t=>({applyToStack:e=>{e.add(nI(t.bodyLengthChecker),sI)}});Vl.contentLengthMiddleware=nI;Vl.contentLengthMiddlewareOptions=sI;Vl.getContentLengthPlugin=GV});var s_=R(Wl=>{"use strict";c();Object.defineProperty(Wl,"__esModule",{value:!0});Wl.getHomeDir=void 0;var zV=ee("os"),VV=ee("path"),n_={},WV=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",KV=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${VV.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=WV();return n_[s]||(n_[s]=(0,zV.homedir)()),n_[s]};Wl.getHomeDir=KV});var o_=R(Kl=>{"use strict";c();Object.defineProperty(Kl,"__esModule",{value:!0});Kl.getSSOTokenFilepath=void 0;var YV=ee("crypto"),XV=ee("path"),QV=s_(),JV=t=>{let r=(0,YV.createHash)("sha1").update(t).digest("hex");return(0,XV.join)((0,QV.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Kl.getSSOTokenFilepath=JV});var oI=R(es=>{"use strict";c();Object.defineProperty(es,"__esModule",{value:!0});es.getSSOTokenFromFile=es.tokenIntercept=void 0;var ZV=ee("fs/promises"),e8=o_();es.tokenIntercept={};var t8=async t=>{if(es.tokenIntercept[t])return es.tokenIntercept[t];let e=(0,e8.getSSOTokenFilepath)(t),r=await(0,ZV.readFile)(e,"utf8");return JSON.parse(r)};es.getSSOTokenFromFile=t8});var iI=R(Ut=>{"use strict";c();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.readFile=Ut.fileIntercept=Ut.filePromises=void 0;var r8=ee("node:fs/promises");Ut.filePromises={};Ut.fileIntercept={};var n8=(t,e)=>Ut.fileIntercept[t]!==void 0?Ut.fileIntercept[t]:((!Ut.filePromises[t]||e?.ignoreCache)&&(Ut.filePromises[t]=(0,r8.readFile)(t,"utf8")),Ut.filePromises[t]);Ut.readFile=n8});var hr=R(Et=>{"use strict";c();var Za=s_(),aI=o_(),i_=oI(),Yl=ee("path"),Xl=Mn(),hi=iI(),uI="AWS_PROFILE",dI="default",s8=t=>t.profile||process.env[uI]||dI,Qs=".",o8=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Qs);return r===-1?!1:Object.values(Xl.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(Qs),o=r.substring(0,s)===Xl.IniSectionType.PROFILE?r.substring(s+1):r;return e[o]=n,e},{...t.default&&{default:t.default}}),i8="AWS_CONFIG_FILE",lI=()=>process.env[i8]||Yl.join(Za.getHomeDir(),".aws","config"),a8="AWS_SHARED_CREDENTIALS_FILE",c8=()=>process.env[a8]||Yl.join(Za.getHomeDir(),".aws","credentials"),u8=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,d8=["__proto__","profile __proto__"],a_=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),u=u8.exec(a);if(u){let[,d,,f]=u;Object.values(Xl.IniSectionType).includes(d)&&(r=[d,f].join(Qs))}else r=a;if(d8.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[u,d]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(d==="")n=u;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let f=n?[n,u].join(Qs):u;e[r][f]=d}}}}return e},cI=()=>({}),fI=async(t={})=>{let{filepath:e=c8(),configFilepath:r=lI()}=t,n=Za.getHomeDir(),s="~/",o=e;e.startsWith(s)&&(o=Yl.join(n,e.slice(2)));let i=r;r.startsWith(s)&&(i=Yl.join(n,r.slice(2)));let a=await Promise.all([hi.readFile(i,{ignoreCache:t.ignoreCache}).then(a_).then(o8).catch(cI),hi.readFile(o,{ignoreCache:t.ignoreCache}).then(a_).catch(cI)]);return{configFile:a[0],credentialsFile:a[1]}},l8=t=>Object.entries(t).filter(([e])=>e.startsWith(Xl.IniSectionType.SSO_SESSION+Qs)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Qs)+1)]:n}),{}),f8=()=>({}),p8=async(t={})=>hi.readFile(t.configFilepath??lI()).then(a_).then(l8).catch(f8),m8=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},h8=async t=>{let e=await fI(t);return m8(e.configFile,e.credentialsFile)},g8={getFileRecord(){return hi.fileIntercept},interceptFile(t,e){hi.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return i_.tokenIntercept},interceptToken(t,e){i_.tokenIntercept[t]=e}};Object.defineProperty(Et,"getSSOTokenFromFile",{enumerable:!0,get:function(){return i_.getSSOTokenFromFile}});Object.defineProperty(Et,"readFile",{enumerable:!0,get:function(){return hi.readFile}});Et.CONFIG_PREFIX_SEPARATOR=Qs;Et.DEFAULT_PROFILE=dI;Et.ENV_PROFILE=uI;Et.externalDataInterceptor=g8;Et.getProfileName=s8;Et.loadSharedConfigFiles=fI;Et.loadSsoSessionData=p8;Et.parseKnownFiles=h8;Object.keys(Za).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Et,t)&&Object.defineProperty(Et,t,{enumerable:!0,get:function(){return Za[t]}})});Object.keys(aI).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Et,t)&&Object.defineProperty(Et,t,{enumerable:!0,get:function(){return aI[t]}})})});var Gt=R(hI=>{"use strict";c();var ec=ze(),pI=hr();function mI(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var y8=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new ec.CredentialsProviderError(r.message||`Not found in ENV: ${mI(t.toString())}`,{logger:e?.logger})}},S8=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=pI.getProfileName(r),{configFile:s,credentialsFile:o}=await pI.loadSharedConfigFiles(r),i=o[n]||{},a=s[n]||{},u=e==="config"?{...i,...a}:{...a,...i};try{let f=t(u,e==="config"?s:o);if(f===void 0)throw new Error;return f}catch(d){throw new ec.CredentialsProviderError(d.message||`Not found in config files w/ profile [${n}]: ${mI(t.toString())}`,{logger:r.logger})}},_8=t=>typeof t=="function",E8=t=>_8(t)?async()=>await t():ec.fromStatic(t),w8=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:o}=n,i={signingName:s,logger:o};return ec.memoize(ec.chain(y8(t,i),S8(e,n),E8(r)))};hI.loadConfig=w8});var _I=R(Ql=>{"use strict";c();Object.defineProperty(Ql,"__esModule",{value:!0});Ql.getEndpointUrlConfig=void 0;var gI=hr(),yI="AWS_ENDPOINT_URL",SI="endpoint_url",v8=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(o=>o.toUpperCase()),n=e[[yI,...r].join("_")];if(n)return n;let s=e[yI];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(gI.CONFIG_PREFIX_SEPARATOR)];if(s){let o=t.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),SI].join(gI.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=e[SI];if(n)return n},default:void 0});Ql.getEndpointUrlConfig=v8});var EI=R(Jl=>{"use strict";c();Object.defineProperty(Jl,"__esModule",{value:!0});Jl.getEndpointFromConfig=void 0;var b8=Gt(),x8=_I(),C8=async t=>(0,b8.loadConfig)((0,x8.getEndpointUrlConfig)(t??""))();Jl.getEndpointFromConfig=C8});var zt=R(_n=>{"use strict";c();var vI=EI(),wI=Pr(),A8=(Ie(),Y(Or)),Zl=tt(),T8=eg(),R8=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),k8(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!N8(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},I8=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,O8=/(\d+\.){3}\d+/,P8=/\.\./,N8=t=>I8.test(t)&&!O8.test(t)&&!P8.test(t),k8=t=>{let[e,r,n,,,s]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,i=!!(o&&r&&n&&s);if(o&&!i)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return i},D8=(t,e,r,n=!1)=>{let s=async()=>{let o;return n?o=r.clientContextParams?.[t]??r[t]??r[e]:o=r[t]??r[e],typeof o=="function"?o():o};return t==="credentialScope"||e==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await s();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:a,port:u,path:d}=o;return`${i}//${a}${u?":"+u:""}${d}`}}return o}:s},c_=t=>typeof t=="object"?"url"in t?wI.parseUrl(t.url):t:wI.parseUrl(t),bI=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await vI.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(c_(i)),r.isCustomEndpoint=!0)}let s=await xI(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},xI=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":n[o]=i.value;break;case"contextParams":n[o]=t[i.name];break;case"clientContextParams":case"builtInParams":n[o]=await D8(i.name,o,r,i.type!=="builtInParams")();break;case"operationContextParams":n[o]=i.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await R8(n),n},CI=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&A8.setFeature(n,"ENDPOINT_OVERRIDE","N");let o=await bI(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let u=Zl.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...s})},AI={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:T8.serializerMiddlewareOption.name},M8=(t,e)=>({applyToStack:r=>{r.addRelativeTo(CI({config:t,instructions:e}),AI)}}),$8=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,o=r!=null?async()=>c_(await Zl.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:o,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Zl.normalizeProvider(n??!1),useFipsEndpoint:Zl.normalizeProvider(s??!1)}),u;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!u&&(u=vI.getEndpointFromConfig(t.serviceId)),u),a},U8=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};_n.endpointMiddleware=CI;_n.endpointMiddlewareOptions=AI;_n.getEndpointFromInstructions=bI;_n.getEndpointPlugin=M8;_n.resolveEndpointConfig=$8;_n.resolveEndpointRequiredConfig=U8;_n.resolveParams=xI;_n.toEndpointV1=c_});var d_=R(ts=>{"use strict";c();var B8=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],L8=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],F8=["TimeoutError","RequestTimeout","RequestTimeoutException"],j8=[500,502,503,504],H8=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],q8=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],TI=t=>t?.$retryable!==void 0,G8=t=>B8.includes(t.name),RI=t=>t.$metadata?.clockSkewCorrected,II=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},z8=t=>t.$metadata?.httpStatusCode===429||L8.includes(t.name)||t.$retryable?.throttling==!0,u_=(t,e=0)=>TI(t)||RI(t)||F8.includes(t.name)||H8.includes(t?.code||"")||q8.includes(t?.code||"")||j8.includes(t.$metadata?.httpStatusCode||0)||II(t)||t.cause!==void 0&&e<=10&&u_(t.cause,e+1),V8=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!u_(t)}return!1};ts.isBrowserNetworkError=II;ts.isClockSkewCorrectedError=RI;ts.isClockSkewError=G8;ts.isRetryableByTrait=TI;ts.isServerError=V8;ts.isThrottlingError=z8;ts.isTransientError=u_});var rs=R(Pe=>{"use strict";c();var W8=d_();Pe.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Pe.RETRY_MODES||(Pe.RETRY_MODES={}));var l_=3,K8=Pe.RETRY_MODES.STANDARD,ef=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>t.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),W8.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}},tc=100,h_=20*1e3,PI=500,f_=500,NI=5,kI=10,DI=1,Y8="amz-sdk-invocation-id",X8="amz-sdk-request",Q8=()=>{let t=tc;return{computeNextBackoffDelay:n=>Math.floor(Math.min(h_,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},OI=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(h_,t),getRetryCost:()=>r}),rc=class{maxAttempts;mode=Pe.RETRY_MODES.STANDARD;capacity=f_;retryBackoffStrategy=Q8();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return OI({retryDelay:tc,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?PI:tc);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,OI({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(f_,this.capacity+(e.getRetryCost()??DI))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${l_}`),l_}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?kI:NI}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},p_=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Pe.RETRY_MODES.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new ef,this.standardRetryStrategy=new rc(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},m_=class extends rc{computeNextBackoffDelay;constructor(e,r=tc){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Pe.AdaptiveRetryStrategy=p_;Pe.ConfiguredRetryStrategy=m_;Pe.DEFAULT_MAX_ATTEMPTS=l_;Pe.DEFAULT_RETRY_DELAY_BASE=tc;Pe.DEFAULT_RETRY_MODE=K8;Pe.DefaultRateLimiter=ef;Pe.INITIAL_RETRY_TOKENS=f_;Pe.INVOCATION_ID_HEADER=Y8;Pe.MAXIMUM_RETRY_DELAY=h_;Pe.NO_RETRY_INCREMENT=DI;Pe.REQUEST_HEADER=X8;Pe.RETRY_COST=NI;Pe.StandardRetryStrategy=rc;Pe.THROTTLING_RETRY_DELAY_BASE=PI;Pe.TIMEOUT_RETRY_COST=kI});var MI=R(tf=>{"use strict";c();Object.defineProperty(tf,"__esModule",{value:!0});tf.isStreamingPayload=void 0;var J8=ee("stream"),Z8=t=>t?.body instanceof J8.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;tf.isStreamingPayload=Z8});var Bt=R(He=>{"use strict";c();var Oe=rs(),gi=ie(),ns=d_(),UI=Jg(),$I=tt(),e5=z(),t5=MI(),r5=(t,e)=>{let r=t,n=Oe.NO_RETRY_INCREMENT,s=Oe.RETRY_COST,o=Oe.TIMEOUT_RETRY_COST,i=t,a=l=>l.name==="TimeoutError"?o:s,u=l=>a(l)<=i;return Object.freeze({hasRetryTokens:u,retrieveRetryTokens:l=>{if(!u(l))throw new Error("No retry token available");let g=a(l);return i-=g,g},releaseRetryTokens:l=>{i+=l??n,i=Math.min(i,r)}})},BI=(t,e)=>Math.floor(Math.min(Oe.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),LI=t=>t?ns.isRetryableByTrait(t)||ns.isClockSkewError(t)||ns.isThrottlingError(t)||ns.isTransientError(t):!1,FI=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),rf=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Oe.RETRY_MODES.STANDARD;constructor(e,r){this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??LI,this.delayDecider=r?.delayDecider??BI,this.retryQuota=r?.retryQuota??r5(Oe.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Oe.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,o=0,i=0,a=await this.getMaxAttempts(),{request:u}=r;for(gi.HttpRequest.isInstance(u)&&(u.headers[Oe.INVOCATION_ID_HEADER]=UI.v4());;)try{gi.HttpRequest.isInstance(u)&&(u.headers[Oe.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:d,output:f}=await e(r);return n?.afterRequest&&n.afterRequest(d),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=i,{response:d,output:f}}catch(d){let f=FI(d);if(o++,this.shouldRetry(f,o,a)){s=this.retryQuota.retrieveRetryTokens(f);let l=this.delayDecider(ns.isThrottlingError(f)?Oe.THROTTLING_RETRY_DELAY_BASE:Oe.DEFAULT_RETRY_DELAY_BASE,o),g=n5(f.$response),h=Math.max(g||0,l);i+=h,await new Promise(y=>setTimeout(y,h));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=i,f}}},n5=t=>{if(!gi.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},g_=class extends rf{rateLimiter;constructor(e,r){let{rateLimiter:n,...s}=r??{};super(e,s),this.rateLimiter=n??new Oe.DefaultRateLimiter,this.mode=Oe.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},y_="AWS_MAX_ATTEMPTS",S_="max_attempts",s5={environmentVariableSelector:t=>{let e=t[y_];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${y_} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[S_];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${S_} mast be a number, got "${e}"`);return r},default:Oe.DEFAULT_MAX_ATTEMPTS},o5=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=$I.normalizeProvider(n??Oe.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await $I.normalizeProvider(r)()===Oe.RETRY_MODES.ADAPTIVE?new Oe.AdaptiveRetryStrategy(s):new Oe.StandardRetryStrategy(s))})},jI="AWS_RETRY_MODE",HI="retry_mode",i5={environmentVariableSelector:t=>t[jI],configFileSelector:t=>t[HI],default:Oe.DEFAULT_RETRY_MODE},qI=()=>t=>async e=>{let{request:r}=e;return gi.HttpRequest.isInstance(r)&&(delete r.headers[Oe.INVOCATION_ID_HEADER],delete r.headers[Oe.REQUEST_HEADER]),t(e)},GI={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},a5=t=>({applyToStack:e=>{e.addRelativeTo(qI(),GI)}}),zI=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(c5(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,u=0,d=0,{request:f}=n,l=gi.HttpRequest.isInstance(f);for(l&&(f.headers[Oe.INVOCATION_ID_HEADER]=UI.v4());;)try{l&&(f.headers[Oe.REQUEST_HEADER]=`attempt=${u+1}; max=${o}`);let{response:g,output:h}=await e(n);return s.recordSuccess(i),h.$metadata.attempts=u+1,h.$metadata.totalRetryDelay=d,{response:g,output:h}}catch(g){let h=u5(g);if(a=FI(g),l&&t5.isStreamingPayload(f))throw(r.logger instanceof e5.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=d,a}u=i.getRetryCount();let y=i.getRetryDelay();d+=y,await new Promise(x=>setTimeout(x,y))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},c5=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",u5=t=>{let e={error:t,errorType:d5(t)},r=WI(t.$response);return r&&(e.retryAfterHint=r),e},d5=t=>ns.isThrottlingError(t)?"THROTTLING":ns.isTransientError(t)?"TRANSIENT":ns.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",VI={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},l5=t=>({applyToStack:e=>{e.add(zI(t),VI)}}),WI=t=>{if(!gi.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};He.AdaptiveRetryStrategy=g_;He.CONFIG_MAX_ATTEMPTS=S_;He.CONFIG_RETRY_MODE=HI;He.ENV_MAX_ATTEMPTS=y_;He.ENV_RETRY_MODE=jI;He.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=s5;He.NODE_RETRY_MODE_CONFIG_OPTIONS=i5;He.StandardRetryStrategy=rf;He.defaultDelayDecider=BI;He.defaultRetryDecider=LI;He.getOmitRetryHeadersPlugin=a5;He.getRetryAfterHint=WI;He.getRetryPlugin=l5;He.omitRetryHeadersMiddleware=qI;He.omitRetryHeadersMiddlewareOptions=GI;He.resolveRetryConfig=o5;He.retryMiddleware=zI;He.retryMiddlewareOptions=VI});var w_=R(ss=>{"use strict";c();Object.defineProperty(ss,"__esModule",{value:!0});ss.resolveHttpAuthSchemeConfig=ss.defaultBedrockRuntimeHttpAuthSchemeProvider=ss.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var f5=(Yn(),Y(Ya)),__=(Ie(),Y(Or)),E_=tt(),p5=async(t,e,r)=>({operation:(0,E_.getSmithyContext)(e).operation,region:await(0,E_.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ss.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=p5;function m5(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function h5(t){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:e,filepath:r,configFilepath:n,ignoreCache:s},o)=>({identityProperties:{profile:e,filepath:r,configFilepath:n,ignoreCache:s}})}}var g5=t=>{let e=[];switch(t.operation){default:e.push(m5(t)),e.push(h5(t))}return e};ss.defaultBedrockRuntimeHttpAuthSchemeProvider=g5;var y5=t=>{let e=(0,__.memoizeIdentityProvider)(t.token,__.isIdentityExpired,__.doesIdentityRequireRefresh),r=(0,f5.resolveAwsSdkSigV4Config)(t);return Object.assign(r,{authSchemePreference:(0,E_.normalizeProvider)(t.authSchemePreference??[]),token:e})};ss.resolveHttpAuthSchemeConfig=y5});var KI=R((SEe,S5)=>{S5.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.974.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/credential-provider-node":"^3.972.1","@aws-sdk/eventstream-handler-node":"^3.972.1","@aws-sdk/middleware-eventstream":"^3.972.1","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/middleware-websocket":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/token-providers":"3.974.0","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/eventstream-serde-browser":"^4.2.8","@smithy/eventstream-serde-config-resolver":"^4.3.8","@smithy/eventstream-serde-node":"^4.2.8","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-stream":"^4.5.10","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var nf,os,YI=S(()=>{c();nf={warningEmitted:!1},os=t=>{t&&!nf.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20&&(nf.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function is(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var XI=S(()=>{c()});function QI(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var JI=S(()=>{c()});function ZI(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var eO=S(()=>{c()});var En={};Be(En,{emitWarningIfUnsupportedVersion:()=>os,setCredentialFeature:()=>is,setFeature:()=>QI,setTokenFeature:()=>ZI,state:()=>nf});var Vt=S(()=>{c();YI();XI();JI();eO()});var v_=R(as=>{"use strict";c();var _5=(Vt(),Y(En)),E5=ze(),tO="AWS_ACCESS_KEY_ID",rO="AWS_SECRET_ACCESS_KEY",nO="AWS_SESSION_TOKEN",sO="AWS_CREDENTIAL_EXPIRATION",oO="AWS_CREDENTIAL_SCOPE",iO="AWS_ACCOUNT_ID",w5=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[tO],r=process.env[rO],n=process.env[nO],s=process.env[sO],o=process.env[oO],i=process.env[iO];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return _5.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new E5.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};as.ENV_ACCOUNT_ID=iO;as.ENV_CREDENTIAL_SCOPE=oO;as.ENV_EXPIRATION=sO;as.ENV_KEY=tO;as.ENV_SECRET=rO;as.ENV_SESSION=nO;as.fromEnv=w5});var sc=R(ot=>{"use strict";c();var $r=ze(),v5=ee("url"),b5=ee("buffer"),x5=ee("http"),T_=Gt(),C5=Pr();function nc(t){return new Promise((e,r)=>{let n=x5.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new $r.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new $r.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new $r.ProviderError("Error response received from instance metadata service"),{statusCode:o})),n.destroy());let i=[];s.on("data",a=>{i.push(a)}),s.on("end",()=>{e(b5.Buffer.concat(i)),n.destroy()})}),n.end()})}var dO=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",lO=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),fO=1e3,pO=0,R_=({maxRetries:t=pO,timeout:e=fO})=>({maxRetries:t,timeout:e}),x_=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},sf="AWS_CONTAINER_CREDENTIALS_FULL_URI",of="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",C_="AWS_CONTAINER_AUTHORIZATION_TOKEN",A5=(t={})=>{let{timeout:e,maxRetries:r}=R_(t);return()=>x_(async()=>{let n=await P5({logger:t.logger}),s=JSON.parse(await T5(e,n));if(!dO(s))throw new $r.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return lO(s)},r)},T5=async(t,e)=>(process.env[C_]&&(e.headers={...e.headers,Authorization:process.env[C_]}),(await nc({...e,timeout:t})).toString()),R5="169.254.170.2",I5={localhost:!0,"127.0.0.1":!0},O5={"http:":!0,"https:":!0},P5=async({logger:t})=>{if(process.env[of])return{hostname:R5,path:process.env[of]};if(process.env[sf]){let e=v5.parse(process.env[sf]);if(!e.hostname||!(e.hostname in I5))throw new $r.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in O5))throw new $r.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new $r.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${of} or ${sf} environment variable is set`,{tryNextLink:!1,logger:t})},A_=class t extends $r.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,t.prototype)}};ot.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(ot.Endpoint||(ot.Endpoint={}));var N5="AWS_EC2_METADATA_SERVICE_ENDPOINT",k5="ec2_metadata_service_endpoint",D5={environmentVariableSelector:t=>t[N5],configFileSelector:t=>t[k5],default:void 0},yi;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(yi||(yi={}));var M5="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",$5="ec2_metadata_service_endpoint_mode",U5={environmentVariableSelector:t=>t[M5],configFileSelector:t=>t[$5],default:yi.IPv4},mO=async()=>C5.parseUrl(await B5()||await L5()),B5=async()=>T_.loadConfig(D5)(),L5=async()=>{let t=await T_.loadConfig(U5)();switch(t){case yi.IPv4:return ot.Endpoint.IPv4;case yi.IPv6:return ot.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(yi)}`)}},F5=5*60,j5=5*60,H5="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",aO=(t,e)=>{let r=F5+Math.floor(Math.random()*j5),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+H5);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},q5=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=aO(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=aO(n,r);else throw o}return n=s,s}},hO="/latest/meta-data/iam/security-credentials/",G5="/latest/api/token",b_="AWS_EC2_METADATA_V1_DISABLED",cO="ec2_metadata_v1_disabled",uO="x-aws-ec2-metadata-token",z5=(t={})=>q5(V5(t),{logger:t.logger}),V5=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:o}=R_(t),i=async(a,u)=>{if(e||u.headers?.[uO]==null){let l=!1,g=!1,h=await T_.loadConfig({environmentVariableSelector:y=>{let x=y[b_];if(g=!!x&&x!=="false",x===void 0)throw new $r.CredentialsProviderError(`${b_} not set in env, checking config file next.`,{logger:t.logger});return g},configFileSelector:y=>{let x=y[cO];return l=!!x&&x!=="false",l},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||h){let y=[];throw t.ec2MetadataV1Disabled&&y.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),l&&y.push(`config file profile (${cO})`),g&&y.push(`process environment variable (${b_})`),new A_(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${y.join(", ")}].`)}}let f=(await x_(async()=>{let l;try{l=await K5(u)}catch(g){throw g.statusCode===401&&(e=!1),g}return l},a)).trim();return x_(async()=>{let l;try{l=await Y5(f,u,t)}catch(g){throw g.statusCode===401&&(e=!1),g}return l},a)};return async()=>{let a=await mO();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:s});{let u;try{u=(await W5({...a,timeout:s})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:s})}return i(o,{...a,headers:{[uO]:u},timeout:s})}}},W5=async t=>nc({...t,path:G5,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),K5=async t=>(await nc({...t,path:hO})).toString(),Y5=async(t,e,r)=>{let n=JSON.parse((await nc({...e,path:hO+t})).toString());if(!dO(n))throw new $r.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return lO(n)};ot.DEFAULT_MAX_RETRIES=pO;ot.DEFAULT_TIMEOUT=fO;ot.ENV_CMDS_AUTH_TOKEN=C_;ot.ENV_CMDS_FULL_URI=sf;ot.ENV_CMDS_RELATIVE_URI=of;ot.fromContainerMetadata=A5;ot.fromInstanceMetadata=z5;ot.getInstanceMetadataEndpoint=mO;ot.httpRequest=nc;ot.providerConfigFromInit=R_});var gO=R(af=>{"use strict";c();Object.defineProperty(af,"__esModule",{value:!0});af.checkUrl=void 0;var X5=ze(),Q5="169.254.170.2",J5="169.254.170.23",Z5="[fd00:ec2::23]",eW=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===Q5||t.hostname===J5||t.hostname===Z5)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let o=parseInt(s,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new X5.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};af.checkUrl=eW});var yO=R(cf=>{"use strict";c();Object.defineProperty(cf,"__esModule",{value:!0});cf.createGetRequest=sW;cf.getCredentials=oW;var I_=ze(),tW=ie(),rW=z(),nW=gd();function sW(t){return new tW.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function oW(t,e){let n=await(0,nW.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new I_.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,rW.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new I_.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new I_.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var SO=R(uf=>{"use strict";c();Object.defineProperty(uf,"__esModule",{value:!0});uf.retryWrapper=void 0;var iW=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(o=>setTimeout(o,r))}return await t()};uf.retryWrapper=iW});var wO=R(df=>{"use strict";c();Object.defineProperty(df,"__esModule",{value:!0});df.fromHttp=void 0;var aW=(un(),Y(cn)),cW=(Vt(),Y(En)),uW=on(),_O=ze(),dW=aW.__importDefault(ee("fs/promises")),lW=gO(),EO=yO(),fW=SO(),pW="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",mW="http://169.254.170.2",hW="AWS_CONTAINER_CREDENTIALS_FULL_URI",gW="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",yW="AWS_CONTAINER_AUTHORIZATION_TOKEN",SW=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[pW],n=t.awsContainerCredentialsFullUri??process.env[hW],s=t.awsContainerAuthorizationToken??process.env[yW],o=t.awsContainerAuthorizationTokenFile??process.env[gW],i=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),s&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${mW}${r}`;else throw new _O.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,lW.checkUrl)(a,t.logger);let u=uW.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,fW.retryWrapper)(async()=>{let d=(0,EO.createGetRequest)(a);s?d.headers.Authorization=s:o&&(d.headers.Authorization=(await dW.default.readFile(o)).toString());try{let f=await u.handle(d);return(0,EO.getCredentials)(f.response).then(l=>(0,cW.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(f){throw new _O.CredentialsProviderError(String(f),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};df.fromHttp=SW});var O_=R(lf=>{"use strict";c();Object.defineProperty(lf,"__esModule",{value:!0});lf.fromHttp=void 0;var _W=wO();Object.defineProperty(lf,"fromHttp",{enumerable:!0,get:function(){return _W.fromHttp}})});var vO,P_,bO=S(()=>{c();vO=v(ie()),P_=t=>vO.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Si,N_=S(()=>{c();Si=t=>new Date(Date.now()+t)});var xO,CO=S(()=>{c();N_();xO=(t,e)=>Math.abs(Si(e).getTime()-t)>=3e5});var k_,AO=S(()=>{c();CO();k_=(t,e)=>{let r=Date.parse(t);return xO(r,e)?r-Date.now():e}});var D_=S(()=>{c();bO();N_();AO()});var TO,oc,_i,it,M_,$_=S(()=>{c();TO=v(ie());D_();oc=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},_i=async t=>{let e=oc("context",t.context),r=oc("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],o=await oc("signer",r.signer)(n),i=t?.signingRegion,a=t?.signingRegionSet,u=t?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:u}},it=class{async sign(e,r,n){if(!TO.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await _i(n),{config:o,signer:i}=s,{signingRegion:a,signingName:u}=s,d=n.context;if(d?.authSchemes?.length??!1){let[l,g]=d.authSchemes;l?.name==="sigv4a"&&g?.name==="sigv4"&&(a=g?.signingRegion??a,u=g?.signingName??u)}return await i.sign(e,{signingDate:Si(o.systemClockOffset),signingRegion:a,signingService:u})}errorHandler(e){return r=>{let n=r.ServerTime??P_(r.$response);if(n){let s=oc("config",e.config),o=s.systemClockOffset;s.systemClockOffset=k_(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=P_(e);if(n){let s=oc("config",r.config);s.systemClockOffset=k_(n,s.systemClockOffset)}}},M_=it});var RO,ic,IO=S(()=>{c();RO=v(ie());D_();$_();ic=class extends it{async sign(e,r,n){if(!RO.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:u}=await _i(n),f=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(e,{signingDate:Si(s.systemClockOffset),signingRegion:f,signingService:u})}}});var U_,OO=S(()=>{c();U_=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var ff,B_=S(()=>{c();ff=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var PO,NO,cs,kO=S(()=>{c();OO();B_();PO="AWS_AUTH_SCHEME_PREFERENCE",NO="auth_scheme_preference",cs={environmentVariableSelector:(t,e)=>{if(e?.signingName&&ff(e.signingName)in t)return["httpBearerAuth"];if(PO in t)return U_(t[PO])},configFileSelector:t=>{if(NO in t)return U_(t[NO])},default:[]}});var L_,DO,MO,$O=S(()=>{c();Ie();L_=v(ze()),DO=t=>(t.sigv4aSigningRegionSet=mt(t.sigv4aSigningRegionSet),t),MO={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new L_.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new L_.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});function EW(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=$a(e,Ma,Wo):r?n=mt(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function wW(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var F_,wn,UO,BO=S(()=>{c();Vt();Ie();F_=v(rl()),wn=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(d){d&&d!==e&&d!==n&&(r=!0),e=d;let f=EW(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=wW(t,f);if(r&&!l.attributed){let g=typeof e=="object"&&e!==null;n=async h=>{let x=await l(h);return g&&(!x.$source||Object.keys(x.$source).length===0)?is(x,"CREDENTIALS_CODE","e"):x},n.memoized=l.memoized,n.configBound=l.configBound,n.attributed=!0}else n=l},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:o=t.systemClockOffset||0,sha256:i}=t,a;return t.signer?a=mt(t.signer):t.regionInfoProvider?a=()=>mt(t.region)().then(async d=>[await t.regionInfoProvider(d,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},d]).then(([d,f])=>{let{signingRegion:l,signingService:g}=d;t.signingRegion=t.signingRegion||l||f,t.signingName=t.signingName||g||t.serviceId;let h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},y=t.signerConstructor||F_.SignatureV4;return new y(h)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await mt(t.region)(),properties:{}},d);let f=d.signingRegion,l=d.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||l||t.serviceId;let g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},h=t.signerConstructor||F_.SignatureV4;return new h(g)},Object.assign(t,{systemClockOffset:o,signingEscapePath:s,signer:a})},UO=wn});var LO=S(()=>{c();$_();IO();kO();$O();BO()});var FO={};Be(FO,{AWSSDKSigV4Signer:()=>M_,AwsSdkSigV4ASigner:()=>ic,AwsSdkSigV4Signer:()=>it,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>cs,NODE_SIGV4A_CONFIG_OPTIONS:()=>MO,getBearerTokenEnvKey:()=>ff,resolveAWSSDKSigV4Config:()=>UO,resolveAwsSdkSigV4AConfig:()=>DO,resolveAwsSdkSigV4Config:()=>wn,validateSigningProperties:()=>_i});var j_=S(()=>{c();LO();B_()});var cc=R(ac=>{"use strict";c();var vW=ie();function bW(t){return t}var jO=t=>e=>async r=>{if(!vW.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},HO={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},xW=t=>({applyToStack:e=>{e.add(jO(t),HO)}});ac.getHostHeaderPlugin=xW;ac.hostHeaderMiddleware=jO;ac.hostHeaderMiddlewareOptions=HO;ac.resolveHostHeaderConfig=bW});var uc=R(pf=>{"use strict";c();var qO=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:d}=a,f=u??e.inputFilterSensitiveLog,l=d??e.outputFilterSensitiveLog,{$metadata:g,...h}=n.output;return i?.info?.({clientName:s,commandName:o,input:f(r.input),output:l(h),metadata:g}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:u}=a,d=u??e.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:d(r.input),error:n,metadata:n.$metadata}),n}},GO={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},CW=t=>({applyToStack:e=>{e.add(qO(),GO)}});pf.getLoggerPlugin=CW;pf.loggerMiddleware=qO;pf.loggerMiddlewareOptions=GO});var zO=R(mf=>{"use strict";c();Object.defineProperty(mf,"__esModule",{value:!0});mf.recursionDetectionMiddleware=void 0;var AW=(Wh(),Y(Vh)),TW=ie(),H_="X-Amzn-Trace-Id",RW="AWS_LAMBDA_FUNCTION_NAME",IW="_X_AMZN_TRACE_ID",OW=()=>t=>async e=>{let{request:r}=e;if(!TW.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(f=>f.toLowerCase()===H_.toLowerCase())??H_;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[RW],o=process.env[IW],u=(await AW.InvokeStore.getInstanceAsync())?.getXRayTraceId()??o,d=f=>typeof f=="string"&&f.length>0;return d(s)&&d(u)&&(r.headers[H_]=u),t({...e,request:r})};mf.recursionDetectionMiddleware=OW});var dc=R(hf=>{"use strict";c();var q_=zO(),PW={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},NW=t=>({applyToStack:e=>{e.add(q_.recursionDetectionMiddleware(),PW)}});hf.getRecursionDetectionPlugin=NW;Object.keys(q_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(hf,t)&&Object.defineProperty(hf,t,{enumerable:!0,get:function(){return q_[t]}})})});var G_,Wt,Ei=S(()=>{c();J();G_=v(z()),Wt=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:u,httpHeader:d,httpLabel:f,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!u&&!d&&!f&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,o,i){let a=r,u=e;e.includes("#")&&([a,u]=e.split("#"));let d={$metadata:o,$fault:n.statusCode<500?"client":"server"},f=B.for(a);try{return{errorSchema:i?.(f,u)??f.getSchema(e),errorMetadata:d}}catch{s.message=s.message??s.Message??"UnknownError";let g=B.for("smithy.ts.sdk.synthetic."+a),h=g.getBaseException();if(h){let y=g.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new y({name:u}),d),s)}throw this.decorateServiceException(Object.assign(new Error(u),d),s)}}decorateServiceException(e,r={}){if(this.queryCompat){let n=e.Message??r.Message,s=(0,G_.decorateServiceException)(e,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};let o=s.$metadata.requestId;return o&&(s.RequestId=o),s}return(0,G_.decorateServiceException)(e,r)}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(e),a={Code:s,Type:o};Object.assign(e,a);for(let[u,d]of i)a[u==="message"?"Message":u]=d;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(s=>M.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}});var gf,VO=S(()=>{c();lS();J();Ei();gf=class extends ti{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r,this.mixin=new Wt(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=(()=>{let y=n.headers["x-amzn-query-error"];return y&&this.awsQueryCompatible?y.split(";")[0]:ei(n,s)??"Unknown"})(),{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),d=M.of(a),f=s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f),h={};for(let[y,x]of d.structIterator())s[y]!=null&&(h[y]=this.deserializer.readValue(x,s[y]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}}});var WO,KO,YO,XO=S(()=>{c();WO=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},KO=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},YO=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var at,us=S(()=>{c();at=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var QO=R(yf=>{"use strict";c();Object.defineProperty(yf,"__esModule",{value:!0});yf.fromBase64=void 0;var kW=Tt(),DW=/^[A-Za-z0-9+/]*={0,2}$/,MW=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!DW.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,kW.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};yf.fromBase64=MW});var JO=R(Sf=>{"use strict";c();Object.defineProperty(Sf,"__esModule",{value:!0});Sf.toBase64=void 0;var $W=Tt(),UW=Ce(),BW=t=>{let e;if(typeof t=="string"?e=(0,UW.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,$W.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};Sf.toBase64=BW});var vn=R(lc=>{"use strict";c();var ZO=QO(),eP=JO();Object.keys(ZO).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(lc,t)&&Object.defineProperty(lc,t,{enumerable:!0,get:function(){return ZO[t]}})});Object.keys(eP).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(lc,t)&&Object.defineProperty(lc,t,{enumerable:!0,get:function(){return eP[t]}})})});function*wi(t,e){if(t.isUnitSchema())return;let r=t.getSchema();for(let n=0;n<r[4].length;++n){let s=r[4][n],o=r[5][n],i=new M([o,0],s);!(s in e)&&!i.isIdempotencyToken()||(yield[s,i])}}function*tP(t,e,r){if(t.isUnitSchema())return;let n=t.getSchema(),s=Object.keys(e).filter(o=>o!=="__type").length;for(let o=0;o<n[4].length&&s!==0;++o){let i=n[4][o],a=n[5][o],u=new M([a,0],i),d=i;r&&(d=u.getMergedTraits()[r]??i),d in e&&(yield[i,u],s-=1)}}var fc=S(()=>{c();J()});var vi,z_=S(()=>{c();vi=class{from;to;keys;constructor(e,r){this.from=e,this.to=r,this.keys=new Set(Object.keys(this.from).filter(n=>n!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let e=this.keys.values().next().value,r=this.from[e];this.to.$unknown=[e,r]}}}});function rP(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new te(n,"bigDecimal"):BigInt(n)}return e}var nP=S(()=>{c();Me()});var sP,oP,_f,V_=S(()=>{c();sP=v(z()),oP=v(Ce()),_f=(t,e)=>(0,sP.collectBody)(t,e).then(r=>(e?.utf8Encoder??oP.toUtf8)(r))});var pc,iP,bi,mc=S(()=>{c();V_();pc=(t,e)=>_f(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),iP=async(t,e)=>{let r=await pc(t,e);return r.message=r.message??r.Message,r},bi=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let o=r(e,"code");if(o&&e[o]!==void 0)return n(e[o]);if(e.__type!==void 0)return n(e.__type)}}});var aP,xi,W_=S(()=>{c();Re();J();Me();aP=v(vn());us();fc();z_();nP();mc();xi=class extends at{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,rP):await pc(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let n=r!==null&&typeof r=="object",s=M.of(e);if(n){if(s.isStructSchema()){let i=r,a=s.isUnionSchema(),u={},d,{jsonName:f}=this.settings;f&&(d={});let l;a&&(l=new vi(i,u));for(let[g,h]of tP(s,i,f?"jsonName":!1)){let y=g;f&&(y=h.getMergedTraits().jsonName??y,d[y]=g),a&&l.mark(y),i[y]!=null&&(u[g]=this._read(h,i[y]))}if(a)l.writeUnknown();else if(typeof i.__type=="string")for(let[g,h]of Object.entries(i)){let y=f?d[g]??g:g;y in u||(u[y]=h)}return u}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],u=!!s.getMergedTraits().sparse;for(let d of r)(u||d!=null)&&a.push(this._read(i,d));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},u=!!s.getMergedTraits().sparse;for(let[d,f]of Object.entries(r))(u||f!=null)&&(a[d]=this._read(i,f));return a}}if(s.isBlobSchema()&&typeof r=="string")return(0,aP.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o)return o==="application/json"||o.endsWith("+json")?je.from(r):r;if(s.isTimestampSchema()&&r!=null)switch($e(s,this.settings)){case 5:return Ia(r);case 6:return Oa(r);case 7:return Pa(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof te)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new te(i.string,i.type):new te(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof te?i[a]=u:i[a]=this._read(s,u);return i}else return structuredClone(r);return r}}});var cP,Ef,uP=S(()=>{c();Me();cP="\u039D",Ef=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof te){let n=`${cP+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${cP+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var K_,Ci,Y_=S(()=>{c();Re();J();Me();K_=v(vn());us();fc();uP();Ci=class extends at{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=M.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=M.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let n=new Ef;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(e,r,n){let s=r!==null&&typeof r=="object",o=M.of(e);if(s){if(o.isStructSchema()){let i=r,a={},{jsonName:u}=this.settings,d;u&&(d={});for(let[f,l]of wi(o,i)){let g=this._write(l,i[f],o);if(g!==void 0){let h=f;u&&(h=l.getMergedTraits().jsonName??f,d[f]=h),a[h]=g}}if(o.isUnionSchema()&&Object.keys(a).length===0){let{$unknown:f}=i;if(Array.isArray(f)){let[l,g]=f;a[l]=this._write(15,g)}}else if(typeof i.__type=="string")for(let[f,l]of Object.entries(i)){let g=u?d[f]??f:f;g in a||(a[g]=this._write(15,l))}return a}if(Array.isArray(r)&&o.isListSchema()){let i=o.getValueSchema(),a=[],u=!!o.getMergedTraits().sparse;for(let d of r)(u||d!=null)&&a.push(this._write(i,d));return a}if(o.isMapSchema()){let i=o.getValueSchema(),a={},u=!!o.getMergedTraits().sparse;for(let[d,f]of Object.entries(r))(u||f!=null)&&(a[d]=this._write(i,f));return a}if(r instanceof Uint8Array&&(o.isBlobSchema()||o.isDocumentSchema()))return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??K_.toBase64)(r);if(r instanceof Date&&(o.isTimestampSchema()||o.isDocumentSchema()))switch($e(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return js(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof te&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Ge.v4)();let i=o.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?je.from(r):r}if(typeof r=="number"&&o.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&o.isBlobSchema())return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??K_.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,u]of Object.entries(r))u instanceof te?(this.useReplacer=!0,i[a]=u):i[a]=this._write(o,u);return i}else return structuredClone(r);return r}}}});var ds,wf=S(()=>{c();us();W_();Y_();ds=class extends at{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Ci(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new xi(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var ls,vf=S(()=>{c();Re();J();Ei();wf();mc();ls=class extends Mt{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=s??new ds({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new Wt(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(yt(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=bi(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),d=M.of(a),f=s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f),h={};for(let[y,x]of d.structIterator())s[y]!=null&&(h[y]=this.codec.createDeserializer().readObject(x,s[y]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}}});var bf,dP=S(()=>{c();vf();bf=class extends ls{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var xf,lP=S(()=>{c();vf();xf=class extends ls{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var fs,fP=S(()=>{c();Re();J();Ei();wf();mc();fs=class extends dr{serializer;deserializer;codec;mixin=new Wt;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new ds(r),this.serializer=new fr(this.codec.createSerializer(),r),this.deserializer=new lr(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=M.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,r,n){let s=await super.deserializeResponse(e,r,n),o=M.of(e.output);for(let[i,a]of o.structIterator())a.getMemberTraits().httpPayload&&!(i in s)&&(s[i]=null);return s}async handleError(e,r,n,s,o){let i=bi(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),d=M.of(a),f=s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[y,x]of d.structIterator()){let T=x.getMergedTraits().jsonName??y;h[y]=this.codec.createDeserializer().readObject(x,s[T])}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}getDefaultContentType(){return"application/json"}}});var pP,mP,hP=S(()=>{c();pP=v(z()),mP=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,pP.expectUnion)(t)}});var gP=R(Q_=>{"use strict";c();Object.defineProperty(Q_,"__esModule",{value:!0});Q_.parseXML=FW;var LW=RS(),X_=new LW.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});X_.addEntity("#xD","\r");X_.addEntity("#10",`
`);function FW(t){return X_.parse(t,!0)}});var Tf=R(Af=>{"use strict";c();var jW=gP();function HW(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function qW(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Cf=class{value;constructor(e){this.value=e}toString(){return qW(""+this.value)}},J_=class t{name;children;attributes={};static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new Cf(r)),n!==void 0&&s.withName(n),s}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(e,r,n,s){if(e[r]!=null){let o=s(),i=new t(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${HW(""+o)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Af,"parseXML",{enumerable:!0,get:function(){return jW.parseXML}});Af.XmlNode=J_;Af.XmlText=Cf});var yP,SP,_P,ps,Rf=S(()=>{c();yP=v(Tf());Re();J();SP=v(z()),_P=v(Ce());us();z_();ps=class extends at{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new ln(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){let s=M.of(e),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},f=Object.keys(o)[0];return o[f].isBlobSchema()?d[f]=r:d[f]=this.read(o[f],r),d}let a=(this.serdeContext?.utf8Encoder??_P.toUtf8)(r),u=this.parseXml(a);return this.readSchema(e,n?u[n]:u)}readSchema(e,r){let n=M.of(e);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let u=n.getValueSchema(),d=[],f=u.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[f],g=Array.isArray(l)?l:[l];for(let h of g)(h!=null||o)&&d.push(this.readSchema(u,h));return d}let a={};if(n.isMapSchema()){let u=n.getKeySchema(),d=n.getValueSchema(),f;i?f=Array.isArray(r)?r:[r]:f=Array.isArray(r.entry)?r.entry:[r.entry];let l=u.getMergedTraits().xmlName??"key",g=d.getMergedTraits().xmlName??"value";for(let h of f){let y=h[l],x=h[g];(x!=null||o)&&(a[y]=this.readSchema(d,x))}return a}if(n.isStructSchema()){let u=n.isUnionSchema(),d;u&&(d=new vi(r,a));for(let[f,l]of n.structIterator()){let g=l.getMergedTraits(),h=g.httpPayload?g.xmlName??l.getName():l.getMemberTraits().xmlName??f;u&&d.mark(h),r[h]!=null&&(a[f]=this.readSchema(l,r[h]))}return u&&d.writeUnknown(),a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=(0,yP.parseXML)(e)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:e}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,SP.getValueFromTextNode)(o)}return{}}}});var EP,wP,If,vP=S(()=>{c();Re();J();Me();EP=v(z()),wP=v(vn());us();fc();If=class extends at{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");let s=M.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??wP.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Ge.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof te?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),$e(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,EP.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(s.isDocumentSchema())Array.isArray(r)?this.write(79,r,n):r instanceof Date?this.write(4,r,n):r instanceof Uint8Array?this.write(21,r,n):r&&typeof r=="object"?this.write(143,r,n):(this.writeKey(n),this.writeValue(String(r)));else if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let u of r){if(u==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),f=i?`${n}${a}`:`${n}${d}.${a}`;this.write(o,u,f),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,u=1;for(let[d,f]of Object.entries(r)){if(f==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),g=a?`${n}${u}.${l}`:`${n}entry.${u}.${l}`,h=this.getKey("value",i.getMergedTraits().xmlName),y=a?`${n}${u}.${h}`:`${n}entry.${u}.${h}`;this.write(o,d,g),this.write(i,f,y),++u}}}else if(s.isStructSchema()){if(r&&typeof r=="object"){let o=!1;for(let[i,a]of wi(s,r)){if(r[i]==null&&!a.isIdempotencyToken())continue;let u=this.getKey(i,a.getMergedTraits().xmlName),d=`${n}${u}`;this.write(a,r[i],d),o=!0}if(!o&&s.isUnionSchema()){let{$unknown:i}=r;if(Array.isArray(i)){let[a,u]=i,d=`${n}${a}`;this.write(15,u,d)}}}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${Dt(e)}=`}writeValue(e){this.buffer+=Dt(e)}}});var ms,Z_=S(()=>{c();Re();J();Ei();Rf();vP();ms=class extends Mt{options;serializer;deserializer;mixin=new Wt;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new If(r),this.deserializer=new ps(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(yt(e.input)==="unit"||!s.body)&&(s.body="");let o=e.name.split("#")[1]??e.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){let s=this.deserializer,o=M.of(e.output),i={};if(n.statusCode>=300){let l=await gt(n.body,r);l.byteLength>0&&Object.assign(i,await s.read(15,l)),await this.handleError(e,r,n,i,this.deserializeMetadata(n))}for(let l in n.headers){let g=n.headers[l];delete n.headers[l],n.headers[l.toLowerCase()]=g}let a=e.name.split("#")[1]??e.name,u=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await gt(n.body,r);return d.byteLength>0&&Object.assign(i,await s.read(o,d,u)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(e,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),u=this.loadQueryErrorMessage(s);a.message=u,a.Error={Type:a.Type,Code:a.Code,Message:u};let{errorSchema:d,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,this.mixin.findQueryCompatibleError),l=M.of(d),g=B.for(d[1]).getErrorCtor(d)??Error,h=new g(u),y={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[x,T]of l.structIterator()){let O=T.getMergedTraits().xmlName??x,N=a[O]??s[O];y[x]=this.deserializer.readSchema(T,N)}throw this.mixin.decorateServiceException(Object.assign(h,f,{$fault:l.getMergedTraits().error,message:u},y),s)}loadQueryErrorCode(e,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Of,bP=S(()=>{c();Z_();Of=class extends ms{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var xP,CP,eE,AP,Pf,tE=S(()=>{c();xP=v(Tf()),CP=v(z());V_();eE=(t,e)=>_f(t,e).then(r=>{if(r.length){let n;try{n=(0,xP.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,CP.getValueFromTextNode)(i)}return{}}),AP=async(t,e)=>{let r=await eE(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Pf=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var wt,rE,Nf,Ai,nE=S(()=>{c();wt=v(Tf());Re();J();Me();rE=v(z()),Nf=v(vn());us();fc();Ai=class extends at{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let n=M.of(e);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Nf.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,n){let s=e.getMergedTraits(),o=e.isMemberSchema()&&!s.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():s.xmlName??e.getName();if(!o||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let i=wt.XmlNode.of(o),[a,u]=this.getXmlnsAttribute(e,n);for(let[f,l]of wi(e,r)){let g=r[f];if(g!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){i.addAttribute(l.getMergedTraits().xmlName??f,this.writeSimple(l,g));continue}if(l.isListSchema())this.writeList(l,g,i,u);else if(l.isMapSchema())this.writeMap(l,g,i,u);else if(l.isStructSchema())i.addChildNode(this.writeStruct(l,g,u));else{let h=wt.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,g,h,u),i.addChildNode(h)}}}let{$unknown:d}=r;if(d&&e.isUnionSchema()&&Array.isArray(d)&&Object.keys(r).length===1){let[f,l]=d,g=wt.XmlNode.of(f);if(typeof l!="string")if(r instanceof wt.XmlNode||r instanceof wt.XmlText)i.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,l,g,u),i.addChildNode(g)}return u&&i.addAttribute(a,u),i}writeList(e,r,n,s){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let o=e.getMergedTraits(),i=e.getValueSchema(),a=i.getMergedTraits(),u=!!a.sparse,d=!!o.xmlFlattened,[f,l]=this.getXmlnsAttribute(e,s),g=(h,y)=>{if(i.isListSchema())this.writeList(i,Array.isArray(y)?y:[y],h,l);else if(i.isMapSchema())this.writeMap(i,y,h,l);else if(i.isStructSchema()){let x=this.writeStruct(i,y,l);h.addChildNode(x.withName(d?o.xmlName??e.getMemberName():a.xmlName??"member"))}else{let x=wt.XmlNode.of(d?o.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,y,x,l),h.addChildNode(x)}};if(d)for(let h of r)(u||h!=null)&&g(n,h);else{let h=wt.XmlNode.of(o.xmlName??e.getMemberName());l&&h.addAttribute(f,l);for(let y of r)(u||y!=null)&&g(h,y);n.addChildNode(h)}}writeMap(e,r,n,s,o=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getKeySchema(),d=a.getMergedTraits().xmlName??"key",f=e.getValueSchema(),l=f.getMergedTraits(),g=l.xmlName??"value",h=!!l.sparse,y=!!i.xmlFlattened,[x,T]=this.getXmlnsAttribute(e,s),O=(N,L,j)=>{let V=wt.XmlNode.of(d,L),[ce,Ae]=this.getXmlnsAttribute(a,T);Ae&&V.addAttribute(ce,Ae),N.addChildNode(V);let Z=wt.XmlNode.of(g);f.isListSchema()?this.writeList(f,j,Z,T):f.isMapSchema()?this.writeMap(f,j,Z,T,!0):f.isStructSchema()?Z=this.writeStruct(f,j,T):this.writeSimpleInto(f,j,Z,T),N.addChildNode(Z)};if(y){for(let[N,L]of Object.entries(r))if(h||L!=null){let j=wt.XmlNode.of(i.xmlName??e.getMemberName());O(j,N,L),n.addChildNode(j)}}else{let N;o||(N=wt.XmlNode.of(i.xmlName??e.getMemberName()),T&&N.addAttribute(x,T),n.addChildNode(N));for(let[L,j]of Object.entries(r))if(h||j!=null){let V=wt.XmlNode.of("entry");O(V,L,j),(o?n:N).addChildNode(V)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=M.of(e),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??Nf.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch($e(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,rE.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,rE.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof te?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,Ge.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(e,r,n,s){let o=this.writeSimple(e,r),i=M.of(e),a=new wt.XmlText(o),[u,d]=this.getXmlnsAttribute(i,s);d&&n.addAttribute(u,d),n.addChildNode(a)}getXmlnsAttribute(e,r){let n=e.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var Ti,sE=S(()=>{c();us();Rf();nE();Ti=class extends at{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Ai(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new ps(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var kf,TP=S(()=>{c();Re();J();Ei();tE();sE();kf=class extends dr{codec;serializer;deserializer;mixin=new Wt;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new Ti(r),this.serializer=new fr(this.codec.createSerializer(),r),this.deserializer=new lr(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=M.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return typeof s.body=="string"&&s.headers["content-type"]===this.getDefaultContentType()&&!s.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=Pf(n,s)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),d=M.of(a),f=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,g=new l(f);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[y,x]of d.structIterator()){let T=x.getMergedTraits().xmlName??y,O=s.Error?.[T]??s[T];h[y]=this.codec.createDeserializer().readSchema(x,O)}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:f},h),s)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(let[,r]of e.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var RP={};Be(RP,{AwsEc2QueryProtocol:()=>Of,AwsJson1_0Protocol:()=>bf,AwsJson1_1Protocol:()=>xf,AwsJsonRpcProtocol:()=>ls,AwsQueryProtocol:()=>ms,AwsRestJsonProtocol:()=>fs,AwsRestXmlProtocol:()=>kf,AwsSmithyRpcV2CborProtocol:()=>gf,JsonCodec:()=>ds,JsonShapeDeserializer:()=>xi,JsonShapeSerializer:()=>Ci,XmlCodec:()=>Ti,XmlShapeDeserializer:()=>ps,XmlShapeSerializer:()=>Ai,_toBool:()=>KO,_toNum:()=>YO,_toStr:()=>WO,awsExpectUnion:()=>mP,loadRestJsonErrorCode:()=>bi,loadRestXmlErrorCode:()=>Pf,parseJsonBody:()=>pc,parseJsonErrorBody:()=>iP,parseXmlBody:()=>eE,parseXmlErrorBody:()=>AP});var Ri=S(()=>{c();VO();XO();dP();lP();vf();fP();wf();W_();Y_();hP();mc();bP();Z_();TP();sE();Rf();nE();tE()});var hc={};Be(hc,{AWSSDKSigV4Signer:()=>M_,AwsEc2QueryProtocol:()=>Of,AwsJson1_0Protocol:()=>bf,AwsJson1_1Protocol:()=>xf,AwsJsonRpcProtocol:()=>ls,AwsQueryProtocol:()=>ms,AwsRestJsonProtocol:()=>fs,AwsRestXmlProtocol:()=>kf,AwsSdkSigV4ASigner:()=>ic,AwsSdkSigV4Signer:()=>it,AwsSmithyRpcV2CborProtocol:()=>gf,JsonCodec:()=>ds,JsonShapeDeserializer:()=>xi,JsonShapeSerializer:()=>Ci,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>cs,NODE_SIGV4A_CONFIG_OPTIONS:()=>MO,XmlCodec:()=>Ti,XmlShapeDeserializer:()=>ps,XmlShapeSerializer:()=>Ai,_toBool:()=>KO,_toNum:()=>YO,_toStr:()=>WO,awsExpectUnion:()=>mP,emitWarningIfUnsupportedVersion:()=>os,getBearerTokenEnvKey:()=>ff,loadRestJsonErrorCode:()=>bi,loadRestXmlErrorCode:()=>Pf,parseJsonBody:()=>pc,parseJsonErrorBody:()=>iP,parseXmlBody:()=>eE,parseXmlErrorBody:()=>AP,resolveAWSSDKSigV4Config:()=>UO,resolveAwsSdkSigV4AConfig:()=>DO,resolveAwsSdkSigV4Config:()=>wn,setCredentialFeature:()=>is,setFeature:()=>QI,setTokenFeature:()=>ZI,state:()=>nf,validateSigningProperties:()=>_i});var Rt=S(()=>{c();Vt();j_();Ri()});var Oi=R(Ii=>{"use strict";c();var GW=(Ie(),Y(Or)),zW=pn(),VW=ie(),Ur=(Rt(),Y(hc)),NP=void 0;function WW(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function KW(t){let e=GW.normalizeProvider(t.userAgentAppId??NP),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!WW(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var YW=/\d{12}\.ddb/;async function XW(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Ur.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let o=await e.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Ur.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):Ur.setFeature(t,"RETRY_MODE_STANDARD","E"):Ur.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let o=t.endpointV2;switch(String(o?.url?.hostname).match(YW)&&Ur.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Ur.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Ur.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Ur.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&Ur.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Ur.setFeature(t,i,a)}}var IP="user-agent",oE="x-amz-user-agent",OP=" ",iE="/",QW=/[^!$%&'*+\-.^_`|~\w]/g,JW=/[^!$%&'*+\-.^_`|~\w#]/g,PP="-",ZW=1024;function e9(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=ZW){e.length?e+=","+n:e+=n;continue}break}return e}var kP=t=>(e,r)=>async n=>{let{request:s}=n;if(!VW.HttpRequest.isInstance(s))return e(n);let{headers:o}=s,i=r?.userAgent?.map(Df)||[],a=(await t.defaultUserAgentProvider()).map(Df);await XW(r,t,n);let u=r;a.push(`m/${e9(Object.assign({},r.__smithy_context?.features,u.__aws_sdk_context?.features))}`);let d=t?.customUserAgent?.map(Df)||[],f=await t.userAgentAppId();f&&a.push(Df(["app",`${f}`]));let l=zW.getUserAgentPrefix(),g=(l?[l]:[]).concat([...a,...i,...d]).join(OP),h=[...a.filter(y=>y.startsWith("aws-sdk-")),...d].join(OP);return t.runtime!=="browser"?(h&&(o[oE]=o[oE]?`${o[IP]} ${h}`:h),o[IP]=g):o[oE]=g,e({...n,request:s})},Df=t=>{let e=t[0].split(iE).map(i=>i.replace(QW,PP)).join(iE),r=t[1]?.replace(JW,PP),n=e.indexOf(iE),s=e.substring(0,n),o=e.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,u)=>{switch(u){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},DP={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},t9=t=>({applyToStack:e=>{e.add(kP(t),DP)}});Ii.DEFAULT_UA_APP_ID=NP;Ii.getUserAgentMiddlewareOptions=DP;Ii.getUserAgentPlugin=t9;Ii.resolveUserAgentConfig=KW;Ii.userAgentMiddleware=kP});function r9(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function n9(t){return{schemeId:"smithy.api#noAuth"}}var gc,MP,$P,UP,aE=S(()=>{c();Rt();gc=v(tt()),MP=async(t,e,r)=>({operation:(0,gc.getSmithyContext)(e).operation,region:await(0,gc.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});$P=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(n9(t));break}default:e.push(r9(t))}return e},UP=t=>{let e=wn(t);return Object.assign(e,{authSchemePreference:(0,gc.normalizeProvider)(t.authSchemePreference??[])})}});var BP,LP,cE=S(()=>{c();BP=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),LP={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Pi,Mf=S(()=>{Pi={name:"@aws-sdk/nested-clients",version:"3.974.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var yc=R(Js=>{"use strict";c();var FP=ee("os"),uE=ee("process"),o9=Oi(),jP={isCrtAvailable:!1},i9=()=>jP.isCrtAvailable?["md/crt-avail"]:null,HP=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${FP.platform()}`,FP.release()],["lang/js"],["md/nodejs",`${uE.versions.node}`]],s=i9();s&&n.push(s),t&&n.push([`api/${t}`,e]),uE.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${uE.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},a9=HP,qP="AWS_SDK_UA_APP_ID",GP="sdk_ua_app_id",c9="sdk-ua-app-id",u9={environmentVariableSelector:t=>t[qP],configFileSelector:t=>t[GP]??t[c9],default:o9.DEFAULT_UA_APP_ID};Js.NODE_APP_ID_CONFIG_OPTIONS=u9;Js.UA_APP_ID_ENV_NAME=qP;Js.UA_APP_ID_INI_NAME=GP;Js.createDefaultUserAgentProvider=HP;Js.crtAvailability=jP;Js.defaultUserAgent=a9});var Zs=R(WP=>{"use strict";c();var dE=Tt(),d9=Ce(),l9=ee("buffer"),zP=ee("crypto"),lE=class{algorithmIdentifier;secret;hash;constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(d9.toUint8Array(VP(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?zP.createHmac(this.algorithmIdentifier,VP(this.secret)):zP.createHash(this.algorithmIdentifier)}};function VP(t,e){return l9.Buffer.isBuffer(t)?t:typeof t=="string"?dE.fromString(t,e):ArrayBuffer.isView(t)?dE.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):dE.fromArrayBuffer(t)}WP.Hash=lE});var eo=R(KP=>{"use strict";c();var fE=ee("node:fs"),f9=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof fE.ReadStream){if(t.path!=null)return fE.lstatSync(t.path).size;if(typeof t.fd=="number")return fE.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};KP.calculateBodyLength=f9});var to=R(JP=>{"use strict";c();var p9=Ve(),YP=Gt(),m9=ze(),h9="AWS_EXECUTION_ENV",XP="AWS_REGION",QP="AWS_DEFAULT_REGION",g9="AWS_EC2_METADATA_DISABLED",y9=["in-region","cross-region","mobile","standard","legacy"],S9="/latest/meta-data/placement/region",_9="AWS_DEFAULTS_MODE",E9="defaults_mode",w9={environmentVariableSelector:t=>t[_9],configFileSelector:t=>t[E9],default:"legacy"},v9=({region:t=YP.loadConfig(p9.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=YP.loadConfig(w9)}={})=>m9.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return b9(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${y9.join(", ")}, got ${r}`)}}),b9=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await x9();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},x9=async()=>{if(process.env[h9]&&(process.env[XP]||process.env[QP]))return process.env[XP]??process.env[QP];if(!process.env[g9])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>v(sc())),r=await t();return(await e({...r,path:S9})).toString()}catch{}};JP.resolveDefaultsModeConfig=v9});var cN,Yt,Xt,Di,ZP,Sc,Ni,ki,bn,pE,mE,eN,tN,rN,uN,dN,Kt,nN,lN,sN,oN,iN,aN,C9,fN,pN=S(()=>{c();cN="required",Yt="fn",Xt="argv",Di="ref",ZP="isSet",Sc="booleanEquals",Ni="error",ki="endpoint",bn="tree",pE="PartitionResult",mE="getAttr",eN={[cN]:!1,type:"string"},tN={[cN]:!0,default:!1,type:"boolean"},rN={[Di]:"Endpoint"},uN={[Yt]:Sc,[Xt]:[{[Di]:"UseFIPS"},!0]},dN={[Yt]:Sc,[Xt]:[{[Di]:"UseDualStack"},!0]},Kt={},nN={[Yt]:mE,[Xt]:[{[Di]:pE},"supportsFIPS"]},lN={[Di]:pE},sN={[Yt]:Sc,[Xt]:[!0,{[Yt]:mE,[Xt]:[lN,"supportsDualStack"]}]},oN=[uN],iN=[dN],aN=[{[Di]:"Region"}],C9={version:"1.0",parameters:{Region:eN,UseDualStack:tN,UseFIPS:tN,Endpoint:eN},rules:[{conditions:[{[Yt]:ZP,[Xt]:[rN]}],rules:[{conditions:oN,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ni},{conditions:iN,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ni},{endpoint:{url:rN,properties:Kt,headers:Kt},type:ki}],type:bn},{conditions:[{[Yt]:ZP,[Xt]:aN}],rules:[{conditions:[{[Yt]:"aws.partition",[Xt]:aN,assign:pE}],rules:[{conditions:[uN,dN],rules:[{conditions:[{[Yt]:Sc,[Xt]:[!0,nN]},sN],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Kt,headers:Kt},type:ki}],type:bn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ni}],type:bn},{conditions:oN,rules:[{conditions:[{[Yt]:Sc,[Xt]:[nN,!0]}],rules:[{conditions:[{[Yt]:"stringEquals",[Xt]:[{[Yt]:mE,[Xt]:[lN,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Kt,headers:Kt},type:ki},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Kt,headers:Kt},type:ki}],type:bn},{error:"FIPS is enabled but this partition does not support FIPS",type:Ni}],type:bn},{conditions:iN,rules:[{conditions:[sN],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Kt,headers:Kt},type:ki}],type:bn},{error:"DualStack is enabled but this partition does not support DualStack",type:Ni}],type:bn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Kt,headers:Kt},type:ki}],type:bn}],type:bn},{error:"Invalid Configuration: Missing Region",type:Ni}]},fN=C9});var mN,Mi,A9,hN,gN=S(()=>{c();mN=v(pn()),Mi=v(fn());pN();A9=new Mi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),hN=(t,e={})=>A9.get(t,()=>(0,Mi.resolveEndpoint)(fN,{endpointParams:t,logger:e.logger}));Mi.customEndpointFunctions.aws=mN.awsEndpointFunctions});var yN,SN,$f,Uf,_N,EN=S(()=>{c();Rt();Ri();Ie();yN=v(z()),SN=v(Pr()),$f=v(vn()),Uf=v(Ce());aE();gN();_N=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??$f.fromBase64,base64Encoder:t?.base64Encoder??$f.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??hN,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??$P,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new it},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $t}],logger:t?.logger??new yN.NoOpLogger,protocol:t?.protocol??fs,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??SN.parseUrl,utf8Decoder:t?.utf8Decoder??Uf.fromUtf8,utf8Encoder:t?.utf8Encoder??Uf.toUtf8})});var Bf,gs,wN,Lf,hs,Ff,jf,vN,bN,xN,CN,AN=S(()=>{c();Mf();Rt();Bf=v(yc()),gs=v(Ve()),wN=v(Zs()),Lf=v(Bt()),hs=v(Gt()),Ff=v(on()),jf=v(z()),vN=v(eo()),bN=v(to()),xN=v(rs());EN();CN=t=>{(0,jf.emitWarningIfUnsupportedVersion)(process.version);let e=(0,bN.resolveDefaultsModeConfig)(t),r=()=>e().then(jf.loadConfigsForDefaultMode),n=_N(t);os(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,hs.loadConfig)(cs,s),bodyLengthChecker:t?.bodyLengthChecker??vN.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Bf.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Pi.version}),maxAttempts:t?.maxAttempts??(0,hs.loadConfig)(Lf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,hs.loadConfig)(gs.NODE_REGION_CONFIG_OPTIONS,{...gs.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Ff.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,hs.loadConfig)({...Lf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||xN.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??wN.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Ff.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,hs.loadConfig)(gs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,hs.loadConfig)(gs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,hs.loadConfig)(Bf.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var RN=R($i=>{"use strict";c();Object.defineProperty($i,"__esModule",{value:!0});$i.warning=void 0;$i.stsRegionDefaultResolver=R9;var TN=Ve(),T9=Gt();function R9(t={}){return(0,T9.loadConfig)({...TN.NODE_REGION_CONFIG_OPTIONS,async default(){return $i.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...TN.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}$i.warning={silence:!1}});var Ui=R(Br=>{"use strict";c();var IN=RN(),_c=Ve(),I9=t=>({setRegion(e){t.region=e},region(){return t.region}}),O9=t=>({region:t.region()});Object.defineProperty(Br,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return _c.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Br,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return _c.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Br,"REGION_ENV_NAME",{enumerable:!0,get:function(){return _c.REGION_ENV_NAME}});Object.defineProperty(Br,"REGION_INI_NAME",{enumerable:!0,get:function(){return _c.REGION_INI_NAME}});Object.defineProperty(Br,"resolveRegionConfig",{enumerable:!0,get:function(){return _c.resolveRegionConfig}});Br.getAwsRegionExtensionConfiguration=I9;Br.resolveAwsRegionExtensionConfiguration=O9;Object.keys(IN).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Br,t)&&Object.defineProperty(Br,t,{enumerable:!0,get:function(){return IN[t]}})})});var ON,PN,NN=S(()=>{c();ON=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},PN=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Hf,qf,Gf,kN,DN=S(()=>{c();Hf=v(Ui()),qf=v(ie()),Gf=v(z());NN();kN=(t,e)=>{let r=Object.assign((0,Hf.getAwsRegionExtensionConfiguration)(t),(0,Gf.getDefaultExtensionConfiguration)(t),(0,qf.getHttpHandlerExtensionConfiguration)(t),ON(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,Hf.resolveAwsRegionExtensionConfiguration)(r),(0,Gf.resolveDefaultRuntimeConfig)(r),(0,qf.resolveHttpHandlerRuntimeConfig)(r),PN(r))}});var zf,MN,$N,Vf,UN,BN,LN,Wf,hE,Ec,gE=S(()=>{c();zf=v(cc()),MN=v(uc()),$N=v(dc()),Vf=v(Oi()),UN=v(Ve());Ie();J();BN=v(Xs()),LN=v(zt()),Wf=v(Bt()),hE=v(z());aE();cE();AN();DN();Ec=class extends hE.Client{config;constructor(...[e]){let r=CN(e||{});super(r),this.initConfig=r;let n=BP(r),s=(0,Vf.resolveUserAgentConfig)(n),o=(0,Wf.resolveRetryConfig)(s),i=(0,UN.resolveRegionConfig)(o),a=(0,zf.resolveHostHeaderConfig)(i),u=(0,LN.resolveEndpointConfig)(a),d=UP(u),f=kN(d,e?.extensions||[]);this.config=f,this.middlewareStack.use(an(this.config)),this.middlewareStack.use((0,Vf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Wf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,BN.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,zf.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,MN.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,$N.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(en(this.config,{httpAuthSchemeParametersProvider:MP,identityProviderConfigProvider:async l=>new pr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(tn(this.config))}destroy(){super.destroy()}}});var FN,We,Kf=S(()=>{c();FN=v(z()),We=class t extends FN.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var wc,vc,bc,xc,Cc,Ac,Tc,Rc,Ic,Oc,Pc,yE=S(()=>{c();Kf();wc=class t extends We{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},vc=class t extends We{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},bc=class t extends We{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},xc=class t extends We{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Cc=class t extends We{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Ac=class t extends We{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Tc=class t extends We{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},Rc=class t extends We{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Ic=class t extends We{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Oc=class t extends We{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Pc=class t extends We{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var P9,N9,k9,D9,M9,$9,U9,B9,L9,F9,j9,H9,q9,G9,z9,V9,W9,K9,Y9,X9,Lr,Q9,J9,Z9,eK,tK,Ne,rK,gr,nK,sK,yr,oK,jN,HN,iK,aK,cK,qN,uK,ge,dK,lK,fK,pK,GN,zN,VN,WN,KN,YN,XN,QN,JN,ZN,ek,tk,rk,nk,sk,SE,_E=S(()=>{c();J();yE();Kf();P9="AccessDeniedException",N9="AuthorizationPendingException",k9="AccessToken",D9="ClientSecret",M9="CreateToken",$9="CreateTokenRequest",U9="CreateTokenResponse",B9="CodeVerifier",L9="ExpiredTokenException",F9="InvalidClientException",j9="InvalidGrantException",H9="InvalidRequestException",q9="InternalServerException",G9="InvalidScopeException",z9="IdToken",V9="RefreshToken",W9="SlowDownException",K9="UnauthorizedClientException",Y9="UnsupportedGrantTypeException",X9="accessToken",Lr="client",Q9="clientId",J9="clientSecret",Z9="codeVerifier",eK="code",tK="deviceCode",Ne="error",rK="expiresIn",gr="error_description",nK="grantType",sK="http",yr="httpError",oK="idToken",jN="reason",HN="refreshToken",iK="redirectUri",aK="scope",cK="server",qN="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",uK="tokenType",ge="com.amazonaws.ssooidc",dK=[0,ge,k9,8,0],lK=[0,ge,D9,8,0],fK=[0,ge,B9,8,0],pK=[0,ge,z9,8,0],GN=[0,ge,V9,8,0],zN=[-3,ge,P9,{[Ne]:Lr,[yr]:400},[Ne,jN,gr],[0,0,0]];B.for(ge).registerError(zN,wc);VN=[-3,ge,N9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(VN,vc);WN=[3,ge,$9,0,[Q9,J9,nK,tK,eK,HN,aK,iK,Z9],[0,[()=>lK,0],0,0,0,[()=>GN,0],64,0,[()=>fK,0]],3],KN=[3,ge,U9,0,[X9,uK,rK,HN,oK],[[()=>dK,0],0,1,[()=>GN,0],[()=>pK,0]]],YN=[-3,ge,L9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(YN,bc);XN=[-3,ge,q9,{[Ne]:cK,[yr]:500},[Ne,gr],[0,0]];B.for(ge).registerError(XN,xc);QN=[-3,ge,F9,{[Ne]:Lr,[yr]:401},[Ne,gr],[0,0]];B.for(ge).registerError(QN,Cc);JN=[-3,ge,j9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(JN,Ac);ZN=[-3,ge,H9,{[Ne]:Lr,[yr]:400},[Ne,jN,gr],[0,0,0]];B.for(ge).registerError(ZN,Tc);ek=[-3,ge,G9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(ek,Rc);tk=[-3,ge,W9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(tk,Ic);rk=[-3,ge,K9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(rk,Oc);nk=[-3,ge,Y9,{[Ne]:Lr,[yr]:400},[Ne,gr],[0,0]];B.for(ge).registerError(nk,Pc);sk=[-3,qN,"SSOOIDCServiceException",0,[],[]];B.for(qN).registerError(sk,We);SE=[9,ge,M9,{[sK]:["POST","/token",200]},()=>WN,()=>KN]});var ok,EE,Nc,wE=S(()=>{c();ok=v(zt()),EE=v(z());cE();_E();Nc=class extends EE.Command.classBuilder().ep(LP).m(function(e,r,n,s){return[(0,ok.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(SE).build(){}});var ik,mK,Yf,ak=S(()=>{c();ik=v(z());wE();gE();mK={CreateTokenCommand:Nc},Yf=class extends Ec{};(0,ik.createAggregatedClient)(mK,Yf)});var ck=S(()=>{c();wE()});var hK,gK,uk=S(()=>{c();hK={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},gK={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var dk=S(()=>{c()});var vE={};Be(vE,{$Command:()=>EE.Command,AccessDeniedException:()=>wc,AccessDeniedException$:()=>zN,AccessDeniedExceptionReason:()=>hK,AuthorizationPendingException:()=>vc,AuthorizationPendingException$:()=>VN,CreateToken$:()=>SE,CreateTokenCommand:()=>Nc,CreateTokenRequest$:()=>WN,CreateTokenResponse$:()=>KN,ExpiredTokenException:()=>bc,ExpiredTokenException$:()=>YN,InternalServerException:()=>xc,InternalServerException$:()=>XN,InvalidClientException:()=>Cc,InvalidClientException$:()=>QN,InvalidGrantException:()=>Ac,InvalidGrantException$:()=>JN,InvalidRequestException:()=>Tc,InvalidRequestException$:()=>ZN,InvalidRequestExceptionReason:()=>gK,InvalidScopeException:()=>Rc,InvalidScopeException$:()=>ek,SSOOIDC:()=>Yf,SSOOIDCClient:()=>Ec,SSOOIDCServiceException:()=>We,SSOOIDCServiceException$:()=>sk,SlowDownException:()=>Ic,SlowDownException$:()=>tk,UnauthorizedClientException:()=>Oc,UnauthorizedClientException$:()=>rk,UnsupportedGrantTypeException:()=>Pc,UnsupportedGrantTypeException$:()=>nk,__Client:()=>hE.Client});var bE=S(()=>{c();gE();ak();ck();_E();uk();yE();dk();Kf()});var mk=R(Dc=>{"use strict";c();var yK=(Vt(),Y(En)),SK=(j_(),Y(FO)),Lt=ze(),kc=hr(),_K=ee("fs"),EK=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new Lt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=SK.getBearerTokenEnvKey(e);if(!(r in process.env))throw new Lt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return yK.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},wK=5*60*1e3,xE="To refresh this SSO session run 'aws sso login' with the corresponding profile.",vK=async(t,e={},r)=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(bE(),vE)),s=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i]??r?.[i];return new n(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},bK=async(t,e,r={},n)=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(bE(),vE));return(await vK(e,r,n)).send(new s({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},lk=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Lt.TokenProviderError(`Token is expired. ${xE}`,!1)},ro=(t,e,r=!1)=>{if(typeof e>"u")throw new Lt.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${xE}`,!1)},{writeFile:xK}=_K.promises,CK=(t,e)=>{let r=kc.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return xK(r,n)},fk=new Date(0),pk=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await kc.parseKnownFiles(t),n=kc.getProfileName({profile:t.profile??e?.profile}),s=r[n];if(s){if(!s.sso_session)throw new Lt.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Lt.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=s.sso_session,a=(await kc.loadSsoSessionData(t))[o];if(!a)throw new Lt.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!a[h])throw new Lt.TokenProviderError(`Sso session '${o}' is missing required property '${h}'.`,!1);a.sso_start_url;let u=a.sso_region,d;try{d=await kc.getSSOTokenFromFile(o)}catch{throw new Lt.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${xE}`,!1)}ro("accessToken",d.accessToken),ro("expiresAt",d.expiresAt);let{accessToken:f,expiresAt:l}=d,g={token:f,expiration:new Date(l)};if(g.expiration.getTime()-Date.now()>wK)return g;if(Date.now()-fk.getTime()<30*1e3)return lk(g),g;ro("clientId",d.clientId,!0),ro("clientSecret",d.clientSecret,!0),ro("refreshToken",d.refreshToken,!0);try{fk.setTime(Date.now());let h=await bK(d,u,t,e);ro("accessToken",h.accessToken),ro("expiresIn",h.expiresIn);let y=new Date(Date.now()+h.expiresIn*1e3);try{await CK(o,{...d,accessToken:h.accessToken,expiresAt:y.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:y}}catch{return lk(g),g}},AK=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Lt.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},TK=(t={})=>Lt.memoize(Lt.chain(pk(t),async()=>{throw new Lt.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);Dc.fromEnvSigningName=EK;Dc.fromSso=pk;Dc.fromStatic=AK;Dc.nodeProvider=TK});var AE=R(ys=>{"use strict";c();Object.defineProperty(ys,"__esModule",{value:!0});ys.resolveHttpAuthSchemeConfig=ys.defaultSSOHttpAuthSchemeProvider=ys.defaultSSOHttpAuthSchemeParametersProvider=void 0;var RK=(Rt(),Y(hc)),CE=tt(),IK=async(t,e,r)=>({operation:(0,CE.getSmithyContext)(e).operation,region:await(0,CE.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ys.defaultSSOHttpAuthSchemeParametersProvider=IK;function OK(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Xf(t){return{schemeId:"smithy.api#noAuth"}}var PK=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Xf(t));break}case"ListAccountRoles":{e.push(Xf(t));break}case"ListAccounts":{e.push(Xf(t));break}case"Logout":{e.push(Xf(t));break}default:e.push(OK(t))}return e};ys.defaultSSOHttpAuthSchemeProvider=PK;var NK=t=>{let e=(0,RK.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,CE.normalizeProvider)(t.authSchemePreference??[])})};ys.resolveHttpAuthSchemeConfig=NK});var hk=R((hCe,kK)=>{kK.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.974.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Ok=R(Qf=>{"use strict";c();Object.defineProperty(Qf,"__esModule",{value:!0});Qf.ruleSet=void 0;var Ak="required",Jt="fn",Zt="argv",Fi="ref",gk=!0,yk="isSet",Mc="booleanEquals",Bi="error",Li="endpoint",xn="tree",TE="PartitionResult",RE="getAttr",Sk={[Ak]:!1,type:"string"},_k={[Ak]:!0,default:!1,type:"boolean"},Ek={[Fi]:"Endpoint"},Tk={[Jt]:Mc,[Zt]:[{[Fi]:"UseFIPS"},!0]},Rk={[Jt]:Mc,[Zt]:[{[Fi]:"UseDualStack"},!0]},Qt={},wk={[Jt]:RE,[Zt]:[{[Fi]:TE},"supportsFIPS"]},Ik={[Fi]:TE},vk={[Jt]:Mc,[Zt]:[!0,{[Jt]:RE,[Zt]:[Ik,"supportsDualStack"]}]},bk=[Tk],xk=[Rk],Ck=[{[Fi]:"Region"}],DK={version:"1.0",parameters:{Region:Sk,UseDualStack:_k,UseFIPS:_k,Endpoint:Sk},rules:[{conditions:[{[Jt]:yk,[Zt]:[Ek]}],rules:[{conditions:bk,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Bi},{conditions:xk,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Bi},{endpoint:{url:Ek,properties:Qt,headers:Qt},type:Li}],type:xn},{conditions:[{[Jt]:yk,[Zt]:Ck}],rules:[{conditions:[{[Jt]:"aws.partition",[Zt]:Ck,assign:TE}],rules:[{conditions:[Tk,Rk],rules:[{conditions:[{[Jt]:Mc,[Zt]:[gk,wk]},vk],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:Li}],type:xn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Bi}],type:xn},{conditions:bk,rules:[{conditions:[{[Jt]:Mc,[Zt]:[wk,gk]}],rules:[{conditions:[{[Jt]:"stringEquals",[Zt]:[{[Jt]:RE,[Zt]:[Ik,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Qt,headers:Qt},type:Li},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:Li}],type:xn},{error:"FIPS is enabled but this partition does not support FIPS",type:Bi}],type:xn},{conditions:xk,rules:[{conditions:[vk],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:Li}],type:xn},{error:"DualStack is enabled but this partition does not support DualStack",type:Bi}],type:xn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:Li}],type:xn}],type:xn},{error:"Invalid Configuration: Missing Region",type:Bi}]};Qf.ruleSet=DK});var Pk=R(Jf=>{"use strict";c();Object.defineProperty(Jf,"__esModule",{value:!0});Jf.defaultEndpointResolver=void 0;var MK=pn(),IE=fn(),$K=Ok(),UK=new IE.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),BK=(t,e={})=>UK.get(t,()=>(0,IE.resolveEndpoint)($K.ruleSet,{endpointParams:t,logger:e.logger}));Jf.defaultEndpointResolver=BK;IE.customEndpointFunctions.aws=MK.awsEndpointFunctions});var Dk=R(Zf=>{"use strict";c();Object.defineProperty(Zf,"__esModule",{value:!0});Zf.getRuntimeConfig=void 0;var LK=(Rt(),Y(hc)),FK=(Ri(),Y(RP)),jK=(Ie(),Y(Or)),HK=z(),qK=Pr(),Nk=vn(),kk=Ce(),GK=AE(),zK=Pk(),VK=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??Nk.fromBase64,base64Encoder:t?.base64Encoder??Nk.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??zK.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??GK.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new LK.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new jK.NoAuthSigner}],logger:t?.logger??new HK.NoOpLogger,protocol:t?.protocol??FK.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??qK.parseUrl,utf8Decoder:t?.utf8Decoder??kk.fromUtf8,utf8Encoder:t?.utf8Encoder??kk.toUtf8});Zf.getRuntimeConfig=VK});var Fk=R(tp=>{"use strict";c();Object.defineProperty(tp,"__esModule",{value:!0});tp.getRuntimeConfig=void 0;var WK=(un(),Y(cn)),KK=WK.__importDefault(hk()),Mk=(Rt(),Y(hc)),$k=yc(),ep=Ve(),YK=Zs(),Uk=Bt(),no=Gt(),Bk=on(),Lk=z(),XK=eo(),QK=to(),JK=rs(),ZK=Dk(),e7=t=>{(0,Lk.emitWarningIfUnsupportedVersion)(process.version);let e=(0,QK.resolveDefaultsModeConfig)(t),r=()=>e().then(Lk.loadConfigsForDefaultMode),n=(0,ZK.getRuntimeConfig)(t);(0,Mk.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,no.loadConfig)(Mk.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??XK.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,$k.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:KK.default.version}),maxAttempts:t?.maxAttempts??(0,no.loadConfig)(Uk.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,no.loadConfig)(ep.NODE_REGION_CONFIG_OPTIONS,{...ep.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Bk.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,no.loadConfig)({...Uk.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||JK.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??YK.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Bk.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,no.loadConfig)(ep.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,no.loadConfig)(ep.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,no.loadConfig)($k.NODE_APP_ID_CONFIG_OPTIONS,s)}};tp.getRuntimeConfig=e7});var SD=R(de=>{"use strict";c();var jk=cc(),t7=uc(),r7=dc(),Hk=Oi(),n7=Ve(),$c=(Ie(),Y(Or)),Hi=(J(),Y(Cd)),s7=Xs(),Lc=zt(),qk=Bt(),Sr=z(),Gk=AE(),o7=Fk(),zk=Ui(),Vk=ie(),i7=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),up={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},a7=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},c7=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),u7=(t,e)=>{let r=Object.assign(zk.getAwsRegionExtensionConfiguration(t),Sr.getDefaultExtensionConfiguration(t),Vk.getHttpHandlerExtensionConfiguration(t),a7(t));return e.forEach(n=>n.configure(r)),Object.assign(t,zk.resolveAwsRegionExtensionConfiguration(r),Sr.resolveDefaultRuntimeConfig(r),Vk.resolveHttpHandlerRuntimeConfig(r),c7(r))},ji=class extends Sr.Client{config;constructor(...[e]){let r=o7.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=i7(r),s=Hk.resolveUserAgentConfig(n),o=qk.resolveRetryConfig(s),i=n7.resolveRegionConfig(o),a=jk.resolveHostHeaderConfig(i),u=Lc.resolveEndpointConfig(a),d=Gk.resolveHttpAuthSchemeConfig(u),f=u7(d,e?.extensions||[]);this.config=f,this.middlewareStack.use(Hi.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(Hk.getUserAgentPlugin(this.config)),this.middlewareStack.use(qk.getRetryPlugin(this.config)),this.middlewareStack.use(s7.getContentLengthPlugin(this.config)),this.middlewareStack.use(jk.getHostHeaderPlugin(this.config)),this.middlewareStack.use(t7.getLoggerPlugin(this.config)),this.middlewareStack.use(r7.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use($c.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Gk.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new $c.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use($c.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Ss=class t extends Sr.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},rp=class t extends Ss{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},np=class t extends Ss{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},sp=class t extends Ss{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},op=class t extends Ss{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},d7="AccountInfo",l7="AccountListType",f7="AccessTokenType",p7="GetRoleCredentials",m7="GetRoleCredentialsRequest",h7="GetRoleCredentialsResponse",g7="InvalidRequestException",y7="Logout",S7="ListAccounts",_7="ListAccountsRequest",E7="ListAccountRolesRequest",w7="ListAccountRolesResponse",v7="ListAccountsResponse",b7="ListAccountRoles",x7="LogoutRequest",C7="RoleCredentials",A7="RoleInfo",T7="RoleListType",R7="ResourceNotFoundException",I7="SecretAccessKeyType",O7="SessionTokenType",P7="TooManyRequestsException",N7="UnauthorizedException",dp="accountId",k7="accessKeyId",D7="accountList",M7="accountName",lp="accessToken",Wk="account_id",fp="client",pp="error",$7="emailAddress",U7="expiration",mp="http",hp="httpError",gp="httpHeader",so="httpQuery",yp="message",Kk="maxResults",Yk="max_result",Sp="nextToken",Xk="next_token",B7="roleCredentials",L7="roleList",Qk="roleName",F7="role_name",Jk="smithy.ts.sdk.synthetic.com.amazonaws.sso",j7="secretAccessKey",H7="sessionToken",_p="x-amz-sso_bearer_token",xe="com.amazonaws.sso",Ep=[0,xe,f7,8,0],q7=[0,xe,I7,8,0],G7=[0,xe,O7,8,0],Zk=[3,xe,d7,0,[dp,M7,$7],[0,0,0]],eD=[3,xe,m7,0,[Qk,dp,lp],[[0,{[so]:F7}],[0,{[so]:Wk}],[()=>Ep,{[gp]:_p}]],3],tD=[3,xe,h7,0,[B7],[[()=>uD,0]]],rD=[-3,xe,g7,{[pp]:fp,[hp]:400},[yp],[0]];Hi.TypeRegistry.for(xe).registerError(rD,rp);var nD=[3,xe,E7,0,[lp,dp,Sp,Kk],[[()=>Ep,{[gp]:_p}],[0,{[so]:Wk}],[0,{[so]:Xk}],[1,{[so]:Yk}]],2],sD=[3,xe,w7,0,[Sp,L7],[0,()=>W7]],oD=[3,xe,_7,0,[lp,Sp,Kk],[[()=>Ep,{[gp]:_p}],[0,{[so]:Xk}],[1,{[so]:Yk}]],1],iD=[3,xe,v7,0,[Sp,D7],[0,()=>V7]],aD=[3,xe,x7,0,[lp],[[()=>Ep,{[gp]:_p}]],1],cD=[-3,xe,R7,{[pp]:fp,[hp]:404},[yp],[0]];Hi.TypeRegistry.for(xe).registerError(cD,np);var uD=[3,xe,C7,0,[k7,j7,H7,U7],[0,[()=>q7,0],[()=>G7,0],1]],dD=[3,xe,A7,0,[Qk,dp],[0,0]],lD=[-3,xe,P7,{[pp]:fp,[hp]:429},[yp],[0]];Hi.TypeRegistry.for(xe).registerError(lD,sp);var fD=[-3,xe,N7,{[pp]:fp,[hp]:401},[yp],[0]];Hi.TypeRegistry.for(xe).registerError(fD,op);var z7="unit",pD=[-3,Jk,"SSOServiceException",0,[],[]];Hi.TypeRegistry.for(Jk).registerError(pD,Ss);var V7=[1,xe,l7,0,()=>Zk],W7=[1,xe,T7,0,()=>dD],mD=[9,xe,p7,{[mp]:["GET","/federation/credentials",200]},()=>eD,()=>tD],hD=[9,xe,b7,{[mp]:["GET","/assignment/roles",200]},()=>nD,()=>sD],gD=[9,xe,S7,{[mp]:["GET","/assignment/accounts",200]},()=>oD,()=>iD],yD=[9,xe,y7,{[mp]:["POST","/logout",200]},()=>aD,()=>z7],ip=class extends Sr.Command.classBuilder().ep(up).m(function(e,r,n,s){return[Lc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(mD).build(){},Uc=class extends Sr.Command.classBuilder().ep(up).m(function(e,r,n,s){return[Lc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(hD).build(){},Bc=class extends Sr.Command.classBuilder().ep(up).m(function(e,r,n,s){return[Lc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(gD).build(){},ap=class extends Sr.Command.classBuilder().ep(up).m(function(e,r,n,s){return[Lc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(yD).build(){},K7={GetRoleCredentialsCommand:ip,ListAccountRolesCommand:Uc,ListAccountsCommand:Bc,LogoutCommand:ap},cp=class extends ji{};Sr.createAggregatedClient(K7,cp);var Y7=$c.createPaginator(ji,Uc,"nextToken","nextToken","maxResults"),X7=$c.createPaginator(ji,Bc,"nextToken","nextToken","maxResults");Object.defineProperty(de,"$Command",{enumerable:!0,get:function(){return Sr.Command}});Object.defineProperty(de,"__Client",{enumerable:!0,get:function(){return Sr.Client}});de.AccountInfo$=Zk;de.GetRoleCredentials$=mD;de.GetRoleCredentialsCommand=ip;de.GetRoleCredentialsRequest$=eD;de.GetRoleCredentialsResponse$=tD;de.InvalidRequestException=rp;de.InvalidRequestException$=rD;de.ListAccountRoles$=hD;de.ListAccountRolesCommand=Uc;de.ListAccountRolesRequest$=nD;de.ListAccountRolesResponse$=sD;de.ListAccounts$=gD;de.ListAccountsCommand=Bc;de.ListAccountsRequest$=oD;de.ListAccountsResponse$=iD;de.Logout$=yD;de.LogoutCommand=ap;de.LogoutRequest$=aD;de.ResourceNotFoundException=np;de.ResourceNotFoundException$=cD;de.RoleCredentials$=uD;de.RoleInfo$=dD;de.SSO=cp;de.SSOClient=ji;de.SSOServiceException=Ss;de.SSOServiceException$=pD;de.TooManyRequestsException=sp;de.TooManyRequestsException$=lD;de.UnauthorizedException=op;de.UnauthorizedException$=fD;de.paginateListAccountRoles=Y7;de.paginateListAccounts=X7});var ED=R(OE=>{"use strict";c();var _D=SD();Object.defineProperty(OE,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return _D.GetRoleCredentialsCommand}});Object.defineProperty(OE,"SSOClient",{enumerable:!0,get:function(){return _D.SSOClient}})});var PE=R(vp=>{"use strict";c();var _r=ze(),wp=hr(),wD=(Vt(),Y(En)),Q7=mk(),bD=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),Fc=!1,vD=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,clientConfig:i,parentClientConfig:a,callerClientConfig:u,profile:d,filepath:f,configFilepath:l,ignoreCache:g,logger:h})=>{let y,x="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let At=await Q7.fromSso({profile:d,filepath:f,configFilepath:l,ignoreCache:g})();y={accessToken:At.token,expiresAt:new Date(At.expiration).toISOString()}}catch(At){throw new _r.CredentialsProviderError(At.message,{tryNextLink:Fc,logger:h})}else try{y=await wp.getSSOTokenFromFile(t)}catch{throw new _r.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${x}`,{tryNextLink:Fc,logger:h})}if(new Date(y.expiresAt).getTime()-Date.now()<=0)throw new _r.CredentialsProviderError(`The SSO session associated with this profile has expired. ${x}`,{tryNextLink:Fc,logger:h});let{accessToken:T}=y,{SSOClient:O,GetRoleCredentialsCommand:N}=await Promise.resolve().then(function(){return ED()}),L=o||new O(Object.assign({},i??{},{logger:i?.logger??u?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??u?.userAgentAppId??a?.userAgentAppId})),j;try{j=await L.send(new N({accountId:r,roleName:s,accessToken:T}))}catch(At){throw new _r.CredentialsProviderError(At,{tryNextLink:Fc,logger:h})}let{roleCredentials:{accessKeyId:V,secretAccessKey:ce,sessionToken:Ae,expiration:Z,credentialScope:le,accountId:ve}={}}=j;if(!V||!ce||!Ae||!Z)throw new _r.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Fc,logger:h});let Ye={accessKeyId:V,secretAccessKey:ce,sessionToken:Ae,expiration:new Date(Z),...le&&{credentialScope:le},...ve&&{accountId:ve}};return e?wD.setCredentialFeature(Ye,"CREDENTIALS_SSO","s"):wD.setCredentialFeature(Ye,"CREDENTIALS_SSO_LEGACY","u"),Ye},xD=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:o}=t;if(!r||!n||!s||!o)throw new _r.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},J7=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t,{ssoClient:a}=t,u=wp.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!o&&!i){let f=(await wp.parseKnownFiles(t))[u];if(!f)throw new _r.CredentialsProviderError(`Profile ${u} was not found.`,{logger:t.logger});if(!bD(f))throw new _r.CredentialsProviderError(`Profile ${u} is not configured with SSO credentials.`,{logger:t.logger});if(f?.sso_session){let O=(await wp.loadSsoSessionData(t))[f.sso_session],N=` configurations in profile ${u} and sso-session ${f.sso_session}`;if(s&&s!==O.sso_region)throw new _r.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:t.logger});if(r&&r!==O.sso_start_url)throw new _r.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:t.logger});f.sso_region=O.sso_region,f.sso_start_url=O.sso_start_url}let{sso_start_url:l,sso_account_id:g,sso_region:h,sso_role_name:y,sso_session:x}=xD(f,t.logger);return vD({ssoStartUrl:l,ssoSession:x,ssoAccountId:g,ssoRegion:h,ssoRoleName:y,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:u,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!o)throw new _r.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return vD({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:u,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};vp.fromSSO=J7;vp.isSsoProfile=bD;vp.validateSsoProfile=xD});function Z7(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function eY(t){return{schemeId:"smithy.api#noAuth"}}var jc,CD,AD,TD,NE=S(()=>{c();Rt();jc=v(tt()),CD=async(t,e,r)=>({operation:(0,jc.getSmithyContext)(e).operation,region:await(0,jc.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});AD=t=>{let e=[];switch(t.operation){case"CreateOAuth2Token":{e.push(eY(t));break}default:e.push(Z7(t))}return e},TD=t=>{let e=wn(t);return Object.assign(e,{authSchemePreference:(0,jc.normalizeProvider)(t.authSchemePreference??[])})}});var RD,ID,kE=S(()=>{c();RD=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"signin"}),ID={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var UD,ut,dt,Cn,OD,oo,qi,_s,Er,Cp,DE,PD,ND,kD,ME,$E,ct,UE,bp,xp,DD,MD,$D,tY,BD,LD=S(()=>{c();UD="required",ut="fn",dt="argv",Cn="ref",OD="isSet",oo="booleanEquals",qi="error",_s="endpoint",Er="tree",Cp="PartitionResult",DE="stringEquals",PD={[UD]:!0,default:!1,type:"boolean"},ND={[UD]:!1,type:"string"},kD={[Cn]:"Endpoint"},ME={[ut]:oo,[dt]:[{[Cn]:"UseFIPS"},!0]},$E={[ut]:oo,[dt]:[{[Cn]:"UseDualStack"},!0]},ct={},UE={[ut]:"getAttr",[dt]:[{[Cn]:Cp},"name"]},bp={[ut]:oo,[dt]:[{[Cn]:"UseFIPS"},!1]},xp={[ut]:oo,[dt]:[{[Cn]:"UseDualStack"},!1]},DD={[ut]:"getAttr",[dt]:[{[Cn]:Cp},"supportsFIPS"]},MD={[ut]:oo,[dt]:[!0,{[ut]:"getAttr",[dt]:[{[Cn]:Cp},"supportsDualStack"]}]},$D=[{[Cn]:"Region"}],tY={version:"1.0",parameters:{UseDualStack:PD,UseFIPS:PD,Endpoint:ND,Region:ND},rules:[{conditions:[{[ut]:OD,[dt]:[kD]}],rules:[{conditions:[ME],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:qi},{rules:[{conditions:[$E],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:qi},{endpoint:{url:kD,properties:ct,headers:ct},type:_s}],type:Er}],type:Er},{rules:[{conditions:[{[ut]:OD,[dt]:$D}],rules:[{conditions:[{[ut]:"aws.partition",[dt]:$D,assign:Cp}],rules:[{conditions:[{[ut]:DE,[dt]:[UE,"aws"]},bp,xp],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:ct,headers:ct},type:_s},{conditions:[{[ut]:DE,[dt]:[UE,"aws-cn"]},bp,xp],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:ct,headers:ct},type:_s},{conditions:[{[ut]:DE,[dt]:[UE,"aws-us-gov"]},bp,xp],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:ct,headers:ct},type:_s},{conditions:[ME,$E],rules:[{conditions:[{[ut]:oo,[dt]:[!0,DD]},MD],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:_s}],type:Er},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:qi}],type:Er},{conditions:[ME,xp],rules:[{conditions:[{[ut]:oo,[dt]:[DD,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:_s}],type:Er},{error:"FIPS is enabled but this partition does not support FIPS",type:qi}],type:Er},{conditions:[bp,$E],rules:[{conditions:[MD],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:_s}],type:Er},{error:"DualStack is enabled but this partition does not support DualStack",type:qi}],type:Er},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:_s}],type:Er}],type:Er},{error:"Invalid Configuration: Missing Region",type:qi}],type:Er}]},BD=tY});var FD,Gi,rY,jD,HD=S(()=>{c();FD=v(pn()),Gi=v(fn());LD();rY=new Gi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),jD=(t,e={})=>rY.get(t,()=>(0,Gi.resolveEndpoint)(BD,{endpointParams:t,logger:e.logger}));Gi.customEndpointFunctions.aws=FD.awsEndpointFunctions});var qD,GD,Ap,Tp,zD,VD=S(()=>{c();Rt();Ri();Ie();qD=v(z()),GD=v(Pr()),Ap=v(vn()),Tp=v(Ce());NE();HD();zD=t=>({apiVersion:"2023-01-01",base64Decoder:t?.base64Decoder??Ap.fromBase64,base64Encoder:t?.base64Encoder??Ap.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??jD,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??AD,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new it},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $t}],logger:t?.logger??new qD.NoOpLogger,protocol:t?.protocol??fs,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:t?.serviceId??"Signin",urlParser:t?.urlParser??GD.parseUrl,utf8Decoder:t?.utf8Decoder??Tp.fromUtf8,utf8Encoder:t?.utf8Encoder??Tp.toUtf8})});var Rp,ws,WD,Ip,Es,Op,Pp,KD,YD,XD,QD,JD=S(()=>{c();Mf();Rt();Rp=v(yc()),ws=v(Ve()),WD=v(Zs()),Ip=v(Bt()),Es=v(Gt()),Op=v(on()),Pp=v(z()),KD=v(eo()),YD=v(to()),XD=v(rs());VD();QD=t=>{(0,Pp.emitWarningIfUnsupportedVersion)(process.version);let e=(0,YD.resolveDefaultsModeConfig)(t),r=()=>e().then(Pp.loadConfigsForDefaultMode),n=zD(t);os(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Es.loadConfig)(cs,s),bodyLengthChecker:t?.bodyLengthChecker??KD.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Rp.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Pi.version}),maxAttempts:t?.maxAttempts??(0,Es.loadConfig)(Ip.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Es.loadConfig)(ws.NODE_REGION_CONFIG_OPTIONS,{...ws.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Op.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Es.loadConfig)({...Ip.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||XD.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??WD.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Op.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Es.loadConfig)(ws.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Es.loadConfig)(ws.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Es.loadConfig)(Rp.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var ZD,e1,t1=S(()=>{c();ZD=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},e1=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Np,kp,Dp,r1,n1=S(()=>{c();Np=v(Ui()),kp=v(ie()),Dp=v(z());t1();r1=(t,e)=>{let r=Object.assign((0,Np.getAwsRegionExtensionConfiguration)(t),(0,Dp.getDefaultExtensionConfiguration)(t),(0,kp.getHttpHandlerExtensionConfiguration)(t),ZD(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,Np.resolveAwsRegionExtensionConfiguration)(r),(0,Dp.resolveDefaultRuntimeConfig)(r),(0,kp.resolveHttpHandlerRuntimeConfig)(r),e1(r))}});var Mp,s1,o1,$p,i1,a1,c1,Up,BE,Hc,LE=S(()=>{c();Mp=v(cc()),s1=v(uc()),o1=v(dc()),$p=v(Oi()),i1=v(Ve());Ie();J();a1=v(Xs()),c1=v(zt()),Up=v(Bt()),BE=v(z());NE();kE();JD();n1();Hc=class extends BE.Client{config;constructor(...[e]){let r=QD(e||{});super(r),this.initConfig=r;let n=RD(r),s=(0,$p.resolveUserAgentConfig)(n),o=(0,Up.resolveRetryConfig)(s),i=(0,i1.resolveRegionConfig)(o),a=(0,Mp.resolveHostHeaderConfig)(i),u=(0,c1.resolveEndpointConfig)(a),d=TD(u),f=r1(d,e?.extensions||[]);this.config=f,this.middlewareStack.use(an(this.config)),this.middlewareStack.use((0,$p.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Up.getRetryPlugin)(this.config)),this.middlewareStack.use((0,a1.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Mp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,s1.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,o1.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(en(this.config,{httpAuthSchemeParametersProvider:CD,identityProviderConfigProvider:async l=>new pr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(tn(this.config))}destroy(){super.destroy()}}});var u1,wr,Bp=S(()=>{c();u1=v(z()),wr=class t extends u1.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var qc,Gc,zc,Vc,FE=S(()=>{c();Bp();qc=class t extends wr{name="AccessDeniedException";$fault="client";error;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Gc=class t extends wr{name="InternalServerException";$fault="server";error;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},zc=class t extends wr{name="TooManyRequestsError";$fault="client";error;constructor(e){super({name:"TooManyRequestsError",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Vc=class t extends wr{name="ValidationException";$fault="client";error;constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}}});var nY,sY,oY,iY,aY,cY,uY,dY,lY,fY,pY,d1,l1,jE,f1,p1,mY,vs,m1,h1,hY,HE,g1,Ft,Fp,Lp,y1,gY,S1,_1,w1,yY,SY,E1,vt,v1,b1,x1,C1,A1,T1,R1,I1,O1,P1,N1,qE,GE=S(()=>{c();J();FE();Bp();nY="AccessDeniedException",sY="AccessToken",oY="CreateOAuth2Token",iY="CreateOAuth2TokenRequest",aY="CreateOAuth2TokenRequestBody",cY="CreateOAuth2TokenResponseBody",uY="CreateOAuth2TokenResponse",dY="InternalServerException",lY="RefreshToken",fY="TooManyRequestsError",pY="ValidationException",d1="accessKeyId",l1="accessToken",jE="client",f1="clientId",p1="codeVerifier",mY="code",vs="error",m1="expiresIn",h1="grantType",hY="http",HE="httpError",g1="idToken",Ft="jsonName",Fp="message",Lp="refreshToken",y1="redirectUri",gY="server",S1="secretAccessKey",_1="sessionToken",w1="smithy.ts.sdk.synthetic.com.amazonaws.signin",yY="tokenInput",SY="tokenOutput",E1="tokenType",vt="com.amazonaws.signin",v1=[0,vt,lY,8,0],b1=[-3,vt,nY,{[vs]:jE},[vs,Fp],[0,0],2];B.for(vt).registerError(b1,qc);x1=[3,vt,sY,8,[d1,S1,_1],[[0,{[Ft]:d1}],[0,{[Ft]:S1}],[0,{[Ft]:_1}]],3],C1=[3,vt,iY,0,[yY],[[()=>A1,16]],1],A1=[3,vt,aY,0,[f1,h1,mY,y1,p1,Lp],[[0,{[Ft]:f1}],[0,{[Ft]:h1}],0,[0,{[Ft]:y1}],[0,{[Ft]:p1}],[()=>v1,{[Ft]:Lp}]],2],T1=[3,vt,uY,0,[SY],[[()=>R1,16]],1],R1=[3,vt,cY,0,[l1,E1,m1,Lp,g1],[[()=>x1,{[Ft]:l1}],[0,{[Ft]:E1}],[1,{[Ft]:m1}],[()=>v1,{[Ft]:Lp}],[0,{[Ft]:g1}]],4],I1=[-3,vt,dY,{[vs]:gY,[HE]:500},[vs,Fp],[0,0],2];B.for(vt).registerError(I1,Gc);O1=[-3,vt,fY,{[vs]:jE,[HE]:429},[vs,Fp],[0,0],2];B.for(vt).registerError(O1,zc);P1=[-3,vt,pY,{[vs]:jE,[HE]:400},[vs,Fp],[0,0],2];B.for(vt).registerError(P1,Vc);N1=[-3,w1,"SigninServiceException",0,[],[]];B.for(w1).registerError(N1,wr);qE=[9,vt,oY,{[hY]:["POST","/v1/token",200]},()=>C1,()=>T1]});var k1,zE,Wc,VE=S(()=>{c();k1=v(zt()),zE=v(z());kE();GE();Wc=class extends zE.Command.classBuilder().ep(ID).m(function(e,r,n,s){return[(0,k1.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(qE).build(){}});var D1,_Y,jp,M1=S(()=>{c();D1=v(z());VE();LE();_Y={CreateOAuth2TokenCommand:Wc},jp=class extends Hc{};(0,D1.createAggregatedClient)(_Y,jp)});var $1=S(()=>{c();VE()});var EY,U1=S(()=>{c();EY={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var B1=S(()=>{c()});var L1={};Be(L1,{$Command:()=>zE.Command,AccessDeniedException:()=>qc,AccessDeniedException$:()=>b1,AccessToken$:()=>x1,CreateOAuth2Token$:()=>qE,CreateOAuth2TokenCommand:()=>Wc,CreateOAuth2TokenRequest$:()=>C1,CreateOAuth2TokenRequestBody$:()=>A1,CreateOAuth2TokenResponse$:()=>T1,CreateOAuth2TokenResponseBody$:()=>R1,InternalServerException:()=>Gc,InternalServerException$:()=>I1,OAuth2ErrorCode:()=>EY,Signin:()=>jp,SigninClient:()=>Hc,SigninServiceException:()=>wr,SigninServiceException$:()=>N1,TooManyRequestsError:()=>zc,TooManyRequestsError$:()=>O1,ValidationException:()=>Vc,ValidationException$:()=>P1,__Client:()=>BE.Client});var F1=S(()=>{c();LE();M1();$1();GE();U1();FE();B1();Bp()});var H1=R(j1=>{"use strict";c();var wY=(Vt(),Y(En)),bs=ze(),YE=hr(),vY=ie(),Hp=ee("node:crypto"),WE=ee("node:fs"),bY=ee("node:os"),KE=ee("node:path"),XE=class t{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=5*60*1e3;constructor(e,r,n){this.profileData=e,this.init=r,this.callerClientConfig=n}async loadCredentials(){let e=await this.loadToken();if(!e)throw new bs.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=e.accessToken,n=Date.now();return new Date(r.expiresAt).getTime()-n<=t.REFRESH_THRESHOLD?this.refresh(e):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:r,CreateOAuth2TokenCommand:n}=await Promise.resolve().then(()=>(F1(),L1)),{logger:s,userAgentAppId:o}=this.callerClientConfig??{},a=(l=>l?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,u=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,d=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:u,requestHandler:a,logger:s,userAgentAppId:o,...this.init?.clientConfig});this.createDPoPInterceptor(d.middlewareStack);let f={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:"refresh_token"}};try{let l=await d.send(new n(f)),{accessKeyId:g,secretAccessKey:h,sessionToken:y}=l.tokenOutput?.accessToken??{},{refreshToken:x,expiresIn:T}=l.tokenOutput??{};if(!g||!h||!y||!x)throw new bs.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let O=(T??900)*1e3,N=new Date(Date.now()+O),L={...e,accessToken:{...e.accessToken,accessKeyId:g,secretAccessKey:h,sessionToken:y,expiresAt:N.toISOString()},refreshToken:x};await this.saveToken(L);let j=L.accessToken;return{accessKeyId:j.accessKeyId,secretAccessKey:j.secretAccessKey,sessionToken:j.sessionToken,accountId:j.accountId,expiration:N}}catch(l){if(l.name==="AccessDeniedException"){let g=l.error,h;switch(g){case"TOKEN_EXPIRED":h="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":h="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":h="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:h=`Failed to refresh token: ${String(l)}. Please re-authenticate using \`aws login\``}throw new bs.CredentialsProviderError(h,{logger:this.logger,tryNextLink:!1})}throw new bs.CredentialsProviderError(`Failed to refresh token: ${String(l)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let r;try{r=await YE.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{r=await WE.promises.readFile(e,"utf8")}let n=JSON.parse(r),s=["accessToken","clientId","refreshToken","dpopKey"].filter(o=>!n[o]);if(n.accessToken?.accountId||s.push("accountId"),s.length>0)throw new bs.CredentialsProviderError(`Token validation failed, missing fields: ${s.join(", ")}`,{logger:this.logger,tryNextLink:!1});return n}catch(r){throw new bs.CredentialsProviderError(`Failed to load token from ${e}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let r=this.getTokenFilePath(),n=KE.dirname(r);try{await WE.promises.mkdir(n,{recursive:!0})}catch{}await WE.promises.writeFile(r,JSON.stringify(e,null,2),"utf8")}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??KE.join(bY.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),n=Hp.createHash("sha256").update(r).digest("hex");return KE.join(e,`${n}.json`)}derToRawSignature(e){let r=2;if(e[r]!==2)throw new Error("Invalid DER signature");r++;let n=e[r++],s=e.subarray(r,r+n);if(r+=n,e[r]!==2)throw new Error("Invalid DER signature");r++;let o=e[r++],i=e.subarray(r,r+o);s=s[0]===0?s.subarray(1):s,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-s.length),s]),u=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,u])}createDPoPInterceptor(e){e.add(r=>async n=>{if(vY.HttpRequest.isInstance(n.request)){let s=n.request,o=`${s.protocol}//${s.hostname}${s.port?`:${s.port}`:""}${s.path}`,i=await this.generateDpop(s.method,o);s.headers={...s.headers,DPoP:i}}return r(n)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(e="POST",r){let n=await this.loadToken();try{let s=Hp.createPrivateKey({key:n.dpopKey,format:"pem",type:"sec1"}),i=Hp.createPublicKey(s).export({format:"der",type:"spki"}),a=-1;for(let N=0;N<i.length;N++)if(i[N]===4){a=N;break}let u=i.slice(a+1,a+33),d=i.slice(a+33,a+65),f={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:u.toString("base64url"),y:d.toString("base64url")}},l={jti:crypto.randomUUID(),htm:e,htu:r,iat:Math.floor(Date.now()/1e3)},g=Buffer.from(JSON.stringify(f)).toString("base64url"),h=Buffer.from(JSON.stringify(l)).toString("base64url"),y=`${g}.${h}`,x=Hp.sign("sha256",Buffer.from(y),s),O=this.derToRawSignature(x).toString("base64url");return`${y}.${O}`}catch(s){throw new bs.CredentialsProviderError(`Failed to generate Dpop proof: ${s instanceof Error?s.message:String(s)}`,{logger:this.logger,tryNextLink:!1})}}},xY=t=>async({callerClientConfig:e}={})=>{t?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await YE.parseKnownFiles(t||{}),n=YE.getProfileName({profile:t?.profile??e?.profile}),s=r[n];if(!s?.login_session)throw new bs.CredentialsProviderError(`Profile ${n} does not contain login_session.`,{tryNextLink:!0,logger:t?.logger});let i=await new XE(s,t,e).loadCredentials();return wY.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};j1.fromLoginCredentials=xY});function CY(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function AY(t){return{schemeId:"smithy.api#noAuth"}}var Kc,q1,G1,TY,z1,QE=S(()=>{c();Rt();Kc=v(tt());Yc();q1=async(t,e,r)=>({operation:(0,Kc.getSmithyContext)(e).operation,region:await(0,Kc.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});G1=t=>{let e=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{e.push(AY(t));break}default:e.push(CY(t))}return e},TY=t=>Object.assign(t,{stsClientCtor:Fr}),z1=t=>{let e=TY(t),r=wn(e);return Object.assign(r,{authSchemePreference:(0,Kc.normalizeProvider)(t.authSchemePreference??[])})}});var V1,qp,Gp=S(()=>{c();V1=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),qp={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var nM,ne,me,he,Cs,xs,Qe,sM,oM,iM,Te,W1,jr,zi,ZE,K1,JE,aM,Y1,Je,X1,cM,uM,lt,jt,Q1,dM,lM,J1,fM,Z1,eM,tM,rM,RY,pM,mM=S(()=>{c();nM="required",ne="type",me="fn",he="argv",Cs="ref",xs="booleanEquals",Qe="stringEquals",sM="sigv4",oM="sts",iM="us-east-1",Te="endpoint",W1="https://sts.{Region}.{PartitionResult#dnsSuffix}",jr="tree",zi="error",ZE="getAttr",K1={[nM]:!1,[ne]:"string"},JE={[nM]:!0,default:!1,[ne]:"boolean"},aM={[Cs]:"Endpoint"},Y1={[me]:"isSet",[he]:[{[Cs]:"Region"}]},Je={[Cs]:"Region"},X1={[me]:"aws.partition",[he]:[Je],assign:"PartitionResult"},cM={[Cs]:"UseFIPS"},uM={[Cs]:"UseDualStack"},lt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:sM,signingName:oM,signingRegion:iM}]},headers:{}},jt={},Q1={conditions:[{[me]:Qe,[he]:[Je,"aws-global"]}],[Te]:lt,[ne]:Te},dM={[me]:xs,[he]:[cM,!0]},lM={[me]:xs,[he]:[uM,!0]},J1={[me]:ZE,[he]:[{[Cs]:"PartitionResult"},"supportsFIPS"]},fM={[Cs]:"PartitionResult"},Z1={[me]:xs,[he]:[!0,{[me]:ZE,[he]:[fM,"supportsDualStack"]}]},eM=[{[me]:"isSet",[he]:[aM]}],tM=[dM],rM=[lM],RY={version:"1.0",parameters:{Region:K1,UseDualStack:JE,UseFIPS:JE,Endpoint:K1,UseGlobalEndpoint:JE},rules:[{conditions:[{[me]:xs,[he]:[{[Cs]:"UseGlobalEndpoint"},!0]},{[me]:"not",[he]:eM},Y1,X1,{[me]:xs,[he]:[cM,!1]},{[me]:xs,[he]:[uM,!1]}],rules:[{conditions:[{[me]:Qe,[he]:[Je,"ap-northeast-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"ap-south-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"ap-southeast-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"ap-southeast-2"]}],endpoint:lt,[ne]:Te},Q1,{conditions:[{[me]:Qe,[he]:[Je,"ca-central-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"eu-central-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"eu-north-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"eu-west-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"eu-west-2"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"eu-west-3"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"sa-east-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,iM]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"us-east-2"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"us-west-1"]}],endpoint:lt,[ne]:Te},{conditions:[{[me]:Qe,[he]:[Je,"us-west-2"]}],endpoint:lt,[ne]:Te},{endpoint:{url:W1,properties:{authSchemes:[{name:sM,signingName:oM,signingRegion:"{Region}"}]},headers:jt},[ne]:Te}],[ne]:jr},{conditions:eM,rules:[{conditions:tM,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ne]:zi},{conditions:rM,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ne]:zi},{endpoint:{url:aM,properties:jt,headers:jt},[ne]:Te}],[ne]:jr},{conditions:[Y1],rules:[{conditions:[X1],rules:[{conditions:[dM,lM],rules:[{conditions:[{[me]:xs,[he]:[!0,J1]},Z1],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},[ne]:Te}],[ne]:jr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ne]:zi}],[ne]:jr},{conditions:tM,rules:[{conditions:[{[me]:xs,[he]:[J1,!0]}],rules:[{conditions:[{[me]:Qe,[he]:[{[me]:ZE,[he]:[fM,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:jt,headers:jt},[ne]:Te},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},[ne]:Te}],[ne]:jr},{error:"FIPS is enabled but this partition does not support FIPS",[ne]:zi}],[ne]:jr},{conditions:rM,rules:[{conditions:[Z1],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},[ne]:Te}],[ne]:jr},{error:"DualStack is enabled but this partition does not support DualStack",[ne]:zi}],[ne]:jr},Q1,{endpoint:{url:W1,properties:jt,headers:jt},[ne]:Te}],[ne]:jr}],[ne]:jr},{error:"Invalid Configuration: Missing Region",[ne]:zi}]},pM=RY});var hM,Vi,IY,gM,yM=S(()=>{c();hM=v(pn()),Vi=v(fn());mM();IY=new Vi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),gM=(t,e={})=>IY.get(t,()=>(0,Vi.resolveEndpoint)(pM,{endpointParams:t,logger:e.logger}));Vi.customEndpointFunctions.aws=hM.awsEndpointFunctions});var SM,_M,zp,Vp,EM,wM=S(()=>{c();Rt();Ri();Ie();SM=v(z()),_M=v(Pr()),zp=v(vn()),Vp=v(Ce());QE();yM();EM=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??zp.fromBase64,base64Encoder:t?.base64Encoder??zp.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??gM,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??G1,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new it},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $t}],logger:t?.logger??new SM.NoOpLogger,protocol:t?.protocol??ms,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??_M.parseUrl,utf8Decoder:t?.utf8Decoder??Vp.fromUtf8,utf8Encoder:t?.utf8Encoder??Vp.toUtf8})});var Wp,Ts,vM,Kp,As,Yp,Xp,bM,xM,CM,AM,TM=S(()=>{c();Mf();Rt();Wp=v(yc()),Ts=v(Ve());Ie();vM=v(Zs()),Kp=v(Bt()),As=v(Gt()),Yp=v(on()),Xp=v(z()),bM=v(eo()),xM=v(to()),CM=v(rs());wM();AM=t=>{(0,Xp.emitWarningIfUnsupportedVersion)(process.version);let e=(0,xM.resolveDefaultsModeConfig)(t),r=()=>e().then(Xp.loadConfigsForDefaultMode),n=EM(t);os(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,As.loadConfig)(cs,s),bodyLengthChecker:t?.bodyLengthChecker??bM.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Wp.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Pi.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await t.credentialDefaultProvider(i?.__config||{})()),signer:new it},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $t}],maxAttempts:t?.maxAttempts??(0,As.loadConfig)(Kp.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,As.loadConfig)(Ts.NODE_REGION_CONFIG_OPTIONS,{...Ts.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Yp.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,As.loadConfig)({...Kp.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||CM.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??vM.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Yp.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,As.loadConfig)(Ts.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,As.loadConfig)(Ts.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,As.loadConfig)(Wp.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var RM,IM,OM=S(()=>{c();RM=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},IM=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Qp,Jp,Zp,PM,NM=S(()=>{c();Qp=v(Ui()),Jp=v(ie()),Zp=v(z());OM();PM=(t,e)=>{let r=Object.assign((0,Qp.getAwsRegionExtensionConfiguration)(t),(0,Zp.getDefaultExtensionConfiguration)(t),(0,Jp.getHttpHandlerExtensionConfiguration)(t),RM(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,Qp.resolveAwsRegionExtensionConfiguration)(r),(0,Zp.resolveDefaultRuntimeConfig)(r),(0,Jp.resolveHttpHandlerRuntimeConfig)(r),IM(r))}});var em,kM,DM,tm,MM,$M,UM,rm,ew,Fr,Yc=S(()=>{c();em=v(cc()),kM=v(uc()),DM=v(dc()),tm=v(Oi()),MM=v(Ve());Ie();J();$M=v(Xs()),UM=v(zt()),rm=v(Bt()),ew=v(z());QE();Gp();TM();NM();Fr=class extends ew.Client{config;constructor(...[e]){let r=AM(e||{});super(r),this.initConfig=r;let n=V1(r),s=(0,tm.resolveUserAgentConfig)(n),o=(0,rm.resolveRetryConfig)(s),i=(0,MM.resolveRegionConfig)(o),a=(0,em.resolveHostHeaderConfig)(i),u=(0,UM.resolveEndpointConfig)(a),d=z1(u),f=PM(d,e?.extensions||[]);this.config=f,this.middlewareStack.use(an(this.config)),this.middlewareStack.use((0,tm.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,rm.getRetryPlugin)(this.config)),this.middlewareStack.use((0,$M.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,em.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,kM.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,DM.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(en(this.config,{httpAuthSchemeParametersProvider:q1,identityProviderConfigProvider:async l=>new pr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(tn(this.config))}destroy(){super.destroy()}}});var BM,It,nm=S(()=>{c();BM=v(z()),It=class t extends BM.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Xc,Qc,Jc,Zc,eu,tu,ru,tw=S(()=>{c();nm();Xc=class t extends It{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Qc=class t extends It{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Jc=class t extends It{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Zc=class t extends It{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},eu=class t extends It{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},tu=class t extends It{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ru=class t extends It{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}}});var OY,PY,NY,kY,DY,MY,rw,$Y,UY,BY,LY,nw,FY,LM,jY,HY,qY,GY,zY,VY,WY,KY,FM,jM,YY,XY,QY,JY,ZY,eX,HM,tX,rX,qM,nX,GM,sX,oX,sw,iX,aX,cX,uX,dX,lX,fX,pX,mX,hX,io,ao,gX,co,uo,lo,yX,zM,SX,ye,_X,EX,ow,VM,WM,KM,YM,iw,XM,QM,JM,ZM,e$,t$,r$,n$,s$,o$,i$,a$,wX,vX,aw,cw,sm=S(()=>{c();J();tw();nm();OY="Arn",PY="AccessKeyId",NY="AssumeRole",kY="AssumedRoleId",DY="AssumeRoleRequest",MY="AssumeRoleResponse",rw="AssumedRoleUser",$Y="AssumeRoleWithWebIdentity",UY="AssumeRoleWithWebIdentityRequest",BY="AssumeRoleWithWebIdentityResponse",LY="Audience",nw="Credentials",FY="ContextAssertion",LM="DurationSeconds",jY="Expiration",HY="ExternalId",qY="ExpiredTokenException",GY="IDPCommunicationErrorException",zY="IDPRejectedClaimException",VY="InvalidIdentityTokenException",WY="Key",KY="MalformedPolicyDocumentException",FM="Policy",jM="PolicyArns",YY="ProviderArn",XY="ProvidedContexts",QY="ProvidedContextsListType",JY="ProvidedContext",ZY="PolicyDescriptorType",eX="ProviderId",HM="PackedPolicySize",tX="PackedPolicyTooLargeException",rX="Provider",qM="RoleArn",nX="RegionDisabledException",GM="RoleSessionName",sX="SecretAccessKey",oX="SubjectFromWebIdentityToken",sw="SourceIdentity",iX="SerialNumber",aX="SessionToken",cX="Tags",uX="TokenCode",dX="TransitiveTagKeys",lX="Tag",fX="Value",pX="WebIdentityToken",mX="arn",hX="accessKeySecretType",io="awsQueryError",ao="client",gX="clientTokenType",co="error",uo="httpError",lo="message",yX="policyDescriptorListType",zM="smithy.ts.sdk.synthetic.com.amazonaws.sts",SX="tagListType",ye="com.amazonaws.sts",_X=[0,ye,hX,8,0],EX=[0,ye,gX,8,0],ow=[3,ye,rw,0,[kY,OY],[0,0],2],VM=[3,ye,DY,0,[qM,GM,jM,FM,LM,cX,dX,HY,iX,uX,sw,XY],[0,0,()=>a$,0,1,()=>vX,64,0,0,0,0,()=>wX],2],WM=[3,ye,MY,0,[nw,rw,HM,sw],[[()=>iw,0],()=>ow,1,0]],KM=[3,ye,UY,0,[qM,GM,pX,eX,jM,FM,LM],[0,0,[()=>EX,0],0,()=>a$,0,1],3],YM=[3,ye,BY,0,[nw,oX,rw,HM,rX,LY,sw],[[()=>iw,0],0,()=>ow,1,0,0,0]],iw=[3,ye,nw,0,[PY,sX,aX,jY],[0,[()=>_X,0],0,4],4],XM=[-3,ye,qY,{[io]:["ExpiredTokenException",400],[co]:ao,[uo]:400},[lo],[0]];B.for(ye).registerError(XM,Xc);QM=[-3,ye,GY,{[io]:["IDPCommunicationError",400],[co]:ao,[uo]:400},[lo],[0]];B.for(ye).registerError(QM,ru);JM=[-3,ye,zY,{[io]:["IDPRejectedClaim",403],[co]:ao,[uo]:403},[lo],[0]];B.for(ye).registerError(JM,eu);ZM=[-3,ye,VY,{[io]:["InvalidIdentityToken",400],[co]:ao,[uo]:400},[lo],[0]];B.for(ye).registerError(ZM,tu);e$=[-3,ye,KY,{[io]:["MalformedPolicyDocument",400],[co]:ao,[uo]:400},[lo],[0]];B.for(ye).registerError(e$,Qc);t$=[-3,ye,tX,{[io]:["PackedPolicyTooLarge",400],[co]:ao,[uo]:400},[lo],[0]];B.for(ye).registerError(t$,Jc);r$=[3,ye,ZY,0,[mX],[0]],n$=[3,ye,JY,0,[YY,FY],[0,0]],s$=[-3,ye,nX,{[io]:["RegionDisabledException",403],[co]:ao,[uo]:403},[lo],[0]];B.for(ye).registerError(s$,Zc);o$=[3,ye,lX,0,[WY,fX],[0,0],2],i$=[-3,zM,"STSServiceException",0,[],[]];B.for(zM).registerError(i$,It);a$=[1,ye,yX,0,()=>r$],wX=[1,ye,QY,0,()=>n$],vX=[1,ye,SX,0,()=>o$],aw=[9,ye,NY,0,()=>VM,()=>WM],cw=[9,ye,$Y,0,()=>KM,()=>YM]});var c$,u$,fo,om=S(()=>{c();c$=v(zt()),u$=v(z());Gp();sm();fo=class extends u$.Command.classBuilder().ep(qp).m(function(e,r,n,s){return[(0,c$.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(aw).build(){}});var d$,l$,po,im=S(()=>{c();d$=v(zt()),l$=v(z());Gp();sm();po=class extends l$.Command.classBuilder().ep(qp).m(function(e,r,n,s){return[(0,d$.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(cw).build(){}});var f$,bX,am,p$=S(()=>{c();f$=v(z());om();im();Yc();bX={AssumeRoleCommand:fo,AssumeRoleWithWebIdentityCommand:po},am=class extends Fr{};(0,f$.createAggregatedClient)(bX,am)});var m$=S(()=>{c();om();im()});var h$=S(()=>{c()});var g$,y$,S$,_$,E$,w$,v$=S(()=>{c();Vt();g$=v(Ui());om();im();y$=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},S$=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,o=typeof e=="function"?await e():e,i="",a=s??o??(i=await(0,g$.stsRegionDefaultResolver)(n)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),a},_$=(t,e)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:f=t?.parentClientConfig?.logger,profile:l=t?.parentClientConfig?.profile,region:g,requestHandler:h=t?.parentClientConfig?.requestHandler,credentialProviderLogger:y,userAgentAppId:x=t?.parentClientConfig?.userAgentAppId}=t,T=await S$(g,t?.parentClientConfig?.region,y,{logger:f,profile:l}),O=!w$(h);r=new e({...t,userAgentAppId:x,profile:l,credentialDefaultProvider:()=>async()=>n,region:T,requestHandler:O?h:void 0,logger:f})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new fo(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let u=y$(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...u&&{accountId:u}};return is(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},E$=(t,e)=>{let r;return async n=>{if(!r){let{logger:u=t?.parentClientConfig?.logger,profile:d=t?.parentClientConfig?.profile,region:f,requestHandler:l=t?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:h=t?.parentClientConfig?.userAgentAppId}=t,y=await S$(f,t?.parentClientConfig?.region,g,{logger:u,profile:d}),x=!w$(l);r=new e({...t,userAgentAppId:h,profile:d,region:y,requestHandler:x?l:void 0,logger:u})}let{Credentials:s,AssumedRoleUser:o}=await r.send(new po(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=y$(o),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}};return i&&is(a,"RESOLVED_ACCOUNT_ID","T"),is(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},w$=t=>t?.metadata?.handlerProtocol==="h2"});var b$,x$,C$,xX,A$=S(()=>{c();v$();Yc();b$=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,x$=(t={},e)=>_$(t,b$(Fr,e)),C$=(t={},e)=>E$(t,b$(Fr,e)),xX=t=>e=>t({roleAssumer:x$(e),roleAssumerWithWebIdentity:C$(e),...e})});var uw={};Be(uw,{AssumeRole$:()=>aw,AssumeRoleCommand:()=>fo,AssumeRoleRequest$:()=>VM,AssumeRoleResponse$:()=>WM,AssumeRoleWithWebIdentity$:()=>cw,AssumeRoleWithWebIdentityCommand:()=>po,AssumeRoleWithWebIdentityRequest$:()=>KM,AssumeRoleWithWebIdentityResponse$:()=>YM,AssumedRoleUser$:()=>ow,Credentials$:()=>iw,ExpiredTokenException:()=>Xc,ExpiredTokenException$:()=>XM,IDPCommunicationErrorException:()=>ru,IDPCommunicationErrorException$:()=>QM,IDPRejectedClaimException:()=>eu,IDPRejectedClaimException$:()=>JM,InvalidIdentityTokenException:()=>tu,InvalidIdentityTokenException$:()=>ZM,MalformedPolicyDocumentException:()=>Qc,MalformedPolicyDocumentException$:()=>e$,PackedPolicyTooLargeException:()=>Jc,PackedPolicyTooLargeException$:()=>t$,PolicyDescriptorType$:()=>r$,ProvidedContext$:()=>n$,RegionDisabledException:()=>Zc,RegionDisabledException$:()=>s$,STS:()=>am,STSClient:()=>Fr,STSServiceException:()=>It,STSServiceException$:()=>i$,Tag$:()=>o$,__Client:()=>ew.Client,decorateDefaultCredentialProvider:()=>xX,getDefaultRoleAssumer:()=>x$,getDefaultRoleAssumerWithWebIdentity:()=>C$});var dw=S(()=>{c();Yc();p$();m$();sm();tw();h$();A$();nm()});var pw=R(T$=>{"use strict";c();var fw=hr(),lw=ze(),CX=ee("child_process"),AX=ee("util"),TX=(Vt(),Y(En)),RX=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let o=new Date;if(new Date(e.Expiration)<o)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return TX.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},IX=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let o=AX.promisify(fw.externalDataInterceptor?.getTokenRecord?.().exec??CX.exec);try{let{stdout:i}=await o(s),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return RX(t,a,e)}catch(i){throw new lw.CredentialsProviderError(i.message,{logger:r})}}else throw new lw.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new lw.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},OX=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await fw.parseKnownFiles(t);return IX(fw.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};T$.fromProcess=OX});var mw=R(Hr=>{"use strict";c();var PX=Hr&&Hr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NX=Hr&&Hr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kX=Hr&&Hr.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&PX(r,e,n[s]);return NX(r,e),r}}();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.fromWebToken=void 0;var DX=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:o,policyArns:i,policy:a,durationSeconds:u}=t,{roleAssumerWithWebIdentity:d}=t;if(!d){let{getDefaultRoleAssumerWithWebIdentity:f}=await Promise.resolve().then(()=>kX((dw(),Y(uw))));d=f({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return d({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:u})};Hr.fromWebToken=DX});var I$=R(cm=>{"use strict";c();Object.defineProperty(cm,"__esModule",{value:!0});cm.fromTokenFile=void 0;var MX=(Vt(),Y(En)),$X=ze(),UX=hr(),BX=ee("fs"),LX=mw(),R$="AWS_WEB_IDENTITY_TOKEN_FILE",FX="AWS_ROLE_ARN",jX="AWS_ROLE_SESSION_NAME",HX=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[R$],n=t?.roleArn??process.env[FX],s=t?.roleSessionName??process.env[jX];if(!r||!n)throw new $X.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let o=await(0,LX.fromWebToken)({...t,webIdentityToken:UX.externalDataInterceptor?.getTokenRecord?.()[r]??(0,BX.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[R$]&&(0,MX.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};cm.fromTokenFile=HX});var hw=R(nu=>{"use strict";c();var O$=I$(),P$=mw();Object.keys(O$).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(nu,t)&&Object.defineProperty(nu,t,{enumerable:!0,get:function(){return O$[t]}})});Object.keys(P$).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(nu,t)&&Object.defineProperty(nu,t,{enumerable:!0,get:function(){return P$[t]}})})});var U$=R($$=>{"use strict";c();var yw=hr(),su=ze(),An=(Vt(),Y(En)),qX=H1(),GX=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:o}=await Promise.resolve().then(()=>v(O_())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>v(sc()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>su.chain(o(s??{}),i(s))().then(gw)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>v(sc()));return async()=>o(s)().then(gw)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>v(v_()));return async()=>o(s)().then(gw)}};if(t in n)return n[t];throw new su.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},gw=t=>An.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),zX=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(VX(t,{profile:e,logger:r})||WX(t,{profile:e,logger:r})),VX=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},WX=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},KX=async(t,e,r,n,s={},o)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:a,region:u}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:f}=await Promise.resolve().then(()=>(dw(),uw));r.roleAssumer=f({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...n,...r?.parentClientConfig,region:u??r?.parentClientConfig?.region??n?.region}},r.clientPlugins)}if(a&&a in s)throw new su.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${yw.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${t}]`}`);let d=a?o(a,e,r,n,{...s,[a]:!0},N$(e[a]??{})):(await GX(i.credential_source,t,r.logger)(r))();if(N$(i))return d.then(f=>An.setCredentialFeature(f,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let f={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new su.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});f.SerialNumber=l,f.TokenCode=await r.mfaCodeProvider(l)}let g=await d;return r.roleAssumer(g,f).then(h=>An.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},N$=t=>!t.role_arn&&!!t.credential_source,YX=t=>!!(t&&t.login_session),XX=async(t,e,r)=>{let n=await qX.fromLoginCredentials({...e,profile:t})({callerClientConfig:r});return An.setCredentialFeature(n,"CREDENTIALS_PROFILE_LOGIN","AC")},QX=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",JX=async(t,e)=>Promise.resolve().then(()=>v(pw())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>An.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),ZX=async(t,e,r={},n)=>{let{fromSSO:s}=await Promise.resolve().then(()=>v(PE()));return s({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:n}).then(o=>e.sso_session?An.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):An.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},eQ=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),k$=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,D$=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return An.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},tQ=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,rQ=async(t,e,r)=>Promise.resolve().then(()=>v(hw())).then(({fromTokenFile:n})=>n({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})({callerClientConfig:r}).then(s=>An.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),M$=async(t,e,r,n,s={},o=!1)=>{let i=e[t];if(Object.keys(s).length>0&&k$(i))return D$(i,r);if(o||zX(i,{profile:t,logger:r.logger}))return KX(t,e,r,n,s,M$);if(k$(i))return D$(i,r);if(tQ(i))return rQ(i,r,n);if(QX(i))return JX(r,t);if(eQ(i))return await ZX(t,i,r,n);if(YX(i))return XX(t,r,n);throw new su.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},nQ=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await yw.parseKnownFiles(t);return M$(yw.getProfileName({profile:t.profile??e?.profile}),r,t,e)};$$.fromIni=nQ});var _w=R(um=>{"use strict";c();var Sw=v_(),ou=ze(),sQ=hr(),B$="AWS_EC2_METADATA_DISABLED",oQ=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>v(sc()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>v(O_()));return ou.chain(o(t),n(t))}return process.env[B$]&&process.env[B$]!=="false"?async()=>{throw new ou.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function iQ(t,e){let r=aQ(t),n,s,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),n)await n;else if(!o||e?.(o))if(o)s||(s=r(a).then(u=>{o=u,s=void 0}));else return n=r(a).then(u=>{o=u,n=void 0}),i(a);return o};return i}var aQ=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},L$=!1,cQ=(t={})=>iQ([async()=>{if(t.profile??process.env[sQ.ENV_PROFILE])throw process.env[Sw.ENV_KEY]&&process.env[Sw.ENV_SECRET]&&(L$||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),L$=!0)),new ou.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Sw.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t;if(!r&&!n&&!s&&!o&&!i)throw new ou.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>v(PE()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>v(U$()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>v(pw()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>v(hw()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await oQ(t))()),async()=>{throw new ou.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],F$),uQ=t=>t?.expiration!==void 0,F$=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;um.credentialsTreatedAsExpired=F$;um.credentialsWillNeedRefresh=uQ;um.defaultProvider=cQ});var H$=R(j$=>{"use strict";c();var dQ=Hl(),dm=ee("stream"),Ew=class extends dm.Transform{priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...e}),this.priorSignature=e.priorSignature,this.eventStreamCodec=e.eventStreamCodec,this.messageSigner=e.messageSigner,this.systemClockOffsetProvider=e.systemClockOffsetProvider}async _transform(e,r,n){try{let s=new Date(Date.now()+await this.systemClockOffsetProvider()),o={":date":{type:"timestamp",value:s}},i=await this.messageSigner.sign({message:{body:e,headers:o},priorSignature:this.priorSignature},{signingDate:s});this.priorSignature=i.signature;let a=this.eventStreamCodec.encode({headers:{...o,":chunk-signature":{type:"binary",value:lQ(i.signature)}},body:e});return this.push(a),n()}catch(s){n(s)}}};function lQ(t){let e=Buffer.from(t,"hex");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)}var ww=class{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new dQ.EventStreamCodec(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,r,n={}){let s=r.request,{body:o,query:i}=s;if(!(o instanceof dm.Readable))throw new Error("Eventstream payload must be a Readable stream.");let a=o;s.body=new dm.PassThrough({objectMode:!0});let d=s.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??i?.["X-Amz-Signature"]??"",f=new Ew({priorSignature:d,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});dm.pipeline(a,f,s.body,g=>{if(g)throw g});let l;try{l=await e(r)}catch(g){throw s.body.end(),g}return l}},fQ=t=>new ww(t);j$.eventStreamPayloadHandlerProvider=fQ});function pQ(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function mQ(t){return{schemeId:"smithy.api#noAuth"}}var iu,q$,G$,z$,vw=S(()=>{c();Yn();iu=v(tt()),q$=async(t,e,r)=>({operation:(0,iu.getSmithyContext)(e).operation,region:await(0,iu.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});G$=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(mQ(t));break}default:e.push(pQ(t))}return e},z$=t=>{let e=Fa(t);return Object.assign(e,{authSchemePreference:(0,iu.normalizeProvider)(t.authSchemePreference??[])})}});var V$,W$,bw=S(()=>{c();V$=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),W$={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Y$,K$=S(()=>{Y$={name:"@aws-sdk/nested-clients",version:"3.974.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var Cw=R(mo=>{"use strict";c();var X$=ee("os"),xw=ee("process"),gQ=Pl(),Q$={isCrtAvailable:!1},yQ=()=>Q$.isCrtAvailable?["md/crt-avail"]:null,J$=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${X$.platform()}`,X$.release()],["lang/js"],["md/nodejs",`${xw.versions.node}`]],s=yQ();s&&n.push(s),t&&n.push([`api/${t}`,e]),xw.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${xw.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},SQ=J$,Z$="AWS_SDK_UA_APP_ID",eU="sdk_ua_app_id",_Q="sdk-ua-app-id",EQ={environmentVariableSelector:t=>t[Z$],configFileSelector:t=>t[eU]??t[_Q],default:gQ.DEFAULT_UA_APP_ID};mo.NODE_APP_ID_CONFIG_OPTIONS=EQ;mo.UA_APP_ID_ENV_NAME=Z$;mo.UA_APP_ID_INI_NAME=eU;mo.createDefaultUserAgentProvider=J$;mo.crtAvailability=Q$;mo.defaultUserAgent=SQ});var dU,tr,rr,Yi,tU,au,Wi,Ki,Tn,Aw,Tw,rU,nU,sU,lU,fU,er,oU,pU,iU,aU,cU,uU,wQ,mU,hU=S(()=>{c();dU="required",tr="fn",rr="argv",Yi="ref",tU="isSet",au="booleanEquals",Wi="error",Ki="endpoint",Tn="tree",Aw="PartitionResult",Tw="getAttr",rU={[dU]:!1,type:"string"},nU={[dU]:!0,default:!1,type:"boolean"},sU={[Yi]:"Endpoint"},lU={[tr]:au,[rr]:[{[Yi]:"UseFIPS"},!0]},fU={[tr]:au,[rr]:[{[Yi]:"UseDualStack"},!0]},er={},oU={[tr]:Tw,[rr]:[{[Yi]:Aw},"supportsFIPS"]},pU={[Yi]:Aw},iU={[tr]:au,[rr]:[!0,{[tr]:Tw,[rr]:[pU,"supportsDualStack"]}]},aU=[lU],cU=[fU],uU=[{[Yi]:"Region"}],wQ={version:"1.0",parameters:{Region:rU,UseDualStack:nU,UseFIPS:nU,Endpoint:rU},rules:[{conditions:[{[tr]:tU,[rr]:[sU]}],rules:[{conditions:aU,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Wi},{conditions:cU,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Wi},{endpoint:{url:sU,properties:er,headers:er},type:Ki}],type:Tn},{conditions:[{[tr]:tU,[rr]:uU}],rules:[{conditions:[{[tr]:"aws.partition",[rr]:uU,assign:Aw}],rules:[{conditions:[lU,fU],rules:[{conditions:[{[tr]:au,[rr]:[!0,oU]},iU],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:er,headers:er},type:Ki}],type:Tn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Wi}],type:Tn},{conditions:aU,rules:[{conditions:[{[tr]:au,[rr]:[oU,!0]}],rules:[{conditions:[{[tr]:"stringEquals",[rr]:[{[tr]:Tw,[rr]:[pU,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:er,headers:er},type:Ki},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:er,headers:er},type:Ki}],type:Tn},{error:"FIPS is enabled but this partition does not support FIPS",type:Wi}],type:Tn},{conditions:cU,rules:[{conditions:[iU],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:er,headers:er},type:Ki}],type:Tn},{error:"DualStack is enabled but this partition does not support DualStack",type:Wi}],type:Tn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:er,headers:er},type:Ki}],type:Tn}],type:Tn},{error:"Invalid Configuration: Missing Region",type:Wi}]},mU=wQ});var gU,Xi,vQ,yU,SU=S(()=>{c();gU=v(pn()),Xi=v(fn());hU();vQ=new Xi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),yU=(t,e={})=>vQ.get(t,()=>(0,Xi.resolveEndpoint)(mU,{endpointParams:t,logger:e.logger}));Xi.customEndpointFunctions.aws=gU.awsEndpointFunctions});var _U,EU,lm,fm,wU,vU=S(()=>{c();Yn();Il();Ie();_U=v(z()),EU=v(Pr()),lm=v(Ws()),fm=v(Ce());vw();SU();wU=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??lm.fromBase64,base64Encoder:t?.base64Encoder??lm.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??yU,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??G$,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Nr},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new $t}],logger:t?.logger??new _U.NoOpLogger,protocol:t?.protocol??ci,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??EU.parseUrl,utf8Decoder:t?.utf8Decoder??fm.fromUtf8,utf8Encoder:t?.utf8Encoder??fm.toUtf8})});var pm,Is,bU,mm,Rs,hm,gm,xU,CU,AU,TU,RU=S(()=>{c();K$();Yn();pm=v(Cw()),Is=v(Ve()),bU=v(Zs()),mm=v(Bt()),Rs=v(Gt()),hm=v(on()),gm=v(z()),xU=v(eo()),CU=v(to()),AU=v(rs());vU();TU=t=>{(0,gm.emitWarningIfUnsupportedVersion)(process.version);let e=(0,CU.resolveDefaultsModeConfig)(t),r=()=>e().then(gm.loadConfigsForDefaultMode),n=wU(t);Gd(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Rs.loadConfig)(Kd,s),bodyLengthChecker:t?.bodyLengthChecker??xU.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,pm.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Y$.version}),maxAttempts:t?.maxAttempts??(0,Rs.loadConfig)(mm.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Rs.loadConfig)(Is.NODE_REGION_CONFIG_OPTIONS,{...Is.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:hm.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Rs.loadConfig)({...mm.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||AU.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??bU.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??hm.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Rs.loadConfig)(Is.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Rs.loadConfig)(Is.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Rs.loadConfig)(pm.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var OU=R(Qi=>{"use strict";c();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.warning=void 0;Qi.stsRegionDefaultResolver=xQ;var IU=Ve(),bQ=Gt();function xQ(t={}){return(0,bQ.loadConfig)({...IU.NODE_REGION_CONFIG_OPTIONS,async default(){return Qi.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...IU.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}Qi.warning={silence:!1}});var Rw=R(qr=>{"use strict";c();var PU=OU(),cu=Ve(),CQ=t=>({setRegion(e){t.region=e},region(){return t.region}}),AQ=t=>({region:t.region()});Object.defineProperty(qr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return cu.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(qr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return cu.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(qr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return cu.REGION_ENV_NAME}});Object.defineProperty(qr,"REGION_INI_NAME",{enumerable:!0,get:function(){return cu.REGION_INI_NAME}});Object.defineProperty(qr,"resolveRegionConfig",{enumerable:!0,get:function(){return cu.resolveRegionConfig}});qr.getAwsRegionExtensionConfiguration=CQ;qr.resolveAwsRegionExtensionConfiguration=AQ;Object.keys(PU).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qr,t)&&Object.defineProperty(qr,t,{enumerable:!0,get:function(){return PU[t]}})})});var NU,kU,DU=S(()=>{c();NU=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},kU=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var ym,Sm,_m,MU,$U=S(()=>{c();ym=v(Rw()),Sm=v(ie()),_m=v(z());DU();MU=(t,e)=>{let r=Object.assign((0,ym.getAwsRegionExtensionConfiguration)(t),(0,_m.getDefaultExtensionConfiguration)(t),(0,Sm.getHttpHandlerExtensionConfiguration)(t),NU(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,ym.resolveAwsRegionExtensionConfiguration)(r),(0,_m.resolveDefaultRuntimeConfig)(r),(0,Sm.resolveHttpHandlerRuntimeConfig)(r),kU(r))}});var Em,UU,BU,wm,LU,FU,jU,vm,Iw,uu,Ow=S(()=>{c();Em=v(Fh()),UU=v(jh()),BU=v(Xh()),wm=v(Pl()),LU=v(Ve());Ie();J();FU=v(Xs()),jU=v(zt()),vm=v(Bt()),Iw=v(z());vw();bw();RU();$U();uu=class extends Iw.Client{config;constructor(...[e]){let r=TU(e||{});super(r),this.initConfig=r;let n=V$(r),s=(0,wm.resolveUserAgentConfig)(n),o=(0,vm.resolveRetryConfig)(s),i=(0,LU.resolveRegionConfig)(o),a=(0,Em.resolveHostHeaderConfig)(i),u=(0,jU.resolveEndpointConfig)(a),d=z$(u),f=MU(d,e?.extensions||[]);this.config=f,this.middlewareStack.use(an(this.config)),this.middlewareStack.use((0,wm.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,vm.getRetryPlugin)(this.config)),this.middlewareStack.use((0,FU.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Em.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,UU.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,BU.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(en(this.config,{httpAuthSchemeParametersProvider:q$,identityProviderConfigProvider:async l=>new pr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(tn(this.config))}destroy(){super.destroy()}}});var HU,Ke,bm=S(()=>{c();HU=v(z()),Ke=class t extends HU.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var du,lu,fu,pu,mu,hu,gu,yu,Su,_u,Eu,Pw=S(()=>{c();bm();du=class t extends Ke{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},lu=class t extends Ke{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},fu=class t extends Ke{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},pu=class t extends Ke{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},mu=class t extends Ke{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},hu=class t extends Ke{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},gu=class t extends Ke{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},yu=class t extends Ke{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Su=class t extends Ke{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},_u=class t extends Ke{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Eu=class t extends Ke{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var TQ,RQ,IQ,OQ,PQ,NQ,kQ,DQ,MQ,$Q,UQ,BQ,LQ,FQ,jQ,HQ,qQ,GQ,zQ,VQ,Gr,WQ,KQ,YQ,XQ,QQ,ke,JQ,vr,ZQ,eJ,br,tJ,qU,GU,rJ,nJ,sJ,zU,oJ,Se,iJ,aJ,cJ,uJ,VU,WU,KU,YU,XU,QU,JU,ZU,eB,tB,rB,nB,sB,oB,iB,Nw,kw=S(()=>{c();J();Pw();bm();TQ="AccessDeniedException",RQ="AuthorizationPendingException",IQ="AccessToken",OQ="ClientSecret",PQ="CreateToken",NQ="CreateTokenRequest",kQ="CreateTokenResponse",DQ="CodeVerifier",MQ="ExpiredTokenException",$Q="InvalidClientException",UQ="InvalidGrantException",BQ="InvalidRequestException",LQ="InternalServerException",FQ="InvalidScopeException",jQ="IdToken",HQ="RefreshToken",qQ="SlowDownException",GQ="UnauthorizedClientException",zQ="UnsupportedGrantTypeException",VQ="accessToken",Gr="client",WQ="clientId",KQ="clientSecret",YQ="codeVerifier",XQ="code",QQ="deviceCode",ke="error",JQ="expiresIn",vr="error_description",ZQ="grantType",eJ="http",br="httpError",tJ="idToken",qU="reason",GU="refreshToken",rJ="redirectUri",nJ="scope",sJ="server",zU="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",oJ="tokenType",Se="com.amazonaws.ssooidc",iJ=[0,Se,IQ,8,0],aJ=[0,Se,OQ,8,0],cJ=[0,Se,DQ,8,0],uJ=[0,Se,jQ,8,0],VU=[0,Se,HQ,8,0],WU=[-3,Se,TQ,{[ke]:Gr,[br]:400},[ke,qU,vr],[0,0,0]];B.for(Se).registerError(WU,du);KU=[-3,Se,RQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(KU,lu);YU=[3,Se,NQ,0,[WQ,KQ,ZQ,QQ,XQ,GU,nJ,rJ,YQ],[0,[()=>aJ,0],0,0,0,[()=>VU,0],64,0,[()=>cJ,0]],3],XU=[3,Se,kQ,0,[VQ,oJ,JQ,GU,tJ],[[()=>iJ,0],0,1,[()=>VU,0],[()=>uJ,0]]],QU=[-3,Se,MQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(QU,fu);JU=[-3,Se,LQ,{[ke]:sJ,[br]:500},[ke,vr],[0,0]];B.for(Se).registerError(JU,pu);ZU=[-3,Se,$Q,{[ke]:Gr,[br]:401},[ke,vr],[0,0]];B.for(Se).registerError(ZU,mu);eB=[-3,Se,UQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(eB,hu);tB=[-3,Se,BQ,{[ke]:Gr,[br]:400},[ke,qU,vr],[0,0,0]];B.for(Se).registerError(tB,gu);rB=[-3,Se,FQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(rB,yu);nB=[-3,Se,qQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(nB,Su);sB=[-3,Se,GQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(sB,_u);oB=[-3,Se,zQ,{[ke]:Gr,[br]:400},[ke,vr],[0,0]];B.for(Se).registerError(oB,Eu);iB=[-3,zU,"SSOOIDCServiceException",0,[],[]];B.for(zU).registerError(iB,Ke);Nw=[9,Se,PQ,{[eJ]:["POST","/token",200]},()=>YU,()=>XU]});var aB,Dw,wu,Mw=S(()=>{c();aB=v(zt()),Dw=v(z());bw();kw();wu=class extends Dw.Command.classBuilder().ep(W$).m(function(e,r,n,s){return[(0,aB.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(Nw).build(){}});var cB,dJ,xm,uB=S(()=>{c();cB=v(z());Mw();Ow();dJ={CreateTokenCommand:wu},xm=class extends uu{};(0,cB.createAggregatedClient)(dJ,xm)});var dB=S(()=>{c();Mw()});var lJ,fJ,lB=S(()=>{c();lJ={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},fJ={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var fB=S(()=>{c()});var $w={};Be($w,{$Command:()=>Dw.Command,AccessDeniedException:()=>du,AccessDeniedException$:()=>WU,AccessDeniedExceptionReason:()=>lJ,AuthorizationPendingException:()=>lu,AuthorizationPendingException$:()=>KU,CreateToken$:()=>Nw,CreateTokenCommand:()=>wu,CreateTokenRequest$:()=>YU,CreateTokenResponse$:()=>XU,ExpiredTokenException:()=>fu,ExpiredTokenException$:()=>QU,InternalServerException:()=>pu,InternalServerException$:()=>JU,InvalidClientException:()=>mu,InvalidClientException$:()=>ZU,InvalidGrantException:()=>hu,InvalidGrantException$:()=>eB,InvalidRequestException:()=>gu,InvalidRequestException$:()=>tB,InvalidRequestExceptionReason:()=>fJ,InvalidScopeException:()=>yu,InvalidScopeException$:()=>rB,SSOOIDC:()=>xm,SSOOIDCClient:()=>uu,SSOOIDCServiceException:()=>Ke,SSOOIDCServiceException$:()=>iB,SlowDownException:()=>Su,SlowDownException$:()=>nB,UnauthorizedClientException:()=>_u,UnauthorizedClientException$:()=>sB,UnsupportedGrantTypeException:()=>Eu,UnsupportedGrantTypeException$:()=>oB,__Client:()=>Iw.Client});var Uw=S(()=>{c();Ow();uB();dB();kw();lB();Pw();fB();bm()});var gB=R(bu=>{"use strict";c();var pJ=(Vd(),Y(eA)),mJ=(Ky(),Y(GA)),Ht=ze(),vu=hr(),hJ=ee("fs"),gJ=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new Ht.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=mJ.getBearerTokenEnvKey(e);if(!(r in process.env))throw new Ht.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return pJ.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},yJ=5*60*1e3,Bw="To refresh this SSO session run 'aws sso login' with the corresponding profile.",SJ=async(t,e={},r)=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(Uw(),$w)),s=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i]??r?.[i];return new n(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},_J=async(t,e,r={},n)=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(Uw(),$w));return(await SJ(e,r,n)).send(new s({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},pB=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Ht.TokenProviderError(`Token is expired. ${Bw}`,!1)},ho=(t,e,r=!1)=>{if(typeof e>"u")throw new Ht.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Bw}`,!1)},{writeFile:EJ}=hJ.promises,wJ=(t,e)=>{let r=vu.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return EJ(r,n)},mB=new Date(0),hB=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await vu.parseKnownFiles(t),n=vu.getProfileName({profile:t.profile??e?.profile}),s=r[n];if(s){if(!s.sso_session)throw new Ht.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Ht.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=s.sso_session,a=(await vu.loadSsoSessionData(t))[o];if(!a)throw new Ht.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!a[h])throw new Ht.TokenProviderError(`Sso session '${o}' is missing required property '${h}'.`,!1);a.sso_start_url;let u=a.sso_region,d;try{d=await vu.getSSOTokenFromFile(o)}catch{throw new Ht.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${Bw}`,!1)}ho("accessToken",d.accessToken),ho("expiresAt",d.expiresAt);let{accessToken:f,expiresAt:l}=d,g={token:f,expiration:new Date(l)};if(g.expiration.getTime()-Date.now()>yJ)return g;if(Date.now()-mB.getTime()<30*1e3)return pB(g),g;ho("clientId",d.clientId,!0),ho("clientSecret",d.clientSecret,!0),ho("refreshToken",d.refreshToken,!0);try{mB.setTime(Date.now());let h=await _J(d,u,t,e);ho("accessToken",h.accessToken),ho("expiresIn",h.expiresIn);let y=new Date(Date.now()+h.expiresIn*1e3);try{await wJ(o,{...d,accessToken:h.accessToken,expiresAt:y.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:y}}catch{return pB(g),g}},vJ=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Ht.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},bJ=(t={})=>Ht.memoize(Ht.chain(hB(t),async()=>{throw new Ht.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);bu.fromEnvSigningName=gJ;bu.fromSso=hB;bu.fromStatic=vJ;bu.nodeProvider=bJ});var yB=R(Lw=>{"use strict";c();var xJ=JS(),CJ=ee("stream");async function*AJ(t){let e=!1,r=!1,n=new Array;for(t.on("error",s=>{if(e||(e=!0),s)throw s}),t.on("data",s=>{n.push(s)}),t.on("end",()=>{e=!0});!r;){let s=await new Promise(o=>setTimeout(()=>o(n.shift()),0));s&&(yield s),r=e&&n.length===0}}var Cm=class{universalMarshaller;constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new xJ.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){let n=typeof e[Symbol.asyncIterator]=="function"?e:AJ(e);return this.universalMarshaller.deserialize(n,r)}serialize(e,r){return CJ.Readable.from(this.universalMarshaller.serialize(e,r))}},TJ=t=>new Cm(t);Lw.EventStreamMarshaller=Cm;Lw.eventStreamSerdeProvider=TJ});var PB=R(Am=>{"use strict";c();Object.defineProperty(Am,"__esModule",{value:!0});Am.ruleSet=void 0;var RB="required",Vr="fn",Wr="argv",Zi="ref",SB=!0,_B="isSet",Cu="booleanEquals",Ji="error",xu="endpoint",bt="tree",Fw="PartitionResult",EB={[RB]:!1,type:"string"},wB={[RB]:!0,default:!1,type:"boolean"},vB={[Zi]:"Endpoint"},IB={[Vr]:Cu,[Wr]:[{[Zi]:"UseFIPS"},!0]},OB={[Vr]:Cu,[Wr]:[{[Zi]:"UseDualStack"},!0]},zr={},bB={[Vr]:"getAttr",[Wr]:[{[Zi]:Fw},"supportsFIPS"]},xB={[Vr]:Cu,[Wr]:[!0,{[Vr]:"getAttr",[Wr]:[{[Zi]:Fw},"supportsDualStack"]}]},CB=[IB],AB=[OB],TB=[{[Zi]:"Region"}],RJ={version:"1.0",parameters:{Region:EB,UseDualStack:wB,UseFIPS:wB,Endpoint:EB},rules:[{conditions:[{[Vr]:_B,[Wr]:[vB]}],rules:[{conditions:CB,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ji},{rules:[{conditions:AB,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ji},{endpoint:{url:vB,properties:zr,headers:zr},type:xu}],type:bt}],type:bt},{rules:[{conditions:[{[Vr]:_B,[Wr]:TB}],rules:[{conditions:[{[Vr]:"aws.partition",[Wr]:TB,assign:Fw}],rules:[{conditions:[IB,OB],rules:[{conditions:[{[Vr]:Cu,[Wr]:[SB,bB]},xB],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zr,headers:zr},type:xu}],type:bt}],type:bt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ji}],type:bt},{conditions:CB,rules:[{conditions:[{[Vr]:Cu,[Wr]:[bB,SB]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:zr,headers:zr},type:xu}],type:bt}],type:bt},{error:"FIPS is enabled but this partition does not support FIPS",type:Ji}],type:bt},{conditions:AB,rules:[{conditions:[xB],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zr,headers:zr},type:xu}],type:bt}],type:bt},{error:"DualStack is enabled but this partition does not support DualStack",type:Ji}],type:bt},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:zr,headers:zr},type:xu}],type:bt}],type:bt}],type:bt},{error:"Invalid Configuration: Missing Region",type:Ji}],type:bt}]};Am.ruleSet=RJ});var NB=R(Tm=>{"use strict";c();Object.defineProperty(Tm,"__esModule",{value:!0});Tm.defaultEndpointResolver=void 0;var IJ=pn(),jw=fn(),OJ=PB(),PJ=new jw.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),NJ=(t,e={})=>PJ.get(t,()=>(0,jw.resolveEndpoint)(OJ.ruleSet,{endpointParams:t,logger:e.logger}));Tm.defaultEndpointResolver=NJ;jw.customEndpointFunctions.aws=IJ.awsEndpointFunctions});var MB=R(Rm=>{"use strict";c();Object.defineProperty(Rm,"__esModule",{value:!0});Rm.getRuntimeConfig=void 0;var kJ=(Yn(),Y(Ya)),DJ=(Il(),Y(eR)),MJ=(Ie(),Y(Or)),$J=z(),UJ=Pr(),kB=Ws(),DB=Ce(),BJ=w_(),LJ=NB(),FJ=t=>({apiVersion:"2023-09-30",base64Decoder:t?.base64Decoder??kB.fromBase64,base64Encoder:t?.base64Encoder??kB.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??LJ.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??BJ.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new kJ.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new MJ.HttpBearerAuthSigner}],logger:t?.logger??new $J.NoOpLogger,protocol:t?.protocol??DJ.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.bedrockruntime",version:"2023-09-30",serviceTarget:"AmazonBedrockFrontendService"},serviceId:t?.serviceId??"Bedrock Runtime",urlParser:t?.urlParser??UJ.parseUrl,utf8Decoder:t?.utf8Decoder??DB.fromUtf8,utf8Encoder:t?.utf8Encoder??DB.toUtf8});Rm.getRuntimeConfig=FJ});var jB=R(Om=>{"use strict";c();Object.defineProperty(Om,"__esModule",{value:!0});Om.getRuntimeConfig=void 0;var jJ=(un(),Y(cn)),HJ=jJ.__importDefault(KI()),Hw=(Yn(),Y(Ya)),qJ=_w(),GJ=H$(),$B=gB(),UB=Cw(),Im=Ve(),zJ=(Ie(),Y(Or)),VJ=yB(),WJ=Zs(),BB=Bt(),go=Gt(),LB=on(),FB=z(),KJ=eo(),YJ=to(),XJ=rs(),QJ=MB(),JJ=t=>{(0,FB.emitWarningIfUnsupportedVersion)(process.version);let e=(0,YJ.resolveDefaultsModeConfig)(t),r=()=>e().then(FB.loadConfigsForDefaultMode),n=(0,QJ.getRuntimeConfig)(t);(0,Hw.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger,signingName:"bedrock"};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,go.loadConfig)(Hw.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??KJ.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??qJ.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,UB.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:HJ.default.version}),eventStreamPayloadHandlerProvider:t?.eventStreamPayloadHandlerProvider??GJ.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:t?.eventStreamSerdeProvider??VJ.eventStreamSerdeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4"),signer:new Hw.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#httpBearerAuth")||(async i=>{try{return await(0,$B.fromEnvSigningName)({signingName:"bedrock"})()}catch{return await(0,$B.nodeProvider)(i)(i)}}),signer:new zJ.HttpBearerAuthSigner}],maxAttempts:t?.maxAttempts??(0,go.loadConfig)(BB.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,go.loadConfig)(Im.NODE_REGION_CONFIG_OPTIONS,{...Im.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:LB.NodeHttp2Handler.create(t?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:t?.retryMode??(0,go.loadConfig)({...BB.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||XJ.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??WJ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??LB.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,go.loadConfig)(Im.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,go.loadConfig)(Im.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,go.loadConfig)(UB.NODE_APP_ID_CONFIG_OPTIONS,s)}};Om.getRuntimeConfig=JJ});var $4=R(_=>{"use strict";c();var tL=Qv(),HB=Fh(),ZJ=jh(),eZ=Xh(),qB=Pl(),rL=qR(),tZ=Ve(),Pm=(Ie(),Y(Or)),Ot=(J(),Y(Cd)),rZ=tI(),nZ=Xs(),xr=zt(),GB=Bt(),Ze=z(),zB=w_(),sZ=jB(),VB=Rw(),WB=ie(),oZ=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),Kr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},iZ=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials,s=t.token;return{setHttpAuthScheme(o){let i=e.findIndex(a=>a.schemeId===o.schemeId);i===-1?e.push(o):e.splice(i,1,o)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n},setToken(o){s=o},token(){return s}}},aZ=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials(),token:t.token()}),cZ=(t,e)=>{let r=Object.assign(VB.getAwsRegionExtensionConfiguration(t),Ze.getDefaultExtensionConfiguration(t),WB.getHttpHandlerExtensionConfiguration(t),iZ(t));return e.forEach(n=>n.configure(r)),Object.assign(t,VB.resolveAwsRegionExtensionConfiguration(r),Ze.resolveDefaultRuntimeConfig(r),WB.resolveHttpHandlerRuntimeConfig(r),aZ(r))},Au=class extends Ze.Client{config;constructor(...[e]){let r=sZ.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=oZ(r),s=qB.resolveUserAgentConfig(n),o=GB.resolveRetryConfig(s),i=tZ.resolveRegionConfig(o),a=HB.resolveHostHeaderConfig(i),u=xr.resolveEndpointConfig(a),d=rZ.resolveEventStreamSerdeConfig(u),f=zB.resolveHttpAuthSchemeConfig(d),l=tL.resolveEventStreamConfig(f),g=rL.resolveWebSocketConfig(l),h=cZ(g,e?.extensions||[]);this.config=h,this.middlewareStack.use(Ot.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(qB.getUserAgentPlugin(this.config)),this.middlewareStack.use(GB.getRetryPlugin(this.config)),this.middlewareStack.use(nZ.getContentLengthPlugin(this.config)),this.middlewareStack.use(HB.getHostHeaderPlugin(this.config)),this.middlewareStack.use(ZJ.getLoggerPlugin(this.config)),this.middlewareStack.use(eZ.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Pm.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:zB.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async y=>new Pm.DefaultIdentityProviderConfig({"aws.auth#sigv4":y.credentials,"smithy.api#httpBearerAuth":y.token})})),this.middlewareStack.use(Pm.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},ft=class t extends Ze.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},Nm=class t extends ft{name="AccessDeniedException";$fault="client";constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},km=class t extends ft{name="InternalServerException";$fault="server";constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype)}},Dm=class t extends ft{name="ThrottlingException";$fault="client";constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Mm=class t extends ft{name="ValidationException";$fault="client";constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},$m=class t extends ft{name="ConflictException";$fault="client";constructor(e){super({name:"ConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Um=class t extends ft{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Bm=class t extends ft{name="ServiceQuotaExceededException";$fault="client";constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Lm=class t extends ft{name="ServiceUnavailableException";$fault="server";constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype)}},Fm=class t extends ft{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(e){super({name:"ModelErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.originalStatusCode=e.originalStatusCode,this.resourceName=e.resourceName}},jm=class t extends ft{name="ModelNotReadyException";$fault="client";$retryable={};constructor(e){super({name:"ModelNotReadyException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Hm=class t extends ft{name="ModelTimeoutException";$fault="client";constructor(e){super({name:"ModelTimeoutException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},qm=class t extends ft{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(e){super({name:"ModelStreamErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.originalStatusCode=e.originalStatusCode,this.originalMessage=e.originalMessage}},uZ="Accept",dZ="AudioBlock",lZ="AccessDeniedException",fZ="ApplyGuardrail",pZ="AppliedGuardrailDetails",mZ="ApplyGuardrailRequest",hZ="ApplyGuardrailResponse",gZ="AsyncInvokeMessage",yZ="AsyncInvokeOutputDataConfig",SZ="AsyncInvokeSummary",_Z="AsyncInvokeS3OutputDataConfig",EZ="AsyncInvokeSummaries",wZ="AudioSource",vZ="AnyToolChoice",bZ="AutoToolChoice",xZ="Body",CZ="BidirectionalInputPayloadPart",AZ="BidirectionalOutputPayloadPart",TZ="Citation",RZ="ContentBlocks",IZ="ContentBlockDelta",OZ="ContentBlockDeltaEvent",PZ="ContentBlockStart",NZ="ContentBlockStartEvent",kZ="ContentBlockStopEvent",DZ="ContentBlock",MZ="CitationsConfig",$Z="CitationsContentBlock",UZ="CacheDetail",BZ="CacheDetailsList",LZ="CitationsDelta",FZ="ConflictException",jZ="CitationGeneratedContent",HZ="CitationGeneratedContentList",qZ="CitationLocation",GZ="ConverseMetrics",zZ="ConverseOutput",VZ="CachePointBlock",WZ="ConverseRequest",KZ="ConverseResponse",YZ="ConverseStream",XZ="CitationSourceContent",QZ="CitationSourceContentDelta",JZ="CitationSourceContentList",ZZ="CitationSourceContentListDelta",eee="ConverseStreamMetrics",tee="ConverseStreamMetadataEvent",ree="ConverseStreamOutput",nee="ConverseStreamRequest",see="ConverseStreamResponse",oee="ConverseStreamTrace",iee="ConverseTrace",aee="CountTokensInput",cee="ConverseTokensRequest",uee="CountTokensRequest",dee="CountTokensResponse",Gw="Content-Type",lee="CountTokens",fee="Citations",pee="Converse",mee="DocumentBlock",hee="DocumentContentBlocks",gee="DocumentContentBlock",yee="DocumentCharLocation",See="DocumentChunkLocation",_ee="DocumentPageLocation",Eee="DocumentSource",wee="ErrorBlock",vee="GuardrailAssessment",bee="GetAsyncInvoke",xee="GetAsyncInvokeRequest",Cee="GetAsyncInvokeResponse",Aee="GuardrailAssessmentList",Tee="GuardrailAssessmentListMap",Ree="GuardrailAssessmentMap",Iee="GuardrailAutomatedReasoningDifferenceScenarioList",Oee="GuardrailAutomatedReasoningFinding",Pee="GuardrailAutomatedReasoningFindingList",Nee="GuardrailAutomatedReasoningImpossibleFinding",kee="GuardrailAutomatedReasoningInvalidFinding",Dee="GuardrailAutomatedReasoningInputTextReference",Mee="GuardrailAutomatedReasoningInputTextReferenceList",$ee="GuardrailAutomatedReasoningLogicWarning",Uee="GuardrailAutomatedReasoningNoTranslationsFinding",Bee="GuardrailAutomatedReasoningPolicyAssessment",Lee="GuardrailAutomatedReasoningRule",Fee="GuardrailAutomatedReasoningRuleList",jee="GuardrailAutomatedReasoningScenario",Hee="GuardrailAutomatedReasoningSatisfiableFinding",qee="GuardrailAutomatedReasoningStatementList",Gee="GuardrailAutomatedReasoningStatementLogicContent",zee="GuardrailAutomatedReasoningStatementNaturalLanguageContent",Vee="GuardrailAutomatedReasoningStatement",Wee="GuardrailAutomatedReasoningTranslation",Kee="GuardrailAutomatedReasoningTranslationAmbiguousFinding",Yee="GuardrailAutomatedReasoningTooComplexFinding",Xee="GuardrailAutomatedReasoningTranslationList",Qee="GuardrailAutomatedReasoningTranslationOption",Jee="GuardrailAutomatedReasoningTranslationOptionList",Zee="GuardrailAutomatedReasoningValidFinding",ete="GuardrailConfiguration",tte="GuardrailContentBlock",rte="GuardrailContentBlockList",nte="GuardrailConverseContentBlock",ste="GuardrailContentFilter",ote="GuardrailContentFilterList",ite="GuardrailContextualGroundingFilter",ate="GuardrailContextualGroundingFilters",cte="GuardrailContextualGroundingPolicyAssessment",ute="GuardrailConverseImageBlock",dte="GuardrailConverseImageSource",lte="GuardrailContentPolicyAssessment",fte="GuardrailConverseTextBlock",pte="GuardrailCustomWord",mte="GuardrailCustomWordList",hte="GuardrailCoverage",gte="GuardrailImageBlock",yte="GuardrailImageCoverage",Ste="GuardrailInvocationMetrics",_te="GuardrailImageSource",Ete="GuardrailManagedWord",wte="GuardrailManagedWordList",vte="GuardrailOutputContent",bte="GuardrailOutputContentList",xte="GuardrailPiiEntityFilter",Cte="GuardrailPiiEntityFilterList",Ate="GuardrailRegexFilter",Tte="GuardrailRegexFilterList",Rte="GuardrailStreamConfiguration",Ite="GuardrailSensitiveInformationPolicyAssessment",Ote="GuardrailTopic",Pte="GuardrailTraceAssessment",Nte="GuardrailTextBlock",kte="GuardrailTextCharactersCoverage",Dte="GuardrailTopicList",Mte="GuardrailTopicPolicyAssessment",$te="GuardrailUsage",Ute="GuardrailWordPolicyAssessment",Bte="ImageBlock",Lte="ImageBlockDelta",Fte="ImageBlockStart",jte="InferenceConfiguration",Hte="InvokeModel",qte="InvokeModelRequest",Gte="InvokeModelResponse",zte="InvokeModelTokensRequest",Vte="InvokeModelWithBidirectionalStream",Wte="InvokeModelWithBidirectionalStreamInput",Kte="InvokeModelWithBidirectionalStreamOutput",Yte="InvokeModelWithBidirectionalStreamRequest",Xte="InvokeModelWithBidirectionalStreamResponse",Qte="InvokeModelWithResponseStream",Jte="InvokeModelWithResponseStreamRequest",Zte="InvokeModelWithResponseStreamResponse",ere="ImageSource",tre="InternalServerException",rre="ListAsyncInvokes",nre="ListAsyncInvokesRequest",sre="ListAsyncInvokesResponse",ore="Message",ire="ModelErrorException",are="ModelInputPayload",cre="ModelNotReadyException",ure="MessageStartEvent",dre="ModelStreamErrorException",lre="MessageStopEvent",fre="ModelTimeoutException",pre="Messages",mre="PartBody",hre="PerformanceConfiguration",gre="PayloadPart",yre="PromptRouterTrace",Sre="PromptVariableMap",_re="PromptVariableValues",Ere="ReasoningContentBlock",wre="ReasoningContentBlockDelta",vre="RequestMetadata",bre="ResourceNotFoundException",xre="ResponseStream",Cre="ReasoningTextBlock",Are="StartAsyncInvoke",Tre="StartAsyncInvokeRequest",Rre="StartAsyncInvokeResponse",Ire="SystemContentBlocks",Ore="SystemContentBlock",Pre="S3Location",Nre="ServiceQuotaExceededException",kre="SearchResultBlock",Dre="SearchResultContentBlock",Mre="SearchResultContentBlocks",$re="SearchResultLocation",Ure="ServiceTier",Bre="SpecificToolChoice",Lre="SystemTool",Fre="ServiceUnavailableException",jre="Tag",Hre="ToolConfiguration",qre="ToolChoice",Gre="ThrottlingException",zre="ToolInputSchema",Vre="TagList",Wre="ToolResultBlock",Kre="ToolResultBlocksDelta",Yre="ToolResultBlockDelta",Xre="ToolResultBlockStart",Qre="ToolResultContentBlocks",Jre="ToolResultContentBlock",Zre="ToolSpecification",ene="TokenUsage",tne="ToolUseBlock",rne="ToolUseBlockDelta",nne="ToolUseBlockStart",sne="Tools",one="Tool",ine="VideoBlock",ane="ValidationException",cne="VideoSource",une="WebLocation",dne="X-Amzn-Bedrock-Accept",lne="X-Amzn-Bedrock-Content-Type",nL="X-Amzn-Bedrock-GuardrailIdentifier",sL="X-Amzn-Bedrock-GuardrailVersion",eh="X-Amzn-Bedrock-PerformanceConfig-Latency",th="X-Amzn-Bedrock-Service-Tier",oL="X-Amzn-Bedrock-Trace",Os="action",fne="appliedGuardrailDetails",pne="asyncInvokeSummaries",zw="additionalModelRequestFields",iL="additionalModelResponseFieldPaths",aL="additionalModelResponseFields",cL="actionReason",mne="automatedReasoningPolicy",hne="automatedReasoningPolicyUnits",gne="automatedReasoningPolicies",uL="accept",yne="any",Sne="assessments",_ne="audio",Ene="auto",Rn="bytes",dL="bucketOwner",So="body",Yr="client",wne="contentBlockDelta",Vw="contentBlockIndex",vne="contentBlockStart",bne="contentBlockStop",xne="citationsContent",Cne="cacheDetails",Ane="claimsFalseScenario",Tne="contextualGroundingPolicy",Rne="contextualGroundingPolicyUnits",Ine="contentPolicy",One="contentPolicyImageUnits",Pne="contentPolicyUnits",Ww="cachePoint",lL="contradictingRules",Nne="cacheReadInputTokens",Kw="clientRequestToken",rh="contentType",fL="claimsTrueScenario",kne="customWords",Dne="cacheWriteInputTokens",Yw="chunk",Xw="citations",Mne="citation",pL="claims",ea="content",$ne="context",mL="confidence",Une="converse",Bne="delta",Lne="documentChar",Fne="documentChunk",Qw="documentIndex",jne="documentPage",Hne="differenceScenarios",_o="detected",qne="description",Gne="domain",hL="document",xt="error",gL="endTime",zne="enabled",nh="end",Eo="format",yL="failureMessage",Vne="filterStrength",Wne="findings",SL="filters",_L="guardrail",Kne="guardrailArn",EL="guardrailCoverage",wL="guardrailConfig",vL="guardContent",Yne="guardrailId",Ou="guardrailIdentifier",Xne="guardrailOrigin",Qne="guardrailOwnership",Jne="guardrailProcessingLatency",ta="guardrailVersion",bL="guarded",Xr="http",nr="httpError",Le="httpHeader",yo="httpQuery",Jw="input",sh="invocationArn",Zne="inputAssessment",xL="inferenceConfig",ese="invocationMetrics",tse="invokedModelId",rse="invokeModel",nse="inputSchema",Zw="internalServerException",ev="inputTokens",sse="identifier",ose="images",ra="image",ise="impossible",ase="invalid",tv="json",cse="key",use="kmsKeyId",CL="location",AL="latencyMs",TL="lastModifiedTime",oh="logicWarning",dse="latency",lse="logic",Pt="message",RL="modelArn",wo="modelId",fse="modelInput",pse="modelOutput",KB="maxResults",mse="messageStart",rv="modelStreamErrorException",hse="messageStop",gse="maxTokens",IL="modelTimeoutException",yse="managedWordLists",ih="match",nv="messages",OL="metrics",Sse="metadata",Ps="name",_se="naturalLanguage",qw="nextToken",Ese="noTranslations",wse="outputs",vse="outputAssessments",sv="outputDataConfig",bse="originalMessage",xse="outputScope",PL="originalStatusCode",Cse="outputTokens",Ase="options",Tse="output",NL="premises",ah="performanceConfig",ch="performanceConfigLatency",Rse="piiEntities",kL="promptRouter",DL="promptVariables",Ise="policyVersionArn",ML="qualifiers",Ose="regex",$L="reasoningContent",UL="redactedContent",BL="requestMetadata",Pse="resourceName",Nse="reasoningText",kse="regexes",LL="role",Cr="source",YB="sortBy",FL="sourceContent",XB="statusEquals",Dse="sensitiveInformationPolicy",Mse="sensitiveInformationPolicyFreeUnits",$se="sensitiveInformationPolicyUnits",uh="s3Location",QB="sortOrder",Use="s3OutputDataConfig",Bse="streamProcessingMode",jL="stopReason",Lse="searchResultIndex",Fse="searchResultLocation",HL="searchResult",jse="supportingRules",Hse="stopSequences",qL="submitTime",JB="submitTimeAfter",ZB="submitTimeBefore",Ns="serviceTier",qse="systemTool",Gse="s3Uri",ov="serviceUnavailableException",zse="satisfiable",Vse="score",GL="server",zL="signature",VL="smithy.ts.sdk.synthetic.com.amazonaws.bedrockruntime",dh="status",Pu="start",Wse="statements",Kse="stream",lh="streaming",iv="system",WL="ttl",Yse="translationAmbiguous",av="toolConfig",Xse="textCharacters",Qse="toolChoice",Jse="tooComplex",cv="throttlingException",Zse="topicPolicy",eoe="topicPolicyUnits",toe="topP",uv="toolResult",roe="toolSpec",noe="totalTokens",dv="toolUse",fh="toolUseId",soe="tags",Fe="text",ooe="temperature",ioe="threshold",lv="title",KL="total",aoe="tools",coe="tool",uoe="topics",na="trace",ph="translation",doe="translations",sr="type",mh="usage",loe="untranslatedClaims",foe="untranslatedPremises",poe="uri",moe="url",hoe="value",fv="validationException",goe="valid",YL="video",yoe="web",Soe="wordPolicy",_oe="wordPolicyUnits",E="com.amazonaws.bedrockruntime",XL=[0,E,gZ,8,0],hh=[0,E,xZ,8,21],Eoe=[0,E,Gee,8,0],QL=[0,E,zee,8,0],woe=[0,E,are,8,15],pv=[0,E,mre,8,21],JL=[-3,E,lZ,{[xt]:Yr,[nr]:403},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(JL,Nm);var ZL=[3,E,vZ,0,[],[]],eF=[3,E,pZ,0,[Yne,ta,Kne,Xne,Qne],[0,0,0,64,0]],tF=[3,E,mZ,0,[Ou,ta,Cr,ea,xse],[[0,1],[0,1],0,[()=>Doe,0],0],4],rF=[3,E,hZ,0,[mh,Os,wse,Sne,cL,EL],[()=>_v,0,()=>Loe,[()=>Y2,0],0,()=>yv],4],nF=[3,E,_Z,0,[Gse,use,dL],[0,0,0],1],sF=[3,E,SZ,0,[sh,RL,qL,sv,Kw,dh,yL,TL,gL],[0,0,5,()=>Eh,0,0,[()=>XL,0],5,5],4],oF=[3,E,dZ,0,[Eo,Cr,xt],[0,[()=>J2,0],[()=>yh,0]],2],iF=[3,E,bZ,0,[],[]],aF=[3,E,CZ,8,[Rn],[[()=>pv,0]]],cF=[3,E,AZ,8,[Rn],[[()=>pv,0]]],uF=[3,E,UZ,0,[WL,ev],[0,1],2],gh=[3,E,VZ,0,[sr,WL],[0,0],1],dF=[3,E,TZ,0,[lv,Cr,FL,CL],[0,0,()=>Aoe,()=>Ov]],mv=[3,E,MZ,0,[zne],[2],1],lF=[3,E,$Z,0,[ea,Xw],[()=>xoe,()=>Coe]],fF=[3,E,LZ,0,[lv,Cr,FL,CL],[0,0,()=>Toe,()=>Ov]],pF=[3,E,QZ,0,[Fe],[0]],mF=[-3,E,FZ,{[xt]:Yr,[nr]:400},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(mF,$m);var hF=[3,E,OZ,0,[Bne,Vw],[[()=>r4,0],1],2],gF=[3,E,NZ,0,[Pu,Vw],[()=>n4,1],2],yF=[3,E,kZ,0,[Vw],[1],1],SF=[3,E,GZ,0,[AL],[1],1],_F=[3,E,WZ,0,[wo,nv,iv,xL,av,wL,zw,DL,iL,BL,ah,Ns],[[0,1],[()=>Rv,0],[()=>Iv,0],()=>wv,()=>_h,()=>WF,15,[()=>X2,0],64,[()=>Q2,0],()=>Mu,()=>Uu],1],EF=[3,E,KZ,0,[Tse,jL,mh,OL,aL,na,ah,Ns],[[()=>s4,0],0,()=>Cv,()=>SF,15,[()=>TF,0],()=>Mu,()=>Uu],4],wF=[3,E,tee,0,[mh,OL,na,ah,Ns],[()=>Cv,()=>vF,[()=>CF,0],()=>Mu,()=>Uu],2],vF=[3,E,eee,0,[AL],[1],1],bF=[3,E,nee,0,[wo,nv,iv,xL,av,wL,zw,DL,iL,BL,ah,Ns],[[0,1],[()=>Rv,0],[()=>Iv,0],()=>wv,()=>_h,()=>u2,15,[()=>X2,0],64,[()=>Q2,0],()=>Mu,()=>Uu],1],xF=[3,E,see,0,[Kse],[[()=>o4,16]]],CF=[3,E,oee,0,[_L,kL],[[()=>Sv,0],()=>bv]],AF=[3,E,cee,0,[nv,iv,av,zw],[[()=>Rv,0],[()=>Iv,0],()=>_h,15]],TF=[3,E,iee,0,[_L,kL],[[()=>Sv,0],()=>bv]],RF=[3,E,uee,0,[wo,Jw],[[0,1],[()=>i4,0]],2],IF=[3,E,dee,0,[ev],[1],1],hv=[3,E,mee,0,[Ps,Cr,Eo,$ne,Xw],[0,()=>c4,0,0,()=>mv],2],OF=[3,E,yee,0,[Qw,Pu,nh],[1,1,1]],PF=[3,E,See,0,[Qw,Pu,nh],[1,1,1]],NF=[3,E,_ee,0,[Qw,Pu,nh],[1,1,1]],yh=[3,E,wee,8,[Pt],[0]],kF=[3,E,xee,0,[sh],[[0,1]],1],DF=[3,E,Cee,0,[sh,RL,dh,qL,sv,Kw,yL,TL,gL],[0,0,0,5,()=>Eh,0,[()=>XL,0],5,5],5],gv=[3,E,vee,0,[Zse,Ine,Soe,Dse,Tne,mne,ese,fne],[()=>p2,()=>YF,()=>m2,()=>c2,()=>QF,[()=>LF,0],()=>n2,()=>eF]],MF=[3,E,Nee,0,[ph,lL,oh],[[()=>sa,0],()=>Tv,[()=>Nu,0]]],$F=[3,E,Dee,0,[Fe],[[()=>QL,0]]],UF=[3,E,kee,0,[ph,lL,oh],[[()=>sa,0],()=>Tv,[()=>Nu,0]]],Nu=[3,E,$ee,0,[sr,NL,pL],[0,[()=>Ru,0],[()=>Ru,0]]],BF=[3,E,Uee,0,[],[]],LF=[3,E,Bee,0,[Wne],[[()=>Poe,0]]],FF=[3,E,Lee,0,[sse,Ise],[0,0]],jF=[3,E,Hee,0,[ph,fL,Ane,oh],[[()=>sa,0],[()=>Tu,0],[()=>Tu,0],[()=>Nu,0]]],Tu=[3,E,jee,0,[Wse],[[()=>Ru,0]]],HF=[3,E,Vee,0,[lse,_se],[[()=>Eoe,0],[()=>QL,0]]],qF=[3,E,Yee,0,[],[]],sa=[3,E,Wee,0,[NL,pL,foe,loe,mL],[[()=>Ru,0],[()=>Ru,0],[()=>eL,0],[()=>eL,0],1]],GF=[3,E,Kee,0,[Ase,Hne],[[()=>koe,0],[()=>Ooe,0]]],zF=[3,E,Qee,0,[doe],[[()=>Noe,0]]],VF=[3,E,Zee,0,[ph,fL,jse,oh],[[()=>sa,0],[()=>Tu,0],()=>Tv,[()=>Nu,0]]],WF=[3,E,ete,0,[Ou,ta,na],[0,0,0]],KF=[3,E,ste,0,[sr,mL,Os,Vne,_o],[0,0,0,0,2],3],YF=[3,E,lte,0,[SL],[()=>Moe],1],XF=[3,E,ite,0,[sr,ioe,Vse,Os,_o],[0,1,1,0,2],4],QF=[3,E,cte,0,[SL],[()=>$oe]],JF=[3,E,ute,8,[Eo,Cr],[0,[()=>l4,0]],2],ZF=[3,E,fte,0,[Fe,ML],[0,64],1],yv=[3,E,hte,0,[Xse,ose],[()=>l2,()=>r2]],e2=[3,E,pte,0,[ih,Os,_o],[0,0,2],2],t2=[3,E,gte,8,[Eo,Cr],[0,[()=>f4,0]],2],r2=[3,E,yte,0,[bL,KL],[1,1]],n2=[3,E,Ste,0,[Jne,mh,EL],[1,()=>_v,()=>yv]],s2=[3,E,Ete,0,[ih,sr,Os,_o],[0,0,0,2],3],o2=[3,E,vte,0,[Fe],[0]],i2=[3,E,xte,0,[ih,sr,Os,_o],[0,0,0,2],3],a2=[3,E,Ate,0,[Os,Ps,ih,Ose,_o],[0,0,0,0,2],1],c2=[3,E,Ite,0,[Rse,kse],[()=>Foe,()=>joe],2],u2=[3,E,Rte,0,[Ou,ta,na,Bse],[0,0,0,0]],d2=[3,E,Nte,0,[Fe,ML],[0,64],1],l2=[3,E,kte,0,[bL,KL],[1,1]],f2=[3,E,Ote,0,[Ps,sr,Os,_o],[0,0,0,2],3],p2=[3,E,Mte,0,[uoe],[()=>Hoe],1],Sv=[3,E,Pte,0,[pse,Zne,vse,cL],[64,[()=>Yoe,0],[()=>Koe,0],0]],_v=[3,E,$te,0,[eoe,Pne,_oe,$se,Mse,Rne,One,hne,gne],[1,1,1,1,1,1,1,1,1],6],m2=[3,E,Ute,0,[kne,yse],[()=>Uoe,()=>Boe],2],Ev=[3,E,Bte,0,[Eo,Cr,xt],[0,[()=>Nv,0],[()=>yh,0]],2],h2=[3,E,Lte,0,[Cr,xt],[[()=>Nv,0],[()=>yh,0]]],g2=[3,E,Fte,0,[Eo],[0],1],wv=[3,E,jte,0,[gse,ooe,toe,Hse],[1,1,1,64]],ku=[-3,E,tre,{[xt]:GL,[nr]:500},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(ku,km);var y2=[3,E,qte,0,[wo,So,rh,uL,na,Ou,ta,ch,Ns],[[0,1],[()=>hh,16],[0,{[Le]:Gw}],[0,{[Le]:uZ}],[0,{[Le]:oL}],[0,{[Le]:nL}],[0,{[Le]:sL}],[0,{[Le]:eh}],[0,{[Le]:th}]],1],S2=[3,E,Gte,0,[So,rh,ch,Ns],[[()=>hh,16],[0,{[Le]:Gw}],[0,{[Le]:eh}],[0,{[Le]:th}]],2],_2=[3,E,zte,0,[So],[[()=>hh,0]],1],E2=[3,E,Yte,0,[wo,So],[[0,1],[()=>p4,16]],2],w2=[3,E,Xte,0,[So],[[()=>m4,16]],1],v2=[3,E,Jte,0,[wo,So,rh,uL,na,Ou,ta,ch,Ns],[[0,1],[()=>hh,16],[0,{[Le]:Gw}],[0,{[Le]:dne}],[0,{[Le]:oL}],[0,{[Le]:nL}],[0,{[Le]:sL}],[0,{[Le]:eh}],[0,{[Le]:th}]],1],b2=[3,E,Zte,0,[So,rh,ch,Ns],[[()=>S4,16],[0,{[Le]:lne}],[0,{[Le]:eh}],[0,{[Le]:th}]],2],x2=[3,E,nre,0,[JB,ZB,XB,KB,qw,YB,QB],[[5,{[yo]:JB}],[5,{[yo]:ZB}],[0,{[yo]:XB}],[1,{[yo]:KB}],[0,{[yo]:qw}],[0,{[yo]:YB}],[0,{[yo]:QB}]]],C2=[3,E,sre,0,[qw,pne],[0,[()=>voe,0]]],vv=[3,E,ore,0,[LL,ea],[0,[()=>Roe,0]],2],A2=[3,E,ure,0,[LL],[0],1],T2=[3,E,lre,0,[jL,aL],[0,15],1],R2=[-3,E,ire,{[xt]:Yr,[nr]:424},[Pt,PL,Pse],[0,1,0]];Ot.TypeRegistry.for(E).registerError(R2,Fm);var I2=[-3,E,cre,{[xt]:Yr,[nr]:429},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(I2,jm);var Du=[-3,E,dre,{[xt]:Yr,[nr]:424},[Pt,PL,bse],[0,1,0]];Ot.TypeRegistry.for(E).registerError(Du,qm);var Sh=[-3,E,fre,{[xt]:Yr,[nr]:408},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(Sh,Hm);var O2=[3,E,gre,8,[Rn],[[()=>pv,0]]],Mu=[3,E,hre,0,[dse],[0]],bv=[3,E,yre,0,[tse],[0]],P2=[3,E,Cre,8,[Fe,zL],[0,0],1],N2=[-3,E,bre,{[xt]:Yr,[nr]:404},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(N2,Um);var $u=[3,E,Pre,0,[poe,dL],[0,0],1],xv=[3,E,kre,0,[Cr,lv,ea,Xw],[0,0,()=>qoe,()=>mv],3],k2=[3,E,Dre,0,[Fe],[0],1],D2=[3,E,$re,0,[Lse,Pu,nh],[1,1,1]],M2=[-3,E,Nre,{[xt]:Yr,[nr]:400},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(M2,Bm);var Uu=[3,E,Ure,0,[sr],[0],1],Bu=[-3,E,Fre,{[xt]:GL,[nr]:503},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(Bu,Lm);var $2=[3,E,Bre,0,[Ps],[0],1],U2=[3,E,Tre,0,[wo,fse,sv,Kw,soe],[0,[()=>woe,0],()=>Eh,[0,4],()=>Goe],3],B2=[3,E,Rre,0,[sh],[0],1],L2=[3,E,Lre,0,[Ps],[0],1],F2=[3,E,jre,0,[cse,hoe],[0,0],2],Lu=[-3,E,Gre,{[xt]:Yr,[nr]:429},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(Lu,Dm);var Cv=[3,E,ene,0,[ev,Cse,noe,Nne,Dne,Cne],[1,1,1,1,1,()=>boe],3],_h=[3,E,Hre,0,[aoe,Qse],[()=>Woe,()=>w4],1],j2=[3,E,Wre,0,[fh,ea,dh,sr],[0,[()=>Voe,0],0,0],2],H2=[3,E,Xre,0,[fh,sr,dh],[0,0,0],1],q2=[3,E,Zre,0,[Ps,nse,qne],[0,()=>v4,0],2],G2=[3,E,tne,0,[fh,Ps,Jw,sr],[0,0,15,0],3],z2=[3,E,rne,0,[Jw],[0],1],V2=[3,E,nne,0,[fh,Ps,sr],[0,0,0],2],Fu=[-3,E,ane,{[xt]:Yr,[nr]:400},[Pt],[0]];Ot.TypeRegistry.for(E).registerError(Fu,Mm);var Av=[3,E,ine,0,[Eo,Cr],[0,()=>C4],2],W2=[3,E,une,0,[moe,Gne],[0,0]],K2=[-3,VL,"BedrockRuntimeServiceException",0,[],[]];Ot.TypeRegistry.for(VL).registerError(K2,ft);var voe=[1,E,EZ,0,[()=>sF,0]],boe=[1,E,BZ,0,()=>uF],xoe=[1,E,HZ,0,()=>Z2],Coe=[1,E,fee,0,()=>dF],Aoe=[1,E,JZ,0,()=>e4],Toe=[1,E,ZZ,0,()=>pF],Roe=[1,E,RZ,0,[()=>t4,0]],Ioe=[1,E,hee,0,()=>a4],Y2=[1,E,Aee,0,[()=>gv,0]],Ooe=[1,E,Iee,0,[()=>Tu,0]],Poe=[1,E,Pee,0,[()=>u4,0]],eL=[1,E,Mee,0,[()=>$F,0]],Tv=[1,E,Fee,0,()=>FF],Ru=[1,E,qee,0,[()=>HF,0]],Noe=[1,E,Xee,0,[()=>sa,0]],koe=[1,E,Jee,0,[()=>zF,0]],Doe=[1,E,rte,0,[()=>d4,0]],Moe=[1,E,ote,0,()=>KF],$oe=[1,E,ate,0,()=>XF],Uoe=[1,E,mte,0,()=>e2],Boe=[1,E,wte,0,()=>s2],Loe=[1,E,bte,0,()=>o2],Foe=[1,E,Cte,0,()=>i2],joe=[1,E,Tte,0,()=>a2],Hoe=[1,E,Dte,0,()=>f2],Rv=[1,E,pre,0,[()=>vv,0]],qoe=[1,E,Mre,0,()=>k2],Iv=[1,E,Ire,0,[()=>_4,0]],Goe=[1,E,Vre,0,()=>F2],zoe=[1,E,Kre,0,()=>b4],Voe=[1,E,Qre,0,[()=>x4,0]],Woe=[1,E,sne,0,()=>E4],Koe=[2,E,Tee,0,[0,0],[()=>Y2,0]],Yoe=[2,E,Ree,0,[0,0],[()=>gv,0]],X2=[2,E,Sre,8,0,()=>h4],Q2=[2,E,vre,8,0,0],Eh=[4,E,yZ,0,[Use],[()=>nF]],J2=[4,E,wZ,8,[Rn,uh],[21,()=>$u]],Z2=[4,E,jZ,0,[Fe],[0]],Ov=[4,E,qZ,0,[yoe,Lne,jne,Fne,Fse],[()=>W2,()=>OF,()=>NF,()=>PF,()=>D2]],e4=[4,E,XZ,0,[Fe],[0]],t4=[4,E,DZ,0,[Fe,ra,hL,YL,_ne,dv,uv,vL,Ww,$L,xne,HL],[0,[()=>Ev,0],()=>hv,()=>Av,[()=>oF,0],()=>G2,[()=>j2,0],[()=>Pv,0],()=>gh,[()=>g4,0],()=>lF,()=>xv]],r4=[4,E,IZ,0,[Fe,dv,uv,$L,Mne,ra],[0,()=>z2,()=>zoe,[()=>y4,0],()=>fF,[()=>h2,0]]],n4=[4,E,PZ,0,[dv,uv,ra],[()=>V2,()=>H2,()=>g2]],s4=[4,E,zZ,0,[Pt],[[()=>vv,0]]],o4=[4,E,ree,{[lh]:1},[mse,vne,wne,bne,hse,Sse,Zw,rv,fv,cv,ov],[()=>A2,()=>gF,[()=>hF,0],()=>yF,()=>T2,[()=>wF,0],[()=>ku,0],[()=>Du,0],[()=>Fu,0],[()=>Lu,0],[()=>Bu,0]]],i4=[4,E,aee,0,[rse,Une],[[()=>_2,0],[()=>AF,0]]],a4=[4,E,gee,0,[Fe],[0]],c4=[4,E,Eee,0,[Rn,uh,Fe,ea],[21,()=>$u,0,()=>Ioe]],u4=[4,E,Oee,0,[goe,ase,zse,ise,Yse,Jse,Ese],[[()=>VF,0],[()=>UF,0],[()=>jF,0],[()=>MF,0],[()=>GF,0],()=>qF,()=>BF]],d4=[4,E,tte,0,[Fe,ra],[()=>d2,[()=>t2,0]]],Pv=[4,E,nte,0,[Fe,ra],[()=>ZF,[()=>JF,0]]],l4=[4,E,dte,8,[Rn],[21]],f4=[4,E,_te,8,[Rn],[21]],Nv=[4,E,ere,8,[Rn,uh],[21,()=>$u]],p4=[4,E,Wte,{[lh]:1},[Yw],[[()=>aF,0]]],m4=[4,E,Kte,{[lh]:1},[Yw,Zw,rv,fv,cv,IL,ov],[[()=>cF,0],[()=>ku,0],[()=>Du,0],[()=>Fu,0],[()=>Lu,0],[()=>Sh,0],[()=>Bu,0]]],h4=[4,E,_re,0,[Fe],[0]],g4=[4,E,Ere,8,[Nse,UL],[[()=>P2,0],21]],y4=[4,E,wre,8,[Fe,UL,zL],[0,21,0]],S4=[4,E,xre,{[lh]:1},[Yw,Zw,rv,fv,cv,IL,ov],[[()=>O2,0],[()=>ku,0],[()=>Du,0],[()=>Fu,0],[()=>Lu,0],[()=>Sh,0],[()=>Bu,0]]],_4=[4,E,Ore,0,[Fe,vL,Ww],[0,[()=>Pv,0],()=>gh]],E4=[4,E,one,0,[roe,qse,Ww],[()=>q2,()=>L2,()=>gh]],w4=[4,E,qre,0,[Ene,yne,coe],[()=>iF,()=>ZL,()=>$2]],v4=[4,E,zre,0,[tv],[15]],b4=[4,E,Yre,0,[Fe,tv],[0,15]],x4=[4,E,Jre,0,[tv,Fe,ra,hL,YL,HL],[15,0,[()=>Ev,0],()=>hv,()=>Av,()=>xv]],C4=[4,E,cne,0,[Rn,uh],[21,()=>$u]],A4=[9,E,fZ,{[Xr]:["POST","/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply",200]},()=>tF,()=>rF],T4=[9,E,pee,{[Xr]:["POST","/model/{modelId}/converse",200]},()=>_F,()=>EF],R4=[9,E,YZ,{[Xr]:["POST","/model/{modelId}/converse-stream",200]},()=>bF,()=>xF],I4=[9,E,lee,{[Xr]:["POST","/model/{modelId}/count-tokens",200]},()=>RF,()=>IF],O4=[9,E,bee,{[Xr]:["GET","/async-invoke/{invocationArn}",200]},()=>kF,()=>DF],P4=[9,E,Hte,{[Xr]:["POST","/model/{modelId}/invoke",200]},()=>y2,()=>S2],N4=[9,E,Vte,{[Xr]:["POST","/model/{modelId}/invoke-with-bidirectional-stream",200]},()=>E2,()=>w2],k4=[9,E,Qte,{[Xr]:["POST","/model/{modelId}/invoke-with-response-stream",200]},()=>v2,()=>b2],D4=[9,E,rre,{[Xr]:["GET","/async-invoke",200]},()=>x2,()=>C2],M4=[9,E,Are,{[Xr]:["POST","/async-invoke",200]},()=>U2,()=>B2],Gm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").sc(A4).build(){},zm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").sc(T4).build(){},Vm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").sc(R4).build(){},Wm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","CountTokens",{}).n("BedrockRuntimeClient","CountTokensCommand").sc(I4).build(){},Km=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").sc(O4).build(){},Ym=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").sc(P4).build(){},Xm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions()),tL.getEventStreamPlugin(n),rL.getWebSocketPlugin(n,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").sc(N4).build(){},Qm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").sc(k4).build(){},Iu=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").sc(D4).build(){},Jm=class extends Ze.Command.classBuilder().ep(Kr).m(function(e,r,n,s){return[xr.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").sc(M4).build(){},Xoe={ApplyGuardrailCommand:Gm,ConverseCommand:zm,ConverseStreamCommand:Vm,CountTokensCommand:Wm,GetAsyncInvokeCommand:Km,InvokeModelCommand:Ym,InvokeModelWithBidirectionalStreamCommand:Xm,InvokeModelWithResponseStreamCommand:Qm,ListAsyncInvokesCommand:Iu,StartAsyncInvokeCommand:Jm},Zm=class extends Au{};Ze.createAggregatedClient(Xoe,Zm);var Qoe=Pm.createPaginator(Au,Iu,"nextToken","nextToken","maxResults"),Joe={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},Zoe={SUBMISSION_TIME:"SubmissionTime"},eie={ASCENDING:"Ascending",DESCENDING:"Descending"},tie={JPEG:"jpeg",PNG:"png"},rie={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},nie={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},sie={INPUT:"INPUT",OUTPUT:"OUTPUT"},oie={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},iie={ACCOUNT_ENFORCED:"ACCOUNT_ENFORCED",ORGANIZATION_ENFORCED:"ORGANIZATION_ENFORCED",REQUEST:"REQUEST"},aie={CROSS_ACCOUNT:"CROSS_ACCOUNT",SELF:"SELF"},cie={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"},uie={BLOCKED:"BLOCKED",NONE:"NONE"},die={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},lie={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},fie={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},pie={BLOCKED:"BLOCKED",NONE:"NONE"},mie={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},hie={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},gie={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},yie={BLOCKED:"BLOCKED",NONE:"NONE"},Sie={DENY:"DENY"},_ie={BLOCKED:"BLOCKED",NONE:"NONE"},Eie={PROFANITY:"PROFANITY"},wie={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},vie={AAC:"aac",FLAC:"flac",M4A:"m4a",MKA:"mka",MKV:"mkv",MP3:"mp3",MP4:"mp4",MPEG:"mpeg",MPGA:"mpga",OGG:"ogg",OPUS:"opus",PCM:"pcm",WAV:"wav",WEBM:"webm",X_AAC:"x-aac"},bie={FIVE_MINUTES:"5m",ONE_HOUR:"1h"},xie={DEFAULT:"default"},Cie={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"},Aie={JPEG:"jpeg",PNG:"png"},Tie={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},Rie={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"},Iie={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"},Oie={ERROR:"error",SUCCESS:"success"},Pie={SERVER_TOOL_USE:"server_tool_use"},Nie={ASSISTANT:"assistant",USER:"user"},kie={OPTIMIZED:"optimized",STANDARD:"standard"},Die={DEFAULT:"default",FLEX:"flex",PRIORITY:"priority",RESERVED:"reserved"},Mie={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MALFORMED_MODEL_OUTPUT:"malformed_model_output",MALFORMED_TOOL_USE:"malformed_tool_use",MAX_TOKENS:"max_tokens",MODEL_CONTEXT_WINDOW_EXCEEDED:"model_context_window_exceeded",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},$ie={ASYNC:"async",SYNC:"sync"},Uie={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"};Object.defineProperty(_,"$Command",{enumerable:!0,get:function(){return Ze.Command}});Object.defineProperty(_,"__Client",{enumerable:!0,get:function(){return Ze.Client}});_.AccessDeniedException=Nm;_.AccessDeniedException$=JL;_.AnyToolChoice$=ZL;_.AppliedGuardrailDetails$=eF;_.ApplyGuardrail$=A4;_.ApplyGuardrailCommand=Gm;_.ApplyGuardrailRequest$=tF;_.ApplyGuardrailResponse$=rF;_.AsyncInvokeOutputDataConfig$=Eh;_.AsyncInvokeS3OutputDataConfig$=nF;_.AsyncInvokeStatus=Joe;_.AsyncInvokeSummary$=sF;_.AudioBlock$=oF;_.AudioFormat=vie;_.AudioSource$=J2;_.AutoToolChoice$=iF;_.BedrockRuntime=Zm;_.BedrockRuntimeClient=Au;_.BedrockRuntimeServiceException=ft;_.BedrockRuntimeServiceException$=K2;_.BidirectionalInputPayloadPart$=aF;_.BidirectionalOutputPayloadPart$=cF;_.CacheDetail$=uF;_.CachePointBlock$=gh;_.CachePointType=xie;_.CacheTTL=bie;_.Citation$=dF;_.CitationGeneratedContent$=Z2;_.CitationLocation$=Ov;_.CitationSourceContent$=e4;_.CitationSourceContentDelta$=pF;_.CitationsConfig$=mv;_.CitationsContentBlock$=lF;_.CitationsDelta$=fF;_.ConflictException=$m;_.ConflictException$=mF;_.ContentBlock$=t4;_.ContentBlockDelta$=r4;_.ContentBlockDeltaEvent$=hF;_.ContentBlockStart$=n4;_.ContentBlockStartEvent$=gF;_.ContentBlockStopEvent$=yF;_.ConversationRole=Nie;_.Converse$=T4;_.ConverseCommand=zm;_.ConverseMetrics$=SF;_.ConverseOutput$=s4;_.ConverseRequest$=_F;_.ConverseResponse$=EF;_.ConverseStream$=R4;_.ConverseStreamCommand=Vm;_.ConverseStreamMetadataEvent$=wF;_.ConverseStreamMetrics$=vF;_.ConverseStreamOutput$=o4;_.ConverseStreamRequest$=bF;_.ConverseStreamResponse$=xF;_.ConverseStreamTrace$=CF;_.ConverseTokensRequest$=AF;_.ConverseTrace$=TF;_.CountTokens$=I4;_.CountTokensCommand=Wm;_.CountTokensInput$=i4;_.CountTokensRequest$=RF;_.CountTokensResponse$=IF;_.DocumentBlock$=hv;_.DocumentCharLocation$=OF;_.DocumentChunkLocation$=PF;_.DocumentContentBlock$=a4;_.DocumentFormat=Cie;_.DocumentPageLocation$=NF;_.DocumentSource$=c4;_.ErrorBlock$=yh;_.GetAsyncInvoke$=O4;_.GetAsyncInvokeCommand=Km;_.GetAsyncInvokeRequest$=kF;_.GetAsyncInvokeResponse$=DF;_.GuardrailAction=oie;_.GuardrailAssessment$=gv;_.GuardrailAutomatedReasoningFinding$=u4;_.GuardrailAutomatedReasoningImpossibleFinding$=MF;_.GuardrailAutomatedReasoningInputTextReference$=$F;_.GuardrailAutomatedReasoningInvalidFinding$=UF;_.GuardrailAutomatedReasoningLogicWarning$=Nu;_.GuardrailAutomatedReasoningLogicWarningType=cie;_.GuardrailAutomatedReasoningNoTranslationsFinding$=BF;_.GuardrailAutomatedReasoningPolicyAssessment$=LF;_.GuardrailAutomatedReasoningRule$=FF;_.GuardrailAutomatedReasoningSatisfiableFinding$=jF;_.GuardrailAutomatedReasoningScenario$=Tu;_.GuardrailAutomatedReasoningStatement$=HF;_.GuardrailAutomatedReasoningTooComplexFinding$=qF;_.GuardrailAutomatedReasoningTranslation$=sa;_.GuardrailAutomatedReasoningTranslationAmbiguousFinding$=GF;_.GuardrailAutomatedReasoningTranslationOption$=zF;_.GuardrailAutomatedReasoningValidFinding$=VF;_.GuardrailConfiguration$=WF;_.GuardrailContentBlock$=d4;_.GuardrailContentFilter$=KF;_.GuardrailContentFilterConfidence=die;_.GuardrailContentFilterStrength=lie;_.GuardrailContentFilterType=fie;_.GuardrailContentPolicyAction=uie;_.GuardrailContentPolicyAssessment$=YF;_.GuardrailContentQualifier=rie;_.GuardrailContentSource=sie;_.GuardrailContextualGroundingFilter$=XF;_.GuardrailContextualGroundingFilterType=mie;_.GuardrailContextualGroundingPolicyAction=pie;_.GuardrailContextualGroundingPolicyAssessment$=QF;_.GuardrailConverseContentBlock$=Pv;_.GuardrailConverseContentQualifier=Tie;_.GuardrailConverseImageBlock$=JF;_.GuardrailConverseImageFormat=Aie;_.GuardrailConverseImageSource$=l4;_.GuardrailConverseTextBlock$=ZF;_.GuardrailCoverage$=yv;_.GuardrailCustomWord$=e2;_.GuardrailImageBlock$=t2;_.GuardrailImageCoverage$=r2;_.GuardrailImageFormat=tie;_.GuardrailImageSource$=f4;_.GuardrailInvocationMetrics$=n2;_.GuardrailManagedWord$=s2;_.GuardrailManagedWordType=Eie;_.GuardrailOrigin=iie;_.GuardrailOutputContent$=o2;_.GuardrailOutputScope=nie;_.GuardrailOwnership=aie;_.GuardrailPiiEntityFilter$=i2;_.GuardrailPiiEntityType=gie;_.GuardrailRegexFilter$=a2;_.GuardrailSensitiveInformationPolicyAction=hie;_.GuardrailSensitiveInformationPolicyAssessment$=c2;_.GuardrailStreamConfiguration$=u2;_.GuardrailStreamProcessingMode=$ie;_.GuardrailTextBlock$=d2;_.GuardrailTextCharactersCoverage$=l2;_.GuardrailTopic$=f2;_.GuardrailTopicPolicyAction=yie;_.GuardrailTopicPolicyAssessment$=p2;_.GuardrailTopicType=Sie;_.GuardrailTrace=wie;_.GuardrailTraceAssessment$=Sv;_.GuardrailUsage$=_v;_.GuardrailWordPolicyAction=_ie;_.GuardrailWordPolicyAssessment$=m2;_.ImageBlock$=Ev;_.ImageBlockDelta$=h2;_.ImageBlockStart$=g2;_.ImageFormat=Rie;_.ImageSource$=Nv;_.InferenceConfiguration$=wv;_.InternalServerException=km;_.InternalServerException$=ku;_.InvokeModel$=P4;_.InvokeModelCommand=Ym;_.InvokeModelRequest$=y2;_.InvokeModelResponse$=S2;_.InvokeModelTokensRequest$=_2;_.InvokeModelWithBidirectionalStream$=N4;_.InvokeModelWithBidirectionalStreamCommand=Xm;_.InvokeModelWithBidirectionalStreamInput$=p4;_.InvokeModelWithBidirectionalStreamOutput$=m4;_.InvokeModelWithBidirectionalStreamRequest$=E2;_.InvokeModelWithBidirectionalStreamResponse$=w2;_.InvokeModelWithResponseStream$=k4;_.InvokeModelWithResponseStreamCommand=Qm;_.InvokeModelWithResponseStreamRequest$=v2;_.InvokeModelWithResponseStreamResponse$=b2;_.ListAsyncInvokes$=D4;_.ListAsyncInvokesCommand=Iu;_.ListAsyncInvokesRequest$=x2;_.ListAsyncInvokesResponse$=C2;_.Message$=vv;_.MessageStartEvent$=A2;_.MessageStopEvent$=T2;_.ModelErrorException=Fm;_.ModelErrorException$=R2;_.ModelNotReadyException=jm;_.ModelNotReadyException$=I2;_.ModelStreamErrorException=qm;_.ModelStreamErrorException$=Du;_.ModelTimeoutException=Hm;_.ModelTimeoutException$=Sh;_.PayloadPart$=O2;_.PerformanceConfigLatency=kie;_.PerformanceConfiguration$=Mu;_.PromptRouterTrace$=bv;_.PromptVariableValues$=h4;_.ReasoningContentBlock$=g4;_.ReasoningContentBlockDelta$=y4;_.ReasoningTextBlock$=P2;_.ResourceNotFoundException=Um;_.ResourceNotFoundException$=N2;_.ResponseStream$=S4;_.S3Location$=$u;_.SearchResultBlock$=xv;_.SearchResultContentBlock$=k2;_.SearchResultLocation$=D2;_.ServiceQuotaExceededException=Bm;_.ServiceQuotaExceededException$=M2;_.ServiceTier$=Uu;_.ServiceTierType=Die;_.ServiceUnavailableException=Lm;_.ServiceUnavailableException$=Bu;_.SortAsyncInvocationBy=Zoe;_.SortOrder=eie;_.SpecificToolChoice$=$2;_.StartAsyncInvoke$=M4;_.StartAsyncInvokeCommand=Jm;_.StartAsyncInvokeRequest$=U2;_.StartAsyncInvokeResponse$=B2;_.StopReason=Mie;_.SystemContentBlock$=_4;_.SystemTool$=L2;_.Tag$=F2;_.ThrottlingException=Dm;_.ThrottlingException$=Lu;_.TokenUsage$=Cv;_.Tool$=E4;_.ToolChoice$=w4;_.ToolConfiguration$=_h;_.ToolInputSchema$=v4;_.ToolResultBlock$=j2;_.ToolResultBlockDelta$=b4;_.ToolResultBlockStart$=H2;_.ToolResultContentBlock$=x4;_.ToolResultStatus=Oie;_.ToolSpecification$=q2;_.ToolUseBlock$=G2;_.ToolUseBlockDelta$=z2;_.ToolUseBlockStart$=V2;_.ToolUseType=Pie;_.Trace=Uie;_.ValidationException=Mm;_.ValidationException$=Fu;_.VideoBlock$=Av;_.VideoFormat=Iie;_.VideoSource$=C4;_.WebLocation$=W2;_.paginateListAsyncInvokes=Qoe});var kv=R(or=>{"use strict";c();Object.defineProperty(or,"__esModule",{value:!0});or.MAX_HASHABLE_LENGTH=or.INIT=or.KEY=or.DIGEST_LENGTH=or.BLOCK_SIZE=void 0;or.BLOCK_SIZE=64;or.DIGEST_LENGTH=32;or.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);or.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];or.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1});var U4=R(wh=>{"use strict";c();Object.defineProperty(wh,"__esModule",{value:!0});wh.RawSha256=void 0;var ir=kv(),Bie=function(){function t(){this.state=Int32Array.from(ir.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>ir.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[r++],n--,this.bufferLength===ir.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%ir.BLOCK_SIZE>=ir.BLOCK_SIZE-8){for(var s=this.bufferLength;s<ir.BLOCK_SIZE;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<ir.BLOCK_SIZE-8;s++)r.setUint8(s,0);r.setUint32(ir.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),r.setUint32(ir.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(ir.DIGEST_LENGTH),s=0;s<8;s++)o[s*4]=this.state[s]>>>24&255,o[s*4+1]=this.state[s]>>>16&255,o[s*4+2]=this.state[s]>>>8&255,o[s*4+3]=this.state[s]>>>0&255;return o},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,n=e.state,s=n[0],o=n[1],i=n[2],a=n[3],u=n[4],d=n[5],f=n[6],l=n[7],g=0;g<ir.BLOCK_SIZE;g++){if(g<16)this.temp[g]=(r[g*4]&255)<<24|(r[g*4+1]&255)<<16|(r[g*4+2]&255)<<8|r[g*4+3]&255;else{var h=this.temp[g-2],y=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[g-15];var x=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[g]=(y+this.temp[g-7]|0)+(x+this.temp[g-16]|0)}var T=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&f)|0)+(l+(ir.KEY[g]+this.temp[g]|0)|0)|0,O=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&i^o&i)|0;l=f,f=d,d=u,u=a+T|0,a=i,i=o,o=s,s=T+O|0}n[0]+=s,n[1]+=o,n[2]+=i,n[3]+=a,n[4]+=u,n[5]+=d,n[6]+=f,n[7]+=l},t}();wh.RawSha256=Bie});var L4=R(xh=>{"use strict";c();Object.defineProperty(xh,"__esModule",{value:!0});xh.Sha256=void 0;var B4=(un(),Y(cn)),bh=kv(),vh=U4(),Dv=Ll(),Lie=function(){function t(e){this.secret=e,this.hash=new vh.RawSha256,this.reset()}return t.prototype.update=function(e){if(!((0,Dv.isEmptyData)(e)||this.error))try{this.hash.update((0,Dv.convertToBuffer)(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return B4.__awaiter(this,void 0,void 0,function(){return B4.__generator(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new vh.RawSha256,this.secret){this.outer=new vh.RawSha256;var e=Fie(this.secret),r=new Uint8Array(bh.BLOCK_SIZE);r.set(e);for(var n=0;n<bh.BLOCK_SIZE;n++)e[n]^=54,r[n]^=92;this.hash.update(e),this.outer.update(r);for(var n=0;n<e.byteLength;n++)e[n]=0}},t}();xh.Sha256=Lie;function Fie(t){var e=(0,Dv.convertToBuffer)(t);if(e.byteLength>bh.BLOCK_SIZE){var r=new vh.RawSha256;r.update(e),e=r.digest()}var n=new Uint8Array(bh.BLOCK_SIZE);return n.set(e),n}});var F4=R(Mv=>{"use strict";c();Object.defineProperty(Mv,"__esModule",{value:!0});var jie=(un(),Y(cn));jie.__exportStar(L4(),Mv)});c();var Nh=v($4(),1),ej=v(rl(),1),tj=v(ie(),1),rj=v(F4(),1),nj=v(_w(),1);c();c();var Ct={};Be(Ct,{BRAND:()=>pae,DIRTY:()=>vo,EMPTY_PATH:()=>zie,INVALID:()=>W,NEVER:()=>Qae,OK:()=>pt,ParseStatus:()=>et,Schema:()=>oe,ZodAny:()=>Ms,ZodArray:()=>Nn,ZodBigInt:()=>xo,ZodBoolean:()=>Co,ZodBranded:()=>Gu,ZodCatch:()=>$o,ZodDate:()=>Ao,ZodDefault:()=>Mo,ZodDiscriminatedUnion:()=>Rh,ZodEffects:()=>ur,ZodEnum:()=>ko,ZodError:()=>Nt,ZodFirstPartyTypeKind:()=>K,ZodFunction:()=>Oh,ZodIntersection:()=>Oo,ZodIssueCode:()=>D,ZodLazy:()=>Po,ZodLiteral:()=>No,ZodMap:()=>da,ZodNaN:()=>fa,ZodNativeEnum:()=>Do,ZodNever:()=>Ar,ZodNull:()=>Ro,ZodNullable:()=>Zr,ZodNumber:()=>bo,ZodObject:()=>kt,ZodOptional:()=>ar,ZodParsedType:()=>F,ZodPipeline:()=>zu,ZodPromise:()=>$s,ZodReadonly:()=>Uo,ZodRecord:()=>Ih,ZodSchema:()=>oe,ZodSet:()=>la,ZodString:()=>Ds,ZodSymbol:()=>ca,ZodTransformer:()=>ur,ZodTuple:()=>Jr,ZodType:()=>oe,ZodUndefined:()=>To,ZodUnion:()=>Io,ZodUnknown:()=>Pn,ZodVoid:()=>ua,addIssueToContext:()=>$,any:()=>vae,array:()=>Aae,bigint:()=>yae,boolean:()=>J4,coerce:()=>Xae,custom:()=>Y4,date:()=>Sae,datetimeRegex:()=>W4,defaultErrorMap:()=>In,discriminatedUnion:()=>Oae,effect:()=>Hae,enum:()=>Lae,function:()=>$ae,getErrorMap:()=>oa,getParsedType:()=>Qr,instanceof:()=>hae,intersection:()=>Pae,isAborted:()=>Ch,isAsync:()=>ia,isDirty:()=>Ah,isValid:()=>ks,late:()=>mae,lazy:()=>Uae,literal:()=>Bae,makeIssue:()=>ju,map:()=>Dae,nan:()=>gae,nativeEnum:()=>Fae,never:()=>xae,null:()=>wae,nullable:()=>Gae,number:()=>Q4,object:()=>Tae,objectUtil:()=>$v,oboolean:()=>Yae,onumber:()=>Kae,optional:()=>qae,ostring:()=>Wae,pipeline:()=>Vae,preprocess:()=>zae,promise:()=>jae,quotelessJson:()=>Hie,record:()=>kae,set:()=>Mae,setErrorMap:()=>Gie,strictObject:()=>Rae,string:()=>X4,symbol:()=>_ae,transformer:()=>Hae,tuple:()=>Nae,undefined:()=>Eae,union:()=>Iae,unknown:()=>bae,util:()=>ue,void:()=>Cae});c();c();c();c();c();var ue;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let o={};for(let i of s)o[i]=i;return o},t.getValidEnumValues=s=>{let o=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),i={};for(let a of o)i[a]=s[a];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let o=[];for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&o.push(i);return o},t.find=(s,o)=>{for(let i of s)if(o(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,o=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(ue||(ue={}));var $v;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})($v||($v={}));var F=ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qr=t=>{switch(typeof t){case"undefined":return F.undefined;case"string":return F.string;case"number":return Number.isNaN(t)?F.nan:F.number;case"boolean":return F.boolean;case"function":return F.function;case"bigint":return F.bigint;case"symbol":return F.symbol;case"object":return Array.isArray(t)?F.array:t===null?F.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?F.promise:typeof Map<"u"&&t instanceof Map?F.map:typeof Set<"u"&&t instanceof Set?F.set:typeof Date<"u"&&t instanceof Date?F.date:F.object;default:return F.unknown}};var D=ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Hie=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Nt=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},s=o=>{for(let i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let a=n,u=0;for(;u<i.path.length;){let d=i.path[u];u===i.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(r(i))):a[d]=a[d]||{_errors:[]},a=a[d],u++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Nt.create=t=>new Nt(t);var qie=(t,e)=>{let r;switch(t.code){case D.invalid_type:t.received===F.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case D.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ue.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:r=`Unrecognized key(s) in object: ${ue.joinValues(t.keys,", ")}`;break;case D.invalid_union:r="Invalid input";break;case D.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ue.joinValues(t.options)}`;break;case D.invalid_enum_value:r=`Invalid enum value. Expected ${ue.joinValues(t.options)}, received '${t.received}'`;break;case D.invalid_arguments:r="Invalid function arguments";break;case D.invalid_return_type:r="Invalid function return type";break;case D.invalid_date:r="Invalid date";break;case D.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ue.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case D.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case D.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case D.custom:r="Invalid input";break;case D.invalid_intersection_types:r="Intersection results could not be merged";break;case D.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case D.not_finite:r="Number must be finite";break;default:r=e.defaultError,ue.assertNever(t)}return{message:r}},In=qie;var j4=In;function Gie(t){j4=t}function oa(){return j4}c();var ju=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,o=[...r,...s.path||[]],i={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="",u=n.filter(d=>!!d).slice().reverse();for(let d of u)a=d(i,{data:e,defaultError:a}).message;return{...s,path:o,message:a}},zie=[];function $(t,e){let r=oa(),n=ju({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===In?void 0:In].filter(s=>!!s)});t.common.issues.push(n)}var et=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return W;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let o=await s.key,i=await s.value;n.push({key:o,value:i})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:o,value:i}=s;if(o.status==="aborted"||i.status==="aborted")return W;o.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[o.value]=i.value)}return{status:e.value,value:n}}},W=Object.freeze({status:"aborted"}),vo=t=>({status:"dirty",value:t}),pt=t=>({status:"valid",value:t}),Ch=t=>t.status==="aborted",Ah=t=>t.status==="dirty",ks=t=>t.status==="valid",ia=t=>typeof Promise<"u"&&t instanceof Promise;c();c();c();var H;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(H||(H={}));var Th=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},G4=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},Hu,qu,cr=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},H4=(t,e)=>{if(ks(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Nt(t.common.issues);return this._error=r,this._error}}};function re(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,a)=>{let{message:u}=t;return i.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:u??n??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:u??r??a.defaultError}},description:s}}var oe=class{get description(){return this._def.description}_getType(e){return Qr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Qr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new et,ctx:{common:e.parent.common,data:e.data,parsedType:Qr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(ia(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qr(e)},s=this._parseSync({data:e,path:n.path,parent:n});return H4(n,s)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qr(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return ks(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>ks(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qr(e)},s=this._parse({data:e,path:n.path,parent:n}),o=await(ia(s)?s:Promise.resolve(s));return H4(n,o)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,o)=>{let i=e(s),a=()=>o.addIssue({code:D.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ur({schema:this,typeName:K.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ar.create(this,this._def)}nullable(){return Zr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Nn.create(this)}promise(){return $s.create(this,this._def)}or(e){return Io.create([this,e],this._def)}and(e){return Oo.create(this,e,this._def)}transform(e){return new ur({...re(this._def),schema:this,typeName:K.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Mo({...re(this._def),innerType:this,defaultValue:r,typeName:K.ZodDefault})}brand(){return new Gu({typeName:K.ZodBranded,type:this,...re(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new $o({...re(this._def),innerType:this,catchValue:r,typeName:K.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return zu.create(this,e)}readonly(){return Uo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Vie=/^c[^\s-]{8,}$/i,Wie=/^[0-9a-z]+$/,Kie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Yie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Xie=/^[a-z0-9_-]{21}$/i,Qie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Jie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eae="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Uv,tae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,sae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oae=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,z4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",aae=new RegExp(`^${z4}$`);function V4(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function cae(t){return new RegExp(`^${V4(t)}$`)}function W4(t){let e=`${z4}T${V4(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function uae(t,e){return!!((e==="v4"||!e)&&tae.test(t)||(e==="v6"||!e)&&nae.test(t))}function dae(t,e){if(!Qie.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function lae(t,e){return!!((e==="v4"||!e)&&rae.test(t)||(e==="v6"||!e)&&sae.test(t))}var Ds=class t extends oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==F.string){let o=this._getOrReturnCtx(e);return $(o,{code:D.invalid_type,expected:F.string,received:o.parsedType}),W}let n=new et,s;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:D.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:D.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let i=e.data.length>o.value,a=e.data.length<o.value;(i||a)&&(s=this._getOrReturnCtx(e,s),i?$(s,{code:D.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&$(s,{code:D.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Zie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"email",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Uv||(Uv=new RegExp(eae,"u")),Uv.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"emoji",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Yie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"uuid",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Xie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"nanoid",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Vie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cuid",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")Wie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cuid2",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Kie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"ulid",code:D.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),$(s,{validation:"url",code:D.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"regex",code:D.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),$(s,{code:D.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),$(s,{code:D.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),$(s,{code:D.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?W4(o).test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:D.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?aae.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:D.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?cae(o).test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{code:D.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Jie.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"duration",code:D.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?uae(e.data,o.version)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"ip",code:D.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?dae(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"jwt",code:D.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?lae(e.data,o.version)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"cidr",code:D.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?oae.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"base64",code:D.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?iae.test(e.data)||(s=this._getOrReturnCtx(e,s),$(s,{validation:"base64url",code:D.invalid_string,message:o.message}),n.dirty()):ue.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:D.invalid_string,...H.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...H.errToObj(e)})}url(e){return this._addCheck({kind:"url",...H.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...H.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...H.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...H.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...H.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...H.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...H.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...H.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...H.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...H.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...H.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...H.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...H.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...H.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...H.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...H.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...H.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...H.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...H.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...H.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...H.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...H.errToObj(r)})}nonempty(e){return this.min(1,H.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ds.create=t=>new Ds({checks:[],typeName:K.ZodString,coerce:t?.coerce??!1,...re(t)});function fae(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,o=Number.parseInt(t.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return o%i/10**s}var bo=class t extends oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==F.number){let o=this._getOrReturnCtx(e);return $(o,{code:D.invalid_type,expected:F.number,received:o.parsedType}),W}let n,s=new et;for(let o of this._def.checks)o.kind==="int"?ue.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),$(n,{code:D.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:D.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:D.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?fae(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),$(n,{code:D.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),$(n,{code:D.not_finite,message:o.message}),s.dirty()):ue.assertNever(o);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,H.toString(r))}gt(e,r){return this.setLimit("min",e,!1,H.toString(r))}lte(e,r){return this.setLimit("max",e,!0,H.toString(r))}lt(e,r){return this.setLimit("max",e,!1,H.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:H.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:H.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:H.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:H.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:H.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:H.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:H.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:H.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:H.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:H.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ue.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};bo.create=t=>new bo({checks:[],typeName:K.ZodNumber,coerce:t?.coerce||!1,...re(t)});var xo=class t extends oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==F.bigint)return this._getInvalidInput(e);let n,s=new et;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:D.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:D.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),$(n,{code:D.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):ue.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return $(r,{code:D.invalid_type,expected:F.bigint,received:r.parsedType}),W}gte(e,r){return this.setLimit("min",e,!0,H.toString(r))}gt(e,r){return this.setLimit("min",e,!1,H.toString(r))}lte(e,r){return this.setLimit("max",e,!0,H.toString(r))}lt(e,r){return this.setLimit("max",e,!1,H.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:H.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:H.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:H.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:H.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:H.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:H.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};xo.create=t=>new xo({checks:[],typeName:K.ZodBigInt,coerce:t?.coerce??!1,...re(t)});var Co=class extends oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==F.boolean){let n=this._getOrReturnCtx(e);return $(n,{code:D.invalid_type,expected:F.boolean,received:n.parsedType}),W}return pt(e.data)}};Co.create=t=>new Co({typeName:K.ZodBoolean,coerce:t?.coerce||!1,...re(t)});var Ao=class t extends oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==F.date){let o=this._getOrReturnCtx(e);return $(o,{code:D.invalid_type,expected:F.date,received:o.parsedType}),W}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return $(o,{code:D.invalid_date}),W}let n=new et,s;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:D.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),$(s,{code:D.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):ue.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:H.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:H.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Ao.create=t=>new Ao({checks:[],coerce:t?.coerce||!1,typeName:K.ZodDate,...re(t)});var ca=class extends oe{_parse(e){if(this._getType(e)!==F.symbol){let n=this._getOrReturnCtx(e);return $(n,{code:D.invalid_type,expected:F.symbol,received:n.parsedType}),W}return pt(e.data)}};ca.create=t=>new ca({typeName:K.ZodSymbol,...re(t)});var To=class extends oe{_parse(e){if(this._getType(e)!==F.undefined){let n=this._getOrReturnCtx(e);return $(n,{code:D.invalid_type,expected:F.undefined,received:n.parsedType}),W}return pt(e.data)}};To.create=t=>new To({typeName:K.ZodUndefined,...re(t)});var Ro=class extends oe{_parse(e){if(this._getType(e)!==F.null){let n=this._getOrReturnCtx(e);return $(n,{code:D.invalid_type,expected:F.null,received:n.parsedType}),W}return pt(e.data)}};Ro.create=t=>new Ro({typeName:K.ZodNull,...re(t)});var Ms=class extends oe{constructor(){super(...arguments),this._any=!0}_parse(e){return pt(e.data)}};Ms.create=t=>new Ms({typeName:K.ZodAny,...re(t)});var Pn=class extends oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return pt(e.data)}};Pn.create=t=>new Pn({typeName:K.ZodUnknown,...re(t)});var Ar=class extends oe{_parse(e){let r=this._getOrReturnCtx(e);return $(r,{code:D.invalid_type,expected:F.never,received:r.parsedType}),W}};Ar.create=t=>new Ar({typeName:K.ZodNever,...re(t)});var ua=class extends oe{_parse(e){if(this._getType(e)!==F.undefined){let n=this._getOrReturnCtx(e);return $(n,{code:D.invalid_type,expected:F.void,received:n.parsedType}),W}return pt(e.data)}};ua.create=t=>new ua({typeName:K.ZodVoid,...re(t)});var Nn=class t extends oe{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==F.array)return $(r,{code:D.invalid_type,expected:F.array,received:r.parsedType}),W;if(s.exactLength!==null){let i=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(i||a)&&($(r,{code:i?D.too_big:D.too_small,minimum:a?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&($(r,{code:D.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&($(r,{code:D.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((i,a)=>s.type._parseAsync(new cr(r,i,r.path,a)))).then(i=>et.mergeArray(n,i));let o=[...r.data].map((i,a)=>s.type._parseSync(new cr(r,i,r.path,a)));return et.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:H.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:H.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:H.toString(r)}})}nonempty(e){return this.min(1,e)}};Nn.create=(t,e)=>new Nn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:K.ZodArray,...re(e)});function aa(t){if(t instanceof kt){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=ar.create(aa(n))}return new kt({...t._def,shape:()=>e})}else return t instanceof Nn?new Nn({...t._def,type:aa(t.element)}):t instanceof ar?ar.create(aa(t.unwrap())):t instanceof Zr?Zr.create(aa(t.unwrap())):t instanceof Jr?Jr.create(t.items.map(e=>aa(e))):t}var kt=class t extends oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=ue.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==F.object){let d=this._getOrReturnCtx(e);return $(d,{code:D.invalid_type,expected:F.object,received:d.parsedType}),W}let{status:n,ctx:s}=this._processInputParams(e),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ar&&this._def.unknownKeys==="strip"))for(let d in s.data)i.includes(d)||a.push(d);let u=[];for(let d of i){let f=o[d],l=s.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new cr(s,l,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ar){let d=this._def.unknownKeys;if(d==="passthrough")for(let f of a)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")a.length>0&&($(s,{code:D.unrecognized_keys,keys:a}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let f of a){let l=s.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new cr(s,l,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let d=[];for(let f of u){let l=await f.key,g=await f.value;d.push({key:l,value:g,alwaysSet:f.alwaysSet})}return d}).then(d=>et.mergeObjectSync(n,d)):et.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return H.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:H.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:K.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of ue.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of ue.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return aa(this)}partial(e){let r={};for(let n of ue.objectKeys(this.shape)){let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of ue.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof ar;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return K4(ue.objectKeys(this.shape))}};kt.create=(t,e)=>new kt({shape:()=>t,unknownKeys:"strip",catchall:Ar.create(),typeName:K.ZodObject,...re(e)});kt.strictCreate=(t,e)=>new kt({shape:()=>t,unknownKeys:"strict",catchall:Ar.create(),typeName:K.ZodObject,...re(e)});kt.lazycreate=(t,e)=>new kt({shape:t,unknownKeys:"strip",catchall:Ar.create(),typeName:K.ZodObject,...re(e)});var Io=class extends oe{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let i=o.map(a=>new Nt(a.ctx.common.issues));return $(r,{code:D.invalid_union,unionErrors:i}),W}if(r.common.async)return Promise.all(n.map(async o=>{let i={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(s);{let o,i=[];for(let u of n){let d={...r,common:{...r.common,issues:[]},parent:null},f=u._parseSync({data:r.data,path:r.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(u=>new Nt(u));return $(r,{code:D.invalid_union,unionErrors:a}),W}}get options(){return this._def.options}};Io.create=(t,e)=>new Io({options:t,typeName:K.ZodUnion,...re(e)});var On=t=>t instanceof Po?On(t.schema):t instanceof ur?On(t.innerType()):t instanceof No?[t.value]:t instanceof ko?t.options:t instanceof Do?ue.objectValues(t.enum):t instanceof Mo?On(t._def.innerType):t instanceof To?[void 0]:t instanceof Ro?[null]:t instanceof ar?[void 0,...On(t.unwrap())]:t instanceof Zr?[null,...On(t.unwrap())]:t instanceof Gu||t instanceof Uo?On(t.unwrap()):t instanceof $o?On(t._def.innerType):[],Rh=class t extends oe{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.object)return $(r,{code:D.invalid_type,expected:F.object,received:r.parsedType}),W;let n=this.discriminator,s=r.data[n],o=this.optionsMap.get(s);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):($(r,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),W)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let o of r){let i=On(o.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of i){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,o)}}return new t({typeName:K.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...re(n)})}};function Bv(t,e){let r=Qr(t),n=Qr(e);if(t===e)return{valid:!0,data:t};if(r===F.object&&n===F.object){let s=ue.objectKeys(e),o=ue.objectKeys(t).filter(a=>s.indexOf(a)!==-1),i={...t,...e};for(let a of o){let u=Bv(t[a],e[a]);if(!u.valid)return{valid:!1};i[a]=u.data}return{valid:!0,data:i}}else if(r===F.array&&n===F.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let o=0;o<t.length;o++){let i=t[o],a=e[o],u=Bv(i,a);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return r===F.date&&n===F.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Oo=class extends oe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(o,i)=>{if(Ch(o)||Ch(i))return W;let a=Bv(o.value,i.value);return a.valid?((Ah(o)||Ah(i))&&r.dirty(),{status:r.value,value:a.data}):($(n,{code:D.invalid_intersection_types}),W)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,i])=>s(o,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Oo.create=(t,e,r)=>new Oo({left:t,right:e,typeName:K.ZodIntersection,...re(r)});var Jr=class t extends oe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.array)return $(n,{code:D.invalid_type,expected:F.array,received:n.parsedType}),W;if(n.data.length<this._def.items.length)return $(n,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),W;!this._def.rest&&n.data.length>this._def.items.length&&($(n,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((i,a)=>{let u=this._def.items[a]||this._def.rest;return u?u._parse(new cr(n,i,n.path,a)):null}).filter(i=>!!i);return n.common.async?Promise.all(o).then(i=>et.mergeArray(r,i)):et.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Jr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jr({items:t,typeName:K.ZodTuple,rest:null,...re(e)})};var Ih=class t extends oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.object)return $(n,{code:D.invalid_type,expected:F.object,received:n.parsedType}),W;let s=[],o=this._def.keyType,i=this._def.valueType;for(let a in n.data)s.push({key:o._parse(new cr(n,a,n.path,a)),value:i._parse(new cr(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?et.mergeObjectAsync(r,s):et.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof oe?new t({keyType:e,valueType:r,typeName:K.ZodRecord,...re(n)}):new t({keyType:Ds.create(),valueType:e,typeName:K.ZodRecord,...re(r)})}},da=class extends oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.map)return $(n,{code:D.invalid_type,expected:F.map,received:n.parsedType}),W;let s=this._def.keyType,o=this._def.valueType,i=[...n.data.entries()].map(([a,u],d)=>({key:s._parse(new cr(n,a,n.path,[d,"key"])),value:o._parse(new cr(n,u,n.path,[d,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let u of i){let d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return W;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),a.set(d.value,f.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let u of i){let d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return W;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),a.set(d.value,f.value)}return{status:r.value,value:a}}}};da.create=(t,e,r)=>new da({valueType:e,keyType:t,typeName:K.ZodMap,...re(r)});var la=class t extends oe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.set)return $(n,{code:D.invalid_type,expected:F.set,received:n.parsedType}),W;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&($(n,{code:D.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&($(n,{code:D.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let o=this._def.valueType;function i(u){let d=new Set;for(let f of u){if(f.status==="aborted")return W;f.status==="dirty"&&r.dirty(),d.add(f.value)}return{status:r.value,value:d}}let a=[...n.data.values()].map((u,d)=>o._parse(new cr(n,u,n.path,d)));return n.common.async?Promise.all(a).then(u=>i(u)):i(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:H.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:H.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};la.create=(t,e)=>new la({valueType:t,minSize:null,maxSize:null,typeName:K.ZodSet,...re(e)});var Oh=class t extends oe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.function)return $(r,{code:D.invalid_type,expected:F.function,received:r.parsedType}),W;function n(a,u){return ju({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,oa(),In].filter(d=>!!d),issueData:{code:D.invalid_arguments,argumentsError:u}})}function s(a,u){return ju({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,oa(),In].filter(d=>!!d),issueData:{code:D.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof $s){let a=this;return pt(async function(...u){let d=new Nt([]),f=await a._def.args.parseAsync(u,o).catch(h=>{throw d.addIssue(n(u,h)),d}),l=await Reflect.apply(i,this,f);return await a._def.returns._def.type.parseAsync(l,o).catch(h=>{throw d.addIssue(s(l,h)),d})})}else{let a=this;return pt(function(...u){let d=a._def.args.safeParse(u,o);if(!d.success)throw new Nt([n(u,d.error)]);let f=Reflect.apply(i,this,d.data),l=a._def.returns.safeParse(f,o);if(!l.success)throw new Nt([s(f,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Jr.create(e).rest(Pn.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Jr.create([]).rest(Pn.create()),returns:r||Pn.create(),typeName:K.ZodFunction,...re(n)})}},Po=class extends oe{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Po.create=(t,e)=>new Po({getter:t,typeName:K.ZodLazy,...re(e)});var No=class extends oe{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return $(r,{received:r.data,code:D.invalid_literal,expected:this._def.value}),W}return{status:"valid",value:e.data}}get value(){return this._def.value}};No.create=(t,e)=>new No({value:t,typeName:K.ZodLiteral,...re(e)});function K4(t,e){return new ko({values:t,typeName:K.ZodEnum,...re(e)})}var ko=class t extends oe{constructor(){super(...arguments),Hu.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return $(r,{expected:ue.joinValues(n),received:r.parsedType,code:D.invalid_type}),W}if(Th(this,Hu,"f")||G4(this,Hu,new Set(this._def.values),"f"),!Th(this,Hu,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return $(r,{received:r.data,code:D.invalid_enum_value,options:n}),W}return pt(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Hu=new WeakMap;ko.create=K4;var Do=class extends oe{constructor(){super(...arguments),qu.set(this,void 0)}_parse(e){let r=ue.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==F.string&&n.parsedType!==F.number){let s=ue.objectValues(r);return $(n,{expected:ue.joinValues(s),received:n.parsedType,code:D.invalid_type}),W}if(Th(this,qu,"f")||G4(this,qu,new Set(ue.getValidEnumValues(this._def.values)),"f"),!Th(this,qu,"f").has(e.data)){let s=ue.objectValues(r);return $(n,{received:n.data,code:D.invalid_enum_value,options:s}),W}return pt(e.data)}get enum(){return this._def.values}};qu=new WeakMap;Do.create=(t,e)=>new Do({values:t,typeName:K.ZodNativeEnum,...re(e)});var $s=class extends oe{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.promise&&r.common.async===!1)return $(r,{code:D.invalid_type,expected:F.promise,received:r.parsedType}),W;let n=r.parsedType===F.promise?r.data:Promise.resolve(r.data);return pt(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};$s.create=(t,e)=>new $s({type:t,typeName:K.ZodPromise,...re(e)});var ur=class extends oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===K.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:i=>{$(n,i),i.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){let i=s.transform(n.data,o);if(n.common.async)return Promise.resolve(i).then(async a=>{if(r.value==="aborted")return W;let u=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return u.status==="aborted"?W:u.status==="dirty"?vo(u.value):r.value==="dirty"?vo(u.value):u});{if(r.value==="aborted")return W;let a=this._def.schema._parseSync({data:i,path:n.path,parent:n});return a.status==="aborted"?W:a.status==="dirty"?vo(a.value):r.value==="dirty"?vo(a.value):a}}if(s.type==="refinement"){let i=a=>{let u=s.refinement(a,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?W:(a.status==="dirty"&&r.dirty(),i(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?W:(a.status==="dirty"&&r.dirty(),i(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ks(i))return i;let a=s.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>ks(i)?Promise.resolve(s.transform(i.value,o)).then(a=>({status:r.value,value:a})):i);ue.assertNever(s)}};ur.create=(t,e,r)=>new ur({schema:t,typeName:K.ZodEffects,effect:e,...re(r)});ur.createWithPreprocess=(t,e,r)=>new ur({schema:e,effect:{type:"preprocess",transform:t},typeName:K.ZodEffects,...re(r)});var ar=class extends oe{_parse(e){return this._getType(e)===F.undefined?pt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ar.create=(t,e)=>new ar({innerType:t,typeName:K.ZodOptional,...re(e)});var Zr=class extends oe{_parse(e){return this._getType(e)===F.null?pt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Zr.create=(t,e)=>new Zr({innerType:t,typeName:K.ZodNullable,...re(e)});var Mo=class extends oe{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===F.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Mo.create=(t,e)=>new Mo({innerType:t,typeName:K.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...re(e)});var $o=class extends oe{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ia(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Nt(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Nt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};$o.create=(t,e)=>new $o({innerType:t,typeName:K.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...re(e)});var fa=class extends oe{_parse(e){if(this._getType(e)!==F.nan){let n=this._getOrReturnCtx(e);return $(n,{code:D.invalid_type,expected:F.nan,received:n.parsedType}),W}return{status:"valid",value:e.data}}};fa.create=t=>new fa({typeName:K.ZodNaN,...re(t)});var pae=Symbol("zod_brand"),Gu=class extends oe{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},zu=class t extends oe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?W:o.status==="dirty"?(r.dirty(),vo(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?W:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:K.ZodPipeline})}},Uo=class extends oe{_parse(e){let r=this._def.innerType._parse(e),n=s=>(ks(s)&&(s.value=Object.freeze(s.value)),s);return ia(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};Uo.create=(t,e)=>new Uo({innerType:t,typeName:K.ZodReadonly,...re(e)});function q4(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Y4(t,e={},r){return t?Ms.create().superRefine((n,s)=>{let o=t(n);if(o instanceof Promise)return o.then(i=>{if(!i){let a=q4(e,n),u=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:u})}});if(!o){let i=q4(e,n),a=i.fatal??r??!0;s.addIssue({code:"custom",...i,fatal:a})}}):Ms.create()}var mae={object:kt.lazycreate},K;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(K||(K={}));var hae=(t,e={message:`Input not instance of ${t.name}`})=>Y4(r=>r instanceof t,e),X4=Ds.create,Q4=bo.create,gae=fa.create,yae=xo.create,J4=Co.create,Sae=Ao.create,_ae=ca.create,Eae=To.create,wae=Ro.create,vae=Ms.create,bae=Pn.create,xae=Ar.create,Cae=ua.create,Aae=Nn.create,Tae=kt.create,Rae=kt.strictCreate,Iae=Io.create,Oae=Rh.create,Pae=Oo.create,Nae=Jr.create,kae=Ih.create,Dae=da.create,Mae=la.create,$ae=Oh.create,Uae=Po.create,Bae=No.create,Lae=ko.create,Fae=Do.create,jae=$s.create,Hae=ur.create,qae=ar.create,Gae=Zr.create,zae=ur.createWithPreprocess,Vae=zu.create,Wae=()=>X4().optional(),Kae=()=>Q4().optional(),Yae=()=>J4().optional(),Xae={string:t=>Ds.create({...t,coerce:!0}),number:t=>bo.create({...t,coerce:!0}),boolean:t=>Co.create({...t,coerce:!0}),bigint:t=>xo.create({...t,coerce:!0}),date:t=>Ao.create({...t,coerce:!0})};var Qae=W;var Vu=t=>process.env[t],Jae=()=>({endpoint:Vu("AMPLIFY_DATA_GRAPHQL_ENDPOINT")||Vu("AWS_APPSYNC_GRAPHQL_ENDPOINT"),region:Vu("GRAPHQL_REGION")||Vu("AWS_REGION")||"us-east-1"}),Zae=Ct.object({targetPortfolio:Ct.array(Ct.object({ticker:Ct.string(),weight:Ct.number(),reason:Ct.string()})),explanation:Ct.object({summary:Ct.string(),bullets:Ct.array(Ct.string()),risksToWatch:Ct.array(Ct.string())})});async function Ph(t,e={}){let{endpoint:r,region:n}=Jae();if(!r)throw new Error("AppSync Endpoint missing");let s=new URL(r),o=JSON.stringify({query:t,variables:e}),i=new ej.SignatureV4({credentials:(0,nj.defaultProvider)(),region:n,service:"appsync",sha256:rj.Sha256}),a=new tj.HttpRequest({method:"POST",hostname:s.hostname,path:s.pathname,body:o,headers:{"Content-Type":"application/json",host:s.hostname}}),u=await i.sign(a),f=await(await fetch(r,{method:u.method,headers:u.headers,body:u.body})).json();if(f.errors)throw new Error(f.errors[0].message);return f.data}async function Z4(t,e,r={}){try{await Ph("mutation L($i: CreateAuditLogInput!) { createAuditLog(input: $i) { id } }",{i:{action:t,details:e,metadata:JSON.stringify(r)}})}catch(n){console.error("[ORC] Audit Fail:",n)}}var pPe=async t=>{console.log("[ORC] Pulse");let e=t.arguments?.correlationId,r=new Nh.BedrockRuntimeClient({region:Vu("AWS_REGION")||"us-east-1"});try{let o=(await Ph("query List { listHoldings { items { ticker shares } } }")).listHoldings.items,u=(await Ph("query List { listMarketFundamentals(limit: 60) { items { ticker dividendYield payoutRatio debtToEquity } } }")).listMarketFundamentals.items,d=`You are the Moolah Optimizer. 
Context: 
Holdings: ${JSON.stringify(o)}
Market Fundamentals: ${JSON.stringify(u)}

Task: Suggest a rebalanced portfolio to optimize for dividends and risk.
Output must be ONLY a valid JSON object matching this schema:
{
  "targetPortfolio": [{"ticker": "string", "weight": number, "reason": "string"}],
  "explanation": {"summary": "string", "bullets": ["string"], "risksToWatch": ["string"]}
}

Return ONLY raw JSON. No conversational text or markdown blocks.`,f=await r.send(new Nh.InvokeModelCommand({modelId:"anthropic.claude-3-haiku-20240307-v1:0",contentType:"application/json",accept:"application/json",body:JSON.stringify({anthropic_version:"bedrock-2023-05-31",max_tokens:2e3,messages:[{role:"user",content:d}]})})),g=JSON.parse(new TextDecoder().decode(f.body)).content[0].text.trim();console.log("[ORC] Raw AI Response snippet:",g.substring(0,100));let h=g.match(/\{[\s\S]*\}/),y=h?h[0]:g,x;try{x=Zae.parse(JSON.parse(y))}catch(N){throw console.error("[ORC] JSON Parse Fail. Content:",y),new Error(`AI returned invalid JSON: ${N.message}`)}let O=await Ph("mutation C($i: CreateRecommendationInput!) { createRecommendation(input: $i) { id } }",{i:{status:"COMPLETED",packetJson:JSON.stringify({asOf:new Date().toISOString().split("T")[0],targetPortfolio:x.targetPortfolio}),explanationJson:JSON.stringify(x.explanation)}});return await Z4("AI_OPTIM_SUCCESS",`Ready: ${x.targetPortfolio.length} tickers.`,{correlationId:e}),JSON.stringify({status:"SUCCESS",id:O.createRecommendation.id,explanation:x.explanation})}catch(n){console.error("[ORC] Fatal:",n);let s=t?.arguments?.correlationId;return await Z4("AI_OPTIM_FAILED",n.message,{correlationId:s}),JSON.stringify({status:"FAILED",error:n.message})}};export{pPe as handler};
//# sourceMappingURL=index.mjs.map
